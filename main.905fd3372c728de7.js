(self.webpackChunkangular_courses=self.webpackChunkangular_courses||[]).push([[179],{707:(la,Yo,fo)=>{"use strict";function Ge(n){return"function"==typeof n}function ho(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const pe=ho(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function J(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class P{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(Ge(r))try{r()}catch(o){t=o instanceof pe?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{z(o)}catch(s){t=t??[],s instanceof pe?t=[...t,...s.errors]:t.push(s)}}if(t)throw new pe(t)}}add(t){var e;if(t&&t!==this)if(this.closed)z(t);else{if(t instanceof P){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&J(e,t)}remove(t){const{_finalizers:e}=this;e&&J(e,t),t instanceof P&&t._removeParent(this)}}P.EMPTY=(()=>{const n=new P;return n.closed=!0,n})();const G=P.EMPTY;function B(n){return n instanceof P||n&&"closed"in n&&Ge(n.remove)&&Ge(n.add)&&Ge(n.unsubscribe)}function z(n){Ge(n)?n():n.unsubscribe()}const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Y={setTimeout(n,t,...e){const{delegate:r}=Y;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Y;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function U(n){Y.setTimeout(()=>{const{onUnhandledError:t}=V;if(!t)throw n;t(n)})}function k(){}const L=x("C",void 0,void 0);function x(n,t,e){return{kind:n,value:t,error:e}}let A=null;function T(n){if(V.useDeprecatedSynchronousErrorHandling){const t=!A;if(t&&(A={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=A;if(A=null,e)throw r}}else n()}class m extends P{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,B(t)&&t.add(this)):this.destination=b}static create(t,e,r){return new D(t,e,r)}next(t){this.isStopped?w(function O(n){return x("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?w(function R(n){return x("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?w(L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const v=Function.prototype.bind;function h(n,t){return v.call(n,t)}class E{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){f(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){f(r)}else f(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){f(e)}}}class D extends m{constructor(t,e,r){let i;if(super(),Ge(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&V.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&h(t.next,o),error:t.error&&h(t.error,o),complete:t.complete&&h(t.complete,o)}):i=t}this.destination=new E(i)}}function f(n){V.useDeprecatedSynchronousErrorHandling?function _(n){V.useDeprecatedSynchronousErrorHandling&&A&&(A.errorThrown=!0,A.error=n)}(n):U(n)}function w(n,t){const{onStoppedNotification:e}=V;e&&Y.setTimeout(()=>e(n,t))}const b={closed:!0,next:k,error:function y(n){throw n},complete:k},C="function"==typeof Symbol&&Symbol.observable||"@@observable";function u(n){return n}function c(n){return 0===n.length?u:1===n.length?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}let p=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){const o=function F(n){return n&&n instanceof m||function S(n){return n&&Ge(n.next)&&Ge(n.error)&&Ge(n.complete)}(n)&&B(n)}(e)?e:new D(e,r,i);return T(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=M(r))((i,o)=>{const s=new D({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[C](){return this}pipe(...e){return c(e)(this)}toPromise(e){return new(e=M(e))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function M(n){var t;return null!==(t=n??V.Promise)&&void 0!==t?t:Promise}const H=ho(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let N=(()=>{class n extends p{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new K(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new H}next(e){T(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){T(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){T(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:i,observers:o}=this;return r||i?G:(this.currentObservers=null,o.push(e),new P(()=>{this.currentObservers=null,J(o,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){const e=new p;return e.source=this,e}}return n.create=(t,e)=>new K(t,e),n})();class K extends N{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:G}}function W(n){return Ge(n?.lift)}function $(n){return t=>{if(W(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(n,t,e,r,i){return new te(n,t,e,r,i)}class te extends m{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Z(n,t){return $((e,r)=>{let i=0;e.subscribe(Q(r,o=>{r.next(n.call(t,o,i++))}))})}function Mt(n){return this instanceof Mt?(this.v=n,this):new Mt(n)}function or(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function gt(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){!function i(o,s,a,l){Promise.resolve(l).then(function(g){o({value:g,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const Yn=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ut(n){return Ge(n?.then)}function Cn(n){return Ge(n[C])}function Xn(n){return Symbol.asyncIterator&&Ge(n?.[Symbol.asyncIterator])}function po(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _i=function vi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ca(n){return Ge(n?.[_i])}function mo(n){return function xn(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e.apply(n,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(X){r[X]&&(i[X]=function(q){return new Promise(function(ee,ie){o.push([X,q,ee,ie])>1||a(X,q)})})}function a(X,q){try{!function l(X){X.value instanceof Mt?Promise.resolve(X.value.v).then(g,I):j(o[0][2],X)}(r[X](q))}catch(ee){j(o[0][3],ee)}}function g(X){a("next",X)}function I(X){a("throw",X)}function j(X,q){X(q),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:i}=yield Mt(e.read());if(i)return yield Mt(void 0);yield yield Mt(r)}}finally{e.releaseLock()}})}function Xl(n){return Ge(n?.getReader)}function cn(n){if(n instanceof p)return n;if(null!=n){if(Cn(n))return function $d(n){return new p(t=>{const e=n[C]();if(Ge(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Yn(n))return function Zl(n){return new p(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(Ut(n))return function ua(n){return new p(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,U)})}(n);if(Xn(n))return da(n);if(ca(n))return function ar(n){return new p(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(Xl(n))return function Ql(n){return da(mo(n))}(n)}throw po(n)}function da(n){return new p(t=>{(function Yd(n,t){var e,r,i,o;return function ct(n,t,e,r){return new(e||(e=Promise))(function(o,s){function a(I){try{g(r.next(I))}catch(j){s(j)}}function l(I){try{g(r.throw(I))}catch(j){s(j)}}function g(I){I.done?o(I.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(I.value).then(a,l)}g((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=or(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Br(n,t,e,r=0,i=!1){const o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function qt(n,t,e=1/0){return Ge(t)?qt((r,i)=>Z((o,s)=>t(r,o,i,s))(cn(n(r,i))),e):("number"==typeof t&&(e=t),$((r,i)=>function Xd(n,t,e,r,i,o,s,a){const l=[];let g=0,I=0,j=!1;const X=()=>{j&&!l.length&&!g&&t.complete()},q=ie=>g<r?ee(ie):l.push(ie),ee=ie=>{o&&t.next(ie),g++;let se=!1;cn(e(ie,I++)).subscribe(Q(t,ae=>{i?.(ae),o?q(ae):t.next(ae)},()=>{se=!0},void 0,()=>{if(se)try{for(g--;l.length&&g<r;){const ae=l.shift();s?Br(t,s,()=>ee(ae)):ee(ae)}X()}catch(ae){t.error(ae)}}))};return n.subscribe(Q(t,q,()=>{j=!0,X()})),()=>{a?.()}}(r,i,n,e)))}function zi(n=1/0){return qt(u,n)}const kn=new p(n=>n.complete());function ql(n){return n&&Ge(n.schedule)}function qd(n){return n[n.length-1]}function uv(n){return Ge(qd(n))?n.pop():void 0}function fa(n){return ql(qd(n))?n.pop():void 0}function dv(n,t=0){return $((e,r)=>{e.subscribe(Q(r,i=>Br(r,n,()=>r.next(i),t),()=>Br(r,n,()=>r.complete(),t),i=>Br(r,n,()=>r.error(i),t)))})}function fv(n,t=0){return $((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function hv(n,t){if(!n)throw new Error("Iterable cannot be null");return new p(e=>{Br(e,t,()=>{const r=n[Symbol.asyncIterator]();Br(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function Jt(n,t){return t?function eM(n,t){if(null!=n){if(Cn(n))return function Xw(n,t){return cn(n).pipe(fv(t),dv(t))}(n,t);if(Yn(n))return function Qw(n,t){return new p(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(Ut(n))return function Zw(n,t){return cn(n).pipe(fv(t),dv(t))}(n,t);if(Xn(n))return hv(n,t);if(ca(n))return function qw(n,t){return new p(e=>{let r;return Br(e,t,()=>{r=n[_i](),Br(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void e.error(s)}o?e.complete():e.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}(n,t);if(Xl(n))return function Jw(n,t){return hv(mo(n),t)}(n,t)}throw po(n)}(n,t):cn(n)}function Xo(...n){const t=fa(n),e=function Yw(n,t){return"number"==typeof qd(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?cn(r[0]):zi(e)(Jt(r,t)):kn}function pv(n={}){const{connector:t=(()=>new N),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,g=0,I=!1,j=!1;const X=()=>{a?.unsubscribe(),a=void 0},q=()=>{X(),s=l=void 0,I=j=!1},ee=()=>{const ie=s;q(),ie?.unsubscribe()};return $((ie,se)=>{g++,!j&&!I&&X();const ae=l=l??t();se.add(()=>{g--,0===g&&!j&&!I&&(a=Jd(ee,i))}),ae.subscribe(se),!s&&g>0&&(s=new D({next:ye=>ae.next(ye),error:ye=>{j=!0,X(),a=Jd(q,e,ye),ae.error(ye)},complete:()=>{I=!0,X(),a=Jd(q,r),ae.complete()}}),cn(ie).subscribe(s))})(o)}}function Jd(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new D({next:()=>{r.unsubscribe(),n()}});return cn(t(...e)).subscribe(r)}function It(n){for(let t in n)if(n[t]===It)return t;throw Error("Could not find renamed property on target object.")}function ef(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Pt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Pt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function tf(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const tM=It({__forward_ref__:It});function Ot(n){return n.__forward_ref__=Ot,n.toString=function(){return Pt(this())},n}function ke(n){return nf(n)?n():n}function nf(n){return"function"==typeof n&&n.hasOwnProperty(tM)&&n.__forward_ref__===Ot}function rf(n){return n&&!!n.\u0275providers}const mv="https://g.co/ng/security#xss";class he extends Error{constructor(t,e){super(Jl(t,e)),this.code=t}}function Jl(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}function $e(n){return"string"==typeof n?n:null==n?"":String(n)}function ec(n,t){throw new he(-201,!1)}function Cr(n,t){null==n&&function xt(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function at(n){return{providers:n.providers||[],imports:n.imports||[]}}function tc(n){return gv(n,nc)||gv(n,_v)}function gv(n,t){return n.hasOwnProperty(t)?n[t]:null}function vv(n){return n&&(n.hasOwnProperty(sf)||n.hasOwnProperty(uM))?n[sf]:null}const nc=It({\u0275prov:It}),sf=It({\u0275inj:It}),_v=It({ngInjectableDef:It}),uM=It({ngInjectorDef:It});var Ne=(()=>((Ne=Ne||{})[Ne.Default=0]="Default",Ne[Ne.Host=1]="Host",Ne[Ne.Self=2]="Self",Ne[Ne.SkipSelf=4]="SkipSelf",Ne[Ne.Optional=8]="Optional",Ne))();let af;function Sr(n){const t=af;return af=n,t}function yv(n,t,e){const r=tc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Ne.Optional?null:void 0!==t?t:void ec(Pt(n))}const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ha={},lf="__NG_DI_FLAG__",rc="ngTempTokenPath",fM="ngTokenPath",hM=/\n/gm,pM="\u0275",bv="__source";let pa;function Zo(n){const t=pa;return pa=n,t}function mM(n,t=Ne.Default){if(void 0===pa)throw new he(-203,!1);return null===pa?yv(n,void 0,t):pa.get(n,t&Ne.Optional?null:void 0,t)}function le(n,t=Ne.Default){return(function dM(){return af}()||mM)(ke(n),t)}function je(n,t=Ne.Default){return le(n,ic(t))}function ic(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cf(n){const t=[];for(let e=0;e<n.length;e++){const r=ke(n[e]);if(Array.isArray(r)){if(0===r.length)throw new he(900,!1);let i,o=Ne.Default;for(let s=0;s<r.length;s++){const a=r[s],l=gM(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}t.push(le(i,o))}else t.push(le(r))}return t}function ma(n,t){return n[lf]=t,n.prototype[lf]=t,n}function gM(n){return n[lf]}function $i(n){return{toString:n}.toString()}var Zr=(()=>((Zr=Zr||{})[Zr.OnPush=0]="OnPush",Zr[Zr.Default=1]="Default",Zr))(),Ur=(()=>{return(n=Ur||(Ur={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ur;var n})();const yi={},_t=[],oc=It({\u0275cmp:It}),uf=It({\u0275dir:It}),df=It({\u0275pipe:It}),xv=It({\u0275mod:It}),bi=It({\u0275fac:It}),ga=It({__NG_ELEMENT_ID__:It});let yM=0;function Dt(n){return $i(()=>{const e=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Zr.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||_t,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ur.Emulated,id:"c"+yM++,styles:n.styles||_t,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return i.inputs=Sv(n.inputs,r),i.outputs=Sv(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Dv).filter(Cv):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Bn).filter(Cv):null,i})}function Dv(n){return Ct(n)||Sn(n)}function Cv(n){return null!==n}function lt(n){return $i(()=>({type:n.type,bootstrap:n.bootstrap||_t,declarations:n.declarations||_t,imports:n.imports||_t,exports:n.exports||_t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sv(n,t){if(null==n)return yi;const e={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),e[i]=r,t&&(t[i]=o)}return e}const Se=Dt;function Nn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ct(n){return n[oc]||null}function Sn(n){return n[uf]||null}function Bn(n){return n[df]||null}function cr(n,t){const e=n[xv]||null;if(!e&&!0===t)throw new Error(`Type ${Pt(n)} does not have '\u0275mod' property.`);return e}const Ei=0,Ie=1,Qe=2,Kt=3,Vr=4,go=5,Tn=6,qo=7,Yt=8,sc=9,ac=10,Je=11,ff=12,va=13,Tv=14,Jo=15,wn=16,_a=17,es=18,Qr=19,ya=20,wv=21,Bt=22,hf=1,Mv=2,lc=7,cc=8,ts=9,Un=10;function ur(n){return Array.isArray(n)&&"object"==typeof n[hf]}function Hr(n){return Array.isArray(n)&&!0===n[hf]}function pf(n){return 0!=(4&n.flags)}function ba(n){return n.componentOffset>-1}function uc(n){return 1==(1&n.flags)}function jr(n){return null!==n.template}function xM(n){return 0!=(256&n[Qe])}function vo(n,t){return n.hasOwnProperty(bi)?n[bi]:null}class SM{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Mn(){return Rv}function Rv(n){return n.type.prototype.ngOnChanges&&(n.setInput=wM),TM}function TM(){const n=Ov(this),t=n?.current;if(t){const e=n.previous;if(e===yi)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function wM(n,t,e,r){const i=this.declaredInputs[e],o=Ov(n)||function MM(n,t){return n[Pv]=t}(n,{previous:yi,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[i];s[i]=new SM(l&&l.currentValue,t,a===yi),n[r]=t}Mn.ngInherit=!0;const Pv="__ngSimpleChanges__";function Ov(n){return n[Pv]||null}const Tr=function(n,t,e){},Lv="svg";function yn(n){for(;Array.isArray(n);)n=n[Ei];return n}function dc(n,t){return yn(t[n])}function dr(n,t){return yn(t[n.index])}function kv(n,t){return n.data[t]}function ns(n,t){return n[t]}function fr(n,t){const e=t[n];return ur(e)?e:e[Ei]}function fc(n){return 64==(64&n[Qe])}function Yi(n,t){return null==t?null:n[t]}function Nv(n){n[es]=0}function gf(n,t){n[go]+=t;let e=n,r=n[Kt];for(;null!==r&&(1===t&&1===e[go]||-1===t&&0===e[go]);)r[go]+=t,e=r,r=r[Kt]}const Ye={lFrame:$v(null),bindingsEnabled:!0};function Uv(){return Ye.bindingsEnabled}function me(){return Ye.lFrame.lView}function ut(){return Ye.lFrame.tView}function wr(n){return Ye.lFrame.contextLView=n,n[Yt]}function Mr(n){return Ye.lFrame.contextLView=null,n}function bn(){let n=Vv();for(;null!==n&&64===n.type;)n=n.parent;return n}function Vv(){return Ye.lFrame.currentTNode}function qr(n,t){const e=Ye.lFrame;e.currentTNode=n,e.isParent=t}function vf(){return Ye.lFrame.isParent}function _f(){Ye.lFrame.isParent=!1}function Vn(){const n=Ye.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function rs(){return Ye.lFrame.bindingIndex++}function Di(n){const t=Ye.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function HM(n,t){const e=Ye.lFrame;e.bindingIndex=e.bindingRootIndex=n,yf(t)}function yf(n){Ye.lFrame.currentDirectiveIndex=n}function Wv(){return Ye.lFrame.currentQueryIndex}function Ef(n){Ye.lFrame.currentQueryIndex=n}function KM(n){const t=n[Ie];return 2===t.type?t.declTNode:1===t.type?n[Tn]:null}function zv(n,t,e){if(e&Ne.SkipSelf){let i=t,o=n;for(;!(i=i.parent,null!==i||e&Ne.Host||(i=KM(o),null===i||(o=o[Jo],10&i.type))););if(null===i)return!1;t=i,n=o}const r=Ye.lFrame=Gv();return r.currentTNode=t,r.lView=n,!0}function xf(n){const t=Gv(),e=n[Ie];Ye.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Gv(){const n=Ye.lFrame,t=null===n?null:n.child;return null===t?$v(n):t}function $v(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Yv(){const n=Ye.lFrame;return Ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Xv=Yv;function Df(){const n=Yv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hn(){return Ye.lFrame.selectedIndex}function _o(n){Ye.lFrame.selectedIndex=n}function Vt(){const n=Ye.lFrame;return kv(n.tView,n.selectedIndex)}function Jr(){Ye.lFrame.currentNamespace=Lv}function xa(){!function $M(){Ye.lFrame.currentNamespace=null}()}function hc(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:g,ngOnDestroy:I}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-e,s),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-e,l),g&&((n.viewHooks||(n.viewHooks=[])).push(e,g),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,g)),null!=I&&(n.destroyHooks||(n.destroyHooks=[])).push(e,I)}}function pc(n,t,e){Zv(n,t,3,e)}function mc(n,t,e,r){(3&n[Qe])===e&&Zv(n,t,e,r)}function Cf(n,t){let e=n[Qe];(3&e)===t&&(e&=2047,e+=1,n[Qe]=e)}function Zv(n,t,e,r){const o=r??-1,s=t.length-1;let a=0;for(let l=void 0!==r?65535&n[es]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[es]+=65536),(a<o||-1==o)&&(ZM(n,e,t,l),n[es]=(4294901760&n[es])+l+2),l++}function ZM(n,t,e,r){const i=e[r]<0,o=e[r+1],a=n[i?-e[r]:e[r]];if(i){if(n[Qe]>>11<n[es]>>16&&(3&n[Qe])===t){n[Qe]+=2048,Tr(4,a,o);try{o.call(a)}finally{Tr(5,a,o)}}}else{Tr(4,a,o);try{o.call(a)}finally{Tr(5,a,o)}}}const is=-1;class Da{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Tf(n,t,e){let r=0;for(;r<e.length;){const i=e[r];if("number"==typeof i){if(0!==i)break;r++;const o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{const o=i,s=e[++r];qv(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function Qv(n){return 3===n||4===n||6===n}function qv(n){return 64===n.charCodeAt(0)}function Ca(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?e=i:0===e||Jv(n,e,i,null,-1===e||2===e?t[++r]:null)}}return n}function Jv(n,t,e,r,i){let o=0,s=n.length;if(-1===t)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function e_(n){return n!==is}function gc(n){return 32767&n}function vc(n,t){let e=function eA(n){return n>>16}(n),r=t;for(;e>0;)r=r[Jo],e--;return r}let wf=!0;function _c(n){const t=wf;return wf=n,t}const t_=255,n_=5;let tA=0;const ei={};function yc(n,t){const e=r_(n,t);if(-1!==e)return e;const r=t[Ie];r.firstCreatePass&&(n.injectorIndex=t.length,Mf(r.data,n),Mf(t,null),Mf(r.blueprint,null));const i=Af(n,t),o=n.injectorIndex;if(e_(i)){const s=gc(i),a=vc(i,t),l=a[Ie].data;for(let g=0;g<8;g++)t[o+g]=a[s+g]|l[s+g]}return t[o+8]=i,o}function Mf(n,t){n.push(0,0,0,0,0,0,0,0,t)}function r_(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Af(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;null!==i;){if(r=u_(i),null===r)return is;if(e++,i=i[Jo],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return is}function If(n,t,e){!function nA(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(ga)&&(r=e[ga]),null==r&&(r=e[ga]=tA++);const i=r&t_;t.data[n+(i>>n_)]|=1<<i}(n,t,e)}function i_(n,t,e){if(e&Ne.Optional||void 0!==n)return n;ec()}function o_(n,t,e,r){if(e&Ne.Optional&&void 0===r&&(r=null),!(e&(Ne.Self|Ne.Host))){const i=n[sc],o=Sr(void 0);try{return i?i.get(t,r,e&Ne.Optional):yv(t,r,e&Ne.Optional)}finally{Sr(o)}}return i_(r,0,e)}function s_(n,t,e,r=Ne.Default,i){if(null!==n){if(1024&t[Qe]){const s=function aA(n,t,e,r,i){let o=n,s=t;for(;null!==o&&null!==s&&1024&s[Qe]&&!(256&s[Qe]);){const a=a_(o,s,e,r|Ne.Self,ei);if(a!==ei)return a;let l=o.parent;if(!l){const g=s[wv];if(g){const I=g.get(e,ei,r);if(I!==ei)return I}l=u_(s),s=s[Jo]}o=l}return i}(n,t,e,r,ei);if(s!==ei)return s}const o=a_(n,t,e,r,ei);if(o!==ei)return o}return o_(t,e,r,i)}function a_(n,t,e,r,i){const o=function oA(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(ga)?n[ga]:void 0;return"number"==typeof t?t>=0?t&t_:sA:t}(e);if("function"==typeof o){if(!zv(t,n,r))return r&Ne.Host?i_(i,0,r):o_(t,e,r,i);try{const s=o(r);if(null!=s||r&Ne.Optional)return s;ec()}finally{Xv()}}else if("number"==typeof o){let s=null,a=r_(n,t),l=is,g=r&Ne.Host?t[wn][Tn]:null;for((-1===a||r&Ne.SkipSelf)&&(l=-1===a?Af(n,t):t[a+8],l!==is&&c_(r,!1)?(s=t[Ie],a=gc(l),t=vc(l,t)):a=-1);-1!==a;){const I=t[Ie];if(l_(o,a,I.data)){const j=iA(a,t,e,s,r,g);if(j!==ei)return j}l=t[a+8],l!==is&&c_(r,t[Ie].data[a+8]===g)&&l_(o,a,t)?(s=I,a=gc(l),t=vc(l,t)):a=-1}}return i}function iA(n,t,e,r,i,o){const s=t[Ie],a=s.data[n+8],I=bc(a,s,e,null==r?ba(a)&&wf:r!=s&&0!=(3&a.type),i&Ne.Host&&o===a);return null!==I?yo(t,s,I,a):ei}function bc(n,t,e,r,i){const o=n.providerIndexes,s=t.data,a=1048575&o,l=n.directiveStart,I=o>>20,X=i?a+I:n.directiveEnd;for(let q=r?a:a+I;q<X;q++){const ee=s[q];if(q<l&&e===ee||q>=l&&ee.type===e)return q}if(i){const q=s[l];if(q&&jr(q)&&q.type===e)return l}return null}function yo(n,t,e,r){let i=n[e];const o=t.data;if(function QM(n){return n instanceof Da}(i)){const s=i;s.resolving&&function nM(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new he(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Et(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$e(n)}(o[e]));const a=_c(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Sr(s.injectImpl):null;zv(n,r,Ne.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&function XM(n,t,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Rv(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s)}i&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,i),o&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o))}(e,o[e],t)}finally{null!==l&&Sr(l),_c(a),s.resolving=!1,Xv()}}return i}function l_(n,t,e){return!!(e[t+(n>>n_)]&1<<n)}function c_(n,t){return!(n&Ne.Self||n&Ne.Host&&t)}class os{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return s_(this._tNode,this._lView,t,ic(r),e)}}function sA(){return new os(bn(),me())}function pn(n){return $i(()=>{const t=n.prototype.constructor,e=t[bi]||Rf(t),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[bi]||Rf(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rf(n){return nf(n)?()=>{const t=Rf(ke(n));return t&&t()}:vo(n)}function u_(n){const t=n[Ie],e=t.type;return 2===e?t.declTNode:1===e?n[Tn]:null}function Sa(n){return function rA(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let i=0;for(;i<r;){const o=e[i];if(Qv(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof e[i];)i++;else{if(o===t)return e[i+1];i+=2}}}return null}(bn(),n)}const as="__parameters__";function cs(n,t,e){return $i(()=>{const r=function Pf(n){return function(...e){if(n){const r=n(...e);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,g,I){const j=l.hasOwnProperty(as)?l[as]:Object.defineProperty(l,as,{value:[]})[as];for(;j.length<=I;)j.push(null);return(j[I]=j[I]||[]).push(s),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class _e{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=xe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function bo(n,t){n.forEach(e=>Array.isArray(e)?bo(e,t):t(e))}function f_(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Ec(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Ma(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function hr(n,t,e){let r=us(n,t);return r>=0?n[1|r]=e:(r=~r,function dA(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(1===i)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;)n[i]=n[i-2],i--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function Lf(n,t){const e=us(n,t);if(e>=0)return n[1|e]}function us(n,t){return function h_(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}(n,t,1)}const Dc=ma(cs("Inject",n=>({token:n})),-1),Eo=ma(cs("Optional"),8),ds=ma(cs("SkipSelf"),4);var Zn=(()=>((Zn=Zn||{})[Zn.Important=1]="Important",Zn[Zn.DashCase=2]="DashCase",Zn))();const Uf=new Map;let OA=0;const Hf="__ngContext__";function An(n,t){ur(t)?(n[Hf]=t[ya],function FA(n){Uf.set(n[ya],n)}(t)):n[Hf]=t}let jf;function Kf(n,t){return jf(n,t)}function Pa(n){const t=n[Kt];return Hr(t)?t[Kt]:t}function Wf(n){return O_(n[va])}function zf(n){return O_(n[Vr])}function O_(n){for(;null!==n&&!Hr(n);)n=n[Vr];return n}function hs(n,t,e,r,i){if(null!=r){let o,s=!1;Hr(r)?o=r:ur(r)&&(s=!0,r=r[Ei]);const a=yn(r);0===n&&null!==e?null==i?U_(t,e,a):xo(t,e,a,i||null,!0):1===n&&null!==e?xo(t,e,a,i||null,!0):2===n?function qf(n,t,e){const r=Tc(n,t);r&&function tI(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=o&&function iI(n,t,e,r,i){const o=e[lc];o!==yn(e)&&hs(t,n,r,o,i);for(let a=Un;a<e.length;a++){const l=e[a];Oa(l[Ie],l,n,t,r,o)}}(t,n,o,e,i)}}function $f(n,t,e){return n.createElement(t,e)}function F_(n,t){const e=n[ts],r=e.indexOf(t),i=t[Kt];512&t[Qe]&&(t[Qe]&=-513,gf(i,-1)),e.splice(r,1)}function Yf(n,t){if(n.length<=Un)return;const e=Un+t,r=n[e];if(r){const i=r[_a];null!==i&&i!==n&&F_(i,r),t>0&&(n[e-1][Vr]=r[Vr]);const o=Ec(n,Un+t);!function $A(n,t){Oa(n,t,t[Je],2,null,null),t[Ei]=null,t[Tn]=null}(r[Ie],r);const s=o[Qr];null!==s&&s.detachView(o[Ie]),r[Kt]=null,r[Vr]=null,r[Qe]&=-65}return r}function k_(n,t){if(!(128&t[Qe])){const e=t[Je];e.destroyNode&&Oa(n,t,e,3,null,null),function ZA(n){let t=n[va];if(!t)return Xf(n[Ie],n);for(;t;){let e=null;if(ur(t))e=t[va];else{const r=t[Un];r&&(e=r)}if(!e){for(;t&&!t[Vr]&&t!==n;)ur(t)&&Xf(t[Ie],t),t=t[Kt];null===t&&(t=n),ur(t)&&Xf(t[Ie],t),e=t&&t[Vr]}t=e}}(t)}}function Xf(n,t){if(!(128&t[Qe])){t[Qe]&=-65,t[Qe]|=128,function eI(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const i=t[e[r]];if(!(i instanceof Da)){const o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];Tr(4,a,l);try{l.call(a)}finally{Tr(5,a,l)}}else{Tr(4,i,o);try{o.call(i)}finally{Tr(5,i,o)}}}}}(n,t),function JA(n,t){const e=n.cleanup,r=t[qo];let i=-1;if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+3];s>=0?r[i=s]():r[i=-s].unsubscribe(),o+=2}else{const s=r[i=e[o+1]];e[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();t[qo]=null}}(n,t),1===t[Ie].type&&t[Je].destroy();const e=t[_a];if(null!==e&&Hr(t[Kt])){e!==t[Kt]&&F_(e,t);const r=t[Qr];null!==r&&r.detachView(n)}!function kA(n){Uf.delete(n[ya])}(t)}}function N_(n,t,e){return function B_(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[Ei];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Ur.None||o===Ur.Emulated)return null}return dr(r,e)}}(n,t.parent,e)}function xo(n,t,e,r,i){n.insertBefore(t,e,r,i)}function U_(n,t,e){n.appendChild(t,e)}function V_(n,t,e,r,i){null!==r?xo(n,t,e,r,i):U_(n,t,e)}function Tc(n,t){return n.parentNode(t)}function H_(n,t,e){return K_(n,t,e)}let Zf,th,Ic,K_=function j_(n,t,e){return 40&n.type?dr(n,e):null};function wc(n,t,e,r){const i=N_(n,r,t),o=t[Je],a=H_(r.parent||t[Tn],r,t);if(null!=i)if(Array.isArray(e))for(let l=0;l<e.length;l++)V_(o,i,e[l],a,!1);else V_(o,i,e,a,!1);void 0!==Zf&&Zf(o,r,t,e,i)}function Mc(n,t){if(null!==t){const e=t.type;if(3&e)return dr(t,n);if(4&e)return Qf(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return Mc(n,r);{const i=n[t.index];return Hr(i)?Qf(-1,i):yn(i)}}if(32&e)return Kf(t,n)()||yn(n[t.index]);{const r=z_(n,t);return null!==r?Array.isArray(r)?r[0]:Mc(Pa(n[wn]),r):Mc(n,t.next)}}return null}function z_(n,t){return null!==t?n[wn][Tn].projection[t.projection]:null}function Qf(n,t){const e=Un+n+1;if(e<t.length){const r=t[e],i=r[Ie].firstChild;if(null!==i)return Mc(r,i)}return t[lc]}function Jf(n,t,e,r,i,o,s){for(;null!=e;){const a=r[e.index],l=e.type;if(s&&0===t&&(a&&An(yn(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)Jf(n,t,e.child,r,i,o,!1),hs(t,n,i,a,o);else if(32&l){const g=Kf(e,r);let I;for(;I=g();)hs(t,n,i,I,o);hs(t,n,i,a,o)}else 16&l?G_(n,t,r,e,i,o):hs(t,n,i,a,o);e=s?e.projectionNext:e.next}}function Oa(n,t,e,r,i,o){Jf(e,r,n.firstChild,t,i,o,!1)}function G_(n,t,e,r,i,o){const s=e[wn],l=s[Tn].projection[r.projection];if(Array.isArray(l))for(let g=0;g<l.length;g++)hs(t,n,i,l[g],o);else Jf(n,t,l,s[Kt],i,o,!0)}function $_(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Y_(n,t,e){const{mergedAttrs:r,classes:i,styles:o}=e;null!==r&&Tf(n,t,r),null!==i&&$_(n,t,i),null!==o&&function sI(n,t,e){n.setAttribute(t,"style",e)}(n,t,o)}function q_(n){return function nh(){if(void 0===Ic&&(Ic=null,Nt.trustedTypes))try{Ic=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ic}()?.createScriptURL(n)||n}class J_{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mv})`}}function Xi(n){return n instanceof J_?n.changingThisBreaksApplicationSecurity:n}function La(n,t){const e=function gI(n){return n instanceof J_&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${mv})`)}return e===t}const bI=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var en=(()=>((en=en||{})[en.NONE=0]="NONE",en[en.HTML=1]="HTML",en[en.STYLE=2]="STYLE",en[en.SCRIPT=3]="SCRIPT",en[en.URL=4]="URL",en[en.RESOURCE_URL=5]="RESOURCE_URL",en))();function ka(n){const t=Na();return t?t.sanitize(en.URL,n)||"":La(n,"URL")?Xi(n):function rh(n){return(n=String(n)).match(bI)?n:"unsafe:"+n}($e(n))}function sy(n){const t=Na();if(t)return q_(t.sanitize(en.RESOURCE_URL,n)||"");if(La(n,"ResourceURL"))return q_(Xi(n));throw new he(904,!1)}function Na(){const n=me();return n&&n[ff]}const Pc=new _e("ENVIRONMENT_INITIALIZER"),ly=new _e("INJECTOR",-1),cy=new _e("INJECTOR_DEF_TYPES");class uy{get(t,e=ha){if(e===ha){const r=new Error(`NullInjectorError: No provider for ${Pt(t)}!`);throw r.name="NullInjectorError",r}return e}}function LI(...n){return{\u0275providers:dy(0,n),\u0275fromNgModule:!0}}function dy(n,...t){const e=[],r=new Set;let i;return bo(t,o=>{const s=o;ah(s,e,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&fy(i,e),e}function fy(n,t){for(let e=0;e<n.length;e++){const{providers:i}=n[e];lh(i,o=>{t.push(o)})}}function ah(n,t,e,r){if(!(n=ke(n)))return!1;let i=null,o=vv(n);const s=!o&&Ct(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const l=n.ngModule;if(o=vv(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const g of l)ah(g,t,e,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let g;r.add(i);try{bo(o.imports,I=>{ah(I,t,e,r)&&(g||(g=[]),g.push(I))})}finally{}void 0!==g&&fy(g,t)}if(!a){const g=vo(i)||(()=>new i);t.push({provide:i,useFactory:g,deps:_t},{provide:cy,useValue:i,multi:!0},{provide:Pc,useValue:()=>le(i),multi:!0})}const l=o.providers;null==l||a||lh(l,I=>{t.push(I)})}}return i!==n&&void 0!==n.providers}function lh(n,t){for(let e of n)rf(e)&&(e=e.\u0275providers),Array.isArray(e)?lh(e,t):t(e)}const FI=It({provide:String,useValue:It});function ch(n){return null!==n&&"object"==typeof n&&FI in n}function Do(n){return"function"==typeof n}const uh=new _e("Set Injector scope."),Oc={},NI={};let dh;function Lc(){return void 0===dh&&(dh=new uy),dh}class ti{}class my extends ti{get destroyed(){return this._destroyed}constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hh(t,s=>this.processProvider(s)),this.records.set(ly,ms(void 0,this)),i.has("environment")&&this.records.set(ti,ms(void 0,this));const o=this.records.get(uh);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cy.multi,_t,Ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Zo(this),r=Sr(void 0);try{return t()}finally{Zo(e),Sr(r)}}get(t,e=ha,r=Ne.Default){this.assertNotDestroyed(),r=ic(r);const i=Zo(this),o=Sr(void 0);try{if(!(r&Ne.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function jI(n){return"function"==typeof n||"object"==typeof n&&n instanceof _e}(t)&&tc(t);a=l&&this.injectableDefInScope(l)?ms(fh(t),Oc):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&Ne.Self?Lc():this.parent).get(t,e=r&Ne.Optional&&e===ha?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[rc]=s[rc]||[]).unshift(Pt(t)),i)throw s;return function vM(n,t,e,r){const i=n[rc];throw t[bv]&&i.unshift(t[bv]),n.message=function _M(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==pM?n.slice(2):n;let i=Pt(t);if(Array.isArray(t))i=t.map(Pt).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Pt(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(hM,"\n  ")}`}("\n"+n.message,i,e,r),n[fM]=i,n[rc]=null,n}(s,t,"R3InjectorError",this.source)}throw s}finally{Sr(o),Zo(i)}}resolveInjectorInitializers(){const t=Zo(this),e=Sr(void 0);try{const r=this.get(Pc.multi,_t,Ne.Self);for(const i of r)i()}finally{Zo(t),Sr(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push(Pt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(t){let e=Do(t=ke(t))?t:ke(t&&t.provide);const r=function UI(n){return ch(n)?ms(void 0,n.useValue):ms(gy(n),Oc)}(t);if(Do(t)||!0!==t.multi)this.records.get(e);else{let i=this.records.get(e);i||(i=ms(void 0,Oc,!0),i.factory=()=>cf(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===Oc&&(e.value=NI,e.value=e.factory()),"object"==typeof e.value&&e.value&&function HI(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ke(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function fh(n){const t=tc(n),e=null!==t?t.factory:vo(n);if(null!==e)return e;if(n instanceof _e)throw new he(204,!1);if(n instanceof Function)return function BI(n){const t=n.length;if(t>0)throw Ma(t,"?"),new he(204,!1);const e=function lM(n){const t=n&&(n[nc]||n[_v]);return t?(function cM(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),t):null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new he(204,!1)}function gy(n,t,e){let r;if(Do(n)){const i=ke(n);return vo(i)||fh(i)}if(ch(n))r=()=>ke(n.useValue);else if(function py(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...cf(n.deps||[]));else if(function hy(n){return!(!n||!n.useExisting)}(n))r=()=>le(ke(n.useExisting));else{const i=ke(n&&(n.useClass||n.provide));if(!function VI(n){return!!n.deps}(n))return vo(i)||fh(i);r=()=>new i(...cf(n.deps))}return r}function ms(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function hh(n,t){for(const e of n)Array.isArray(e)?hh(e,t):e&&rf(e)?hh(e.\u0275providers,t):t(e)}class KI{}class vy{}class zI{resolveComponentFactory(t){throw function WI(n){const t=Error(`No component factory found for ${Pt(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let gs=(()=>{class n{}return n.NULL=new zI,n})();function GI(){return vs(bn(),me())}function vs(n,t){return new tt(dr(n,t))}let tt=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=GI,n})();function $I(n){return n instanceof tt?n.nativeElement:n}class Ba{}let Si=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function YI(){const n=me(),e=fr(bn().index,n);return(ur(e)?e:n)[Je]}(),n})(),XI=(()=>{class n{}return n.\u0275prov=xe({token:n,providedIn:"root",factory:()=>null}),n})();class Co{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ZI=new Co("15.2.2"),ph={},mh="ngOriginalError";function gh(n){return n[mh]}class _s{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&gh(t);for(;e&&gh(e);)e=gh(e);return e||null}}function Ti(n){return n instanceof Function?n():n}function by(n,t,e){let r=n.length;for(;;){const i=n.indexOf(t,e);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}const Ey="ng-template";function aR(n,t,e){let r=0;for(;r<n.length;){let i=n[r++];if(e&&"class"===i){if(i=n[r],-1!==by(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function xy(n){return 4===n.type&&n.value!==Ey}function lR(n,t,e){return t===(4!==n.type||e?n.value:Ey)}function cR(n,t,e){let r=4;const i=n.attrs||[],o=function fR(n){for(let t=0;t<n.length;t++)if(Qv(n[t]))return t;return n.length}(i);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!lR(n,l,e)||""===l&&1===t.length){if(Kr(r))return!1;s=!0}}else{const g=8&r?l:t[++a];if(8&r&&null!==n.attrs){if(!aR(n.attrs,g,e)){if(Kr(r))return!1;s=!0}continue}const j=uR(8&r?"class":l,i,xy(n),e);if(-1===j){if(Kr(r))return!1;s=!0;continue}if(""!==g){let X;X=j>o?"":i[j+1].toLowerCase();const q=8&r?X:null;if(q&&-1!==by(q,g,0)||2&r&&g!==X){if(Kr(r))return!1;s=!0}}}}else{if(!s&&!Kr(r)&&!Kr(l))return!1;if(s&&Kr(l))continue;s=!1,r=l|1&r}}return Kr(r)||s}function Kr(n){return 0==(1&n)}function uR(n,t,e,r){if(null===t)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){const s=t[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function hR(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function Dy(n,t,e=!1){for(let r=0;r<t.length;r++)if(cR(n,t[r],e))return!0;return!1}function pR(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Cy(n,t){return n?":not("+t.trim()+")":t}function mR(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&r){const a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Kr(s)&&(t+=Cy(o,i),i=""),r=s,o=o||!Kr(r);e++}return""!==i&&(t+=Cy(o,i)),t}const Xe={};function be(n){Sy(ut(),me(),Hn()+n,!1)}function Sy(n,t,e,r){if(!r)if(3==(3&t[Qe])){const o=n.preOrderCheckHooks;null!==o&&pc(t,o,e)}else{const o=n.preOrderHooks;null!==o&&mc(t,o,0,e)}_o(e)}function Ay(n,t=null,e=null,r){const i=Iy(n,t,e,r);return i.resolveInjectorInitializers(),i}function Iy(n,t=null,e=null,r,i=new Set){const o=[e||_t,LI(n)];return r=r||("object"==typeof n?void 0:Pt(n)),new my(o,t||Lc(),r||null,i)}let pr=(()=>{class n{static create(e,r){if(Array.isArray(e))return Ay({name:""},r,e,"");{const i=e.name??"";return Ay({name:i},e.parent,e.providers,i)}}}return n.THROW_IF_NOT_FOUND=ha,n.NULL=new uy,n.\u0275prov=xe({token:n,providedIn:"any",factory:()=>le(ly)}),n.__NG_ELEMENT_ID__=-1,n})();function ne(n,t=Ne.Default){const e=me();return null===e?le(n,t):s_(bn(),e,ke(n),t)}function So(){throw new Error("invalid")}function Ny(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const o=e[r+1];if(-1!==o){const s=n.data[o];Ef(e[r]),s.contentQueries(2,t[o],o)}}}function kc(n,t,e,r,i,o,s,a,l,g,I){const j=t.blueprint.slice();return j[Ei]=i,j[Qe]=76|r,(null!==I||n&&1024&n[Qe])&&(j[Qe]|=1024),Nv(j),j[Kt]=j[Jo]=n,j[Yt]=e,j[ac]=s||n&&n[ac],j[Je]=a||n&&n[Je],j[ff]=l||n&&n[ff]||null,j[sc]=g||n&&n[sc]||null,j[Tn]=o,j[ya]=function LA(){return OA++}(),j[wv]=I,j[wn]=2==t.type?n[wn]:j,j}function Es(n,t,e,r,i){let o=n.data[t];if(null===o)o=function Eh(n,t,e,r,i){const o=Vv(),s=vf(),l=n.data[t]=function HR(n,t,e,r,i,o){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,r,i);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(n,t,e,r,i),function VM(){return Ye.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=r,o.attrs=i;const s=function Ea(){const n=Ye.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return qr(o,!0),o}function Ua(n,t,e,r){if(0===e)return-1;const i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function xh(n,t,e){xf(t);try{const r=n.viewQuery;null!==r&&Ph(1,r,e);const i=n.template;null!==i&&By(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ny(n,t),n.staticViewQueries&&Ph(2,n.viewQuery,e);const o=n.components;null!==o&&function BR(n,t){for(let e=0;e<t.length;e++)sP(n,t[e])}(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[Qe]&=-5,Df()}}function Nc(n,t,e,r){const i=t[Qe];if(128!=(128&i)){xf(t);try{Nv(t),function jv(n){return Ye.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&By(n,t,e,2,r);const s=3==(3&i);if(s){const g=n.preOrderCheckHooks;null!==g&&pc(t,g,null)}else{const g=n.preOrderHooks;null!==g&&mc(t,g,0,null),Cf(t,0)}if(function iP(n){for(let t=Wf(n);null!==t;t=zf(t)){if(!t[Mv])continue;const e=t[ts];for(let r=0;r<e.length;r++){const i=e[r];512&i[Qe]||gf(i[Kt],1),i[Qe]|=512}}}(t),function rP(n){for(let t=Wf(n);null!==t;t=zf(t))for(let e=Un;e<t.length;e++){const r=t[e],i=r[Ie];fc(r)&&Nc(i,r,i.template,r[Yt])}}(t),null!==n.contentQueries&&Ny(n,t),s){const g=n.contentCheckHooks;null!==g&&pc(t,g)}else{const g=n.contentHooks;null!==g&&mc(t,g,1),Cf(t,1)}!function kR(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const i=e[r];if(i<0)_o(~i);else{const o=i,s=e[++r],a=e[++r];HM(s,o),a(2,t[o])}}}finally{_o(-1)}}(n,t);const a=n.components;null!==a&&function NR(n,t){for(let e=0;e<t.length;e++)oP(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&Ph(2,l,r),s){const g=n.viewCheckHooks;null!==g&&pc(t,g)}else{const g=n.viewHooks;null!==g&&mc(t,g,2),Cf(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[Qe]&=-41,512&t[Qe]&&(t[Qe]&=-513,gf(t[Kt],-1))}finally{Df()}}}function By(n,t,e,r,i){const o=Hn(),s=2&r;try{_o(-1),s&&t.length>Bt&&Sy(n,t,Bt,!1),Tr(s?2:0,i),e(r,i)}finally{_o(o),Tr(s?3:1,i)}}function Dh(n,t,e){if(pf(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,e[o],o)}}}function Ch(n,t,e){Uv()&&(function $R(n,t,e,r){const i=e.directiveStart,o=e.directiveEnd;ba(e)&&function eP(n,t,e){const r=dr(t,n),i=Uy(e),o=n[ac],s=Bc(n,kc(n,i,null,e.onPush?32:16,r,t,o,o.createRenderer(r,e),null,null,null));n[t.index]=s}(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||yc(e,t),An(r,t);const s=e.initialInputs;for(let a=i;a<o;a++){const l=n.data[a],g=yo(t,n,a,e);An(g,t),null!==s&&tP(0,a-i,g,l,0,s),jr(l)&&(fr(e.index,t)[Yt]=yo(t,n,a,e))}}(n,t,e,dr(e,t)),64==(64&e.flags)&&zy(n,t,e))}function Sh(n,t,e=dr){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?e(t,n):n[s];n[i++]=a}}}function Uy(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Th(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Th(n,t,e,r,i,o,s,a,l,g){const I=Bt+r,j=I+i,X=function UR(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:Xe);return e}(I,j),q="function"==typeof g?g():g;return X[Ie]={type:n,blueprint:X,template:e,queries:null,viewQuery:a,declTNode:t,data:X.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:q,incompleteFirstPass:!1}}function Vy(n,t,e,r){const i=$y(t);null===e?i.push(r):(i.push(e),n.firstCreatePass&&Yy(n).push(r,i.length-1))}function Hy(n,t,e,r){for(let i in n)if(n.hasOwnProperty(i)){e=null===e?{}:e;const o=n[i];null===r?jy(e,t,i,o):r.hasOwnProperty(i)&&jy(e,t,r[i],o)}return e}function jy(n,t,e,r){n.hasOwnProperty(e)?n[e].push(t,r):n[e]=[t,r]}function mr(n,t,e,r,i,o,s,a){const l=dr(t,e);let I,g=t.inputs;!a&&null!=g&&(I=g[r])?(Oh(n,e,I,r,i),ba(t)&&Ky(e,t.index)):3&t.type&&(r=function KR(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(l,r,i))}function Ky(n,t){const e=fr(t,n);16&e[Qe]||(e[Qe]|=32)}function wh(n,t,e,r){if(Uv()){const i=null===r?null:{"":-1},o=function XR(n,t){const e=n.directiveRegistry;let r=null,i=null;if(e)for(let o=0;o<e.length;o++){const s=e[o];if(Dy(t,s.selectors,!1))if(r||(r=[]),jr(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Mh(n,t,a.length)}else r.unshift(s),Mh(n,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,e);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Wy(n,t,e,s,i,a),i&&function ZR(n,t,e){if(t){const r=n.localNames=[];for(let i=0;i<t.length;i+=2){const o=e[t[i+1]];if(null==o)throw new he(-301,!1);r.push(t[i],o)}}}(e,r,i)}e.mergedAttrs=Ca(e.mergedAttrs,e.attrs)}function Wy(n,t,e,r,i,o){for(let g=0;g<r.length;g++)If(yc(e,t),n,r[g].type);!function qR(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let g=0;g<r.length;g++){const I=r[g];I.providersResolver&&I.providersResolver(I)}let s=!1,a=!1,l=Ua(n,t,r.length,null);for(let g=0;g<r.length;g++){const I=r[g];e.mergedAttrs=Ca(e.mergedAttrs,I.hostAttrs),JR(n,e,t,l,I),QR(l,I,i),null!==I.contentQueries&&(e.flags|=4),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(e.flags|=64);const j=I.type.prototype;!s&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),s=!0),!a&&(j.ngOnChanges||j.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function jR(n,t,e){const i=t.directiveEnd,o=n.data,s=t.attrs,a=[];let l=null,g=null;for(let I=t.directiveStart;I<i;I++){const j=o[I],X=e?e.get(j):null,ee=X?X.outputs:null;l=Hy(j.inputs,I,l,X?X.inputs:null),g=Hy(j.outputs,I,g,ee);const ie=null===l||null===s||xy(t)?null:nP(l,I,s);a.push(ie)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=g}(n,e,o)}function zy(n,t,e){const r=e.directiveStart,i=e.directiveEnd,o=e.index,s=function jM(){return Ye.lFrame.currentDirectiveIndex}();try{_o(o);for(let a=r;a<i;a++){const l=n.data[a],g=t[a];yf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&YR(l,g)}}finally{_o(-1),yf(s)}}function YR(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Mh(n,t,e){t.componentOffset=e,(n.components||(n.components=[])).push(t.index)}function QR(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;jr(t)&&(e[""]=n)}}function JR(n,t,e,r,i){n.data[r]=i;const o=i.factory||(i.factory=vo(i.type)),s=new Da(o,jr(i),ne);n.blueprint[r]=s,e[r]=s,function zR(n,t,e,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~t.index;(function GR(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,o)}}(n,t,r,Ua(n,e,i.hostVars,Xe),i)}function ni(n,t,e,r,i,o){const s=dr(n,t);!function Ah(n,t,e,r,i,o,s){if(null==o)n.removeAttribute(t,i,e);else{const a=null==s?$e(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}(t[Je],s,o,n.value,e,r,i)}function tP(n,t,e,r,i,o){const s=o[t];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const g=s[l++],I=s[l++],j=s[l++];null!==a?r.setInput(e,j,g,I):e[I]=j}}}function nP(n,t,e){let r=null,i=0;for(;i<e.length;){const o=e[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],e[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Gy(n,t,e,r){return[n,!0,!1,t,null,0,r,e,null,null]}function oP(n,t){const e=fr(t,n);if(fc(e)){const r=e[Ie];48&e[Qe]?Nc(r,e,r.template,e[Yt]):e[go]>0&&Ih(e)}}function Ih(n){for(let r=Wf(n);null!==r;r=zf(r))for(let i=Un;i<r.length;i++){const o=r[i];if(fc(o))if(512&o[Qe]){const s=o[Ie];Nc(s,o,s.template,o[Yt])}else o[go]>0&&Ih(o)}const e=n[Ie].components;if(null!==e)for(let r=0;r<e.length;r++){const i=fr(e[r],n);fc(i)&&i[go]>0&&Ih(i)}}function sP(n,t){const e=fr(t,n),r=e[Ie];(function aP(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),xh(r,e,e[Yt])}function Bc(n,t){return n[va]?n[Tv][Vr]=t:n[va]=t,n[Tv]=t,t}function Rh(n){for(;n;){n[Qe]|=32;const t=Pa(n);if(xM(n)&&!t)return n;n=t}return null}function Uc(n,t,e,r=!0){const i=t[ac];i.begin&&i.begin();try{Nc(n,t,n.template,e)}catch(s){throw r&&Zy(t,s),s}finally{i.end&&i.end()}}function Ph(n,t,e){Ef(0),t(n,e)}function $y(n){return n[qo]||(n[qo]=[])}function Yy(n){return n.cleanup||(n.cleanup=[])}function Zy(n,t){const e=n[sc],r=e?e.get(_s,null):null;r&&r.handleError(t)}function Oh(n,t,e,r,i){for(let o=0;o<e.length;){const s=e[o++],a=e[o++],l=t[s],g=n.data[s];null!==g.setInput?g.setInput(l,i,r,a):l[a]=i}}function wi(n,t,e){const r=dc(t,n);!function L_(n,t,e){n.setValue(t,e)}(n[Je],r,e)}function Vc(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=tf(i,a):2==o&&(r=tf(r,a+": "+t[++s]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function Hc(n,t,e,r,i=!1){for(;null!==e;){const o=t[e.index];if(null!==o&&r.push(yn(o)),Hr(o))for(let a=Un;a<o.length;a++){const l=o[a],g=l[Ie].firstChild;null!==g&&Hc(l[Ie],l,g,r)}const s=e.type;if(8&s)Hc(n,t,e.child,r);else if(32&s){const a=Kf(e,t);let l;for(;l=a();)r.push(l)}else if(16&s){const a=z_(t,e);if(Array.isArray(a))r.push(...a);else{const l=Pa(t[wn]);Hc(l[Ie],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}class Va{get rootNodes(){const t=this._lView,e=t[Ie];return Hc(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yt]}set context(t){this._lView[Yt]=t}get destroyed(){return 128==(128&this._lView[Qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Kt];if(Hr(t)){const e=t[cc],r=e?e.indexOf(this):-1;r>-1&&(Yf(t,r),Ec(e,r))}this._attachedToViewContainer=!1}k_(this._lView[Ie],this._lView)}onDestroy(t){Vy(this._lView[Ie],this._lView,null,t)}markForCheck(){Rh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qe]&=-65}reattach(){this._lView[Qe]|=64}detectChanges(){Uc(this._lView[Ie],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function XA(n,t){Oa(n,t,t[Je],2,null,null)}(this._lView[Ie],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=t}}class lP extends Va{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Uc(t[Ie],t,t[Yt],!1)}checkNoChanges(){}get context(){return null}}class Qy extends gs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ct(t);return new Ha(e,this.ngModule)}}function qy(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class uP{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=ic(r);const i=this.injector.get(t,ph,r);return i!==ph||e===ph?i:this.parentInjector.get(t,e,r)}}class Ha extends vy{get inputs(){return qy(this.componentDef.inputs)}get outputs(){return qy(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function gR(n){return n.map(mR).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,i){let o=(i=i||this.ngModule)instanceof ti?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new uP(t,o):t,a=s.get(Ba,null);if(null===a)throw new he(407,!1);const l=s.get(XI,null),g=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",j=r?function VR(n,t,e){return n.selectRootElement(t,e===Ur.ShadowDom)}(g,r,this.componentDef.encapsulation):$f(g,I,function cP(n){const t=n.toLowerCase();return"svg"===t?Lv:"math"===t?"math":null}(I)),X=this.componentDef.onPush?288:272,q=Th(0,null,null,1,0,null,null,null,null,null),ee=kc(null,q,null,X,null,null,a,g,l,s,null);let ie,se;xf(ee);try{const ae=this.componentDef;let ye,de=null;ae.findHostDirectiveDefs?(ye=[],de=new Map,ae.findHostDirectiveDefs(ae,ye,de),ye.push(ae)):ye=[ae];const Ae=function fP(n,t){const e=n[Ie],r=Bt;return n[r]=t,Es(e,r,2,"#host",null)}(ee,j),dt=function hP(n,t,e,r,i,o,s,a){const l=i[Ie];!function pP(n,t,e,r){for(const i of n)t.mergedAttrs=Ca(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Vc(t,t.mergedAttrs,!0),null!==e&&Y_(r,e,t))}(r,n,t,s);const g=o.createRenderer(t,e),I=kc(i,Uy(e),null,e.onPush?32:16,i[n.index],n,o,g,a||null,null,null);return l.firstCreatePass&&Mh(l,n,r.length-1),Bc(i,I),i[n.index]=I}(Ae,j,ae,ye,ee,a,g);se=kv(q,Bt),j&&function gP(n,t,e,r){if(r)Tf(n,e,["ng-version",ZI.full]);else{const{attrs:i,classes:o}=function vR(n){const t=[],e=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&t.push(o,n[++r]):8===i&&e.push(o);else{if(!Kr(i))break;i=o}r++}return{attrs:t,classes:e}}(t.selectors[0]);i&&Tf(n,e,i),o&&o.length>0&&$_(n,e,o.join(" "))}}(g,ae,j,r),void 0!==e&&function vP(n,t,e){const r=n.projection=[];for(let i=0;i<t.length;i++){const o=e[i];r.push(null!=o?Array.from(o):null)}}(se,this.ngContentSelectors,e),ie=function mP(n,t,e,r,i,o){const s=bn(),a=i[Ie],l=dr(s,i);Wy(a,i,s,e,null,r);for(let I=0;I<e.length;I++)An(yo(i,a,s.directiveStart+I,s),i);zy(a,i,s),l&&An(l,i);const g=yo(i,a,s.directiveStart+s.componentOffset,s);if(n[Yt]=i[Yt]=g,null!==o)for(const I of o)I(g,t);return Dh(a,s,n),g}(dt,ae,ye,de,ee,[_P]),xh(q,ee,null)}finally{Df()}return new dP(this.componentType,ie,vs(se,ee),ee,se)}}class dP extends KI{constructor(t,e,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=e,this.hostView=this.changeDetectorRef=new lP(i),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const o=this._rootLView;Oh(o[Ie],o,i,t,e),Ky(o,this._tNode.index)}}get injector(){return new os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function _P(){const n=bn();hc(me()[Ie],n)}function Ke(n){let t=function Jy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let i;if(jr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new he(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);const s=n;s.inputs=Lh(n.inputs),s.declaredInputs=Lh(n.declaredInputs),s.outputs=Lh(n.outputs);const a=i.hostBindings;a&&xP(n,a);const l=i.viewQuery,g=i.contentQueries;if(l&&bP(n,l),g&&EP(n,g),ef(n.inputs,i.inputs),ef(n.declaredInputs,i.declaredInputs),ef(n.outputs,i.outputs),jr(i)&&i.data.animation){const I=n.data;I.animation=(I.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Ke&&(e=!1)}}t=Object.getPrototypeOf(t)}!function yP(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Ca(i.hostAttrs,e=Ca(e,i.hostAttrs))}}(r)}function Lh(n){return n===yi?{}:n===_t?[]:n}function bP(n,t){const e=n.viewQuery;n.viewQuery=e?(r,i)=>{t(r,i),e(r,i)}:t}function EP(n,t){const e=n.contentQueries;n.contentQueries=e?(r,i,o)=>{t(r,i,o),e(r,i,o)}:t}function xP(n,t){const e=n.hostBindings;n.hostBindings=e?(r,i)=>{t(r,i),e(r,i)}:t}function jc(n){return!!Fh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Fh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ri(n,t,e){return n[t]=e}function In(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function To(n,t,e,r){const i=In(n,t,e);return In(n,t+1,r)||i}function yt(n,t,e,r){const i=me();return In(i,rs(),t)&&(ut(),ni(Vt(),i,n,t,e,r)),yt}function Ds(n,t,e,r){return In(n,rs(),e)?t+$e(e)+r:Xe}function Cs(n,t,e,r,i,o){const a=To(n,function xi(){return Ye.lFrame.bindingIndex}(),e,i);return Di(2),a?t+$e(e)+r+$e(i)+o:Xe}function Be(n,t,e,r,i,o,s,a){const l=me(),g=ut(),I=n+Bt,j=g.firstCreatePass?function PP(n,t,e,r,i,o,s,a,l){const g=t.consts,I=Es(t,n,4,s||null,Yi(g,a));wh(t,e,I,Yi(g,l)),hc(t,I);const j=I.tView=Th(2,I,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,g);return null!==t.queries&&(t.queries.template(t,I),j.queries=t.queries.embeddedTView(I)),I}(I,g,l,t,e,r,i,o,s):g.data[I];qr(j,!1);const X=l[Je].createComment("");wc(g,l,X,j),An(X,l),Bc(l,l[I]=Gy(X,l,X,j)),uc(j)&&Ch(g,l,j),null!=s&&Sh(l,j,a)}function Rs(n){return ns(function UM(){return Ye.lFrame.contextLView}(),Bt+n)}function Ee(n,t,e){const r=me();return In(r,rs(),t)&&mr(ut(),Vt(),r,n,t,r[Je],e,!1),Ee}function kh(n,t,e,r,i){const s=i?"class":"style";Oh(n,e,t.inputs[s],s,r)}function ve(n,t,e,r){const i=me(),o=ut(),s=Bt+n,a=i[Je],l=o.firstCreatePass?function LP(n,t,e,r,i,o){const s=t.consts,l=Es(t,n,2,r,Yi(s,i));return wh(t,e,l,Yi(s,o)),null!==l.attrs&&Vc(l,l.attrs,!1),null!==l.mergedAttrs&&Vc(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,o,i,t,e,r):o.data[s],g=i[s]=$f(a,t,function YM(){return Ye.lFrame.currentNamespace}()),I=uc(l);return qr(l,!0),Y_(a,g,l),32!=(32&l.flags)&&wc(o,i,g,l),0===function LM(){return Ye.lFrame.elementDepthCount}()&&An(g,i),function FM(){Ye.lFrame.elementDepthCount++}(),I&&(Ch(o,i,l),Dh(o,l,i)),null!==r&&Sh(i,l),ve}function ge(){let n=bn();vf()?_f():(n=n.parent,qr(n,!1));const t=n;!function kM(){Ye.lFrame.elementDepthCount--}();const e=ut();return e.firstCreatePass&&(hc(e,n),pf(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function qM(n){return 0!=(8&n.flags)}(t)&&kh(e,t,me(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function JM(n){return 0!=(16&n.flags)}(t)&&kh(e,t,me(),t.stylesWithoutHost,!1),ge}function nt(n,t,e,r){return ve(n,t,e,r),ge(),nt}function wo(n,t,e){const r=me(),i=ut(),o=n+Bt,s=i.firstCreatePass?function FP(n,t,e,r,i){const o=t.consts,s=Yi(o,r),a=Es(t,n,8,"ng-container",s);return null!==s&&Vc(a,s,!0),wh(t,e,a,Yi(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,i,r,t,e):i.data[o];qr(s,!0);const a=r[o]=r[Je].createComment("");return wc(i,r,a,s),An(a,r),uc(s)&&(Ch(i,r,s),Dh(i,s,r)),null!=e&&Sh(r,s),wo}function Mo(){let n=bn();const t=ut();return vf()?_f():(n=n.parent,qr(n,!1)),t.firstCreatePass&&(hc(t,n),pf(n)&&t.queries.elementEnd(n)),Mo}function Ka(n,t,e){return wo(n,t,e),Mo(),Ka}function ii(){return me()}function Wa(n){return!!n&&"function"==typeof n.then}function h0(n){return!!n&&"function"==typeof n.subscribe}const Nh=h0;function ft(n,t,e,r){const i=me(),o=ut(),s=bn();return function m0(n,t,e,r,i,o,s){const a=uc(r),g=n.firstCreatePass&&Yy(n),I=t[Yt],j=$y(t);let X=!0;if(3&r.type||s){const ie=dr(r,t),se=s?s(ie):ie,ae=j.length,ye=s?Ae=>s(yn(Ae[r.index])):r.index;let de=null;if(!s&&a&&(de=function kP(n,t,e,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===e&&i[o+1]===r){const a=t[qo],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,t,i,r.index)),null!==de)(de.__ngLastListenerFn__||de).__ngNextListenerFn__=o,de.__ngLastListenerFn__=o,X=!1;else{o=v0(r,t,I,o,!1);const Ae=e.listen(se,i,o);j.push(o,Ae),g&&g.push(i,ye,ae,ae+1)}}else o=v0(r,t,I,o,!1);const q=r.outputs;let ee;if(X&&null!==q&&(ee=q[i])){const ie=ee.length;if(ie)for(let se=0;se<ie;se+=2){const dt=t[ee[se]][ee[se+1]].subscribe(o),mt=j.length;j.push(o,dt),g&&g.push(i,r.index,mt,-(mt+1))}}}(o,i,i[Je],s,n,t,r),ft}function g0(n,t,e,r){try{return Tr(6,t,e),!1!==e(r)}catch(i){return Zy(n,i),!1}finally{Tr(7,t,e)}}function v0(n,t,e,r,i){return function o(s){if(s===Function)return r;Rh(n.componentOffset>-1?fr(n.index,t):t);let l=g0(t,e,r,s),g=o.__ngNextListenerFn__;for(;g;)l=g0(t,e,g,s)&&l,g=g.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function ze(n=1){return function WM(n){return(Ye.lFrame.contextLView=function zM(n,t){for(;n>0;)t=t[Jo],n--;return t}(n,Ye.lFrame.contextLView))[Yt]}(n)}function NP(n,t){let e=null;const r=function dR(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let i=0;i<t.length;i++){const o=t[i];if("*"!==o){if(null===r?Dy(n,o,!0):pR(r,o))return i}else e=i}return e}function qn(n){const t=me()[wn][Tn];if(!t.projection){const r=t.projection=Ma(n?n.length:1,null),i=r.slice();let o=t.child;for(;null!==o;){const s=n?NP(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function ht(n,t=0,e){const r=me(),i=ut(),o=Es(i,Bt+n,16,null,e||null);null===o.projection&&(o.projection=t),_f(),32!=(32&o.flags)&&function rI(n,t,e){G_(t[Je],0,t,e,N_(n,e,t),H_(e.parent||t[Tn],e,t))}(i,r,o)}function Bh(n,t,e){return Uh(n,"",t,"",e),Bh}function Uh(n,t,e,r,i){const o=me(),s=Ds(o,t,e,r);return s!==Xe&&mr(ut(),Vt(),o,n,s,o[Je],i,!1),Uh}function Wc(n,t){return n<<17|t<<2}function Zi(n){return n>>17&32767}function Vh(n){return 2|n}function Ao(n){return(131068&n)>>2}function Hh(n,t){return-131069&n|t<<2}function jh(n){return 1|n}function T0(n,t,e,r,i){const o=n[e+1],s=null===t;let a=r?Zi(o):Ao(o),l=!1;for(;0!==a&&(!1===l||s);){const I=n[a+1];KP(n[a],t)&&(l=!0,n[a+1]=r?jh(I):Vh(I)),a=r?Zi(I):Ao(I)}l&&(n[e+1]=r?Vh(o):jh(o))}function KP(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&us(n,t)>=0}const dn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function w0(n){return n.substring(dn.key,dn.keyEnd)}function M0(n,t){const e=dn.textEnd;return e===t?-1:(t=dn.keyEnd=function $P(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,dn.key=t,e),Ps(n,t,e))}function Ps(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function oi(n,t,e){return Wr(n,t,e,!1),oi}function St(n,t){return Wr(n,t,null,!0),St}function ai(n,t){for(let e=function zP(n){return function I0(n){dn.key=0,dn.keyEnd=0,dn.value=0,dn.valueEnd=0,dn.textEnd=n.length}(n),M0(n,Ps(n,0,dn.textEnd))}(t);e>=0;e=M0(t,e))hr(n,w0(t),!0)}function Wr(n,t,e,r){const i=me(),o=ut(),s=Di(2);o.firstUpdatePass&&L0(o,n,s,r),t!==Xe&&In(i,s,t)&&k0(o,o.data[Hn()],i,i[Je],n,i[s+1]=function iO(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Pt(Xi(n)))),n}(t,e),r,s)}function O0(n,t){return t>=n.expandoStartIndex}function L0(n,t,e,r){const i=n.data;if(null===i[e+1]){const o=i[Hn()],s=O0(n,e);B0(o,r)&&null===t&&!s&&(t=!1),t=function qP(n,t,e,r){const i=function bf(n){const t=Ye.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(e=za(e=Kh(null,n,t,e,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==i)if(e=Kh(i,n,t,e,r),null===o){let l=function JP(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==Ao(r))return n[Zi(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=Kh(null,n,t,l[1],r),l=za(l,t.attrs,r),function eO(n,t,e,r){n[Zi(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else o=function tO(n,t,e){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=za(r,n[o].hostAttrs,e);return za(r,t.attrs,e)}(n,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),e}(i,o,t,r),function HP(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Zi(s),l=Ao(s);n[r]=e;let I,g=!1;if(Array.isArray(e)?(I=e[1],(null===I||us(e,I)>0)&&(g=!0)):I=e,i)if(0!==l){const X=Zi(n[a+1]);n[r+1]=Wc(X,a),0!==X&&(n[X+1]=Hh(n[X+1],r)),n[a+1]=function UP(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=Wc(a,0),0!==a&&(n[a+1]=Hh(n[a+1],r)),a=r;else n[r+1]=Wc(l,0),0===a?a=r:n[l+1]=Hh(n[l+1],r),l=r;g&&(n[r+1]=Vh(n[r+1])),T0(n,I,r,!0),T0(n,I,r,!1),function jP(n,t,e,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof t&&us(o,t)>=0&&(e[r+1]=jh(e[r+1]))}(t,I,n,r,o),s=Wc(a,l),o?t.classBindings=s:t.styleBindings=s}(i,o,t,e,s,r)}}function Kh(n,t,e,r,i){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],r=za(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function za(n,t,e){const r=e?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),hr(n,s,!!e||t[++o]))}return void 0===n?null:n}function k0(n,t,e,r,i,o,s,a){if(!(3&t.type))return;const l=n.data,g=l[a+1],I=function VP(n){return 1==(1&n)}(g)?N0(l,t,e,i,Ao(g),s):void 0;zc(I)||(zc(o)||function BP(n){return 2==(2&n)}(g)&&(o=N0(l,null,e,i,a,s)),function oI(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=-1===r.indexOf("-")?void 0:Zn.DashCase;null==i?n.removeStyle(e,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Zn.Important),n.setStyle(e,r,i,o))}}(r,s,dc(Hn(),e),i,o))}function N0(n,t,e,r,i,o){const s=null===t;let a;for(;i>0;){const l=n[i],g=Array.isArray(l),I=g?l[1]:l,j=null===I;let X=e[i+1];X===Xe&&(X=j?_t:void 0);let q=j?Lf(X,r):I===r?X:void 0;if(g&&!zc(q)&&(q=Lf(l,r)),zc(q)&&(a=q,s))return a;const ee=n[i+1];i=s?Zi(ee):Ao(ee)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=Lf(l,r))}return a}function zc(n){return void 0!==n}function B0(n,t){return 0!=(n.flags&(t?8:16))}function We(n,t=""){const e=me(),r=ut(),i=n+Bt,o=r.firstCreatePass?Es(r,i,1,t,null):r.data[i],s=e[i]=function Gf(n,t){return n.createText(t)}(e[Je],t);wc(r,e,s,o),qr(o,!1)}function Rr(n){return mn("",n,""),Rr}function mn(n,t,e){const r=me(),i=Ds(r,n,t,e);return i!==Xe&&wi(r,Hn(),i),mn}function Wh(n,t,e,r,i){const o=me(),s=Cs(o,n,t,e,r,i);return s!==Xe&&wi(o,Hn(),s),Wh}function G0(n,t,e){!function zr(n,t,e,r){const i=ut(),o=Di(2);i.firstUpdatePass&&L0(i,null,o,r);const s=me();if(e!==Xe&&In(s,o,e)){const a=i.data[Hn()];if(B0(a,r)&&!O0(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=tf(l,e||"")),kh(i,a,s,e,r)}else!function rO(n,t,e,r,i,o,s,a){i===Xe&&(i=_t);let l=0,g=0,I=0<i.length?i[0]:null,j=0<o.length?o[0]:null;for(;null!==I||null!==j;){const X=l<i.length?i[l+1]:void 0,q=g<o.length?o[g+1]:void 0;let ie,ee=null;I===j?(l+=2,g+=2,X!==q&&(ee=j,ie=q)):null===j||null!==I&&I<j?(l+=2,ee=I):(g+=2,ee=j,ie=q),null!==ee&&k0(n,t,e,r,ee,ie,s,a),I=l<i.length?i[l]:null,j=g<o.length?o[g]:null}}(i,a,s,s[Je],s[o+1],s[o+1]=function nO(n,t,e){if(null==e||""===e)return _t;const r=[],i=Xi(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(n,t,e),r,o)}}(hr,ai,Ds(me(),n,t,e),!0)}function Ga(n,t,e){const r=me();return In(r,rs(),t)&&mr(ut(),Vt(),r,n,t,r[Je],e,!0),Ga}const Io=void 0;var DO=["en",[["a","p"],["AM","PM"],Io],[["AM","PM"],Io,Io],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Io,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Io,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Io,"{1} 'at' {0}",Io],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xO(n){const e=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===r?1:5}];let Os={};function jn(n){const t=function CO(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=ib(t);if(e)return e;const r=t.split("-")[0];if(e=ib(r),e)return e;if("en"===r)return DO;throw new he(701,!1)}function ib(n){return n in Os||(Os[n]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[n]),Os[n]}var Me=(()=>((Me=Me||{})[Me.LocaleId=0]="LocaleId",Me[Me.DayPeriodsFormat=1]="DayPeriodsFormat",Me[Me.DayPeriodsStandalone=2]="DayPeriodsStandalone",Me[Me.DaysFormat=3]="DaysFormat",Me[Me.DaysStandalone=4]="DaysStandalone",Me[Me.MonthsFormat=5]="MonthsFormat",Me[Me.MonthsStandalone=6]="MonthsStandalone",Me[Me.Eras=7]="Eras",Me[Me.FirstDayOfWeek=8]="FirstDayOfWeek",Me[Me.WeekendRange=9]="WeekendRange",Me[Me.DateFormat=10]="DateFormat",Me[Me.TimeFormat=11]="TimeFormat",Me[Me.DateTimeFormat=12]="DateTimeFormat",Me[Me.NumberSymbols=13]="NumberSymbols",Me[Me.NumberFormats=14]="NumberFormats",Me[Me.CurrencyCode=15]="CurrencyCode",Me[Me.CurrencySymbol=16]="CurrencySymbol",Me[Me.CurrencyName=17]="CurrencyName",Me[Me.Currencies=18]="Currencies",Me[Me.Directionality=19]="Directionality",Me[Me.PluralCase=20]="PluralCase",Me[Me.ExtraData=21]="ExtraData",Me))();const Ls="en-US";let ob=Ls;function $h(n,t,e,r,i){if(n=ke(n),Array.isArray(n))for(let o=0;o<n.length;o++)$h(n[o],t,e,r,i);else{const o=ut(),s=me();let a=Do(n)?n:ke(n.provide),l=gy(n);const g=bn(),I=1048575&g.providerIndexes,j=g.directiveStart,X=g.providerIndexes>>20;if(Do(n)||!n.multi){const q=new Da(l,i,ne),ee=Xh(a,t,i?I:I+X,j);-1===ee?(If(yc(g,s),o,a),Yh(o,n,t.length),t.push(a),g.directiveStart++,g.directiveEnd++,i&&(g.providerIndexes+=1048576),e.push(q),s.push(q)):(e[ee]=q,s[ee]=q)}else{const q=Xh(a,t,I+X,j),ee=Xh(a,t,I,I+X),se=ee>=0&&e[ee];if(i&&!se||!i&&!(q>=0&&e[q])){If(yc(g,s),o,a);const ae=function EL(n,t,e,r,i){const o=new Da(n,e,ne);return o.multi=[],o.index=t,o.componentProviders=0,Ib(o,i,r&&!e),o}(i?bL:yL,e.length,i,r,l);!i&&se&&(e[ee].providerFactory=ae),Yh(o,n,t.length,0),t.push(a),g.directiveStart++,g.directiveEnd++,i&&(g.providerIndexes+=1048576),e.push(ae),s.push(ae)}else Yh(o,n,q>-1?q:ee,Ib(e[i?ee:q],l,!i&&r));!i&&r&&se&&e[ee].componentProviders++}}}function Yh(n,t,e,r){const i=Do(t),o=function kI(n){return!!n.useClass}(t);if(i||o){const l=(o?ke(t.useClass):t).prototype.ngOnDestroy;if(l){const g=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){const I=g.indexOf(e);-1===I?g.push(e,[r,l]):g[I+1].push(r,l)}else g.push(e,l)}}}function Ib(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Xh(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function yL(n,t,e,r){return Zh(this.multi,[])}function bL(n,t,e,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=yo(e,e[Ie],this.providerFactory.index,r);o=a.slice(0,s),Zh(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Zh(i,o);return o}function Zh(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function At(n,t=[]){return e=>{e.providersResolver=(r,i)=>function _L(n,t,e){const r=ut();if(r.firstCreatePass){const i=jr(n);$h(e,r.data,r.blueprint,i,!0),$h(t,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,t)}}class Fs{}class Rb{}class Pb extends Fs{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qy(this);const r=cr(t);this._bootstrapComponents=Ti(r.bootstrap),this._r3Injector=Iy(t,e,[{provide:Fs,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],Pt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Qh extends Rb{constructor(t){super(),this.moduleType=t}create(t){return new Pb(this.moduleType,t)}}class DL extends Fs{constructor(t,e,r){super(),this.componentFactoryResolver=new Qy(this),this.instance=null;const i=new my([...t,{provide:Fs,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],e||Lc(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Zc(n,t,e=null){return new DL(n,t,e).injector}let CL=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=dy(0,e.type),i=r.length>0?Zc([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,i)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=xe({token:n,providedIn:"environment",factory:()=>new n(le(ti))}),n})();function qh(n){n.getStandaloneInjector=t=>t.get(CL).getOrCreateStandaloneInjector(n)}function qa(n,t){const e=n[t];return e===Xe?void 0:e}function Hb(n,t,e,r,i,o){const s=t+e;return In(n,s,i)?ri(n,s+1,o?r.call(o,i):r(i)):qa(n,s+1)}function Ro(n,t){const e=ut();let r;const i=n+Bt;e.firstCreatePass?(r=function HL(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}}(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(i,r.onDestroy)):r=e.data[i];const o=r.factory||(r.factory=vo(r.type)),s=Sr(ne);try{const a=_c(!1),l=o();return _c(a),function OP(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,me(),i,l),l}finally{Sr(s)}}function ks(n,t,e){const r=n+Bt,i=me(),o=ns(i,r);return Ja(i,r)?Hb(i,Vn(),t,o.transform,e,o):o.transform(e)}function Gb(n,t,e,r){const i=n+Bt,o=me(),s=ns(o,i);return Ja(o,i)?function jb(n,t,e,r,i,o,s){const a=t+e;return To(n,a,i,o)?ri(n,a+2,s?r.call(s,i,o):r(i,o)):qa(n,a+2)}(o,Vn(),t,s.transform,e,r,s):s.transform(e,r)}function Ja(n,t){return n[Ie].data[t].pure}function ep(n){return t=>{setTimeout(n,void 0,t)}}const it=class zL extends N{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&"object"==typeof t){const l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=ep(o),i&&(i=ep(i)),s&&(s=ep(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof P&&t.add(a),a}};function GL(){return this._results[Symbol.iterator]()}class el{get changes(){return this._changes||(this._changes=new it)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=el.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=GL)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const i=function Ar(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function cA(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}(r._results,i,e))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let li=(()=>{class n{}return n.__NG_ELEMENT_ID__=XL,n})();const $L=li,YL=class extends $L{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t,e){const r=this._declarationTContainer.tView,i=kc(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,e||null);i[_a]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[Qr];return null!==s&&(i[Qr]=s.createEmbeddedView(r)),xh(r,i,t),new Va(i)}};function XL(){return Qc(bn(),me())}function Qc(n,t){return 4&n.type?new YL(t,n,vs(n,t)):null}let gr=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZL,n})();function ZL(){return Xb(bn(),me())}const QL=gr,$b=class extends QL{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return vs(this._hostTNode,this._hostLView)}get injector(){return new os(this._hostTNode,this._hostLView)}get parentInjector(){const t=Af(this._hostTNode,this._hostLView);if(e_(t)){const e=vc(t,this._hostLView),r=gc(t);return new os(e[Ie].data[r+8],e)}return new os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Yb(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Un}createEmbeddedView(t,e,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=t.createEmbeddedView(e||{},o);return this.insert(s,i),s}createComponent(t,e,r,i,o){const s=t&&!function wa(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const j=e||{};a=j.index,r=j.injector,i=j.projectableNodes,o=j.environmentInjector||j.ngModuleRef}const l=s?t:new Ha(Ct(t)),g=r||this.parentInjector;if(!o&&null==l.ngModule){const X=(s?g:this.parentInjector).get(ti,null);X&&(o=X)}const I=l.create(g,i,void 0,o);return this.insert(I.hostView,a),I}insert(t,e){const r=t._lView,i=r[Ie];if(function OM(n){return Hr(n[Kt])}(r)){const I=this.indexOf(t);if(-1!==I)this.detach(I);else{const j=r[Kt],X=new $b(j,j[Tn],j[Kt]);X.detach(X.indexOf(t))}}const o=this._adjustIndex(e),s=this._lContainer;!function QA(n,t,e,r){const i=Un+r,o=e.length;r>0&&(e[i-1][Vr]=t),r<o-Un?(t[Vr]=e[i],f_(e,Un+r,t)):(e.push(t),t[Vr]=null),t[Kt]=e;const s=t[_a];null!==s&&e!==s&&function qA(n,t){const e=n[ts];t[wn]!==t[Kt][Kt][wn]&&(n[Mv]=!0),null===e?n[ts]=[t]:e.push(t)}(s,t);const a=t[Qr];null!==a&&a.insertView(n),t[Qe]|=64}(i,r,s,o);const a=Qf(o,s),l=r[Je],g=Tc(l,s[lc]);return null!==g&&function YA(n,t,e,r,i,o){r[Ei]=i,r[Tn]=t,Oa(n,r,e,1,i,o)}(i,s[Tn],l,r,g,a),t.attachToViewContainerRef(),f_(tp(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Yb(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Yf(this._lContainer,e);r&&(Ec(tp(this._lContainer),e),k_(r[Ie],r))}detach(t){const e=this._adjustIndex(t,-1),r=Yf(this._lContainer,e);return r&&null!=Ec(tp(this._lContainer),e)?new Va(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Yb(n){return n[cc]}function tp(n){return n[cc]||(n[cc]=[])}function Xb(n,t){let e;const r=t[n.index];if(Hr(r))e=r;else{let i;if(8&n.type)i=yn(r);else{const o=t[Je];i=o.createComment("");const s=dr(n,t);xo(o,Tc(o,s),i,function nI(n,t){return n.nextSibling(t)}(o,s),!1)}t[n.index]=e=Gy(r,t,i,n),Bc(t,e)}return new $b(e,n,t)}class np{constructor(t){this.queryList=t,this.matches=null}clone(){return new np(this.queryList)}setDirty(){this.queryList.setDirty()}}class rp{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){const s=e.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new rp(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==eE(t,e).matches&&this.queries[e].setDirty()}}class Zb{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class ip{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==e?e.push(o):e=[o])}return null!==e?new ip(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class op{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new op(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,e,qL(e,o)),this.matchTNodeWithReadOption(t,e,bc(e,t,o,!1,!1))}else r===li?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,bc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===tt||i===gr||i===li&&4&e.type)this.addMatch(e.index,-2);else{const o=bc(e,t,i,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function qL(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function e1(n,t,e,r){return-1===e?function JL(n,t){return 11&n.type?vs(n,t):4&n.type?Qc(n,t):null}(t,n):-2===e?function t1(n,t,e){return e===tt?vs(t,n):e===li?Qc(t,n):e===gr?Xb(t,n):void 0}(n,t,r):yo(n,n[Ie],e,t)}function Qb(n,t,e,r){const i=t[Qr].queries[r];if(null===i.matches){const o=n.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const g=s[l];a.push(g<0?null:e1(t,o[g],s[l+1],e.metadata.read))}i.matches=a}return i.matches}function sp(n,t,e,r){const i=n.queries.getByIndex(e),o=i.matches;if(null!==o){const s=Qb(n,t,i,e);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)r.push(s[a/2]);else{const g=o[a+1],I=t[-l];for(let j=Un;j<I.length;j++){const X=I[j];X[_a]===X[Kt]&&sp(X[Ie],X,g,r)}if(null!==I[ts]){const j=I[ts];for(let X=0;X<j.length;X++){const q=j[X];sp(q[Ie],q,g,r)}}}}}return r}function Tt(n){const t=me(),e=ut(),r=Wv();Ef(r+1);const i=eE(e,r);if(n.dirty&&function PM(n){return 4==(4&n[Qe])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?sp(e,t,r,[]):Qb(e,t,i,r);n.reset(o,$I),n.notifyOnChanges()}return!0}return!1}function gn(n,t,e){const r=ut();r.firstCreatePass&&(Jb(r,new Zb(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),qb(r,me(),t)}function vr(n,t,e,r){const i=ut();if(i.firstCreatePass){const o=bn();Jb(i,new Zb(t,e,r),o.index),function r1(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(i,n),2==(2&e)&&(i.staticContentQueries=!0)}qb(i,me(),e)}function wt(){return function n1(n,t){return n[Qr].queries[t].queryList}(me(),Wv())}function qb(n,t,e){const r=new el(4==(4&e));Vy(n,t,r,r.destroy),null===t[Qr]&&(t[Qr]=new rp),t[Qr].queries.push(new np(r))}function Jb(n,t,e){null===n.queries&&(n.queries=new ip),n.queries.track(new op(t,e))}function eE(n,t){return n.queries.getByIndex(t)}function qc(n,t){return Qc(n,t)}function eu(...n){}const tu=new _e("Application Initializer");let nu=(()=>{class n{constructor(e){this.appInits=e,this.resolve=eu,this.reject=eu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Wa(o))e.push(o);else if(Nh(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(le(tu,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Us=new _e("AppId",{providedIn:"root",factory:function _E(){return`${fp()}${fp()}${fp()}`}});function fp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yE=new _e("Platform Initializer"),ru=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_r=new _e("AnimationModuleType");let C1=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ci=new _e("LocaleId",{providedIn:"root",factory:()=>je(ci,Ne.Optional|Ne.SkipSelf)||function S1(){return typeof $localize<"u"&&$localize.locale||Ls}()});class w1{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let bE=(()=>{class n{compileModuleSync(e){return new Qh(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),o=Ti(cr(e).declarations).reduce((s,a)=>{const l=Ct(a);return l&&s.push(new Ha(l)),s},[]);return new w1(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I1=(()=>Promise.resolve(0))();function hp(n){typeof Zone>"u"?I1.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ue{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function R1(){let n=Nt.requestAnimationFrame,t=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function L1(n){const t=()=>{!function O1(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Nt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,mp(n),n.isCheckStableRunning=!0,pp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),mp(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,o,s,a)=>{try{return DE(n),e.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&t(),CE(n)}},onInvoke:(e,r,i,o,s,a,l)=>{try{return DE(n),e.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),CE(n)}},onHasTask:(e,r,i,o)=>{e.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,mp(n),pp(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,r,i,o)=>(e.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ue.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(Ue.isInAngularZone())throw new he(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,P1,eu,eu);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const P1={};function pp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function mp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function DE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CE(n){n._nesting--,pp(n)}class F1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}}const SE=new _e(""),iu=new _e("");let _p,gp=(()=>{class n{constructor(e,r,i){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_p||(function k1(n){_p=n}(i),i.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ue.assertNotInAngularZone(),hp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hp(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,i){return[]}}return n.\u0275fac=function(e){return new(e||n)(le(Ue),le(vp),le(iu))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),vp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return _p?.findTestabilityInTree(this,e,r)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Mi=!1;let Qi=null;const TE=new _e("AllowMultipleToken"),yp=new _e("PlatformDestroyListeners"),wE=new _e("appBootstrapListener");class ME{constructor(t,e){this.name=t,this.token=e}}function IE(n,t,e=[]){const r=`Platform: ${t}`,i=new _e(r);return(o=[])=>{let s=bp();if(!s||s.injector.get(TE,!1)){const a=[...e,...o,{provide:i,useValue:!0}];n?n(a):function U1(n){if(Qi&&!Qi.get(TE,!1))throw new he(400,!1);Qi=n;const t=n.get(PE);(function AE(n){const t=n.get(yE,null);t&&t.forEach(e=>e())})(n)}(function RE(n=[],t){return pr.create({name:t,providers:[{provide:uh,useValue:"platform"},{provide:yp,useValue:new Set([()=>Qi=null])},...n]})}(a,r))}return function H1(n){const t=bp();if(!t)throw new he(401,!1);return t}()}}function bp(){return Qi?.get(PE)??null}let PE=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const i=function LE(n,t){let e;return e="noop"===n?new F1:("zone.js"===n?void 0:n)||new Ue(t),e}(r?.ngZone,function OE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Ue,useValue:i}];return i.run(()=>{const s=pr.create({providers:o,parent:this.injector,name:e.moduleType.name}),a=e.create(s),l=a.injector.get(_s,null);if(!l)throw new he(402,!1);return i.runOutsideAngular(()=>{const g=i.onError.subscribe({next:I=>{l.handleError(I)}});a.onDestroy(()=>{ou(this._modules,a),g.unsubscribe()})}),function FE(n,t,e){try{const r=e();return Wa(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const g=a.injector.get(nu);return g.runInitializers(),g.donePromise.then(()=>(function sb(n){Cr(n,"Expected localeId to be defined"),"string"==typeof n&&(ob=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ci,Ls)||Ls),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const i=kE({},r);return function N1(n,t,e){const r=new Qh(e);return Promise.resolve(r)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(e){const r=e.injector.get(Vs);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new he(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(yp,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(le(pr))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function kE(n,t){return Array.isArray(t)?t.reduce(kE,n):{...n,...t}}let Vs=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,i){this._zone=e,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new p(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new p(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Ue.assertNotInAngularZone(),hp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const g=this._zone.onUnstable.subscribe(()=>{Ue.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),g.unsubscribe()}});this.isStable=Xo(o,s.pipe(pv()))}bootstrap(e,r){const i=e instanceof vy;if(!this._injector.get(nu).done){!i&&function Qo(n){const t=Ct(n)||Sn(n)||Bn(n);return null!==t&&t.standalone}(e);throw new he(405,Mi)}let s;s=i?e:this._injector.get(gs).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function B1(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Fs),g=s.create(pr.NULL,[],r||s.selector,a),I=g.location.nativeElement,j=g.injector.get(SE,null);return j?.registerApplication(I),g.onDestroy(()=>{this.detachView(g.hostView),ou(this.components,g),j?.unregisterApplication(I)}),this._loadComponent(g),g}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;ou(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(wE,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>ou(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new he(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(le(Ue),le(ti),le(_s))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ou(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let Jn=(()=>{class n{}return n.__NG_ELEMENT_ID__=K1,n})();function K1(n){return function W1(n,t,e){if(ba(n)&&!e){const r=fr(n.index,t);return new Va(r,r)}return 47&n.type?new Va(t[wn],t):null}(bn(),me(),16==(16&n))}class HE{constructor(){}supports(t){return jc(t)}create(t){return new Z1(t)}}const X1=(n,t)=>t;class Z1{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||X1}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){const s=!r||e&&e.currentIndex<KE(r,i,o)?e:r,a=KE(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{o||(o=[]);const g=a-i,I=l-i;if(g!=I){for(let X=0;X<g;X++){const q=X<o.length?o[X]:o[X]=0,ee=q+X;I<=ee&&ee<g&&(o[X]=q+1)}o[s.previousIndex]=I-g}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!jc(t))throw new he(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),r=!0),e=e._next}else i=0,function AP(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Q1(e,r),o,i),t}_verifyReinsertion(t,e,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new jE),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jE),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Q1{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class q1{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class jE{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new q1,this.map.set(e,r)),r.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KE(n,t,e){const r=n.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}class WE{constructor(){}supports(t){return t instanceof Map||Fh(t)}create(){return new J1}}class J1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Fh(t)))throw new he(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,e);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new eF(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class eF{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zE(){return new lu([new HE])}let lu=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||zE()),deps:[[n,new ds,new Eo]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new he(901,!1)}}return n.\u0275prov=xe({token:n,providedIn:"root",factory:zE}),n})();function GE(){return new nl([new WE])}let nl=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||GE()),deps:[[n,new ds,new Eo]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(r)return r;throw new he(901,!1)}}return n.\u0275prov=xe({token:n,providedIn:"root",factory:GE}),n})();const rF=IE(null,"core",[]);let iF=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(le(Vs))},n.\u0275mod=lt({type:n}),n.\u0275inj=at({}),n})();function Hs(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Sp=null;function Ai(){return Sp}class aF{}const ot=new _e("DocumentToken");let Tp=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return function lF(){return le($E)}()},providedIn:"platform"}),n})();const cF=new _e("Location Initialized");let $E=(()=>{class n extends Tp{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ai().getBaseHref(this._doc)}onPopState(e){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){YE()?this._history.pushState(e,r,i):this._location.hash=i}replaceState(e,r,i){YE()?this._history.replaceState(e,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(le(ot))},n.\u0275prov=xe({token:n,factory:function(){return function uF(){return new $E(le(ot))}()},providedIn:"platform"}),n})();function YE(){return!!window.history.pushState}function wp(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function XE(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ii(n){return n&&"?"!==n[0]?"?"+n:n}let Oo=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return je(QE)},providedIn:"root"}),n})();const ZE=new _e("appBaseHref");let QE=(()=>{class n extends Oo{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??je(ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return wp(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Ii(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){const s=this.prepareExternalUrl(i+Ii(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){const s=this.prepareExternalUrl(i+Ii(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(le(Tp),le(ZE,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dF=(()=>{class n extends Oo{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=wp(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Ii(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Ii(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(le(Tp),le(ZE,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),cu=(()=>{class n{constructor(e){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function pF(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(XE(qE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Ii(r))}normalize(e){return n.stripTrailingSlash(function hF(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,qE(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ii(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ii(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=Ii,n.joinWithSlash=wp,n.stripTrailingSlash=XE,n.\u0275fac=function(e){return new(e||n)(le(Oo))},n.\u0275prov=xe({token:n,factory:function(){return function fF(){return new cu(le(Oo))}()},providedIn:"root"}),n})();function qE(n){return n.replace(/\/index.html$/,"")}var Xt=(()=>((Xt=Xt||{})[Xt.Format=0]="Format",Xt[Xt.Standalone=1]="Standalone",Xt))(),st=(()=>((st=st||{})[st.Narrow=0]="Narrow",st[st.Abbreviated=1]="Abbreviated",st[st.Wide=2]="Wide",st[st.Short=3]="Short",st))(),Ht=(()=>((Ht=Ht||{})[Ht.Short=0]="Short",Ht[Ht.Medium=1]="Medium",Ht[Ht.Long=2]="Long",Ht[Ht.Full=3]="Full",Ht))(),Fe=(()=>((Fe=Fe||{})[Fe.Decimal=0]="Decimal",Fe[Fe.Group=1]="Group",Fe[Fe.List=2]="List",Fe[Fe.PercentSign=3]="PercentSign",Fe[Fe.PlusSign=4]="PlusSign",Fe[Fe.MinusSign=5]="MinusSign",Fe[Fe.Exponential=6]="Exponential",Fe[Fe.SuperscriptingExponent=7]="SuperscriptingExponent",Fe[Fe.PerMille=8]="PerMille",Fe[Fe.Infinity=9]="Infinity",Fe[Fe.NaN=10]="NaN",Fe[Fe.TimeSeparator=11]="TimeSeparator",Fe[Fe.CurrencyDecimal=12]="CurrencyDecimal",Fe[Fe.CurrencyGroup=13]="CurrencyGroup",Fe))();function uu(n,t){return Or(jn(n)[Me.DateFormat],t)}function du(n,t){return Or(jn(n)[Me.TimeFormat],t)}function fu(n,t){return Or(jn(n)[Me.DateTimeFormat],t)}function Pr(n,t){const e=jn(n),r=e[Me.NumberSymbols][t];if(typeof r>"u"){if(t===Fe.CurrencyDecimal)return e[Me.NumberSymbols][Fe.Decimal];if(t===Fe.CurrencyGroup)return e[Me.NumberSymbols][Fe.Group]}return r}function ex(n){if(!n[Me.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Me.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Or(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Ap(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const wF=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,rl={},MF=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var fn=(()=>((fn=fn||{})[fn.Short=0]="Short",fn[fn.ShortGMT=1]="ShortGMT",fn[fn.Long=2]="Long",fn[fn.Extended=3]="Extended",fn))(),Ve=(()=>((Ve=Ve||{})[Ve.FullYear=0]="FullYear",Ve[Ve.Month=1]="Month",Ve[Ve.Date=2]="Date",Ve[Ve.Hours=3]="Hours",Ve[Ve.Minutes=4]="Minutes",Ve[Ve.Seconds=5]="Seconds",Ve[Ve.FractionalSeconds=6]="FractionalSeconds",Ve[Ve.Day=7]="Day",Ve))(),qe=(()=>((qe=qe||{})[qe.DayPeriods=0]="DayPeriods",qe[qe.Days=1]="Days",qe[qe.Months=2]="Months",qe[qe.Eras=3]="Eras",qe))();function AF(n,t,e,r){let i=function BF(n){if(rx(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,s=1]=n.split("-").map(a=>+a);return hu(i,o-1,s)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(wF))return function UF(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),g=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(t,s,a,l,g),t}(r)}const t=new Date(n);if(!rx(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Ri(e,t)||t;let a,s=[];for(;t;){if(a=MF.exec(t),!a){s.push(t);break}{s=s.concat(a.slice(1));const I=s.pop();if(!I)break;t=I}}let l=i.getTimezoneOffset();r&&(l=nx(r,l),i=function NF(n,t,e){const r=e?-1:1,i=n.getTimezoneOffset();return function kF(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,r*(nx(t,i)-i))}(i,r,!0));let g="";return s.forEach(I=>{const j=function FF(n){if(Rp[n])return Rp[n];let t;switch(n){case"G":case"GG":case"GGG":t=Lt(qe.Eras,st.Abbreviated);break;case"GGGG":t=Lt(qe.Eras,st.Wide);break;case"GGGGG":t=Lt(qe.Eras,st.Narrow);break;case"y":t=nn(Ve.FullYear,1,0,!1,!0);break;case"yy":t=nn(Ve.FullYear,2,0,!0,!0);break;case"yyy":t=nn(Ve.FullYear,3,0,!1,!0);break;case"yyyy":t=nn(Ve.FullYear,4,0,!1,!0);break;case"Y":t=vu(1);break;case"YY":t=vu(2,!0);break;case"YYY":t=vu(3);break;case"YYYY":t=vu(4);break;case"M":case"L":t=nn(Ve.Month,1,1);break;case"MM":case"LL":t=nn(Ve.Month,2,1);break;case"MMM":t=Lt(qe.Months,st.Abbreviated);break;case"MMMM":t=Lt(qe.Months,st.Wide);break;case"MMMMM":t=Lt(qe.Months,st.Narrow);break;case"LLL":t=Lt(qe.Months,st.Abbreviated,Xt.Standalone);break;case"LLLL":t=Lt(qe.Months,st.Wide,Xt.Standalone);break;case"LLLLL":t=Lt(qe.Months,st.Narrow,Xt.Standalone);break;case"w":t=Ip(1);break;case"ww":t=Ip(2);break;case"W":t=Ip(1,!0);break;case"d":t=nn(Ve.Date,1);break;case"dd":t=nn(Ve.Date,2);break;case"c":case"cc":t=nn(Ve.Day,1);break;case"ccc":t=Lt(qe.Days,st.Abbreviated,Xt.Standalone);break;case"cccc":t=Lt(qe.Days,st.Wide,Xt.Standalone);break;case"ccccc":t=Lt(qe.Days,st.Narrow,Xt.Standalone);break;case"cccccc":t=Lt(qe.Days,st.Short,Xt.Standalone);break;case"E":case"EE":case"EEE":t=Lt(qe.Days,st.Abbreviated);break;case"EEEE":t=Lt(qe.Days,st.Wide);break;case"EEEEE":t=Lt(qe.Days,st.Narrow);break;case"EEEEEE":t=Lt(qe.Days,st.Short);break;case"a":case"aa":case"aaa":t=Lt(qe.DayPeriods,st.Abbreviated);break;case"aaaa":t=Lt(qe.DayPeriods,st.Wide);break;case"aaaaa":t=Lt(qe.DayPeriods,st.Narrow);break;case"b":case"bb":case"bbb":t=Lt(qe.DayPeriods,st.Abbreviated,Xt.Standalone,!0);break;case"bbbb":t=Lt(qe.DayPeriods,st.Wide,Xt.Standalone,!0);break;case"bbbbb":t=Lt(qe.DayPeriods,st.Narrow,Xt.Standalone,!0);break;case"B":case"BB":case"BBB":t=Lt(qe.DayPeriods,st.Abbreviated,Xt.Format,!0);break;case"BBBB":t=Lt(qe.DayPeriods,st.Wide,Xt.Format,!0);break;case"BBBBB":t=Lt(qe.DayPeriods,st.Narrow,Xt.Format,!0);break;case"h":t=nn(Ve.Hours,1,-12);break;case"hh":t=nn(Ve.Hours,2,-12);break;case"H":t=nn(Ve.Hours,1);break;case"HH":t=nn(Ve.Hours,2);break;case"m":t=nn(Ve.Minutes,1);break;case"mm":t=nn(Ve.Minutes,2);break;case"s":t=nn(Ve.Seconds,1);break;case"ss":t=nn(Ve.Seconds,2);break;case"S":t=nn(Ve.FractionalSeconds,1);break;case"SS":t=nn(Ve.FractionalSeconds,2);break;case"SSS":t=nn(Ve.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=mu(fn.Short);break;case"ZZZZZ":t=mu(fn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=mu(fn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=mu(fn.Long);break;default:return null}return Rp[n]=t,t}(I);g+=j?j(i,e,l):"''"===I?"'":I.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),g}function hu(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function Ri(n,t){const e=function mF(n){return jn(n)[Me.LocaleId]}(n);if(rl[e]=rl[e]||{},rl[e][t])return rl[e][t];let r="";switch(t){case"shortDate":r=uu(n,Ht.Short);break;case"mediumDate":r=uu(n,Ht.Medium);break;case"longDate":r=uu(n,Ht.Long);break;case"fullDate":r=uu(n,Ht.Full);break;case"shortTime":r=du(n,Ht.Short);break;case"mediumTime":r=du(n,Ht.Medium);break;case"longTime":r=du(n,Ht.Long);break;case"fullTime":r=du(n,Ht.Full);break;case"short":const i=Ri(n,"shortTime"),o=Ri(n,"shortDate");r=pu(fu(n,Ht.Short),[i,o]);break;case"medium":const s=Ri(n,"mediumTime"),a=Ri(n,"mediumDate");r=pu(fu(n,Ht.Medium),[s,a]);break;case"long":const l=Ri(n,"longTime"),g=Ri(n,"longDate");r=pu(fu(n,Ht.Long),[l,g]);break;case"full":const I=Ri(n,"fullTime"),j=Ri(n,"fullDate");r=pu(fu(n,Ht.Full),[I,j])}return r&&(rl[e][t]=r),r}function pu(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function $r(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function nn(n,t,e=0,r=!1,i=!1){return function(o,s){let a=function RF(n,t){switch(n){case Ve.FullYear:return t.getFullYear();case Ve.Month:return t.getMonth();case Ve.Date:return t.getDate();case Ve.Hours:return t.getHours();case Ve.Minutes:return t.getMinutes();case Ve.Seconds:return t.getSeconds();case Ve.FractionalSeconds:return t.getMilliseconds();case Ve.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((e>0||a>-e)&&(a+=e),n===Ve.Hours)0===a&&-12===e&&(a=12);else if(n===Ve.FractionalSeconds)return function IF(n,t){return $r(n,3).substring(0,t)}(a,t);const l=Pr(s,Fe.MinusSign);return $r(a,t,l,r,i)}}function Lt(n,t,e=Xt.Format,r=!1){return function(i,o){return function PF(n,t,e,r,i,o){switch(e){case qe.Months:return function _F(n,t,e){const r=jn(n),o=Or([r[Me.MonthsFormat],r[Me.MonthsStandalone]],t);return Or(o,e)}(t,i,r)[n.getMonth()];case qe.Days:return function vF(n,t,e){const r=jn(n),o=Or([r[Me.DaysFormat],r[Me.DaysStandalone]],t);return Or(o,e)}(t,i,r)[n.getDay()];case qe.DayPeriods:const s=n.getHours(),a=n.getMinutes();if(o){const g=function xF(n){const t=jn(n);return ex(t),(t[Me.ExtraData][2]||[]).map(r=>"string"==typeof r?Ap(r):[Ap(r[0]),Ap(r[1])])}(t),I=function DF(n,t,e){const r=jn(n);ex(r);const o=Or([r[Me.ExtraData][0],r[Me.ExtraData][1]],t)||[];return Or(o,e)||[]}(t,i,r),j=g.findIndex(X=>{if(Array.isArray(X)){const[q,ee]=X,ie=s>=q.hours&&a>=q.minutes,se=s<ee.hours||s===ee.hours&&a<ee.minutes;if(q.hours<ee.hours){if(ie&&se)return!0}else if(ie||se)return!0}else if(X.hours===s&&X.minutes===a)return!0;return!1});if(-1!==j)return I[j]}return function gF(n,t,e){const r=jn(n),o=Or([r[Me.DayPeriodsFormat],r[Me.DayPeriodsStandalone]],t);return Or(o,e)}(t,i,r)[s<12?0:1];case qe.Eras:return function yF(n,t){return Or(jn(n)[Me.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,o,n,t,e,r)}}function mu(n){return function(t,e,r){const i=-1*r,o=Pr(e,Fe.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case fn.Short:return(i>=0?"+":"")+$r(s,2,o)+$r(Math.abs(i%60),2,o);case fn.ShortGMT:return"GMT"+(i>=0?"+":"")+$r(s,1,o);case fn.Long:return"GMT"+(i>=0?"+":"")+$r(s,2,o)+":"+$r(Math.abs(i%60),2,o);case fn.Extended:return 0===r?"Z":(i>=0?"+":"")+$r(s,2,o)+":"+$r(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const OF=0,gu=4;function tx(n){return hu(n.getFullYear(),n.getMonth(),n.getDate()+(gu-n.getDay()))}function Ip(n,t=!1){return function(e,r){let i;if(t){const o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{const o=tx(e),s=function LF(n){const t=hu(n,OF,1).getDay();return hu(n,0,1+(t<=gu?gu:gu+7)-t)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return $r(i,n,Pr(r,Fe.MinusSign))}}function vu(n,t=!1){return function(e,r){return $r(tx(e).getFullYear(),n,Pr(r,Fe.MinusSign),t)}}const Rp={};function nx(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function rx(n){return n instanceof Date&&!isNaN(n.valueOf())}function ax(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}const Np=/\s+/,lx=[];let Bp=(()=>{class n{constructor(e,r,i,o){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=lx,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Np):lx}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Np):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const i=this.stateMap.get(e);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Np).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(ne(lu),ne(nl),ne(tt),ne(Si))},n.\u0275dir=Se({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class qF{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yu=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new qF(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),dx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{dx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(ne(gr),ne(li),ne(lu))},n.\u0275dir=Se({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function dx(n,t){n.context.$implicit=t.item}let Pi=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new ek,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){fx("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){fx("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(ne(gr),ne(li))},n.\u0275dir=Se({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ek{constructor(){this.$implicit=null,this.ngIf=null}}function fx(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Pt(t)}'.`)}class Up{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ol=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Vp=(()=>{class n{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new Up(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(ne(gr),ne(li),ne(ol,9))},n.\u0275dir=Se({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),hx=(()=>{class n{constructor(e,r,i){i._addDefault(new Up(e,r))}}return n.\u0275fac=function(e){return new(e||n)(ne(gr),ne(li),ne(ol,9))},n.\u0275dir=Se({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),Hp=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=r.createEmbeddedView(i,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(ne(gr))},n.\u0275dir=Se({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Mn]}),n})();function Yr(n,t){return new he(2100,!1)}class rk{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}}class ik{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}}const ok=new ik,sk=new rk;let jp=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(Wa(e))return ok;if(h0(e))return sk;throw Yr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(ne(Jn,16))},n.\u0275pipe=Nn({name:"async",type:n,pure:!1,standalone:!0}),n})();const fk=new _e("DATE_PIPE_DEFAULT_TIMEZONE"),hk=new _e("DATE_PIPE_DEFAULT_OPTIONS");let mx=(()=>{class n{constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(null==e||""===e||e!=e)return null;try{return AF(e,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw Yr()}}}return n.\u0275fac=function(e){return new(e||n)(ne(ci,16),ne(fk,24),ne(hk,24))},n.\u0275pipe=Nn({name:"date",type:n,pure:!0,standalone:!0}),n})(),Oi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({}),n})();const vx="browser";let wk=(()=>{class n{}return n.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new Mk(le(ot),window)}),n})();class Mk{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ak(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=_x(this.window.history)||_x(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function _x(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class yx{}class nN extends aF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $p extends nN{static makeCurrent(){!function sF(n){Sp||(Sp=n)}(new $p)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function rN(){return al=al||document.querySelector("base"),al?al.getAttribute("href"):null}();return null==e?null:function iN(n){xu=xu||document.createElement("a"),xu.setAttribute("href",n);const t=xu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){al=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ax(document.cookie,t)}}let xu,al=null;const Cx=new _e("TRANSITION_ID"),sN=[{provide:tu,useFactory:function oN(n,t,e){return()=>{e.get(nu).donePromise.then(()=>{const r=Ai(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Cx,ot,pr],multi:!0}];let lN=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const Du=new _e("EventManagerPlugins");let Cu=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(le(Du),le(Ue))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class Sx{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=Ai().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Tx=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const i=this.usageCount;let o=i.get(e)??0;return o+=r,o>0?i.set(e,o):i.delete(e),o}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),ll=(()=>{class n extends Tx{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(o=>o.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const i=this.doc.createElement("style");i.textContent=r,e.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(le(ot))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const Yp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xp=/%COMP%/g,Ax=new _e("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ix(n,t){return t.flat(100).map(e=>e.replace(Xp,n))}function Rx(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Su=(()=>{class n{constructor(e,r,i,o){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new Zp(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(e,r);return i instanceof Lx?i.applyToHost(e):i instanceof Qp&&i.applyStyles(),i}getOrCreateRenderer(e,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case Ur.Emulated:o=new Lx(s,a,r,this.appId,l);break;case Ur.ShadowDom:return new mN(s,a,e,r);default:o=new Qp(s,a,r,l)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(le(Cu),le(ll),le(Us),le(Ax))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class Zp{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Yp[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Ox(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Ox(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=Yp[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Yp[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Zn.DashCase|Zn.Important)?t.style.setProperty(e,r,i&Zn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Zn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Rx(r)):this.eventManager.addEventListener(t,e,Rx(r))}}function Ox(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class mN extends Zp{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ix(i.id,i.styles);for(const s of o){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Qp extends Zp{constructor(t,e,r,i,o=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ix(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Lx extends Qp{constructor(t,e,r,i,o){const s=i+"-"+r.id;super(t,e,r,o,s),this.contentAttr=function fN(n){return"_ngcontent-%COMP%".replace(Xp,n)}(s),this.hostAttr=function hN(n){return"_nghost-%COMP%".replace(Xp,n)}(s)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let gN=(()=>{class n extends Sx{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(le(ot))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const Fx=["alt","control","meta","shift"],vN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_N={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yN=(()=>{class n extends Sx{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ai().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Fx.forEach(g=>{const I=r.indexOf(g);I>-1&&(r.splice(I,1),s+=g+".")}),s+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=vN[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fx.forEach(s=>{s!==i&&(0,_N[s])(e)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(le(ot))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const DN=IE(rF,"browser",[{provide:ru,useValue:vx},{provide:yE,useValue:function bN(){$p.makeCurrent()},multi:!0},{provide:ot,useFactory:function xN(){return function uI(n){th=n}(document),document},deps:[]}]),Bx=new _e(""),Ux=[{provide:iu,useClass:class aN{addToWindow(t){Nt.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Nt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Nt.getAllAngularRootElements=()=>t.getAllRootElements(),Nt.frameworkStabilizers||(Nt.frameworkStabilizers=[]),Nt.frameworkStabilizers.push(r=>{const i=Nt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?Ai().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:SE,useClass:gp,deps:[Ue,vp,iu]},{provide:gp,useClass:gp,deps:[Ue,vp,iu]}],Vx=[{provide:uh,useValue:"root"},{provide:_s,useFactory:function EN(){return new _s},deps:[]},{provide:Du,useClass:gN,multi:!0,deps:[ot,Ue,ru]},{provide:Du,useClass:yN,multi:!0,deps:[ot]},{provide:Su,useClass:Su,deps:[Cu,ll,Us,Ax]},{provide:Ba,useExisting:Su},{provide:Tx,useExisting:ll},{provide:ll,useClass:ll,deps:[ot]},{provide:Cu,useClass:Cu,deps:[Du,Ue]},{provide:yx,useClass:lN,deps:[]},[]];let Hx=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Us,useValue:e.appId},{provide:Cx,useExisting:Us},sN]}}}return n.\u0275fac=function(e){return new(e||n)(le(Bx,12))},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:[...Vx,...Ux],imports:[Oi,iF]}),n})(),jx=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(le(ot))},n.\u0275prov=xe({token:n,factory:function(e){let r=null;return r=e?new e:function SN(){return new jx(le(ot))}(),r},providedIn:"root"}),n})();function Oe(...n){return Jt(n,fa(n))}typeof window<"u"&&window;class tr extends N{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const Tu=ho(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:RN}=Array,{getPrototypeOf:PN,prototype:ON,keys:LN}=Object;function zx(n){if(1===n.length){const t=n[0];if(RN(t))return{args:t,keys:null};if(function FN(n){return n&&"object"==typeof n&&PN(n)===ON}(t)){const e=LN(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:kN}=Array;function em(n){return Z(t=>function NN(n,t){return kN(t)?n(...t):n(t)}(n,t))}function Gx(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function wu(...n){const t=fa(n),e=uv(n),{args:r,keys:i}=zx(n);if(0===r.length)return Jt([],t);const o=new p(function BN(n,t,e=u){return r=>{$x(t,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)$x(t,()=>{const g=Jt(n[l],t);let I=!1;g.subscribe(Q(r,j=>{o[l]=j,I||(I=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>Gx(i,s):u));return e?o.pipe(em(e)):o}function $x(n,t,e){n?Br(e,n,t):t()}function Mu(...n){return function UN(){return zi(1)}()(Jt(n,fa(n)))}function tm(n){return new p(t=>{cn(n()).subscribe(t)})}function cl(n,t){const e=Ge(n)?n:()=>n,r=i=>i.error(e());return new p(t?i=>t.schedule(r,0,i):r)}function nm(){return $((n,t)=>{let e=null;n._refCount++;const r=Q(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class Yx extends p{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,W(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new P;const e=this.getSubject();t.add(this.source.subscribe(Q(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=P.EMPTY)}return t}refCount(){return nm()(this)}}function nr(n,t){return $((e,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();e.subscribe(Q(r,l=>{i?.unsubscribe();let g=0;const I=o++;cn(n(l,I)).subscribe(i=Q(r,j=>r.next(t?t(l,j,I,g++):j),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ui(n){return n<=0?()=>kn:$((t,e)=>{let r=0;t.subscribe(Q(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Li(...n){const t=fa(n);return $((e,r)=>{(t?Mu(n,e,t):Mu(n,e)).subscribe(r)})}function rr(n,t){return $((e,r)=>{let i=0;e.subscribe(Q(r,o=>n.call(t,o,i++)&&r.next(o)))})}function Au(n){return $((t,e)=>{let r=!1;t.subscribe(Q(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Xx(n=VN){return $((t,e)=>{let r=!1;t.subscribe(Q(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function VN(){return new Tu}function Ji(n,t){const e=arguments.length>=2;return r=>r.pipe(n?rr((i,o)=>n(i,o,r)):u,ui(1),e?Au(t):Xx(()=>new Tu))}function Fi(n,t){return Ge(t)?qt(n,t,1):qt(n,1)}function rn(n,t,e){const r=Ge(n)||t||e?{next:n,error:t,complete:e}:n;return r?$((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Q(o,l=>{var g;null===(g=r.next)||void 0===g||g.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var g;a=!1,null===(g=r.error)||void 0===g||g.call(r,l),o.error(l)},()=>{var l,g;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):u}function Xr(n){return $((t,e)=>{let o,r=null,i=!1;r=t.subscribe(Q(e,void 0,void 0,s=>{o=cn(n(s,Xr(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function Zx(n,t){return $(function HN(n,t,e,r,i){return(o,s)=>{let a=e,l=t,g=0;o.subscribe(Q(s,I=>{const j=g++;l=a?n(l,I,j):(a=!0,I),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}(n,t,arguments.length>=2,!0))}function rm(n){return n<=0?()=>kn:$((t,e)=>{let r=[];t.subscribe(Q(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Qx(n,t){const e=arguments.length>=2;return r=>r.pipe(n?rr((i,o)=>n(i,o,r)):u,rm(1),e?Au(t):Xx(()=>new Tu))}function qx(n,t=!1){return $((e,r)=>{let i=0;e.subscribe(Q(r,o=>{const s=n(o,i++);(s||t)&&r.next(o),!s&&r.complete()}))})}function im(n){return $((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Ze="primary",ul=Symbol("RouteTitle");class KN{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function js(n){return new KN(n)}function WN(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function di(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!Jx(n[i],t[i]))return!1;return!0}function Jx(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}return n===t}function eD(n){return Array.prototype.concat.apply([],n)}function tD(n){return n.length>0?n[n.length-1]:null}function En(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function eo(n){return Nh(n)?n:Wa(n)?Jt(Promise.resolve(n)):Oe(n)}const Iu=!1,GN={exact:function iD(n,t,e){if(!Lo(n.segments,t.segments)||!Ru(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!iD(n.children[r],t.children[r],e))return!1;return!0},subset:oD},nD={exact:function $N(n,t){return di(n,t)},subset:function YN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Jx(n[e],t[e]))},ignored:()=>!0};function rD(n,t,e){return GN[e.paths](n.root,t.root,e.matrixParams)&&nD[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function oD(n,t,e){return sD(n,t,t.segments,e)}function sD(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Lo(i,e)||t.hasChildren()||!Ru(i,e,r))}if(n.segments.length===e.length){if(!Lo(n.segments,e)||!Ru(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!oD(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(Lo(n.segments,i)&&Ru(n.segments,i,r)&&n.children[Ze])&&sD(n.children[Ze],t,o,r)}}function Ru(n,t,e){return t.every((r,i)=>nD[e](n[i].parameters,r.parameters))}class to{constructor(t=new rt([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=js(this.queryParams)),this._queryParamMap}toString(){return QN.serialize(this)}}class rt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,En(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pu(this)}}class dl{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=js(this.parameters)),this._parameterMap}toString(){return cD(this)}}function Lo(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let fl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return new om},providedIn:"root"}),n})();class om{parse(t){const e=new sB(t);return new to(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${hl(t.root,!0)}`,r=function eB(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${Ou(e)}=${Ou(i)}`).join("&"):`${Ou(e)}=${Ou(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function qN(n){return encodeURI(n)}(t.fragment)}`:""}`}}const QN=new om;function Pu(n){return n.segments.map(t=>cD(t)).join("/")}function hl(n,t){if(!n.hasChildren())return Pu(n);if(t){const e=n.children[Ze]?hl(n.children[Ze],!1):"",r=[];return En(n.children,(i,o)=>{o!==Ze&&r.push(`${o}:${hl(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function ZN(n,t){let e=[];return En(n.children,(r,i)=>{i===Ze&&(e=e.concat(t(r,i)))}),En(n.children,(r,i)=>{i!==Ze&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Ze?[hl(n.children[Ze],!1)]:[`${i}:${hl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ze]?`${Pu(n)}/${e[0]}`:`${Pu(n)}/(${e.join("//")})`}}function aD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ou(n){return aD(n).replace(/%3B/gi,";")}function sm(n){return aD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lu(n){return decodeURIComponent(n)}function lD(n){return Lu(n.replace(/\+/g,"%20"))}function cD(n){return`${sm(n.path)}${function JN(n){return Object.keys(n).map(t=>`;${sm(t)}=${sm(n[t])}`).join("")}(n.parameters)}`}const tB=/^[^\/()?;=#]+/;function Fu(n){const t=n.match(tB);return t?t[0]:""}const nB=/^[^=?&#]+/,iB=/^[^&#]+/;class sB{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Ze]=new rt(t,e)),r}parseSegment(){const t=Fu(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new he(4009,Iu);return this.capture(t),new dl(Lu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Fu(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Fu(this.remaining);i&&(r=i,this.capture(r))}t[Lu(e)]=Lu(r)}parseQueryParam(t){const e=function rB(n){const t=n.match(nB);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function oB(n){const t=n.match(iB);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=lD(e),o=lD(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new he(4010,Iu);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ze);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[Ze]:new rt([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new he(4011,Iu)}}function am(n){return n.segments.length>0?new rt([],{[Ze]:n}):n}function ku(n){const t={};for(const r of Object.keys(n.children)){const o=ku(n.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function aB(n){if(1===n.numberOfChildren&&n.children[Ze]){const t=n.children[Ze];return new rt(n.segments.concat(t.segments),t.children)}return n}(new rt(n.segments,t))}function Fo(n){return n instanceof to}const lm=!1;function lB(n,t,e,r,i){if(0===e.length)return Ks(t.root,t.root,t.root,r,i);const o=function pD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hD(!0,0,n);let t=0,e=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return En(o.outlets,(l,g)=>{a[g]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new hD(e,t,r)}(e);return o.toRoot()?Ks(t.root,t.root,new rt([],{}),r,i):function s(l){const g=function uB(n,t,e,r){if(n.isAbsolute)return new Ws(t.root,!0,0);if(-1===r)return new Ws(e,e===t.root,0);return function mD(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new he(4005,lm&&"Invalid number of '../'");i=r.segments.length}return new Ws(r,!1,i-o)}(e,r+(pl(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,t,n.snapshot?._urlSegment,l),I=g.processChildren?zs(g.segmentGroup,g.index,o.commands):cm(g.segmentGroup,g.index,o.commands);return Ks(t.root,g.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function pl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ml(n){return"object"==typeof n&&null!=n&&n.outlets}function Ks(n,t,e,r,i){let s,o={};r&&En(r,(l,g)=>{o[g]=Array.isArray(l)?l.map(I=>`${I}`):`${l}`}),s=n===t?e:fD(n,t,e);const a=am(ku(s));return new to(a,o,i)}function fD(n,t,e){const r={};return En(n.children,(i,o)=>{r[o]=i===t?e:fD(i,t,e)}),new rt(n.segments,r)}class hD{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&pl(r[0]))throw new he(4003,lm&&"Root segment cannot have matrix parameters");const i=r.find(ml);if(i&&i!==tD(r))throw new he(4004,lm&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ws{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function cm(n,t,e){if(n||(n=new rt([],{})),0===n.segments.length&&n.hasChildren())return zs(n,t,e);const r=function fB(n,t,e){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;const s=n.segments[i],a=e[r];if(ml(a))break;const l=`${a}`,g=r<e.length-1?e[r+1]:null;if(i>0&&void 0===l)break;if(l&&g&&"object"==typeof g&&void 0===g.outlets){if(!vD(l,g,s))return o;r+=2}else{if(!vD(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new rt(n.segments.slice(0,r.pathIndex),{});return o.children[Ze]=new rt(n.segments.slice(r.pathIndex),n.children),zs(o,0,i)}return r.match&&0===i.length?new rt(n.segments,{}):r.match&&!n.hasChildren()?um(n,t,e):r.match?zs(n,0,i):um(n,t,e)}function zs(n,t,e){if(0===e.length)return new rt(n.segments,{});{const r=function dB(n){return ml(n[0])?n[0].outlets:{[Ze]:n}}(e),i={};return!r[Ze]&&n.children[Ze]&&1===n.numberOfChildren&&0===n.children[Ze].segments.length?zs(n.children[Ze],t,e):(En(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=cm(n.children[s],t,o))}),En(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new rt(n.segments,i))}}function um(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(ml(o)){const l=hB(o.outlets);return new rt(r,l)}if(0===i&&pl(e[0])){r.push(new dl(n.segments[t].path,gD(e[0]))),i++;continue}const s=ml(o)?o.outlets[Ze]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&pl(a)?(r.push(new dl(s,gD(a))),i+=2):(r.push(new dl(s,{})),i++)}return new rt(r,{})}function hB(n){const t={};return En(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=um(new rt([],{}),0,e))}),t}function gD(n){const t={};return En(n,(e,r)=>t[r]=`${e}`),t}function vD(n,t,e){return n==e.path&&di(t,e.parameters)}const gl="imperative";class fi{constructor(t,e){this.id=t,this.url=e}}class dm extends fi{constructor(t,e,r="imperative",i=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ko extends fi{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nu extends fi{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bu extends fi{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=16}}class fm extends fi{constructor(t,e,r,i){super(t,e),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pB extends fi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mB extends fi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gB extends fi{constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vB extends fi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _B extends fi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yB{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bB{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class EB{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xB{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DB{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CB{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _D{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let wB=(()=>{class n{createUrlTree(e,r,i,o,s,a){return lB(e||r.root,i,o,s,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),AB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(t){return wB.\u0275fac(t)},providedIn:"root"}),n})();class yD{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=hm(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=hm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=pm(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return pm(t,this._root).map(e=>e.value)}}function hm(n,t){if(n===t.value)return t;for(const e of t.children){const r=hm(n,e);if(r)return r}return null}function pm(n,t){if(n===t.value)return[t];for(const e of t.children){const r=pm(n,e);if(r.length)return r.unshift(t),r}return[]}class ki{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Gs(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class bD extends yD{constructor(t,e){super(t),this.snapshot=e,mm(this,t)}toString(){return this.snapshot.toString()}}function ED(n,t){const e=function IB(n,t){const s=new Uu([],{},{},"",{},Ze,t,null,n.root,-1,{});return new DD("",new ki(s,[]))}(n,t),r=new tr([new dl("",{})]),i=new tr({}),o=new tr({}),s=new tr({}),a=new tr(""),l=new No(r,i,s,a,o,Ze,t,e.root);return l.snapshot=e.root,new bD(new ki(l,[]),e)}class No{constructor(t,e,r,i,o,s,a,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(Z(g=>g[ul]))??Oe(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Z(t=>js(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Z(t=>js(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xD(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],o=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function RB(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Uu{get title(){return this.data?.[ul]}constructor(t,e,r,i,o,s,a,l,g,I,j){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=g,this._lastPathIndex=I,this._resolve=j}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=js(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=js(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class DD extends yD{constructor(t,e){super(e),this.url=t,mm(this,e)}toString(){return CD(this._root)}}function mm(n,t){t.value._routerState=n,t.children.forEach(e=>mm(n,e))}function CD(n){const t=n.children.length>0?` { ${n.children.map(CD).join(", ")} } `:"";return`${n.value}${t}`}function gm(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,di(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),di(t.params,e.params)||n.params.next(e.params),function zN(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!di(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),di(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function vm(n,t){const e=di(n.params,t.params)&&function XN(n,t){return Lo(n,t)&&n.every((e,r)=>di(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||vm(n.parent,t.parent))}function vl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function OB(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vl(n,r,i);return vl(n,r)})}(n,t,e);return new ki(r,i)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>vl(n,a)),s}}const r=function LB(n){return new No(new tr(n.url),new tr(n.params),new tr(n.queryParams),new tr(n.fragment),new tr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(o=>vl(n,o));return new ki(r,i)}}const _m="ngNavigationCancelingError";function SD(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=Fo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=TD(!1,0,t);return i.url=e,i.navigationBehaviorOptions=r,i}function TD(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[_m]=!0,r.cancellationCode=t,e&&(r.url=e),r}function wD(n){return MD(n)&&Fo(n.url)}function MD(n){return n&&n[_m]}class FB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _l,this.attachRef=null}}let _l=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new FB,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vu=!1;let ym=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ze,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=je(_l),this.location=je(gr),this.changeDetector=je(Jn),this.environmentInjector=je(ti)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,Vu);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,Vu);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,Vu);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new he(4013,Vu);this._activatedRoute=e;const i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new kB(e,a,i.injector);if(r&&function NB(n){return!!n.resolveComponentFactory}(r)){const g=r.resolveComponentFactory(s);this.activated=i.createComponent(g,i.length,l)}else this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mn]}),n})();class kB{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===No?this.route:t===_l?this.childContexts:this.parent.get(t,e)}}let bm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["ng-component"]],standalone:!0,features:[qh],decls:1,vars:0,template:function(e,r){1&e&&nt(0,"router-outlet")},dependencies:[ym],encapsulation:2}),n})();function AD(n,t){return n.providers&&!n._injector&&(n._injector=Zc(n.providers,t,`Route: ${n.path}`)),n._injector??t}function xm(n){const t=n.children&&n.children.map(xm),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ze&&(e.component=bm),e}function Lr(n){return n.outlet||Ze}function ID(n,t){const e=n.filter(r=>Lr(r)===t);return e.push(...n.filter(r=>Lr(r)!==t)),e}function yl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class jB{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),gm(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=Gs(e);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),En(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Gs(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Gs(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=Gs(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new CB(o.value.snapshot))}),t.children.length&&this.forwardEvent(new xB(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(gm(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),gm(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=yl(i.snapshot),l=a?.get(gs)??null;s.attachRef=null,s.route=i,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class RD{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Hu{constructor(t,e){this.component=t,this.route=e}}function KB(n,t,e){const r=n._root;return bl(r,t?t._root:null,e,[r.value])}function $s(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||function aM(n){return null!==tc(n)}(n)?t.get(n):n:r}function bl(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Gs(t);return n.children.forEach(s=>{(function zB(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function GB(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Lo(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Lo(n.url,t.url)||!di(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vm(n,t)||!di(n.queryParams,t.queryParams);default:return!vm(n,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new RD(r)):(o.data=s.data,o._resolvedData=s._resolvedData),bl(n,t,o.component?a?a.children:null:e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hu(a.outlet.component,s))}else s&&El(t,a,i),i.canActivateChecks.push(new RD(r)),bl(n,null,o.component?a?a.children:null:e,r,i)})(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),En(o,(s,a)=>El(s,e.getContext(a),i)),i}function El(n,t,e){const r=Gs(n),i=n.value;En(r,(o,s)=>{El(o,i.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new Hu(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function xl(n){return"function"==typeof n}function Dm(n){return n instanceof Tu||"EmptyError"===n?.name}const ju=Symbol("INITIAL_VALUE");function Ys(){return nr(n=>wu(n.map(t=>t.pipe(ui(1),Li(ju)))).pipe(Z(t=>{for(const e of t)if(!0!==e){if(e===ju)return ju;if(!1===e||e instanceof to)return e}return!0}),rr(t=>t!==ju),ui(1)))}function PD(n){return function d(...n){return c(n)}(rn(t=>{if(Fo(t))throw SD(0,t)}),Z(t=>!0===t))}const Cm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OD(n,t,e,r,i){const o=Sm(n,t,e);return o.matched?function cU(n,t,e,r){const i=t.canMatch;return i&&0!==i.length?Oe(i.map(s=>{const a=$s(s,n);return eo(function qB(n){return n&&xl(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(Ys(),PD()):Oe(!0)}(r=AD(t,r),t,e).pipe(Z(s=>!0===s?o:{...Cm})):Oe(o)}function Sm(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...Cm}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const i=(t.matcher||WN)(e,n,t);if(!i)return{...Cm};const o={};En(i.posParams,(a,l)=>{o[l]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Ku(n,t,e,r){if(e.length>0&&function fU(n,t,e){return e.some(r=>Wu(n,t,r)&&Lr(r)!==Ze)}(n,e,r)){const o=new rt(t,function dU(n,t,e,r){const i={};i[Ze]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Lr(o)!==Ze){const s=new rt([],{});s._sourceSegment=n,s._segmentIndexShift=t.length,i[Lr(o)]=s}return i}(n,t,r,new rt(e,n.children)));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function hU(n,t,e){return e.some(r=>Wu(n,t,r))}(n,e,r)){const o=new rt(n.segments,function uU(n,t,e,r,i){const o={};for(const s of r)if(Wu(n,e,s)&&!i[Lr(s)]){const a=new rt([],{});a._sourceSegment=n,a._segmentIndexShift=t.length,o[Lr(s)]=a}return{...i,...o}}(n,t,e,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const i=new rt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}function Wu(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function LD(n,t,e,r){return!!(Lr(n)===r||r!==Ze&&Wu(t,e,n))&&("**"===n.path||Sm(t,n,e).matched)}function FD(n,t,e){return 0===t.length&&!n.children[e]}const zu=!1;class Gu{constructor(t){this.segmentGroup=t||null}}class kD{constructor(t){this.urlTree=t}}function Dl(n){return cl(new Gu(n))}function ND(n){return cl(new kD(n))}class vU{constructor(t,e,r,i,o){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=Ku(this.urlTree.root,[],[],this.config).segmentGroup,e=new rt(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Ze).pipe(Z(o=>this.createUrlTree(ku(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xr(o=>{if(o instanceof kD)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Gu?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Ze).pipe(Z(i=>this.createUrlTree(ku(i),t.queryParams,t.fragment))).pipe(Xr(i=>{throw i instanceof Gu?this.noMatchError(i):i}))}noMatchError(t){return new he(4002,zu)}createUrlTree(t,e,r){const i=am(t);return new to(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(Z(o=>new rt([],o))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Jt(i).pipe(Fi(o=>{const s=r.children[o],a=ID(e,o);return this.expandSegmentGroup(t,a,s,o).pipe(Z(l=>({segment:l,outlet:o})))}),Zx((o,s)=>(o[s.outlet]=s.segment,o),{}),Qx())}expandSegment(t,e,r,i,o,s){return Jt(r).pipe(Fi(a=>this.expandSegmentAgainstRoute(t,e,r,a,i,o,s).pipe(Xr(g=>{if(g instanceof Gu)return Oe(null);throw g}))),Ji(a=>!!a),Xr((a,l)=>{if(Dm(a))return FD(e,i,o)?Oe(new rt([],{})):Dl(e);throw a}))}expandSegmentAgainstRoute(t,e,r,i,o,s,a){return LD(i,e,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s):Dl(e):Dl(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ND(o):this.lineralizeSegments(r,o).pipe(qt(s=>{const a=new rt(s,{});return this.expandSegment(t,a,e,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s){const{matched:a,consumedSegments:l,remainingSegments:g,positionalParamSegments:I}=Sm(e,i,o);if(!a)return Dl(e);const j=this.applyRedirectCommands(l,i.redirectTo,I);return i.redirectTo.startsWith("/")?ND(j):this.lineralizeSegments(i,j).pipe(qt(X=>this.expandSegment(t,e,r,X.concat(g),s,!1)))}matchSegmentAgainstRoute(t,e,r,i,o){return"**"===r.path?(t=AD(r,t),r.loadChildren?(r._loadedRoutes?Oe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(Z(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new rt(i,{})))):Oe(new rt(i,{}))):OD(e,r,i,t).pipe(nr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=r._injector??t,r,i).pipe(qt(I=>{const j=I.injector??t,X=I.routes,{segmentGroup:q,slicedSegments:ee}=Ku(e,a,l,X),ie=new rt(q.segments,q.children);if(0===ee.length&&ie.hasChildren())return this.expandChildren(j,X,ie).pipe(Z(de=>new rt(a,de)));if(0===X.length&&0===ee.length)return Oe(new rt(a,{}));const se=Lr(r)===o;return this.expandSegment(j,ie,X,ee,se?Ze:o,!0).pipe(Z(ye=>new rt(a.concat(ye.segments),ye.children)))})):Dl(e)))}getChildConfig(t,e,r){return e.children?Oe({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Oe({routes:e._loadedRoutes,injector:e._loadedInjector}):function lU(n,t,e,r){const i=t.canLoad;return void 0===i||0===i.length?Oe(!0):Oe(i.map(s=>{const a=$s(s,n);return eo(function YB(n){return n&&xl(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(Ys(),PD())}(t,e,r).pipe(qt(i=>i?this.configLoader.loadChildren(t,e).pipe(rn(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function mU(n){return cl(TD(zu,3))}())):Oe({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Oe(r);if(i.numberOfChildren>1||!i.children[Ze])return t.redirectTo,cl(new he(4e3,zu));i=i.children[Ze]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,i){const o=this.createSegmentGroup(t,e.root,r,i);return new to(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return En(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=e[a]}else r[o]=i}),r}createSegmentGroup(t,e,r,i){const o=this.createSegments(t,e.segments,r,i);let s={};return En(e.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,r,i)}),new rt(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new he(4001,zu);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}class yU{}class xU{constructor(t,e,r,i,o,s,a){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const t=Ku(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ze).pipe(Z(e=>{if(null===e)return null;const r=new Uu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ze,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ki(r,e),o=new DD(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const e=t.value,r=xD(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,i)}processChildren(t,e,r){return Jt(Object.keys(r.children)).pipe(Fi(i=>{const o=r.children[i],s=ID(e,i);return this.processSegmentGroup(t,s,o,i)}),Zx((i,o)=>i&&o?(i.push(...o),i):null),qx(i=>null!==i),Au(null),Qx(),Z(i=>{if(null===i)return null;const o=UD(i);return function DU(n){n.sort((t,e)=>t.value.outlet===Ze?-1:e.value.outlet===Ze?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}))}processSegment(t,e,r,i,o){return Jt(e).pipe(Fi(s=>this.processSegmentAgainstRoute(s._injector??t,s,r,i,o)),Ji(s=>!!s),Xr(s=>{if(Dm(s))return FD(r,i,o)?Oe([]):Oe(null);throw s}))}processSegmentAgainstRoute(t,e,r,i,o){if(e.redirectTo||!LD(e,r,i,o))return Oe(null);let s;if("**"===e.path){const a=i.length>0?tD(i).parameters:{},l=HD(r)+i.length;s=Oe({snapshot:new Uu(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jD(e),Lr(e),e.component??e._loadedComponent??null,e,VD(r),l,KD(e)),consumedSegments:[],remainingSegments:[]})}else s=OD(r,e,i,t).pipe(Z(({matched:a,consumedSegments:l,remainingSegments:g,parameters:I})=>{if(!a)return null;const j=HD(r)+l.length;return{snapshot:new Uu(l,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jD(e),Lr(e),e.component??e._loadedComponent??null,e,VD(r),j,KD(e)),consumedSegments:l,remainingSegments:g}}));return s.pipe(nr(a=>{if(null===a)return Oe(null);const{snapshot:l,consumedSegments:g,remainingSegments:I}=a;t=e._injector??t;const j=e._loadedInjector??t,X=function CU(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:q,slicedSegments:ee}=Ku(r,g,I,X.filter(se=>void 0===se.redirectTo));if(0===ee.length&&q.hasChildren())return this.processChildren(j,X,q).pipe(Z(se=>null===se?null:[new ki(l,se)]));if(0===X.length&&0===ee.length)return Oe([new ki(l,[])]);const ie=Lr(e)===o;return this.processSegment(j,X,q,ee,ie?Ze:o).pipe(Z(se=>null===se?null:[new ki(l,se)]))}))}}function SU(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function UD(n){const t=[],e=new Set;for(const r of n){if(!SU(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=UD(r.children);t.push(new ki(r.value,i))}return t.filter(r=>!e.has(r))}function VD(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function HD(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function jD(n){return n.data||{}}function KD(n){return n.resolve||{}}function WD(n){return"string"==typeof n.title||null===n.title}function Tm(n){return nr(t=>{const e=n(t);return e?Jt(e).pipe(Z(()=>t)):Oe(t)})}const Xs=new _e("ROUTES");let wm=(()=>{class n{constructor(e,r){this.injector=e,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Oe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=eo(e.loadComponent()).pipe(Z(GD),rn(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),im(()=>{this.componentLoaders.delete(e)})),i=new Yx(r,()=>new N).pipe(nm());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Z(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,g,I=!1;Array.isArray(a)?g=a:(l=a.create(e).injector,g=eD(l.get(Xs,[],Ne.Self|Ne.Optional)));return{routes:g.map(xm),injector:l}}),im(()=>{this.childrenLoaders.delete(r)})),s=new Yx(o,()=>new N).pipe(nm());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(e){return eo(e()).pipe(Z(GD),qt(i=>i instanceof Rb||Array.isArray(i)?Oe(i):Jt(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(le(pr),le(bE))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GD(n){return function LU(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Yu=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new N,this.configLoader=je(wm),this.environmentInjector=je(ti),this.urlSerializer=je(fl),this.rootContexts=je(_l),this.navigationId=0,this.afterPreactivation=()=>Oe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new bB(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new yB(i))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new tr({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:gl,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rr(r=>0!==r.id),Z(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),nr(r=>{let i=!1,o=!1;return Oe(r).pipe(rn(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),nr(s=>{const a=e.browserUrlTree.toString(),l=!e.navigated||s.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const I="";return this.events.next(new Bu(s.id,e.serializeUrl(r.rawUrl),I,0)),e.rawUrlTree=s.rawUrl,s.resolve(null),kn}if(e.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return $D(s.source)&&(e.browserUrlTree=s.extractedUrl),Oe(s).pipe(nr(I=>{const j=this.transitions?.getValue();return this.events.next(new dm(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),j!==this.transitions?.getValue()?kn:Promise.resolve(I)}),function _U(n,t,e,r){return nr(i=>function gU(n,t,e,r,i){return new vU(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe(Z(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),rn(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},r.urlAfterRedirects=I.urlAfterRedirects}),function wU(n,t,e,r,i){return qt(o=>function EU(n,t,e,r,i,o,s="emptyOnly"){return new xU(n,t,e,r,i,s,o).recognize().pipe(nr(a=>null===a?function bU(n){return new p(t=>t.error(n))}(new yU):Oe(a)))}(n,t,e,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(Z(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),rn(I=>{if(r.targetSnapshot=I.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!I.extras.skipLocationChange){const X=e.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);e.setBrowserUrl(X,I)}e.browserUrlTree=I.urlAfterRedirects}const j=new pB(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(j)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:I,extractedUrl:j,source:X,restoredState:q,extras:ee}=s,ie=new dm(I,this.urlSerializer.serialize(j),X,q);this.events.next(ie);const se=ED(j,this.rootComponentType).snapshot;return Oe(r={...s,targetSnapshot:se,urlAfterRedirects:j,extras:{...ee,skipLocationChange:!1,replaceUrl:!1}})}{const I="";return this.events.next(new Bu(s.id,e.serializeUrl(r.extractedUrl),I,1)),e.rawUrlTree=s.rawUrl,s.resolve(null),kn}}),rn(s=>{const a=new mB(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Z(s=>r={...s,guards:KB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function eU(n,t){return qt(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?Oe({...e,guardsResult:!0}):function tU(n,t,e,r){return Jt(n).pipe(qt(i=>function aU(n,t,e,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Oe(o.map(a=>{const l=yl(t)??i,g=$s(a,l);return eo(function QB(n){return n&&xl(n.canDeactivate)}(g)?g.canDeactivate(n,t,e,r):l.runInContext(()=>g(n,t,e,r))).pipe(Ji())})).pipe(Ys()):Oe(!0)}(i.component,i.route,e,t,r)),Ji(i=>!0!==i,!0))}(s,r,i,n).pipe(qt(a=>a&&function $B(n){return"boolean"==typeof n}(a)?function nU(n,t,e,r){return Jt(t).pipe(Fi(i=>Mu(function iU(n,t){return null!==n&&t&&t(new EB(n)),Oe(!0)}(i.route.parent,r),function rU(n,t){return null!==n&&t&&t(new DB(n)),Oe(!0)}(i.route,r),function sU(n,t,e){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function WB(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>tm(()=>Oe(s.guards.map(l=>{const g=yl(s.node)??e,I=$s(l,g);return eo(function ZB(n){return n&&xl(n.canActivateChild)}(I)?I.canActivateChild(r,n):g.runInContext(()=>I(r,n))).pipe(Ji())})).pipe(Ys())));return Oe(o).pipe(Ys())}(n,i.path,e),function oU(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Oe(!0);const i=r.map(o=>tm(()=>{const s=yl(t)??e,a=$s(o,s);return eo(function XB(n){return n&&xl(n.canActivate)}(a)?a.canActivate(t,n):s.runInContext(()=>a(t,n))).pipe(Ji())}));return Oe(i).pipe(Ys())}(n,i.route,e))),Ji(i=>!0!==i,!0))}(r,o,n,t):Oe(a)),Z(a=>({...e,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),rn(s=>{if(r.guardsResult=s.guardsResult,Fo(s.guardsResult))throw SD(0,s.guardsResult);const a=new gB(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),rr(s=>!!s.guardsResult||(e.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),Tm(s=>{if(s.guards.canActivateChecks.length)return Oe(s).pipe(rn(a=>{const l=new vB(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),nr(a=>{let l=!1;return Oe(a).pipe(function MU(n,t){return qt(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Oe(e);let o=0;return Jt(i).pipe(Fi(s=>function AU(n,t,e,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!WD(i)&&(o[ul]=i.title),function IU(n,t,e,r){const i=function RU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Oe({});const o={};return Jt(i).pipe(qt(s=>function PU(n,t,e,r){const i=yl(t)??r,o=$s(n,i);return eo(o.resolve?o.resolve(t,e):i.runInContext(()=>o(t,e)))}(n[s],t,e,r).pipe(Ji(),rn(a=>{o[s]=a}))),rm(1),function jN(n){return Z(()=>n)}(o),Xr(s=>Dm(s)?kn:cl(s)))}(o,n,t,r).pipe(Z(s=>(n._resolvedData=s,n.data=xD(n,e).resolve,i&&WD(i)&&(n.data[ul]=i.title),null)))}(s.route,r,n,t)),rn(()=>o++),rm(1),qt(s=>o===i.length?Oe(e):kn))})}(e.paramsInheritanceStrategy,this.environmentInjector),rn({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),rn(a=>{const l=new _B(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Tm(s=>{const a=l=>{const g=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(l.routeConfig).pipe(rn(I=>{l.component=I}),Z(()=>{})));for(const I of l.children)g.push(...a(I));return g};return wu(a(s.targetSnapshot.root)).pipe(Au(),ui(1))}),Tm(()=>this.afterPreactivation()),Z(s=>{const a=function PB(n,t,e){const r=vl(n,t._root,e?e._root:void 0);return new bD(r,t)}(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),rn(s=>{e.currentUrlTree=s.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),e.routerState=s.targetRouterState,"deferred"===e.urlUpdateStrategy&&(s.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,s),e.browserUrlTree=s.urlAfterRedirects)}),((n,t,e)=>Z(r=>(new jB(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s)),rn({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new ko(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),im(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Xr(s=>{if(o=!0,MD(s)){wD(s)||(e.navigated=!0,e.restoreHistory(r,!0));const a=new Nu(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),wD(s)){const l=e.urlHandlingStrategy.merge(s.url,e.rawUrlTree),g={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||$D(r.source)};e.scheduleNavigation(l,gl,null,g,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const a=new fm(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(e.errorHandler(s))}catch(l){r.reject(l)}}return kn}))}))}cancelNavigationTransition(e,r,i){const o=new Nu(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $D(n){return n!==gl}let YD=(()=>{class n{buildTitle(e){let r,i=e.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ze);return r}getResolvedTitleForRoute(e){return e.data[ul]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return je(FU)},providedIn:"root"}),n})(),FU=(()=>{class n extends YD{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(le(jx))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return je(BU)},providedIn:"root"}),n})();class NU{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let BU=(()=>{class n extends NU{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=pn(n)))(r||n)}}(),n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xu=new _e("",{providedIn:"root",factory:()=>({})});let VU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return je(HU)},providedIn:"root"}),n})(),HU=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jU(n){throw n}function KU(n,t,e){return t.parse("/")}const WU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ir=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=je(C1),this.isNgZoneEnabled=!1,this.options=je(Xu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||jU,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||KU,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=je(VU),this.routeReuseStrategy=je(kU),this.urlCreationStrategy=je(AB),this.titleStrategy=je(YD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=eD(je(Xs,{optional:!0})??[]),this.navigationTransitions=je(Yu),this.urlSerializer=je(fl),this.location=je(cu),this.isNgZoneEnabled=je(Ue)instanceof Ue&&Ue.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new to,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ED(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),gl,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(xm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,g=l?this.currentUrlTree.fragment:s;let I=null;switch(a){case"merge":I={...this.currentUrlTree.queryParams,...o};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=o||null}return null!==I&&(I=this.removeEmptyProps(I)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,e,I,g??null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Fo(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,gl,null,r)}navigate(e,r={skipLocationChange:!1}){return function GU(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new he(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?{...WU}:!1===r?{...zU}:r,Fo(e))return rD(this.currentUrlTree,e,i);const o=this.parseUrl(e);return rD(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const o=e[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,g,I;return s?(a=s.resolve,l=s.reject,g=s.promise):g=new Promise((j,X)=>{a=j,l=X}),I="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:I,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(j=>Promise.reject(j))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bo=(()=>{class n{constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new N;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(g=>{g instanceof ko&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=Hs(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=Hs(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=Hs(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function ay(n,t,e){return function PI(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?sy:ka}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(ne(ir),ne(No),Sa("tabindex"),ne(Si),ne(tt),ne(Oo))},n.\u0275dir=Se({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&ft("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&e&&yt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Mn]}),n})();class XD{}let XU=(()=>{class n{constructor(e,r,i,o,s){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(rr(e=>e instanceof ko),Fi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Zc(o.providers,e,`Route: ${o.path}`));const s=o._injector??e,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Jt(i).pipe(zi())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):Oe(null);const o=i.pipe(qt(s=>null===s?Oe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return r.loadComponent&&!r._loadedComponent?Jt([o,this.loader.loadComponent(r)]).pipe(zi()):o})}}return n.\u0275fac=function(e){return new(e||n)(le(ir),le(bE),le(ti),le(XD),le(wm))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Am=new _e("");let ZD=(()=>{class n{constructor(e,r,i,o,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof dm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ko&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof _D&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _D(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){So()},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();var yr=(()=>((yr=yr||{})[yr.COMPLETE=0]="COMPLETE",yr[yr.FAILED=1]="FAILED",yr[yr.REDIRECTING=2]="REDIRECTING",yr))();const Zs=!1;function no(n,t){return{\u0275kind:n,\u0275providers:t}}const Im=new _e("",{providedIn:"root",factory:()=>!1});function qD(){const n=je(pr);return t=>{const e=n.get(Vs);if(t!==e.components[0])return;const r=n.get(ir),i=n.get(JD);1===n.get(Rm)&&r.initialNavigation(),n.get(eC,null,Ne.Optional)?.setUpPreloading(),n.get(Am,null,Ne.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const JD=new _e(Zs?"bootstrap done indicator":"",{factory:()=>new N}),Rm=new _e(Zs?"initial navigation":"",{providedIn:"root",factory:()=>1});function e2(){let n=[];return n=Zs?[{provide:Pc,multi:!0,useFactory:()=>{const t=je(ir);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function SB(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],no(1,n)}const eC=new _e(Zs?"router preloader":"");function t2(n){return no(0,[{provide:eC,useExisting:XU},{provide:XD,useExisting:n}])}const Cl=!1,tC=new _e(Cl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),n2=[cu,{provide:fl,useClass:om},ir,_l,{provide:No,useFactory:function QD(n){return n.routerState.root},deps:[ir]},wm,Cl?{provide:Im,useValue:!0}:[]];function r2(){return new ME("Router",ir)}let Zu=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[n2,Cl&&r?.enableTracing?e2().\u0275providers:[],{provide:Xs,multi:!0,useValue:e},{provide:tC,useFactory:l2,deps:[[ir,new Eo,new ds]]},{provide:Xu,useValue:r||{}},r?.useHash?{provide:Oo,useClass:dF}:{provide:Oo,useClass:QE},{provide:Am,useFactory:()=>{const n=je(wk),t=je(Ue),e=je(Xu),r=je(Yu),i=je(fl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new ZD(i,r,n,t,e)}},r?.preloadingStrategy?t2(r.preloadingStrategy).\u0275providers:[],{provide:ME,multi:!0,useFactory:r2},r?.initialNavigation?c2(r):[],[{provide:nC,useFactory:qD},{provide:wE,multi:!0,useExisting:nC}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Xs,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(le(tC,8))},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[bm]}),n})();function l2(n){if(Cl&&n)throw new he(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function c2(n){return["disabled"===n.initialNavigation?no(3,[{provide:tu,multi:!0,useFactory:()=>{const t=je(ir);return()=>{t.setUpLocationChangeListener()}}},{provide:Rm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?no(2,[{provide:Rm,useValue:0},{provide:tu,multi:!0,deps:[pr],useFactory:t=>{const e=t.get(cF,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const i=t.get(ir),o=t.get(JD);(function ZU(n,t){n.events.pipe(rr(e=>e instanceof ko||e instanceof Nu||e instanceof fm||e instanceof Bu),Z(e=>e instanceof ko||e instanceof Bu?yr.COMPLETE:e instanceof Nu&&(0===e.code||1===e.code)?yr.REDIRECTING:yr.FAILED),rr(e=>e!==yr.REDIRECTING),ui(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(Yu).afterPreactivation=()=>(r(!0),o.closed?Oe(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const nC=new _e(Cl?"Router Initializer":"");let Pm;try{Pm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Pm=!1}let Qs,on=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Tk(n){return n===vx}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Pm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(le(ru))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rC=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function iC(){if(Qs)return Qs;if("object"!=typeof document||!document)return Qs=new Set(rC),Qs;let n=document.createElement("input");return Qs=new Set(rC.filter(t=>(n.setAttribute("type",t),n.type===t))),Qs}let Sl,Qu,Uo,Om;function qs(n){return function d2(){if(null==Sl&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sl=!0}))}finally{Sl=Sl||!1}return Sl}()?n:!!n.capture}function oC(){if(null==Uo){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Uo=!1,Uo;if("scrollBehavior"in document.documentElement.style)Uo=!0;else{const n=Element.prototype.scrollTo;Uo=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Uo}function Tl(){if("object"!=typeof document||!document)return 0;if(null==Qu){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),r=e.style;r.width="2px",r.height="1px",n.appendChild(e),document.body.appendChild(n),Qu=0,0===n.scrollLeft&&(n.scrollLeft=1,Qu=0===n.scrollLeft?1:2),n.remove()}return Qu}function ro(n){return n.composedPath?n.composedPath()[0]:n.target}function Lm(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Js(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class w2 extends P{constructor(t,e){super()}schedule(t,e=0){return this}}const qu={setInterval(n,t,...e){const{delegate:r}=qu;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=qu;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class Um extends w2{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return qu.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&qu.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,J(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Vm={now:()=>(Vm.delegate||Date).now(),delegate:void 0};class wl{constructor(t,e=wl.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}wl.now=Vm.now;class Hm extends wl{constructor(t,e=wl.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}const jm=new Hm(Um),M2=jm;function Ju(n,t=jm){return $((e,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const g=o;o=null,r.next(g)}};function l(){const g=s+n,I=t.now();if(I<g)return i=this.schedule(void 0,g-I),void r.add(i);a()}e.subscribe(Q(r,g=>{o=g,s=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Km(n){return rr((t,e)=>n<=e)}function Wm(n,t=u){return n=n??A2,$((e,r)=>{let i,o=!0;e.subscribe(Q(r,s=>{const a=t(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function A2(n,t){return n===t}function zt(n){return $((t,e)=>{cn(n).subscribe(Q(e,()=>e.complete(),k)),!e.closed&&t.subscribe(e)})}function Gt(n){return null!=n&&"false"!=`${n}`}function Rn(n,t=0){return function I2(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function ed(n){return Array.isArray(n)?n:[n]}function sn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ni(n){return n instanceof tt?n.nativeElement:n}let uC=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R2=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=Ni(e);return new p(i=>{const s=this._observeElement(r).subscribe(i);return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new N,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:i}=this._observedElements.get(e);r&&r.disconnect(),i.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(le(uC))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P2=(()=>{class n{get disabled(){return this._disabled}set disabled(e){this._disabled=Gt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Rn(e),this._subscribe()}constructor(e,r,i){this._contentObserver=e,this._elementRef=r,this._ngZone=i,this.event=new it,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Ju(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(ne(R2),ne(tt),ne(Ue))},n.\u0275dir=Se({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),dC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:[uC]}),n})();const fC=new Set;let ea,O2=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):F2}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function L2(n){if(!fC.has(n))try{ea||(ea=document.createElement("style"),ea.setAttribute("type","text/css"),document.head.appendChild(ea)),ea.sheet&&(ea.sheet.insertRule(`@media ${n} {body{ }}`,0),fC.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(le(on))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function F2(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let k2=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new N}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return hC(ed(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let o=wu(hC(ed(e)).map(s=>this._registerQuery(s).observable));return o=Mu(o.pipe(ui(1)),o.pipe(Km(1),Ju(0))),o.pipe(Z(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:g})=>{a.matches=a.matches||l,a.breakpoints[g]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),o={observable:new p(s=>{const a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Li(r),Z(({matches:s})=>({query:e,matches:s})),zt(this._destroySubject)),mql:r};return this._queries.set(e,o),o}}return n.\u0275fac=function(e){return new(e||n)(le(O2),le(Ue))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hC(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function td(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const mC="cdk-describedby-message",nd="cdk-describedby-host";let zm=0,U2=(()=>{class n{constructor(e,r){this._platform=r,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+zm++,this._document=e,this._id=je(Us)+"-"+zm++}describe(e,r,i){if(!this._canBeDescribed(e,r))return;const o=Gm(r,i);"string"!=typeof r?(gC(r,this._id),this._messageRegistry.set(o,{messageElement:r,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(r,i),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,r,i){if(!r||!this._isElementNode(e))return;const o=Gm(r,i);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),"string"==typeof r){const s=this._messageRegistry.get(o);s&&0===s.referenceCount&&this._deleteMessageElement(o)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${nd}="${this._id}"]`);for(let r=0;r<e.length;r++)this._removeCdkDescribedByReferenceIds(e[r]),e[r].removeAttribute(nd);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,r){const i=this._document.createElement("div");gC(i,this._id),i.textContent=e,r&&i.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(Gm(e,r),{messageElement:i,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<r.length;o++)r[o].remove();const i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(e),i.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(e){const r=td(e,"aria-describedby").filter(i=>0!=i.indexOf(mC));e.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(e,r){const i=this._messageRegistry.get(r);(function N2(n,t,e){const r=td(n,t);r.some(i=>i.trim()==e.trim())||(r.push(e.trim()),n.setAttribute(t,r.join(" ")))})(e,"aria-describedby",i.messageElement.id),e.setAttribute(nd,this._id),i.referenceCount++}_removeMessageReference(e,r){const i=this._messageRegistry.get(r);i.referenceCount--,function B2(n,t,e){const i=td(n,t).filter(o=>o!=e.trim());i.length?n.setAttribute(t,i.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",i.messageElement.id),e.removeAttribute(nd)}_isElementDescribedByMessage(e,r){const i=td(e,"aria-describedby"),o=this._messageRegistry.get(r),s=o&&o.messageElement.id;return!!s&&-1!=i.indexOf(s)}_canBeDescribed(e,r){if(!this._isElementNode(e))return!1;if(r&&"object"==typeof r)return!0;const i=null==r?"":`${r}`.trim(),o=e.getAttribute("aria-label");return!(!i||o&&o.trim()===i)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(le(ot),le(on))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gm(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function gC(n,t){n.id||(n.id=`${mC}-${t}-${zm++}`)}class V2{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new N,this._typeaheadSubscription=P.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new N,this.change=new N,t instanceof el&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const i=e.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(rn(e=>this._pressedLetters.push(e)),Ju(t),rr(()=>this._pressedLetters.length>0),Z(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const o=(this._activeItemIndex+i)%r.length,s=r[o];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&i){const o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&i){const o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}return;default:return void((i||Js(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),r="number"==typeof t?t:e.indexOf(t);this._activeItem=e[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const i=(this._activeItemIndex+t*r+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(!r[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof el?this._items.toArray():this._items}}class H2 extends V2{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}function _C(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function yC(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const $2=new _e("cdk-input-modality-detector-options"),Y2={ignoreKeys:[18,17,224,91,16]},ta=qs({passive:!0,capture:!0});let X2=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,r,i,o){this._platform=e,this._mostRecentTarget=null,this._modality=new tr(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ro(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(_C(s)?"keyboard":"mouse"),this._mostRecentTarget=ro(s))},this._onTouchstart=s=>{yC(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ro(s))},this._options={...Y2,...o},this.modalityDetected=this._modality.pipe(Km(1)),this.modalityChanged=this.modalityDetected.pipe(Wm()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,ta),i.addEventListener("mousedown",this._onMousedown,ta),i.addEventListener("touchstart",this._onTouchstart,ta)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ta),document.removeEventListener("mousedown",this._onMousedown,ta),document.removeEventListener("touchstart",this._onTouchstart,ta))}}return n.\u0275fac=function(e){return new(e||n)(le(on),le(Ue),le(ot),le($2,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Z2=new _e("liveAnnouncerElement",{providedIn:"root",factory:function Q2(){return null}}),q2=new _e("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let J2=0,eV=(()=>{class n{constructor(e,r,i,o){this._ngZone=r,this._defaultOptions=o,this._document=i,this._liveElement=e||this._createLiveElement()}announce(e,...r){const i=this._defaultOptions;let o,s;return 1===r.length&&"number"==typeof r[0]?s=r[0]:[o,s]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),null==s&&i&&(s=i.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof s&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",r=this._document.getElementsByClassName(e),i=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return i.classList.add(e),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id="cdk-live-announcer-"+J2++,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(e){const r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){const o=r[i],s=o.getAttribute("aria-owns");s?-1===s.indexOf(e)&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}}return n.\u0275fac=function(e){return new(e||n)(le(Z2,8),le(Ue),le(ot),le(q2,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tV=new _e("cdk-focus-monitor-default-options"),rd=qs({passive:!0,capture:!0});let EC=(()=>{class n{constructor(e,r,i,o,s){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new N,this._rootNodeFocusAndBlurListener=a=>{for(let g=ro(a);g;g=g.parentElement)"focus"===a.type?this._onFocus(a,g):this._onBlur(a,g)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(e,r=!1){const i=Ni(e);if(!this._platform.isBrowser||1!==i.nodeType)return Oe(null);const o=function h2(n){if(function f2(){if(null==Om){const n=typeof document<"u"?document.head:null;Om=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Om}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;const a={checkChildren:r,subject:new N,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const r=Ni(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const o=Ni(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),o=ro(e);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,rd),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,rd)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(zt(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rd),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rd),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const o=e.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(le(Ue),le(on),le(X2),le(ot,8),le(tV,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xC="cdk-high-contrast-black-on-white",DC="cdk-high-contrast-white-on-black",$m="cdk-high-contrast-active";let CC=(()=>{class n{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=je(k2).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove($m,xC,DC),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?e.add($m,xC):2===r&&e.add($m,DC)}}}return n.\u0275fac=function(e){return new(e||n)(le(on),le(ot))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nV=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(le(CC))},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[dC]}),n})();const rV=new _e("cdk-dir-doc",{providedIn:"root",factory:function iV(){return je(ot)}}),oV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let io=(()=>{class n{constructor(e){this.value="ltr",this.change=new it,e&&(this.value=function sV(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?oV.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(le(rV,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ml=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({}),n})();const aV=["text"];function lV(n,t){if(1&n&&nt(0,"mat-pseudo-checkbox",6),2&n){const e=ze();Ee("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function cV(n,t){1&n&&nt(0,"mat-pseudo-checkbox",7),2&n&&Ee("disabled",ze().disabled)}function uV(n,t){if(1&n&&(ve(0,"span",8),We(1),ge()),2&n){const e=ze();be(1),mn("(",e.group.label,")")}}const dV=[[["mat-icon"]],"*"],fV=["mat-icon","*"],pV=new _e("mat-sanity-checks",{providedIn:"root",factory:function hV(){return!0}});let an=(()=>{class n{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Lm()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(le(CC),le(pV,8),le(ot))},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[Ml,Ml]}),n})();function Ym(n){return class extends n{get disabled(){return this._disabled}set disabled(t){this._disabled=Gt(t)}constructor(...t){super(...t),this._disabled=!1}}}function id(n,t){return class extends n{get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function wC(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Gt(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function mV(n,t=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Rn(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}}}function MC(n){return class extends n{updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}function gV(n){return class extends n{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new p(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}let AC=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _V{constructor(t,e,r,i=!1){this._renderer=t,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const IC=qs({passive:!0,capture:!0});class yV{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=ro(t);e&&this._events.get(t.type)?.forEach((r,i)=>{(i===e||i.contains(e))&&r.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,r,i){const o=this._events.get(e);if(o){const s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(e,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,IC)})}removeHandler(t,e,r){const i=this._events.get(t);if(!i)return;const o=i.get(e);o&&(o.delete(r),0===o.size&&i.delete(e),0===i.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,IC)))}}const RC={enterDuration:225,exitDuration:150},PC=qs({passive:!0,capture:!0}),OC=["mousedown","touchstart"],LC=["mouseup","mouseleave","touchend","touchcancel"];class Il{constructor(t,e,r,i){this._target=t,this._ngZone=e,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ni(r))}fadeInRipple(t,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...RC,...r.animation};r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const s=r.radius||function EV(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),a=t-i.left,l=e-i.top,g=o.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=a-s+"px",I.style.top=l-s+"px",I.style.height=2*s+"px",I.style.width=2*s+"px",null!=r.color&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(I);const j=window.getComputedStyle(I),q=j.transitionDuration,ee="none"===j.transitionProperty||"0s"===q||"0s, 0s"===q||0===i.width&&0===i.height,ie=new _V(this,I,r,ee);I.style.transform="scale3d(1, 1, 1)",ie.state=0,r.persistent||(this._mostRecentTransientRipple=ie);let se=null;return!ee&&(g||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ae=()=>this._finishRippleTransition(ie),ye=()=>this._destroyRipple(ie);I.addEventListener("transitionend",ae),I.addEventListener("transitioncancel",ye),se={onTransitionEnd:ae,onTransitionCancel:ye}}),this._activeRipples.set(ie,se),(ee||!g)&&this._finishRippleTransition(ie),ie}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,r={...RC,...t.config.animation};e.style.transitionDuration=`${r.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Ni(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,OC.forEach(r=>{Il._eventManager.addHandler(this._ngZone,r,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{LC.forEach(e=>{this._triggerElement.addEventListener(e,this,PC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=1,!r&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=_C(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!yC(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(OC.forEach(e=>Il._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&LC.forEach(e=>t.removeEventListener(e,this,PC)))}}Il._eventManager=new yV;const xV=new _e("mat-ripple-global-options");let Rl=(()=>{class n{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,r,i,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Il(this,r,e,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Ue),ne(on),ne(xV,8),ne(_r,8))},n.\u0275dir=Se({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&St("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),FC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an,an]}),n})(),DV=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return n.\u0275fac=function(e){return new(e||n)(ne(_r,8))},n.\u0275cmp=Dt({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(e,r){2&e&&St("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(e,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),n})(),CV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an]}),n})();const kC=new _e("MAT_OPTION_PARENT_COMPONENT"),NC=new _e("MatOptgroup");let SV=0;class TV{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let wV=(()=>{class n{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Gt(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,r,i,o){this._element=e,this._changeDetectorRef=r,this._parent=i,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+SV++,this.onSelectionChange=new it,this._stateChanges=new N}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Js(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new TV(this,e))}}return n.\u0275fac=function(e){So()},n.\u0275dir=Se({type:n,viewQuery:function(e,r){if(1&e&&gn(aV,7),2&e){let i;Tt(i=wt())&&(r._text=i.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),BC=(()=>{class n extends wV{constructor(e,r,i,o){super(e,r,i,o)}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Jn),ne(kC,8),ne(NC,8))},n.\u0275cmp=Dt({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,r){1&e&&ft("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&e&&(Ga("id",r.id),yt("tabindex",r._getTabIndex())("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),St("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},exportAs:["matOption"],features:[Ke],ngContentSelectors:fV,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(e,r){1&e&&(qn(dV),Be(0,lV,1,2,"mat-pseudo-checkbox",0),ht(1),ve(2,"span",1,2),ht(4,1),ge(),Be(5,cV,1,1,"mat-pseudo-checkbox",3),Be(6,uV,2,1,"span",4),nt(7,"div",5)),2&e&&(Ee("ngIf",r.multiple),be(5),Ee("ngIf",!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator),be(1),Ee("ngIf",r.group&&r.group._inert),be(1),Ee("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[Rl,Pi,DV],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[FC,Oi,an,CV]}),n})();const VC=["mat-button",""],HC=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],jC=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],KC=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",RV=["mat-icon-button",""],PV=["*"],OV=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],LV=id(Ym(wC(class{constructor(n){this._elementRef=n}})));let Xm=(()=>{class n extends LV{constructor(e,r,i,o){super(e),this._platform=r,this._ngZone=i,this._animationMode=o,this._focusMonitor=je(EC),this._isFab=!1;const s=e.nativeElement.classList;for(const a of OV)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{s.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",r){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...e){return e.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(e){So()},n.\u0275dir=Se({type:n,viewQuery:function(e,r){if(1&e&&gn(Rl,5),2&e){let i;Tt(i=wt())&&(r.ripple=i.first)}},features:[Ke]}),n})(),kV=(()=>{class n extends Xm{constructor(e,r,i,o){super(e,r,i,o),this._haltDisabledEvents=s=>{this.disabled&&(s.preventDefault(),s.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return n.\u0275fac=function(e){So()},n.\u0275dir=Se({type:n,features:[Ke]}),n})(),Zm=(()=>{class n extends Xm{constructor(e,r,i,o){super(e,r,i,o)}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(on),ne(Ue),ne(_r,8))},n.\u0275cmp=Dt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,r){2&e&&(yt("disabled",r.disabled||null),St("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ke],attrs:VC,ngContentSelectors:jC,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(qn(HC),nt(0,"span",0),ht(1),ve(2,"span",1),ht(3,1),ge(),ht(4,2),nt(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(St("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),be(6),Ee("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[Rl],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),WC=(()=>{class n extends kV{constructor(e,r,i,o){super(e,r,i,o)}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(on),ne(Ue),ne(_r,8))},n.\u0275cmp=Dt({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:9,hostBindings:function(e,r){2&e&&(yt("disabled",r.disabled||null)("tabindex",r.disabled?-1:r.tabIndex)("aria-disabled",r.disabled.toString()),St("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[Ke],attrs:VC,ngContentSelectors:jC,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(qn(HC),nt(0,"span",0),ht(1),ve(2,"span",1),ht(3,1),ge(),ht(4,2),nt(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(St("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),be(6),Ee("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[Rl],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',KC],encapsulation:2,changeDetection:0}),n})(),BV=(()=>{class n extends Xm{constructor(e,r,i,o){super(e,r,i,o)}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(on),ne(Ue),ne(_r,8))},n.\u0275cmp=Dt({type:n,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(e,r){2&e&&(yt("disabled",r.disabled||null),St("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ke],attrs:RV,ngContentSelectors:PV,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(qn(),nt(0,"span",0),ht(1),nt(2,"span",1)(3,"span",2)(4,"span",3)),2&e&&(be(3),Ee("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[Rl],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',KC],encapsulation:2,changeDetection:0}),n})(),Qm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an,FC,an]}),n})();const UV=[{path:"",pathMatch:"full",redirectTo:"courses"},{path:"**",pathMatch:"full",component:(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["app-not-found-page"]],decls:5,vars:0,consts:[[1,"message"],["mat-raised-button","","color","primary","routerLink","/"]],template:function(e,r){1&e&&(ve(0,"div",0)(1,"h2"),We(2,"There is no such a page :/"),ge(),ve(3,"button",1),We(4,"Go Back to Safety"),ge()())},dependencies:[Zm,Bo],styles:["[_nghost-%COMP%]{display:grid;justify-content:center;align-items:center;height:100%}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"],changeDetection:0}),n})()}];let VV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[Zu.forRoot(UV),Zu]}),n})();const HV=["*",[["mat-toolbar-row"]]],jV=["*","mat-toolbar-row"],KV=id(class{constructor(n){this._elementRef=n}});let WV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),zV=(()=>{class n extends KV{constructor(e,r,i){super(e),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(on),ne(ot))},n.\u0275cmp=Dt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,r,i){if(1&e&&vr(i,WV,5),2&e){let o;Tt(o=wt())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,r){2&e&&St("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Ke],ngContentSelectors:jV,decls:2,vars:0,template:function(e,r){1&e&&(qn(HV),ht(0),ht(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),GV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an,an]}),n})(),$V=(()=>{class n{constructor(){this.title="BetterMe"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"toolbar"],["mat-stroked-button","","routerLink","/"],[1,"content"]],template:function(e,r){1&e&&(ve(0,"mat-toolbar",0)(1,"a",1),We(2,"BetterMe"),ge()(),ve(3,"main",2),nt(4,"router-outlet"),ge())},dependencies:[WC,ym,Bo,zV],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100dvh}.toolbar[_ngcontent-%COMP%]{min-height:4rem}.content[_ngcontent-%COMP%]{flex:1}"]}),n})();const YV={host:"https://api.wisey.app",version:"api/v1"},XV=new _e("ENV_CONFIGURATION",{providedIn:"root",factory:()=>YV}),qm=new _e("basePath",{providedIn:"root",factory:()=>{const n=je(XV);return`${n.host}/${n.version}`}});class ZV extends N{constructor(t=1/0,e=1/0,r=Vm){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;e||(r.push(t),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=r?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=e.now();let a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}}function zC(n=0,t,e=M2){let r=-1;return null!=t&&(ql(t)?e=t:r=t),new p(i=>{let o=function QV(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}class od{}class Jm{}class Bi{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Bi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Bi;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Bi?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class qV{encodeKey(t){return GC(t)}encodeValue(t){return GC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const eH=/%(\d[a-f0-9])/gi,tH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GC(n){return encodeURIComponent(n).replace(eH,(t,e)=>tH[e]??t)}function sd(n){return`${n}`}class oo{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new qV,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function JV(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],i=Array.isArray(r)?r.map(sd):[sd(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new oo({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(sd(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(sd(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class nH{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function $C(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function YC(n){return typeof Blob<"u"&&n instanceof Blob}function XC(n){return typeof FormData<"u"&&n instanceof FormData}class Pl{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function rH(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Bi),this.context||(this.context=new nH),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new oo,this.urlWithParams=e}serializeBody(){return null===this.body?null:$C(this.body)||YC(this.body)||XC(this.body)||function iH(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof oo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||XC(this.body)?null:YC(this.body)?this.body.type||null:$C(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof oo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,g=t.params||this.params;const I=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((j,X)=>j.set(X,t.setHeaders[X]),l)),t.setParams&&(g=Object.keys(t.setParams).reduce((j,X)=>j.set(X,t.setParams[X]),g)),new Pl(e,r,o,{params:g,headers:l,context:I,reportProgress:a,responseType:i,withCredentials:s})}}var ln=(()=>((ln=ln||{})[ln.Sent=0]="Sent",ln[ln.UploadProgress=1]="UploadProgress",ln[ln.ResponseHeader=2]="ResponseHeader",ln[ln.DownloadProgress=3]="DownloadProgress",ln[ln.Response=4]="Response",ln[ln.User=5]="User",ln))();class eg{constructor(t,e=200,r="OK"){this.headers=t.headers||new Bi,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class tg extends eg{constructor(t={}){super(t),this.type=ln.ResponseHeader}clone(t={}){return new tg({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ad extends eg{constructor(t={}){super(t),this.type=ln.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ad({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ZC extends eg{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ng(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let rg=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Pl)o=e;else{let l,g;l=i.headers instanceof Bi?i.headers:new Bi(i.headers),i.params&&(g=i.params instanceof oo?i.params:new oo({fromObject:i.params})),o=new Pl(e,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:g,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Oe(o).pipe(Fi(l=>this.handler.handle(l)));if(e instanceof Pl||"events"===i.observe)return s;const a=s.pipe(rr(l=>l instanceof ad));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Z(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Z(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Z(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Z(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new oo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,ng(i,r))}post(e,r,i={}){return this.request("POST",e,ng(i,r))}put(e,r,i={}){return this.request("PUT",e,ng(i,r))}}return n.\u0275fac=function(e){return new(e||n)(le(od))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();function QC(n,t){return t(n)}function oH(n,t){return(e,r)=>t.intercept(e,{handle:i=>n(i,r)})}const qC=new _e("HTTP_INTERCEPTORS"),Ol=new _e("HTTP_INTERCEPTOR_FNS");function aH(){let n=null;return(t,e)=>(null===n&&(n=(je(qC,{optional:!0})??[]).reduceRight(oH,QC)),n(t,e))}let JC=(()=>{class n extends od{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Ol)));this.chain=r.reduceRight((i,o)=>function sH(n,t,e){return(r,i)=>e.runInContext(()=>t(r,o=>n(o,i)))}(i,o,this.injector),QC)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(le(Jm),le(ti))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const dH=/^\)\]\}',?\n/;let tS=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new p(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((q,ee)=>i.setRequestHeader(q,ee.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const q=e.detectContentTypeHeader();null!==q&&i.setRequestHeader("Content-Type",q)}if(e.responseType){const q=e.responseType.toLowerCase();i.responseType="json"!==q?q:"text"}const o=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const q=i.statusText||"OK",ee=new Bi(i.getAllResponseHeaders()),ie=function fH(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return s=new tg({headers:ee,status:i.status,statusText:q,url:ie}),s},l=()=>{let{headers:q,status:ee,statusText:ie,url:se}=a(),ae=null;204!==ee&&(ae=typeof i.response>"u"?i.responseText:i.response),0===ee&&(ee=ae?200:0);let ye=ee>=200&&ee<300;if("json"===e.responseType&&"string"==typeof ae){const de=ae;ae=ae.replace(dH,"");try{ae=""!==ae?JSON.parse(ae):null}catch(Ae){ae=de,ye&&(ye=!1,ae={error:Ae,text:ae})}}ye?(r.next(new ad({body:ae,headers:q,status:ee,statusText:ie,url:se||void 0})),r.complete()):r.error(new ZC({error:ae,headers:q,status:ee,statusText:ie,url:se||void 0}))},g=q=>{const{url:ee}=a(),ie=new ZC({error:q,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ee||void 0});r.error(ie)};let I=!1;const j=q=>{I||(r.next(a()),I=!0);let ee={type:ln.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(ee.total=q.total),"text"===e.responseType&&i.responseText&&(ee.partialText=i.responseText),r.next(ee)},X=q=>{let ee={type:ln.UploadProgress,loaded:q.loaded};q.lengthComputable&&(ee.total=q.total),r.next(ee)};return i.addEventListener("load",l),i.addEventListener("error",g),i.addEventListener("timeout",g),i.addEventListener("abort",g),e.reportProgress&&(i.addEventListener("progress",j),null!==o&&i.upload&&i.upload.addEventListener("progress",X)),i.send(o),r.next({type:ln.Sent}),()=>{i.removeEventListener("error",g),i.removeEventListener("abort",g),i.removeEventListener("load",l),i.removeEventListener("timeout",g),e.reportProgress&&(i.removeEventListener("progress",j),null!==o&&i.upload&&i.upload.removeEventListener("progress",X)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(le(yx))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const ig=new _e("XSRF_ENABLED"),nS=new _e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),rS=new _e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class iS{}let mH=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ax(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(le(ot),le(ru),le(nS))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();function gH(n,t){const e=n.url.toLowerCase();if(!je(ig)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=je(iS).getToken(),i=je(rS);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var Qt=(()=>((Qt=Qt||{})[Qt.Interceptors=0]="Interceptors",Qt[Qt.LegacyInterceptors=1]="LegacyInterceptors",Qt[Qt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Qt[Qt.NoXsrfProtection=3]="NoXsrfProtection",Qt[Qt.JsonpSupport=4]="JsonpSupport",Qt[Qt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Qt))();function na(n,t){return{\u0275kind:n,\u0275providers:t}}function vH(...n){const t=[rg,tS,JC,{provide:od,useExisting:JC},{provide:Jm,useExisting:tS},{provide:Ol,useValue:gH,multi:!0},{provide:ig,useValue:!0},{provide:iS,useClass:mH}];for(const e of n)t.push(...e.\u0275providers);return function OI(n){return{\u0275providers:n}}(t)}const oS=new _e("LEGACY_INTERCEPTOR_FN");let sS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:[vH(na(Qt.LegacyInterceptors,[{provide:oS,useFactory:aH},{provide:Ol,useExisting:oS,multi:!0}]))]}),n})(),aS=(()=>{class n{constructor(e,r){this.basePath=e,this.httpClient=r,this.coursesPath=`${this.basePath}/core/preview-courses`,this.cachedCourses$=this.httpClient.get(this.coursesPath).pipe(Z(({courses:i})=>i),pv({connector:()=>new ZV(1),resetOnRefCountZero:!1,resetOnError:!0,resetOnComplete:()=>zC(6e5)}))}getCourses(){return this.cachedCourses$}getCourse(e){return this.httpClient.get(`${this.basePath}/core/preview-courses/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(le(qm),le(rg))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lS=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(ne(Si),ne(tt))},n.\u0275dir=Se({type:n}),n})(),Vo=(()=>{class n extends lS{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=pn(n)))(r||n)}}(),n.\u0275dir=Se({type:n,features:[Ke]}),n})();const hi=new _e("NgValueAccessor"),EH={provide:hi,useExisting:Ot(()=>ld),multi:!0},DH=new _e("CompositionEventMode");let ld=(()=>{class n extends lS{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xH(){const n=Ai()?Ai().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(ne(Si),ne(tt),ne(DH,8))},n.\u0275dir=Se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&ft("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[At([EH]),Ke]}),n})();const CH=!1;function so(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function uS(n){return null!=n&&"number"==typeof n.length}const Pn=new _e("NgValidators"),ao=new _e("NgAsyncValidators"),SH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class dS{static min(t){return function fS(n){return t=>{if(so(t.value)||so(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function hS(n){return t=>{if(so(t.value)||so(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function pS(n){return so(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function mS(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function gS(n){return so(n.value)||SH.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function vS(n){return t=>so(t.value)||!uS(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function _S(n){return t=>uS(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function yS(n){if(!n)return cd;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(so(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return SS(t)}static composeAsync(t){return TS(t)}}function cd(n){return null}function bS(n){return null!=n}function ES(n){const t=Wa(n)?Jt(n):n;if(CH&&!Nh(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new he(-1101,e)}return t}function xS(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function DS(n,t){return t.map(e=>e(n))}function CS(n){return n.map(t=>function TH(n){return!n.validate}(t)?t:e=>t.validate(e))}function SS(n){if(!n)return null;const t=n.filter(bS);return 0==t.length?null:function(e){return xS(DS(e,t))}}function og(n){return null!=n?SS(CS(n)):null}function TS(n){if(!n)return null;const t=n.filter(bS);return 0==t.length?null:function(e){return function yH(...n){const t=uv(n),{args:e,keys:r}=zx(n),i=new p(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let l=s,g=s;for(let I=0;I<s;I++){let j=!1;cn(e[I]).subscribe(Q(o,X=>{j||(j=!0,g--),a[I]=X},()=>l--,void 0,()=>{(!l||!j)&&(g||o.next(r?Gx(r,a):a),o.complete())}))}});return t?i.pipe(em(t)):i}(DS(e,t).map(ES)).pipe(Z(xS))}}function sg(n){return null!=n?TS(CS(n)):null}function wS(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function MS(n){return n._rawValidators}function AS(n){return n._rawAsyncValidators}function ag(n){return n?Array.isArray(n)?n:[n]:[]}function ud(n,t){return Array.isArray(n)?n.includes(t):n===t}function IS(n,t){const e=ag(t);return ag(n).forEach(i=>{ud(e,i)||e.push(i)}),e}function RS(n,t){return ag(t).filter(e=>!ud(n,e))}class PS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=og(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=sg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Wn extends PS{get formDirective(){return null}get path(){return null}}class pi extends PS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class OS{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let LS=(()=>{class n extends OS{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(ne(pi,2))},n.\u0275dir=Se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&St("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ke]}),n})();function FS(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const ug=!1,Ll="VALID",fd="INVALID",ra="PENDING",Fl="DISABLED";function dg(n){return(hd(n)?n.validators:n)||null}function fg(n,t){return(hd(t)?t.asyncValidators:n)||null}function hd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class BS{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ll}get invalid(){return this.status===fd}get pending(){return this.status==ra}get disabled(){return this.status===Fl}get enabled(){return this.status!==Fl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(IS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(IS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(RS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(RS(t,this._rawAsyncValidators))}hasValidator(t){return ud(this._rawValidators,t)}hasAsyncValidator(t){return ud(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ra,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Fl,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ll,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ll||this.status===ra)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fl:Ll}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ra,this._hasOwnPendingAsyncValidator=!0;const e=ES(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?Fl:this.errors?fd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ra)?ra:this._anyControlsHaveStatus(fd)?fd:Ll}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hd(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function LH(n){return Array.isArray(n)?og(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function FH(n){return Array.isArray(n)?sg(n):n||null}(this._rawAsyncValidators)}}class hg extends BS{constructor(t,e,r){super(dg(e),fg(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function NS(n,t,e){n._forEachChild((r,i)=>{if(void 0===e[i])throw new he(1002,ug?function OH(n,t){return`Must supply a value for form control ${FS(n,t)}`}(t,i):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function kS(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new he(1e3,ug?function RH(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new he(1001,ug?function PH(n,t){return`Cannot find form control ${FS(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const ia=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>pd}),pd="always";function kl(n,t,e=pd){pg(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function BH(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&US(n,t)})}(n,t),function VH(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function UH(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&US(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function NH(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function gd(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),_d(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function vd(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function pg(n,t){const e=MS(n);null!==t.validator?n.setValidators(wS(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=AS(n);null!==t.asyncValidator?n.setAsyncValidators(wS(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();vd(t._rawValidators,i),vd(t._rawAsyncValidators,i)}function _d(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=MS(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const i=AS(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}const r=()=>{};return vd(t._rawValidators,r),vd(t._rawAsyncValidators,r),e}function US(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VS(n,t){pg(n,t)}function HS(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const zH={provide:Wn,useExisting:Ot(()=>Bl)},Nl=(()=>Promise.resolve())();let Bl=(()=>{class n extends Wn{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new it,this.form=new hg({},og(e),sg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Nl.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),kl(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Nl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Nl.then(()=>{const r=this._findContainer(e.path),i=new hg({});VS(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Nl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){Nl.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,HS(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(ne(Pn,10),ne(ao,10),ne(ia,8))},n.\u0275dir=Se({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&ft("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[At([zH]),Ke]}),n})();function jS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function KS(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const WS=class extends BS{constructor(t=null,e,r){super(dg(e),fg(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=KS(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){jS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){jS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){KS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},YH={provide:pi,useExisting:Ot(()=>_g)},$S=(()=>Promise.resolve())();let _g=(()=>{class n extends pi{constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new WS,this._registered=!1,this.update=new it,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function vg(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===ld?e=o:function KH(n){return Object.getPrototypeOf(n.constructor)===Vo}(o)?r=o:i=o}),i||r||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function gg(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){$S.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=0!==r&&Hs(r);$S.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function md(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(ne(Wn,9),ne(Pn,10),ne(ao,10),ne(hi,10),ne(Jn,8),ne(ia,8))},n.\u0275dir=Se({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[At([YH]),Ke,Mn]}),n})(),XS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({}),n})();const tj={provide:Wn,useExisting:Ot(()=>Ul)};let Ul=(()=>{class n extends Wn{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new it,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_d(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return kl(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){gd(e.control||null,e,!1),function WH(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,HS(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(gd(r||null,e),(n=>n instanceof WS)(i)&&(kl(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);VS(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function HH(n,t){return _d(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pg(this.form,this),this._oldForm&&_d(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(ne(Pn,10),ne(ao,10),ne(ia,8))},n.\u0275dir=Se({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&ft("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[At([tj]),Ke,Mn]}),n})(),yj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[XS]}),n})(),Ej=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:ia,useValue:e.callSetDisabledState??pd}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[yj]}),n})();class hT{}class xj{}const Ui="*";function yd(n,t){return{type:7,name:n,definitions:t,options:{}}}function Vl(n,t=null){return{type:4,styles:t,timings:n}}function pT(n,t=null){return{type:2,steps:n,options:t}}function Vi(n){return{type:6,styles:n,offset:null}}function bd(n,t,e){return{type:0,name:n,styles:t,options:e}}function oa(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Dj(n=null){return{type:9,options:n}}function Cj(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function mT(n){Promise.resolve().then(n)}class Hl{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){mT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class gT{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?mT(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const Cg="!",Sj=["matFormFieldNotchedOutline",""],Tj=["*"],wj=["textField"],Mj=["iconPrefixContainer"],Aj=["textPrefixContainer"];function Ij(n,t){1&n&&nt(0,"span",19)}function Rj(n,t){if(1&n){const e=ii();ve(0,"label",17),ft("cdkObserveContent",function(){return wr(e),Mr(ze(2)._refreshOutlineNotchWidth())}),ht(1,1),Be(2,Ij,1,0,"span",18),ge()}if(2&n){const e=ze(2);Ee("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),yt("for",e._control.id)("aria-owns",e._control.id),be(2),Ee("ngIf",!e.hideRequiredMarker&&e._control.required)}}function Pj(n,t){1&n&&Be(0,Rj,3,6,"label",16),2&n&&Ee("ngIf",ze()._hasFloatingLabel())}function Oj(n,t){1&n&&nt(0,"div",20)}function Lj(n,t){}function Fj(n,t){1&n&&Be(0,Lj,0,0,"ng-template",22),2&n&&(ze(2),Ee("ngTemplateOutlet",Rs(1)))}function kj(n,t){if(1&n&&(ve(0,"div",21),Be(1,Fj,1,1,"ng-template",9),ge()),2&n){const e=ze();Ee("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),be(1),Ee("ngIf",!e._forceDisplayInfixLabel())}}function Nj(n,t){1&n&&(ve(0,"div",23,24),ht(2,2),ge())}function Bj(n,t){1&n&&(ve(0,"div",25,26),ht(2,3),ge())}function Uj(n,t){}function Vj(n,t){1&n&&Be(0,Uj,0,0,"ng-template",22),2&n&&(ze(),Ee("ngTemplateOutlet",Rs(1)))}function Hj(n,t){1&n&&(ve(0,"div",27),ht(1,4),ge())}function jj(n,t){1&n&&(ve(0,"div",28),ht(1,5),ge())}function Kj(n,t){1&n&&nt(0,"div",29)}function Wj(n,t){1&n&&(ve(0,"div",30),ht(1,6),ge()),2&n&&Ee("@transitionMessages",ze()._subscriptAnimationState)}function zj(n,t){if(1&n&&(ve(0,"mat-hint",34),We(1),ge()),2&n){const e=ze(2);Ee("id",e._hintLabelId),be(1),Rr(e.hintLabel)}}function Gj(n,t){if(1&n&&(ve(0,"div",31),Be(1,zj,2,2,"mat-hint",32),ht(2,7),nt(3,"div",33),ht(4,8),ge()),2&n){const e=ze();Ee("@transitionMessages",e._subscriptAnimationState),be(1),Ee("ngIf",e.hintLabel)}}const $j=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Yj=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let vT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["mat-label"]]}),n})();const Xj=new _e("MatError");let Zj=0,_T=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+Zj++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,r){2&e&&(Ga("id",r.id),yt("align",null),St("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),n})();const Qj=new _e("MatPrefix"),qj=new _e("MatSuffix");let yT=(()=>{class n{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function Jj(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const r=e.scrollWidth;return e.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(ne(tt))},n.\u0275dir=Se({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,r){2&e&&St("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating"}}),n})();const bT="mdc-line-ripple--active",Ed="mdc-line-ripple--deactivating";let ET=(()=>{class n{constructor(e,r){this._elementRef=e,this._handleTransitionEnd=i=>{const o=this._elementRef.nativeElement.classList,s=o.contains(Ed);"opacity"===i.propertyName&&s&&o.remove(bT,Ed)},r.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(Ed),e.add(bT)}deactivate(){this._elementRef.nativeElement.classList.add(Ed)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Ue))},n.\u0275dir=Se({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),xT=(()=>{class n{constructor(e,r){this._elementRef=e,this._ngZone=r,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Ue))},n.\u0275cmp=Dt({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,r){2&e&&St("mdc-notched-outline--notched",r.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Sj,ngContentSelectors:Tj,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,r){1&e&&(qn(),nt(0,"div",0),ve(1,"div",1),ht(2),ge(),nt(3,"div",2)),2&e&&(be(1),oi("width",r._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const e4={transitionMessages:yd("transitionMessages",[bd("enter",Vi({opacity:1,transform:"translateY(0%)"})),oa("void => enter",[Vi({opacity:0,transform:"translateY(-5px)"}),Vl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Sg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n}),n})();const Tg=new _e("MatFormField"),t4=new _e("MAT_FORM_FIELD_DEFAULT_OPTIONS");let DT=0,TT=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Gt(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,r,i,o,s,a,l,g){this._elementRef=e,this._changeDetectorRef=r,this._ngZone=i,this._dir=o,this._platform=s,this._defaults=a,this._animationMode=l,this._document=g,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+DT++,this._hintLabelId="mat-mdc-hint-"+DT++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new N,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(zt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Xo(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(zt(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(zt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=r?.getBoundingClientRect().width??0,s=i?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+s}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Jn),ne(Ue),ne(io),ne(on),ne(t4,8),ne(_r,8),ne(ot))},n.\u0275cmp=Dt({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,i){if(1&e&&(vr(i,vT,5),vr(i,vT,7),vr(i,Sg,5),vr(i,Qj,5),vr(i,qj,5),vr(i,Xj,5),vr(i,_T,5)),2&e){let o;Tt(o=wt())&&(r._labelChildNonStatic=o.first),Tt(o=wt())&&(r._labelChildStatic=o.first),Tt(o=wt())&&(r._formFieldControl=o.first),Tt(o=wt())&&(r._prefixChildren=o),Tt(o=wt())&&(r._suffixChildren=o),Tt(o=wt())&&(r._errorChildren=o),Tt(o=wt())&&(r._hintChildren=o)}},viewQuery:function(e,r){if(1&e&&(gn(wj,5),gn(Mj,5),gn(Aj,5),gn(yT,5),gn(xT,5),gn(ET,5)),2&e){let i;Tt(i=wt())&&(r._textField=i.first),Tt(i=wt())&&(r._iconPrefixContainer=i.first),Tt(i=wt())&&(r._textPrefixContainer=i.first),Tt(i=wt())&&(r._floatingLabel=i.first),Tt(i=wt())&&(r._notchedOutline=i.first),Tt(i=wt())&&(r._lineRipple=i.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,r){2&e&&St("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[At([{provide:Tg,useExisting:n}])],ngContentSelectors:Yj,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,r){1&e&&(qn($j),Be(0,Pj,1,1,"ng-template",null,0,qc),ve(2,"div",1,2),ft("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),Be(4,Oj,1,0,"div",3),ve(5,"div",4),Be(6,kj,2,3,"div",5),Be(7,Nj,3,0,"div",6),Be(8,Bj,3,0,"div",7),ve(9,"div",8),Be(10,Vj,1,1,"ng-template",9),ht(11),ge(),Be(12,Hj,2,0,"div",10),Be(13,jj,2,0,"div",11),ge(),Be(14,Kj,1,0,"div",12),ge(),ve(15,"div",13),Be(16,Wj,2,1,"div",14),Be(17,Gj,5,2,"div",15),ge()),2&e&&(be(2),St("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),be(2),Ee("ngIf",!r._hasOutline()&&!r._control.disabled),be(2),Ee("ngIf",r._hasOutline()),be(1),Ee("ngIf",r._hasIconPrefix),be(1),Ee("ngIf",r._hasTextPrefix),be(2),Ee("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),be(2),Ee("ngIf",r._hasTextSuffix),be(1),Ee("ngIf",r._hasIconSuffix),be(1),Ee("ngIf",!r._hasOutline()),be(1),St("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),Ee("ngSwitch",r._getDisplayedMessages()),be(1),Ee("ngSwitchCase","error"),be(1),Ee("ngSwitchCase","hint"))},dependencies:[Pi,Hp,ol,Vp,P2,_T,yT,xT,ET],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[e4.transitionMessages]},changeDetection:0}),n})(),xd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an,Oi,dC,an]}),n})();const i4=["addListener","removeListener"],o4=["addEventListener","removeEventListener"],s4=["on","off"];function Dd(n,t,e,r){if(Ge(e)&&(r=e,e=void 0),r)return Dd(n,t,e).pipe(em(r));const[i,o]=function c4(n){return Ge(n.addEventListener)&&Ge(n.removeEventListener)}(n)?o4.map(s=>a=>n[s](t,a,e)):function a4(n){return Ge(n.addListener)&&Ge(n.removeListener)}(n)?i4.map(wT(n,t)):function l4(n){return Ge(n.on)&&Ge(n.off)}(n)?s4.map(wT(n,t)):[];if(!i&&Yn(n))return qt(s=>Dd(s,t,e))(cn(n));if(!i)throw new TypeError("Invalid event target");return new p(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return i(a),()=>o(a)})}function wT(n,t){return e=>r=>n[e](t,r)}const jl={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=jl;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=t(o=>{e=void 0,n(o)});return new P(()=>e?.(i))},requestAnimationFrame(...n){const{delegate:t}=jl;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=jl;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},f4=new class d4 extends Hm{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class u4 extends Um{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=jl.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:o}=t;null!=e&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==e&&(jl.cancelAnimationFrame(e),t._scheduled=void 0)}});let wg,h4=1;const Cd={};function MT(n){return n in Cd&&(delete Cd[n],!0)}const p4={setImmediate(n){const t=h4++;return Cd[t]=!0,wg||(wg=Promise.resolve()),wg.then(()=>MT(t)&&n()),t},clearImmediate(n){MT(n)}},{setImmediate:m4,clearImmediate:g4}=p4,Sd={setImmediate(...n){const{delegate:t}=Sd;return(t?.setImmediate||m4)(...n)},clearImmediate(n){const{delegate:t}=Sd;return(t?.clearImmediate||g4)(n)},delegate:void 0},y4=new class _4 extends Hm{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class v4 extends Um{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Sd.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:o}=t;null!=e&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==e&&(Sd.clearImmediate(e),t._scheduled=void 0)}});function Mg(n,t=jm){return function b4(n){return $((t,e)=>{let r=!1,i=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const g=i;i=null,e.next(g)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};t.subscribe(Q(e,g=>{r=!0,i=g,o||cn(n(g)).subscribe(o=Q(e,a,l))},()=>{s=!0,(!r||!o||o.closed)&&e.complete()}))})}(()=>zC(n,t))}const E4=["contentWrapper"],x4=["*"],D4=new _e("VIRTUAL_SCROLL_STRATEGY");let Kl=(()=>{class n{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new N,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new p(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(Mg(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Oe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(rr(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=Ni(r),o=e.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Dd(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(le(Ue),le(on),le(ot,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AT=(()=>{class n{constructor(e,r,i,o){this.elementRef=e,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new N,this._elementScrolled=new p(s=>this.ngZone.runOutsideAngular(()=>Dd(this.elementRef.nativeElement,"scroll").pipe(zt(this._destroyed)).subscribe(s)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=i?e.end:e.start),null==e.right&&(e.right=i?e.start:e.end),null!=e.bottom&&(e.top=r.scrollHeight-r.clientHeight-e.bottom),i&&0!=Tl()?(null!=e.left&&(e.right=r.scrollWidth-r.clientWidth-e.left),2==Tl()?e.left=e.right:1==Tl()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=r.scrollWidth-r.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const r=this.elementRef.nativeElement;oC()?r.scrollTo(e):(null!=e.top&&(r.scrollTop=e.top),null!=e.left&&(r.scrollLeft=e.left))}measureScrollOffset(e){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==e)return o.scrollTop;if("bottom"==e)return o.scrollHeight-o.clientHeight-o.scrollTop;const s=this.dir&&"rtl"==this.dir.value;return"start"==e?e=s?i:r:"end"==e&&(e=s?r:i),s&&2==Tl()?e==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&1==Tl()?e==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Kl),ne(Ue),ne(io,8))},n.\u0275dir=Se({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),Td=(()=>{class n{constructor(e,r,i){this._platform=e,this._change=new N,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Mg(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(le(on),le(Ue),le(ot,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IT=new _e("VIRTUAL_SCROLLABLE");let T4=(()=>{class n extends AT{constructor(e,r,i,o){super(e,r,i,o)}measureViewportSize(e){const r=this.elementRef.nativeElement;return"horizontal"===e?r.clientWidth:r.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Kl),ne(Ue),ne(io,8))},n.\u0275dir=Se({type:n,features:[Ke]}),n})();const M4=typeof requestAnimationFrame<"u"?f4:y4;let A4=(()=>{class n extends T4{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=Gt(e)}constructor(e,r,i,o,s,a,l,g){super(e,a,i,s),this.elementRef=e,this._changeDetectorRef=r,this._scrollStrategy=o,this.scrollable=g,this._platform=je(on),this._detachedSubject=new N,this._renderedRangeSubject=new N,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new p(I=>this._scrollStrategy.scrolledIndexChange.subscribe(j=>Promise.resolve().then(()=>this.ngZone.run(()=>I.next(j))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=P.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Li(null),Mg(0,M4)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(zt(this._detachedSubject)).subscribe(r=>{const i=r.length;i!==this._dataLength&&(this._dataLength=i,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function w4(n,t){return n.start==t.start&&n.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,r="to-start"){e=this.appendOnly&&"to-start"===r?0:e;const o="horizontal"==this.orientation,s=o?"X":"Y";let l=`translate${s}(${Number((o&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===r&&(l+=` translate${s}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,r="auto"){const i={behavior:r};"horizontal"===this.orientation?i.start=e:i.top=e,this.scrollable.scrollTo(i)}scrollToIndex(e,r="auto"){this._scrollStrategy.scrollToIndex(e,r)}measureScrollOffset(e){let r;return r=this.scrollable==this?i=>super.measureScrollOffset(i):i=>this.scrollable.measureScrollOffset(i),Math.max(0,r(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let r;const i="left",o="right",s="rtl"==this.dir?.value;r="start"==e?s?o:i:"end"==e?s?i:o:e||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(r);return this.elementRef.nativeElement.getBoundingClientRect()[r]-a}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const r of e)r()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Jn),ne(Ue),ne(D4,8),ne(io,8),ne(Kl),ne(Td),ne(IT,8))},n.\u0275cmp=Dt({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,r){if(1&e&&gn(E4,7),2&e){let i;Tt(i=wt())&&(r._contentWrapper=i.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,r){2&e&&St("cdk-virtual-scroll-orientation-horizontal","horizontal"===r.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==r.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[At([{provide:AT,useFactory:(t,e)=>t||e,deps:[[new Eo,new Dc(IT)],n]}]),Ke,qh],ngContentSelectors:x4,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,r){1&e&&(qn(),ve(0,"div",0,1),ht(2),ge(),nt(3,"div",2)),2&e&&(be(3),oi("width",r._totalContentWidth)("height",r._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),wd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({}),n})(),RT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[Ml,wd,A4,Ml,wd]}),n})();class Ag{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class PT extends Ag{constructor(t,e,r,i,o){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=o}}class OT extends Ag{constructor(t,e,r,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class I4 extends Ag{constructor(t){super(),this.element=t instanceof tt?t.nativeElement:t}}class R4{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof PT?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof OT?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof I4?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class P4 extends R4{constructor(t,e,r,i,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector||pr.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let O4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({}),n})();const LT=oC();class L4{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=sn(-this._previousScrollPosition.left),t.style.top=sn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,i=this._document.body.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),LT&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),LT&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class F4{constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class FT{enable(){}disable(){}attach(){}}function Ig(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function kT(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class k4{constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Ig(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let N4=(()=>{class n{constructor(e,r,i,o){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new FT,this.close=s=>new F4(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new L4(this._viewportRuler,this._document),this.reposition=s=>new k4(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return n.\u0275fac=function(e){return new(e||n)(le(Kl),le(Td),le(Ue),le(ot))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NT{constructor(t){if(this.scrollStrategy=new FT,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class B4{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let BT=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(le(ot))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U4=(()=>{class n extends BT{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(le(ot),le(Ue,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V4=(()=>{class n extends BT{constructor(e,r,i){super(e),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ro(o)},this._clickListener=o=>{const s=ro(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let g=l.length-1;g>-1;g--){const I=l[g];if(I._outsidePointerEvents.observers.length<1||!I.hasAttached())continue;if(I.overlayElement.contains(s)||I.overlayElement.contains(a))break;const j=I._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>j.next(o)):j.next(o)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(le(ot),le(on),le(Ue,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UT=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Lm()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(e),Lm()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(le(ot),le(on))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class H4{constructor(t,e,r,i,o,s,a,l,g,I=!1){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=g,this._animationsDisabled=I,this._backdropElement=null,this._backdropClick=new N,this._attachments=new N,this._detachments=new N,this._locationChanges=P.EMPTY,this._backdropClickHandler=j=>this._backdropClick.next(j),this._backdropTransitionendHandler=j=>{this._disposeBackdrop(j.target)},this._keydownEvents=new N,this._outsidePointerEvents=new N,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ui(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=sn(this._config.width),t.height=sn(this._config.height),t.minWidth=sn(this._config.minWidth),t.minHeight=sn(this._config.minHeight),t.maxWidth=sn(this._config.maxWidth),t.maxHeight=sn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,r){const i=ed(e||[]).filter(o=>!!o);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(zt(Xo(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const VT="cdk-overlay-connected-position-bounding-box",j4=/([A-Za-z%]+)$/;class K4{get positions(){return this._preferredPositions}constructor(t,e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new N,this._resizeSubscription=P.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(VT),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,i,a),g=this._getOverlayPoint(l,e,a),I=this._getOverlayFit(g,e,r,a);if(I.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(I,g,r)?o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<I.visibleArea)&&(s={overlayFit:I,overlayPoint:g,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(const g of o){const I=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);I>l&&(l=I,a=g)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&jo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(VT),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let i,o;if("center"==r.originX)i=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i="start"==r.originX?s:a}return e.left<0&&(i-=e.left),o="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:i,y:o}}_getOverlayPoint(t,e,r){let i,o;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+i,y:t.y+o}}_getOverlayFit(t,e,r,i){const o=jT(e);let{x:s,y:a}=t,l=this._getOffset(i,"x"),g=this._getOffset(i,"y");l&&(s+=l),g&&(a+=g);let X=0-a,q=a+o.height-r.height,ee=this._subtractOverflows(o.width,0-s,s+o.width-r.width),ie=this._subtractOverflows(o.height,X,q),se=ee*ie;return{visibleArea:se,isCompletelyWithinViewport:o.width*o.height===se,fitsInViewportVertically:ie===o.height,fitsInViewportHorizontally:ee==o.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,o=r.right-e.x,s=HT(this._overlayRef.getConfig().minHeight),a=HT(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=s&&s<=i)&&(t.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=jT(e),o=this._viewportRect,s=Math.max(t.x+i.width-o.width,0),a=Math.max(t.y+i.height-o.height,0),l=Math.max(o.top-r.top-t.y,0),g=Math.max(o.left-r.left-t.x,0);let I=0,j=0;return I=i.width<=o.width?g||-s:t.x<this._viewportMargin?o.left-r.left-t.x:0,j=i.height<=o.height?l||-a:t.y<this._viewportMargin?o.top-r.top-t.y:0,this._previousPushAmount={x:I,y:j},{x:t.x+I,y:t.y+j}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new B4(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,i=this._isRtl();let o,s,a,I,j,X;if("top"===e.overlayY)s=t.y,o=r.height-s+this._viewportMargin;else if("bottom"===e.overlayY)a=r.height-t.y+2*this._viewportMargin,o=r.height-a+this._viewportMargin;else{const q=Math.min(r.bottom-t.y+r.top,t.y),ee=this._lastBoundingBoxSize.height;o=2*q,s=t.y-q,o>ee&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-ee/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)X=r.width-t.x+this._viewportMargin,I=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)j=t.x,I=r.right-t.x;else{const q=Math.min(r.right-t.x+r.left,t.x),ee=this._lastBoundingBoxSize.width;I=2*q,j=t.x-q,I>ee&&!this._isInitialRender&&!this._growAfterOpen&&(j=t.x-ee/2)}return{top:s,left:j,bottom:a,right:X,width:I,height:o}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=sn(r.height),i.top=sn(r.top),i.bottom=sn(r.bottom),i.width=sn(r.width),i.left=sn(r.left),i.right=sn(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=sn(o)),s&&(i.maxWidth=sn(s))}this._lastBoundingBoxSize=r,jo(this._boundingBox.style,i)}_resetBoundingBoxStyles(){jo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){jo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const I=this._viewportRuler.getViewportScrollPosition();jo(r,this._getExactOverlayY(e,t,I)),jo(r,this._getExactOverlayX(e,t,I))}else r.position="static";let a="",l=this._getOffset(e,"x"),g=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),g&&(a+=`translateY(${g}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=sn(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=sn(s.maxWidth):o&&(r.maxWidth="")),jo(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=sn(o.y),i}_getExactOverlayX(t,e,r){let s,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=sn(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:kT(t,r),isOriginOutsideView:Ig(t,r),isOverlayClipped:kT(e,r),isOverlayOutsideView:Ig(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&ed(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof tt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function jo(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function HT(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(j4);return e&&"px"!==e?null:parseFloat(t)}return n||null}function jT(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const KT="cdk-global-overlay-wrapper";class W4{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(KT),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),g=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),I=this._xPosition,j=this._xOffset,X="rtl"===this._overlayRef.getConfig().direction;let q="",ee="",ie="";l?ie="flex-start":"center"===I?(ie="center",X?ee=j:q=j):X?"left"===I||"end"===I?(ie="flex-end",q=j):("right"===I||"start"===I)&&(ie="flex-start",ee=j):"left"===I||"start"===I?(ie="flex-start",q=j):("right"===I||"end"===I)&&(ie="flex-end",ee=j),t.position=this._cssPosition,t.marginLeft=l?"0":q,t.marginTop=g?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":ee,e.justifyContent=ie,e.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(KT),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let z4=(()=>{class n{constructor(e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new W4}flexibleConnectedTo(e){return new K4(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(le(Td),le(ot),le(on),le(UT))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),G4=0,sa=(()=>{class n{constructor(e,r,i,o,s,a,l,g,I,j,X,q){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=g,this._directionality=I,this._location=j,this._outsideClickDispatcher=X,this._animationsModuleType=q}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),s=new NT(e);return s.direction=s.direction||this._directionality.value,new H4(o,r,i,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+G4++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Vs)),new P4(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(le(N4),le(UT),le(gs),le(z4),le(U4),le(pr),le(Ue),le(ot),le(io),le(cu),le(V4),le(_r,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $4=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],WT=new _e("cdk-connected-overlay-scroll-strategy");let Rg=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(ne(tt))},n.\u0275dir=Se({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),n})(),zT=(()=>{class n{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Gt(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Gt(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Gt(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Gt(e)}get push(){return this._push}set push(e){this._push=Gt(e)}constructor(e,r,i,o,s){this._overlay=e,this._dir=s,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=P.EMPTY,this._attachSubscription=P.EMPTY,this._detachSubscription=P.EMPTY,this._positionSubscription=P.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new it,this.positionChange=new it,this.attach=new it,this.detach=new it,this.overlayKeydown=new it,this.overlayOutsideClick=new it,this._templatePortal=new OT(r,i),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=$4);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!Js(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new NT({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Rg?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(qx(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(ne(sa),ne(li),ne(gr),ne(WT),ne(io,8))},n.\u0275dir=Se({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Mn]}),n})();const X4={provide:WT,deps:[sa],useFactory:function Y4(n){return()=>n.scrollStrategies.reposition()}};let GT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:[sa,X4],imports:[Ml,O4,RT,RT]}),n})();class Z4{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,r=!0,i){this._multiple=t,this._emitChanges=r,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new N,e&&e.length&&(t?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(r=>this._markSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(r=>this._unmarkSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,r=new Set(t);t.forEach(o=>this._markSelected(o)),e.filter(o=>!r.has(o)).forEach(o=>this._unmarkSelected(o));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(t){if(this.compareWith){for(let e of this._selection)if(this.compareWith(t,e))return e;return t}return t}}const Q4=["trigger"],q4=["panel"];function J4(n,t){if(1&n&&(ve(0,"span",10),We(1),ge()),2&n){const e=ze();be(1),Rr(e.placeholder)}}function e3(n,t){if(1&n&&(ve(0,"span",14),We(1),ge()),2&n){const e=ze(2);be(1),Rr(e.triggerValue)}}function t3(n,t){1&n&&ht(0,0,["*ngSwitchCase","true"])}function n3(n,t){1&n&&(ve(0,"span",11),Be(1,e3,2,1,"span",12),Be(2,t3,1,0,"ng-content",13),ge()),2&n&&(Ee("ngSwitch",!!ze().customTrigger),be(2),Ee("ngSwitchCase",!0))}function r3(n,t){if(1&n){const e=ii();Jr(),xa(),ve(0,"div",15,16),ft("@transformPanel.done",function(i){return wr(e),Mr(ze()._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){return wr(e),Mr(ze()._handleKeydown(i))}),ht(2,1),ge()}if(2&n){const e=ze();G0("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Ee("ngClass",e.panelClass)("@transformPanel","showing"),yt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const i3=[[["mat-select-trigger"]],"*"],o3=["mat-select-trigger","*"],s3={transformPanelWrap:yd("transformPanelWrap",[oa("* => void",Cj("@transformPanel",[Dj()],{optional:!0}))]),transformPanel:yd("transformPanel",[bd("void",Vi({opacity:0,transform:"scale(1, 0.8)"})),oa("void => showing",Vl("120ms cubic-bezier(0, 0, 0.2, 1)",Vi({opacity:1,transform:"scale(1, 1)"}))),oa("* => void",Vl("100ms linear",Vi({opacity:0})))])};let $T=0;const YT=new _e("mat-select-scroll-strategy"),l3=new _e("MAT_SELECT_CONFIG"),c3={provide:YT,deps:[sa],useFactory:function a3(n){return()=>n.scrollStrategies.reposition()}},u3=new _e("MatSelectTrigger");class d3{constructor(t,e){this.source=t,this.value=e}}const f3=wC(mV(Ym(MC(class{constructor(n,t,e,r,i){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=r,this.ngControl=i,this.stateChanges=new N}}))));let h3=(()=>{class n extends f3{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(dS.required)??!1}set required(e){this._required=Gt(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Gt(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Gt(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Rn(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}constructor(e,r,i,o,s,a,l,g,I,j,X,q,ee,ie){super(s,o,l,g,j),this._viewportRuler=e,this._changeDetectorRef=r,this._ngZone=i,this._dir=a,this._parentFormField=I,this._liveAnnouncer=ee,this._defaultOptions=ie,this._panelOpen=!1,this._compareWith=(se,ae)=>se===ae,this._uid="mat-select-"+$T++,this._triggerAriaLabelledBy=null,this._destroy=new N,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+$T++,this._panelDoneAnimatingStream=new N,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=tm(()=>{const se=this.options;return se?se.changes.pipe(Li(se),nr(()=>Xo(...se.map(ae=>ae.onSelectionChange)))):this._ngZone.onStable.pipe(ui(1),nr(()=>this.optionSelectionChanges))}),this.openedChange=new it,this._openedStream=this.openedChange.pipe(rr(se=>se),Z(()=>{})),this._closedStream=this.openedChange.pipe(rr(se=>!se),Z(()=>{})),this.selectionChange=new it,this.valueChange=new it,this.ngControl&&(this.ngControl.valueAccessor=this),null!=ie?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=ie.typeaheadDebounceInterval),this._scrollStrategyFactory=q,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(X)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Z4(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Wm(),zt(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(zt(this._destroy)).subscribe(e=>{e.added.forEach(r=>r.select()),e.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(Li(null),zt(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),r=this.ngControl;if(e!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const r=e.keyCode,i=40===r||38===r||37===r||39===r,o=13===r||32===r,s=this._keyManager;if(!s.isTyping()&&o&&!Js(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;s.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const r=this._keyManager,i=e.keyCode,o=40===i||38===i,s=r.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(s||13!==i&&32!==i||!r.activeItem||Js(e))if(!s&&this._multiple&&65===i&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=r.activeItemIndex;r.onKeydown(e),this._multiple&&o&&e.shiftKey&&r.activeItem&&r.activeItemIndex!==a&&r.activeItem._selectViaInteraction()}else e.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(ui(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(e);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,e)}catch{return!1}});return r&&this._selectionModel.select(r),r}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new H2(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Xo(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(zt(e)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Xo(...this.options.map(r=>r._stateChanges)).pipe(zt(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,r){const i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),r&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),r&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,e):e.indexOf(r)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:e,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let r=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(ne(Td),ne(Jn),ne(Ue),ne(AC),ne(tt),ne(io,8),ne(Bl,8),ne(Ul,8),ne(Tg,8),ne(pi,10),Sa("tabindex"),ne(YT),ne(eV),ne(l3,8))},n.\u0275dir=Se({type:n,viewQuery:function(e,r){if(1&e&&(gn(Q4,5),gn(q4,5),gn(zT,5)),2&e){let i;Tt(i=wt())&&(r.trigger=i.first),Tt(i=wt())&&(r.panel=i.first),Tt(i=wt())&&(r._overlayDir=i.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Ke,Mn]}),n})(),p3=(()=>{class n extends h3{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(zt(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const r=this.options.toArray()[e];if(r){const i=this.panel.nativeElement,o=function MV(n,t,e){if(e.length){let r=t.toArray(),i=e.toArray(),o=0;for(let s=0;s<n+1;s++)r[s].group&&r[s].group===i[o]&&o++;return o}return 0}(e,this.options,this.optionGroups),s=r._getHostElement();i.scrollTop=0===e&&1===o?0:function AV(n,t,e,r){return n<e?n:n+t>e+r?Math.max(0,n-r+t):e}(s.offsetTop,s.offsetHeight,i.scrollTop,i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new d3(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof Rg?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=Gt(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=pn(n)))(r||n)}}(),n.\u0275cmp=Dt({type:n,selectors:[["mat-select"]],contentQueries:function(e,r,i){if(1&e&&(vr(i,u3,5),vr(i,BC,5),vr(i,NC,5)),2&e){let o;Tt(o=wt())&&(r.customTrigger=o.first),Tt(o=wt())&&(r.options=o),Tt(o=wt())&&(r.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,r){1&e&&ft("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&e&&(yt("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),St("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[At([{provide:Sg,useExisting:n},{provide:kC,useExisting:n}]),Ke],ngContentSelectors:o3,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,r){if(1&e&&(qn(i3),ve(0,"div",0,1),ft("click",function(){return r.toggle()}),ve(3,"div",2),Be(4,J4,2,1,"span",3),Be(5,n3,3,2,"span",4),ge(),ve(6,"div",5)(7,"div",6),Jr(),ve(8,"svg",7),nt(9,"path",8),ge()()()(),Be(10,r3,3,9,"ng-template",9),ft("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&e){const i=Rs(1);yt("aria-owns",r.panelOpen?r.id+"-panel":null),be(3),Ee("ngSwitch",r.empty),yt("id",r._valueId),be(1),Ee("ngSwitchCase",!0),be(1),Ee("ngSwitchCase",!1),be(5),Ee("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[Bp,ol,Vp,hx,zT,Rg],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[s3.transformPanel]},changeDetection:0}),n})(),m3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:[c3],imports:[Oi,GT,UC,an,wd,xd,UC,an]}),n})();const g3=["tooltip"],XT=new _e("mat-tooltip-scroll-strategy"),y3={provide:XT,deps:[sa],useFactory:function _3(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},E3=new _e("mat-tooltip-default-options",{providedIn:"root",factory:function b3(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),ZT="tooltip-panel",QT=qs({passive:!0});let w3=(()=>{class n{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Gt(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Gt(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Rn(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Rn(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,r,i,o,s,a,l,g,I,j,X,q){this._overlay=e,this._elementRef=r,this._scrollDispatcher=i,this._viewContainerRef=o,this._ngZone=s,this._platform=a,this._ariaDescriber=l,this._focusMonitor=g,this._dir=j,this._defaultOptions=X,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new N,this._scrollStrategy=I,this._document=q,X&&(X.position&&(this.position=X.position),X.positionAtOrigin&&(this.positionAtOrigin=X.positionAtOrigin),X.touchGestures&&(this.touchGestures=X.touchGestures)),j.change.pipe(zt(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(zt(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,i])=>{e.removeEventListener(r,i,QT)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,r){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const i=this._createOverlay(r);this._detach(),this._portal=this._portal||new PT(this._tooltipComponent,this._viewContainerRef);const o=this._tooltipInstance=i.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(zt(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(e)}hide(e=this.hideDelay){const r=this._tooltipInstance;r&&(r.isVisible()?r.hide(e):(r._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&o._origin instanceof tt)return this._overlayRef;this._detach()}const r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return i.positionChanges.pipe(zt(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${ZT}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(zt(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(zt(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(zt(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&27===o.keyCode&&!Js(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const r=e.getConfig().positionStrategy,i=this._getOrigin(),o=this._getOverlayPosition();r.withPositions([this._addOffset({...i.main,...o.main}),this._addOffset({...i.fallback,...o.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r||"below"==r?i={originX:"center",originY:"above"==r?"top":"bottom"}:"before"==r||"left"==r&&e||"right"==r&&!e?i={originX:"start",originY:"center"}:("after"==r||"right"==r&&e||"left"==r&&!e)&&(i={originX:"end",originY:"center"});const{x:o,y:s}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:o,originY:s}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r?i={overlayX:"center",overlayY:"bottom"}:"below"==r?i={overlayX:"center",overlayY:"top"}:"before"==r||"left"==r&&e||"right"==r&&!e?i={overlayX:"end",overlayY:"center"}:("after"==r||"right"==r&&e||"left"==r&&!e)&&(i={overlayX:"start",overlayY:"center"});const{x:o,y:s}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(ui(1),zt(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,r){return"above"===this.position||"below"===this.position?"top"===r?r="bottom":"bottom"===r&&(r="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:r}}_updateCurrentPositionClass(e){const{overlayY:r,originX:i,originY:o}=e;let s;if(s="center"===r?this._dir&&"rtl"===this._dir.value?"end"===i?"left":"right":"start"===i?"left":"right":"bottom"===r&&"top"===o?"above":"below",s!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${ZT}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let r;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(r=e),this.show(void 0,r)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const r=e.targetTouches?.[0],i=r?{x:r.clientX,y:r.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,i),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",r=>{const i=r.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",r],["touchcancel",r])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([r,i])=>{this._elementRef.nativeElement.addEventListener(r,i,QT)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const r=this._document.elementFromPoint(e.clientX,e.clientY),i=this._elementRef.nativeElement;r!==i&&!i.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const r=this._elementRef.nativeElement,i=r.style;("on"===e||"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName)&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),("on"===e||!r.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(e){So()},n.\u0275dir=Se({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),M3=(()=>{class n extends w3{constructor(e,r,i,o,s,a,l,g,I,j,X,q){super(e,r,i,o,s,a,l,g,I,j,X,q),this._tooltipComponent=I3,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(e){const i=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=i?-8:8:"end"===e.originX&&(e.offsetX=i?8:-8),e}}return n.\u0275fac=function(e){return new(e||n)(ne(sa),ne(tt),ne(Kl),ne(gr),ne(Ue),ne(on),ne(U2),ne(EC),ne(XT),ne(io,8),ne(E3,8),ne(ot))},n.\u0275dir=Se({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[Ke]}),n})(),A3=(()=>{class n{constructor(e,r){this._changeDetectorRef=e,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new N,this._animationsDisabled="NoopAnimations"===r}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const r=this._tooltip.nativeElement,i=this._showAnimation,o=this._hideAnimation;if(r.classList.remove(e?o:i),r.classList.add(e?i:o),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const s=getComputedStyle(r);("0s"===s.getPropertyValue("animation-duration")||"none"===s.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(r.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return n.\u0275fac=function(e){return new(e||n)(ne(Jn),ne(_r,8))},n.\u0275dir=Se({type:n}),n})(),I3=(()=>{class n extends A3{constructor(e,r,i){super(e,i),this._elementRef=r,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}}return n.\u0275fac=function(e){return new(e||n)(ne(Jn),ne(tt),ne(_r,8))},n.\u0275cmp=Dt({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(e,r){if(1&e&&gn(g3,7),2&e){let i;Tt(i=wt())&&(r._tooltip=i.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,r){1&e&&ft("mouseleave",function(o){return r._handleMouseLeave(o)}),2&e&&oi("zoom",r.isVisible()?1:null)},features:[Ke],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(e,r){1&e&&(ve(0,"div",0,1),ft("animationend",function(o){return r._handleAnimationEnd(o)}),ve(2,"div",2),We(3),ge()()),2&e&&(St("mdc-tooltip--multiline",r._isMultiline),Ee("ngClass",r.tooltipClass),be(3),Rr(r.message))},dependencies:[Bp],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:-8px;right:-8px;bottom:-8px;left:-8px;z-index:-1;position:absolute}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),n})(),R3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:[y3],imports:[nV,Oi,GT,an,an,wd]}),n})();function P3(n,t){if(1&n&&(ve(0,"mat-option",19),We(1),ge()),2&n){const e=t.$implicit;Ee("value",e),be(1),mn(" ",e," ")}}function O3(n,t){if(1&n){const e=ii();ve(0,"mat-form-field",16)(1,"mat-select",17),ft("selectionChange",function(i){return wr(e),Mr(ze(2)._changePageSize(i.value))}),Be(2,P3,2,2,"mat-option",18),ge()()}if(2&n){const e=ze(2);Ee("appearance",e._formFieldAppearance)("color",e.color),be(1),Ee("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),be(1),Ee("ngForOf",e._displayedPageSizeOptions)}}function L3(n,t){if(1&n&&(ve(0,"div",20),We(1),ge()),2&n){const e=ze(2);be(1),Rr(e.pageSize)}}function F3(n,t){if(1&n&&(ve(0,"div",12)(1,"div",13),We(2),ge(),Be(3,O3,3,8,"mat-form-field",14),Be(4,L3,2,1,"div",15),ge()),2&n){const e=ze();be(1),Bh("id",e._pageSizeLabelId),be(1),mn(" ",e._intl.itemsPerPageLabel," "),be(1),Ee("ngIf",e._displayedPageSizeOptions.length>1),be(1),Ee("ngIf",e._displayedPageSizeOptions.length<=1)}}function k3(n,t){if(1&n){const e=ii();ve(0,"button",21),ft("click",function(){return wr(e),Mr(ze().firstPage())}),Jr(),ve(1,"svg",7),nt(2,"path",22),ge()()}if(2&n){const e=ze();Ee("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),yt("aria-label",e._intl.firstPageLabel)}}function N3(n,t){if(1&n){const e=ii();Jr(),xa(),ve(0,"button",23),ft("click",function(){return wr(e),Mr(ze().lastPage())}),Jr(),ve(1,"svg",7),nt(2,"path",24),ge()()}if(2&n){const e=ze();Ee("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),yt("aria-label",e._intl.lastPageLabel)}}let Md=(()=>{class n{constructor(){this.changes=new N,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,r,i)=>{if(0==i||0==r)return`0 of ${i}`;const o=e*r;return`${o+1} \u2013 ${o<(i=Math.max(i,0))?Math.min(o+r,i):o+r} of ${i}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const U3={provide:Md,deps:[[new Eo,new ds,Md]],useFactory:function B3(n){return n||new Md}},H3=new _e("MAT_PAGINATOR_DEFAULT_OPTIONS"),j3=Ym(gV(class{}));let K3=(()=>{class n extends j3{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(Rn(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=Rn(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(Rn(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(r=>Rn(r)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=Gt(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=Gt(e)}constructor(e,r,i){if(super(),this._intl=e,this._changeDetectorRef=r,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new it,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){const{pageSize:o,pageSizeOptions:s,hidePageSize:a,showFirstLastButtons:l}=i;null!=o&&(this._pageSize=o),null!=s&&(this._pageSizeOptions=s),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const i=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,r)=>e-r),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(e){So()},n.\u0275dir=Se({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[Ke]}),n})(),W3=0,z3=(()=>{class n extends K3{constructor(e,r,i){super(e,r,i),this._pageSizeLabelId="mat-paginator-page-size-label-"+W3++,this._formFieldAppearance=i?.formFieldAppearance||"outline"}}return n.\u0275fac=function(e){return new(e||n)(ne(Md),ne(Jn),ne(H3,8))},n.\u0275cmp=Dt({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[Ke],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,r){1&e&&(ve(0,"div",0)(1,"div",1),Be(2,F3,5,4,"div",2),ve(3,"div",3)(4,"div",4),We(5),ge(),Be(6,k3,3,5,"button",5),ve(7,"button",6),ft("click",function(){return r.previousPage()}),Jr(),ve(8,"svg",7),nt(9,"path",8),ge()(),xa(),ve(10,"button",9),ft("click",function(){return r.nextPage()}),Jr(),ve(11,"svg",7),nt(12,"path",10),ge()(),Be(13,N3,3,5,"button",11),ge()()()),2&e&&(be(2),Ee("ngIf",!r.hidePageSize),be(3),mn(" ",r._intl.getRangeLabel(r.pageIndex,r.pageSize,r.length)," "),be(1),Ee("ngIf",r.showFirstLastButtons),be(1),Ee("matTooltip",r._intl.previousPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("matTooltipPosition","above")("disabled",r._previousButtonsDisabled()),yt("aria-label",r._intl.previousPageLabel),be(3),Ee("matTooltip",r._intl.nextPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("matTooltipPosition","above")("disabled",r._nextButtonsDisabled()),yt("aria-label",r._intl.nextPageLabel),be(3),Ee("ngIf",r.showFirstLastButtons))},dependencies:[yu,Pi,BV,TT,p3,BC,M3],styles:[".mat-mdc-paginator{display:block}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),G3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:[U3],imports:[Oi,Qm,m3,R3]}),n})();const qT=qs({passive:!0});let $3=(()=>{class n{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return kn;const r=Ni(e),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new N,s="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||r.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&r.classList.contains(s)&&(r.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1}))):(r.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",a,qT),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",a,qT)}}),o}stopMonitoring(e){const r=Ni(e),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(e){return new(e||n)(le(on),le(Ue))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({}),n})();const X3=new _e("MAT_INPUT_VALUE_ACCESSOR"),Z3=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Q3=0;const q3=MC(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r,this.stateChanges=new N}});let J3=(()=>{class n extends q3{get disabled(){return this._disabled}set disabled(e){this._disabled=Gt(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(dS.required)??!1}set required(e){this._required=Gt(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&iC().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Gt(e)}constructor(e,r,i,o,s,a,l,g,I,j){super(a,o,s,i),this._elementRef=e,this._platform=r,this._autofillMonitor=g,this._formField=j,this._uid="mat-input-"+Q3++,this.focused=!1,this.stateChanges=new N,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ee=>iC().has(ee)),this._iOSKeyupListener=ee=>{const ie=ee.target;!ie.value&&0===ie.selectionStart&&0===ie.selectionEnd&&(ie.setSelectionRange(1,1),ie.setSelectionRange(0,0))};const X=this._elementRef.nativeElement,q=X.nodeName.toLowerCase();this._inputValueAccessor=l||X,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&I.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===q,this._isTextarea="textarea"===q,this._isInFormField=!!j,this._isNativeSelect&&(this.controlType=X.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=e,e?r.setAttribute("placeholder",e):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Z3.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(on),ne(pi,10),ne(Bl,8),ne(Ul,8),ne(AC),ne(X3,10),ne($3),ne(Ue),ne(Tg,8))},n.\u0275dir=Se({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,r){1&e&&ft("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(Ga("id",r.id)("disabled",r.disabled)("required",r.required),yt("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),St("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[At([{provide:Sg,useExisting:n}]),Ke,Mn]}),n})(),eK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an,xd,xd,Y3,an]}),n})();const tK=["*"];let JT=(()=>{class n{constructor(){this.errorMessage=""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["app-error-state"]],inputs:{errorMessage:"errorMessage"},ngContentSelectors:tK,decls:3,vars:1,template:function(e,r){1&e&&(qn(),ve(0,"p"),We(1),ge(),ht(2)),2&e&&(be(1),mn(" ",r.errorMessage," "))},styles:["[_nghost-%COMP%]{display:block;text-align:center}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}"],changeDetection:0}),n})();const nK=["determinateSpinner"];function rK(n,t){if(1&n&&(Jr(),ve(0,"svg",11),nt(1,"circle",12),ge()),2&n){const e=ze();yt("viewBox",e._viewBox()),be(1),oi("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),yt("r",e._circleRadius())}}const iK=id(class{constructor(n){this._elementRef=n}},"primary"),oK=new _e("mat-progress-spinner-default-options",{providedIn:"root",factory:function sK(){return{diameter:ew}}}),ew=100;let lK=(()=>{class n extends iK{constructor(e,r,i){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=ew,this._noopAnimations="NoopAnimations"===r&&!!i&&!i._forceAnimations,i&&(i.color&&(this.color=this.defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Rn(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=Rn(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=Rn(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(_r,8),ne(oK))},n.\u0275cmp=Dt({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,r){if(1&e&&gn(nK,5),2&e){let i;Tt(i=wt())&&(r._determinateCircle=i.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,r){2&e&&(yt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),oi("width",r.diameter,"px")("height",r.diameter,"px"),St("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===r.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Ke],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,r){if(1&e&&(Be(0,rK,2,8,"ng-template",null,0,qc),ve(2,"div",1,2),Jr(),ve(4,"svg",3),nt(5,"circle",4),ge()(),xa(),ve(6,"div",5)(7,"div",6)(8,"div",7),Ka(9,8),ge(),ve(10,"div",9),Ka(11,8),ge(),ve(12,"div",10),Ka(13,8),ge()()()),2&e){const i=Rs(1);be(4),yt("viewBox",r._viewBox()),be(1),oi("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),yt("r",r._circleRadius()),be(4),Ee("ngTemplateOutlet",i),be(2),Ee("ngTemplateOutlet",i),be(2),Ee("ngTemplateOutlet",i)}},dependencies:[Hp],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),cK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[Oi,an]}),n})(),tw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["app-loading-state"]],decls:1,vars:0,consts:[[1,"mat-spinner"]],template:function(e,r){1&e&&nt(0,"mat-spinner",0)},dependencies:[lK],styles:["[_nghost-%COMP%]{display:block}.mat-spinner[_ngcontent-%COMP%]{margin:0 auto}"],changeDetection:0}),n})();const uK=["*"],hK=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],pK=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],mK=new _e("MAT_CARD_CONFIG");let Ad=(()=>{class n{constructor(e){this.appearance=e?.appearance||"raised"}}return n.\u0275fac=function(e){return new(e||n)(ne(mK,8))},n.\u0275cmp=Dt({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(e,r){2&e&&St("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:uK,decls:1,vars:0,template:function(e,r){1&e&&(qn(),ht(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),n})(),Pg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]}),n})(),Og=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),n})(),nw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]}),n})(),rw=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Se({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(e,r){2&e&&St("mat-mdc-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),Lg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:pK,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(e,r){1&e&&(qn(hK),ht(0),ve(1,"div",0),ht(2,1),ge(),ht(3,2))},encapsulation:2,changeDetection:0}),n})(),CK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an,Oi,an]}),n})(),SK=(()=>{class n{constructor(){}getItem(e){const r=localStorage.getItem(e);return r?JSON.parse(r):null}setItem(e,r){localStorage.setItem(e,JSON.stringify(r))}updateArray(e,r){this.setItem(e,r(this.getItem(e)??[]))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iw=(()=>{class n{constructor(e){this.localStorageService=e,this.COURSE_PREFIX="course-"}getCourseKey(e){return`${this.COURSE_PREFIX}${e}`}getCourseLessons(e){return this.localStorageService.getItem(this.getCourseKey(e))??[]}getLessonProgress(e,r){return this.getCourseLessons(e).find(i=>i.id===r)??null}calculateCourseProgressPercentage(e,r){const o=this.getCourseLessons(e).reduce((s,a)=>s+a.progressTime,0)/r*100;return isNaN(o)?0:o}calculateLessonProgressPercentage(e,r,i){const s=(this.getLessonProgress(e,r)?.progressTime??0)/i*100;return isNaN(s)?0:s}saveLessonProgress(e,r){const i=this.getCourseKey(e),{id:o,progressTime:s}=r;this.localStorageService.updateArray(i,a=>{const l={id:o,progressTime:s};return new Set(a.map(I=>I.id)).has(o)?a.map(I=>I.id===o?l:I):[...a,l]})}}return n.\u0275fac=function(e){return new(e||n)(le(SK))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TK=new _e("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),MK=id(class{constructor(n){this._elementRef=n}},"primary");let AK=(()=>{class n extends MK{constructor(e,r,i,o,s){super(e),this._ngZone=r,this._changeDetectorRef=i,this._animationMode=o,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new it,this._mode="determinate",this._transitionendHandler=a=>{0===this.animationEnd.observers.length||!a.target||!a.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation="NoopAnimations"===o,s&&(s.color&&(this.color=this.defaultColor=s.color),this.mode=s.mode||this.mode)}get value(){return this._value}set value(e){this._value=ow(Rn(e)),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=ow(Rn(e)),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}}return n.\u0275fac=function(e){return new(e||n)(ne(tt),ne(Ue),ne(Jn),ne(_r,8),ne(TK,8))},n.\u0275cmp=Dt({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:8,hostBindings:function(e,r){2&e&&(yt("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),St("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[Ke],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(e,r){1&e&&(ve(0,"div",0),nt(1,"div",1)(2,"div",2),ge(),ve(3,"div",3),nt(4,"span",4),ge(),ve(5,"div",5),nt(6,"span",4),ge()),2&e&&(be(1),oi("flex-basis",r._getBufferBarFlexBasis()),be(2),oi("transform",r._getPrimaryBarTransform()))},styles:["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half, 83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full, 200.611057%))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter, 37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half, 84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full, 160.277782%))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(-10px)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg, -83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg, -200.611057%))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg, -37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg, -84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg, -160.277782%))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;width:100%;height:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;width:100%;height:100%}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color, #6200ee)}.mdc-linear-progress__buffer-dots{background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\")}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6}.mdc-linear-progress{height:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height, 4px)}.mat-mdc-progress-bar{display:block}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}"],encapsulation:2,changeDetection:0}),n})();function ow(n,t=0,e=100){return Math.max(t,Math.min(e,n))}let IK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[an]}),n})();function RK(n,t){1&n&&nt(0,"mat-progress-bar",1),2&n&&Ee("value",ze().progress)}let Fg=(()=>{class n{get isProgressCompleted(){return this.progress>=100}get progress(){return this.duration&&(this.courseId||this.lessonId)?this.lessonId?this.courseProgressService.calculateLessonProgressPercentage(this.courseId,this.lessonId,this.duration):this.courseProgressService.calculateCourseProgressPercentage(this.courseId,this.duration):0}constructor(e,r){this.courseProgressService=e,this.cd=r,this.duration=0,this.courseId=""}recalculate(){this.cd.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(ne(iw),ne(Jn))},n.\u0275cmp=Dt({type:n,selectors:[["app-progress-bar"]],hostVars:2,hostBindings:function(e,r){2&e&&St("progress-completed",r.isProgressCompleted)},inputs:{duration:"duration",courseId:"courseId",lessonId:"lessonId"},decls:1,vars:1,consts:[["color","accent","mode","determinate",3,"value",4,"ngIf"],["color","accent","mode","determinate",3,"value"]],template:function(e,r){1&e&&Be(0,RK,1,1,"mat-progress-bar",0),2&e&&Ee("ngIf",r.progress)},dependencies:[Pi,AK],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})(),kg=(()=>{class n{transform(e){if(!e||e<0)return"00:00";const r=Math.floor(e/3600),i=Math.floor((e-3600*r)/60),o=e-3600*r-60*i;return r>0?`${this.padZero(r)}:${this.padZero(i)}:${this.padZero(o)}`:`${this.padZero(i)}:${this.padZero(o)}`}padZero(e){return(e<10?"0":"")+e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=Nn({name:"duration",type:n,pure:!0}),n})();function PK(n,t){if(1&n&&(ve(0,"div")(1,"strong"),We(2,"Skills: "),ge(),ve(3,"span"),We(4),ge()()),2&n){const e=ze();be(4),Rr(e.course.meta.skills)}}let OK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["app-course-card"]],inputs:{course:"course"},decls:29,vars:13,consts:[[1,"course-card"],[1,"image-media",3,"src","alt"],[3,"courseId","duration"],[1,"course-card-content"],[1,"course-details"],[4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"routerLink"]],template:function(e,r){1&e&&(ve(0,"mat-card",0),nt(1,"img",1)(2,"app-progress-bar",2),ve(3,"mat-card-header")(4,"mat-card-title"),We(5),ge()(),ve(6,"mat-card-content",3)(7,"div",4)(8,"span")(9,"strong"),We(10,"Duration: "),ge(),We(11),Ro(12,"duration"),ge(),ve(13,"span")(14,"strong"),We(15,"Lessons: "),ge(),We(16),ge(),ve(17,"span")(18,"strong"),We(19,"Rating: "),ge(),We(20),ge(),ve(21,"span")(22,"strong"),We(23,"Status: "),ge(),We(24),ge()(),Be(25,PK,5,1,"div",5),ge(),ve(26,"mat-card-actions",6)(27,"a",7),We(28,"Watch"),ge()()()),2&e&&(be(1),Ee("src",r.course.previewImageLink+"/cover.webp",ka)("alt",r.course.title),be(1),Ee("courseId",r.course.id)("duration",r.course.duration),be(3),Rr(r.course.title),be(6),mn("",ks(12,11,r.course.duration)," "),be(5),mn(" ",r.course.lessonsCount,""),be(4),mn(" ",r.course.rating,""),be(4),mn(" ",r.course.status,""),be(1),Ee("ngIf",r.course.meta.skills),be(2),Ee("routerLink",r.course.id))},dependencies:[Pi,Ad,rw,Og,Lg,Pg,WC,Bo,Fg,kg],styles:["[_nghost-%COMP%]{display:block}.course-card[_ngcontent-%COMP%]{height:100%}.course-card[_ngcontent-%COMP%]   .image-media[_ngcontent-%COMP%]{width:100%;background-repeat:no-repeat;background-position:center;background-size:cover;object-fit:cover}.course-card[_ngcontent-%COMP%]   .course-card-content[_ngcontent-%COMP%]{flex:1;margin-top:.5rem}.course-card[_ngcontent-%COMP%]   .course-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(5rem,1fr));gap:.2rem;margin-bottom:1rem}"],changeDetection:0}),n})();function LK(n,t){1&n&&nt(0,"app-loading-state",3)}function FK(n,t){if(1&n){const e=ii();ve(0,"app-error-state",4)(1,"button",5),ft("click",function(){return wr(e),Mr(ze(2).retry())}),We(2,"Retry"),ge()()}2&n&&Ee("errorMessage",ze().ngIf.error)}function kK(n,t){1&n&&nt(0,"app-course-card",11),2&n&&Ee("course",t.$implicit)}function NK(n,t){if(1&n){const e=ii();wo(0),ve(1,"mat-form-field",6)(2,"input",7),ft("ngModelChange",function(i){return wr(e),Mr(ze(2).onSearchTermChange(i))}),ge()(),ve(3,"div",8),Be(4,kK,1,1,"app-course-card",9),ge(),ve(5,"mat-paginator",10),ft("page",function(i){return wr(e),Mr(ze(2).onPageChange(i))}),ge(),Mo()}if(2&n){const e=ze().ngIf,r=ze();be(2),Ee("ngModel",r.searchTerm),be(2),Ee("ngForOf",e.data.courses)("ngForTrackBy",r.trackById),be(1),Ee("pageIndex",e.data.paginator.pageIndex)("length",e.data.paginator.length)("pageSize",e.data.paginator.pageSize)("showFirstLastButtons",!0)}}function BK(n,t){if(1&n&&(wo(0),Be(1,LK,1,0,"app-loading-state",1),Be(2,FK,3,1,"app-error-state",2),Be(3,NK,6,7,"ng-container",0),Mo()),2&n){const e=t.ngIf;be(1),Ee("ngIf",e.isLoading),be(1),Ee("ngIf",e.error),be(1),Ee("ngIf",e.data&&!e.isLoading&&!e.error)}}let UK=(()=>{class n{constructor(e){this.coursesService=e,this.initialPageEvent={pageSize:10,length:0,pageIndex:0},this.searchTerm="",this.searchSubject=new tr(this.searchTerm),this.searchTermDebounced$=this.searchSubject.asObservable().pipe(Km(1),Ju(300),Wm(),Li("")),this.retrySubject=new N,this.pageEventSubject=new tr(this.initialPageEvent),this.viewState$=this.getViewModel()}trackById(e,r){return r.id}onSearchTermChange(e){this.searchSubject.next(e??"")}onPageChange(e){this.pageEventSubject.next(e)}retry(){this.retrySubject.next()}getViewModel(){return this.retrySubject.pipe(Li(null),nr(()=>wu([this.searchTermDebounced$,this.pageEventSubject,this.coursesService.getCourses()]).pipe(Z(([e,r,i])=>({isLoading:!1,data:{paginator:{...r,length:i.length},courses:this.getPagedCourses(r,this.searchCourse(e,i))}})),Xr(()=>Oe({isLoading:!1,data:null,error:"Could not load the page"})),Li({isLoading:!0,data:null}))))}getPagedCourses(e,r){const i=e.pageIndex*e.pageSize;return r.slice(i,i+e.pageSize)}searchCourse(e,r){return e&&r?r.filter(i=>{const{title:o,description:s}=i,a=o.trim().toLowerCase(),l=s.trim().toLowerCase(),g=e.trim().toLowerCase();return a.includes(g)||l.includes(g)}):r}}return n.\u0275fac=function(e){return new(e||n)(ne(aS))},n.\u0275cmp=Dt({type:n,selectors:[["app-courses"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","align-center-absolute",4,"ngIf"],["class","align-center-absolute",3,"errorMessage",4,"ngIf"],[1,"align-center-absolute"],[1,"align-center-absolute",3,"errorMessage"],["color","primary","mat-raised-button","",3,"click"],[1,"search-field"],["matInput","","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"course-cards-grid"],[3,"course",4,"ngFor","ngForOf","ngForTrackBy"],["aria-label","Select page",1,"paginator",3,"pageIndex","length","pageSize","showFirstLastButtons","page"],[3,"course"]],template:function(e,r){1&e&&(Be(0,BK,4,3,"ng-container",0),Ro(1,"async")),2&e&&Ee("ngIf",ks(1,1,r.viewState$))},dependencies:[yu,Pi,ld,LS,_g,Zm,TT,z3,J3,JT,tw,OK,jp],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:80%;margin:0 auto;padding:2rem 0;position:relative;min-height:100%;gap:1rem}.search-field[_ngcontent-%COMP%], .paginator[_ngcontent-%COMP%]{width:100%}.course-cards-grid[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(3,1fr)}@media screen and (max-width: 960px){[_nghost-%COMP%]{max-width:none;padding:2rem 1rem}}@media screen and (max-width: 768px){.course-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width: 480px){.course-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0}),n})(),sw=(()=>{class n{get isLocked(){return"locked"===this.lesson.status}recalculate(){this.progressBar.recalculate()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["app-lesson-card"]],viewQuery:function(e,r){if(1&e&&gn(Fg,7),2&e){let i;Tt(i=wt())&&(r.progressBar=i.first)}},hostVars:2,hostBindings:function(e,r){2&e&&St("locked",r.isLocked)},inputs:{lesson:"lesson",courseId:"courseId"},decls:8,vars:8,consts:[[1,"lesson-card"],[1,"lesson-card-header"],[3,"courseId","lessonId","duration"]],template:function(e,r){1&e&&(ve(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),We(3),ge(),ve(4,"mat-card-subtitle"),We(5),Ro(6,"duration"),ge()(),nt(7,"app-progress-bar",2),ge()),2&e&&(be(3),Wh("",r.lesson.order," : ",r.lesson.title,""),be(2),mn("",ks(6,6,r.lesson.duration)," "),be(2),Ee("courseId",r.courseId)("lessonId",r.lesson.id)("duration",r.lesson.duration))},dependencies:[Ad,Lg,nw,Pg,Fg,kg],styles:["[_nghost-%COMP%]{display:block}.active-lesson[_nghost-%COMP%]   .lesson-card[_ngcontent-%COMP%]{background-color:#ad1457}.locked[_nghost-%COMP%]{pointer-events:none;opacity:.4}[_nghost-%COMP%]:hover{cursor:pointer}.lesson-card[_ngcontent-%COMP%]{height:100%;--mdc-typography-headline6-font-size: 1rem;min-height:5.5rem;margin-bottom:.5rem}.lesson-card[_ngcontent-%COMP%]   .lesson-card-header[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),n})();var VK=fo(70),Ng=fo.n(VK);const HK=["videoPlayer"];function jK(n,t){1&n&&(ve(0,"p"),We(1,"The Source of video is missing"),ge())}function KK(n,t){if(1&n&&(ve(0,"p"),We(1),ge()),2&n){const e=ze(2);be(1),Rr(e.errorMessage)}}function WK(n,t){if(1&n&&(ve(0,"div",3),Be(1,jK,2,0,"p",4),Be(2,KK,2,1,"p",4),ge()),2&n){const e=ze();be(1),Ee("ngIf",!e.src&&!e.errorMessage),be(1),Ee("ngIf",!!e.errorMessage)}}let zK=(()=>{class n{get videoPlayer(){return this.videoPlayerElementRef?.nativeElement}constructor(e,r){this.ngZone=e,this.cd=r,this.src="",this.currentTime=0,this.poster="",this.muted=!1,this.controls=!0,this.timeWatch=new it,this.errorMessage=""}ngOnChanges(e){this.videoPlayer&&this.hls&&(e.src?.currentValue&&(this.loadVideo(e.src.currentValue),this.videoPlayer.play()),null!=e.currentTime?.currentValue&&(this.videoPlayer.currentTime=e.currentTime.currentValue))}ngAfterViewInit(){this.initVideo()}onTimeUpdated(){this.ngZone.runOutsideAngular(()=>{this.timeWatch.emit(this.videoPlayer.currentTime)})}ngOnDestroy(){this.hls&&this.hls.destroy()}initVideo(){Ng().isSupported()&&this.src&&(this.hls=new(Ng()),this.loadVideo(this.src),this.videoPlayer.currentTime=this.currentTime,this.hls.on(Ng().Events.ERROR,(e,r)=>{this.errorMessage="Error while loading media:"+r.type+r.details,this.hls.detachMedia(),this.cd.markForCheck()}))}loadVideo(e){this.errorMessage="",this.hls.detachMedia(),this.hls.loadSource(e),this.hls.attachMedia(this.videoPlayer),this.cd.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(ne(Ue),ne(Jn))},n.\u0275cmp=Dt({type:n,selectors:[["app-video-player"]],viewQuery:function(e,r){if(1&e&&gn(HK,5),2&e){let i;Tt(i=wt())&&(r.videoPlayerElementRef=i.first)}},inputs:{src:"src",currentTime:"currentTime",poster:"poster",muted:"muted",controls:"controls"},outputs:{timeWatch:"timeWatch"},features:[Mn],decls:3,vars:4,consts:[["crossOrigin","use-credentials","allow","picture-in-picture",1,"video",3,"controls","poster","muted","timeupdate"],["videoPlayer",""],["class","error-message align-center-absolute",4,"ngIf"],[1,"error-message","align-center-absolute"],[4,"ngIf"]],template:function(e,r){1&e&&(ve(0,"video",0,1),ft("timeupdate",function(){return r.onTimeUpdated()}),ge(),Be(2,WK,3,2,"div",2)),2&e&&(Ee("controls",r.controls)("poster",r.poster,ka)("muted",r.muted),be(2),Ee("ngIf",!r.src||!!r.errorMessage))},dependencies:[Pi],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:56.25vw;max-height:100vh;max-width:177.7777777778vh;position:relative}[_nghost-%COMP%]   .error-message[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#00000080}[_nghost-%COMP%]   .video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}"],changeDetection:0}),n})();function GK(n,t){1&n&&nt(0,"app-loading-state",4)}function $K(n,t){1&n&&(ve(0,"app-error-state",5)(1,"button",6),We(2,"Back To Courses"),ge()()),2&n&&Ee("errorMessage",ze().ngIf.error)}function YK(n,t){if(1&n){const e=ii();ve(0,"app-video-player",17),ft("timeWatch",function(i){return wr(e),Mr(ze(3).onTimeWatchChanged(i))}),ge()}if(2&n){const e=ze(3);Ee("src",e.selectedLesson.link)("poster",e.selectedLesson.previewImageLink+"/lesson-"+e.selectedLesson.order+".webp")("currentTime",e.selectedLessonProgressTime)}}const XK=function(){return[]},ZK=function(n){return{lesson:n}};function QK(n,t){if(1&n){const e=ii();ve(0,"app-lesson-card",18),ft("click",function(){const i=wr(e),o=i.$implicit,s=i.index;return Mr(ze(3).selectLesson(o,s))}),ge()}if(2&n){const e=t.$implicit,r=t.index,i=ze(2).ngIf;St("active-lesson",ze().isLessonSelected(e.order)),Ee("lesson",e)("courseId",i.data.id)("routerLink",function Ub(n,t,e){const r=Vn()+n,i=me();return i[r]===Xe?ri(i,r,e?t.call(e):t()):function ja(n,t){return n[t]}(i,r)}(6,XK))("queryParams",function Vb(n,t,e,r){return Hb(me(),Vn(),n,t,e,r)}(7,ZK,r+1))}}function qK(n,t){if(1&n&&(wo(0),ve(1,"div")(2,"button",6),We(3,"Back To Courses"),ge()(),ve(4,"header",7)(5,"h1"),We(6),ge(),ve(7,"mat-card",8),nt(8,"img",9),ve(9,"mat-card-content",10)(10,"div",11)(11,"span")(12,"strong"),We(13,"Duration: "),ge(),We(14),Ro(15,"duration"),ge(),ve(16,"span")(17,"strong"),We(18,"Lessons: "),ge(),We(19),ge(),ve(20,"span")(21,"strong"),We(22,"Rating: "),ge(),We(23),ge(),ve(24,"span")(25,"strong"),We(26,"Launch Date: "),ge(),We(27),Ro(28,"date"),ge(),ve(29,"span")(30,"strong"),We(31,"Tags: "),ge(),We(32),ge()(),ve(33,"p")(34,"strong"),We(35,"Description:"),ge()(),ve(36,"p"),We(37),ge()()()(),ve(38,"main",12)(39,"div",13),Be(40,YK,1,3,"app-video-player",14),ge(),ve(41,"div",15),Be(42,QK,1,9,"app-lesson-card",16),ge()(),Mo()),2&n){const e=ze().ngIf,r=ze(),i=Rs(3);be(6),Rr(e.data.title),be(2),Ee("src",e.data.previewImageLink+"/cover.webp",ka)("alt",e.data.title),be(6),mn("",ks(15,12,e.data.duration)," "),be(5),mn("",e.data.lessons.length," "),be(4),mn("",e.data.rating," "),be(4),mn("",Gb(28,14,e.data.launchDate,"dd/MM/yyyy")," "),be(5),mn("",e.data.tags," "),be(5),Rr(e.data.description),be(3),Ee("ngIf",r.selectedLesson)("ngIfElse",i),be(2),Ee("ngForOf",e.data.lessons)}}function JK(n,t){if(1&n&&(wo(0),Be(1,GK,1,0,"app-loading-state",2),Be(2,$K,3,1,"app-error-state",3),Be(3,qK,43,17,"ng-container",0),Mo()),2&n){const e=t.ngIf;be(1),Ee("ngIf",e.isLoading),be(1),Ee("ngIf",e.error),be(1),Ee("ngIf",e.data&&!e.isLoading&&!e.error)}}function eW(n,t){1&n&&(ve(0,"div"),We(1,"Please select a lesson"),ge())}const tW=[{path:"courses",pathMatch:"full",component:UK},{path:"courses/:id",component:(()=>{class n{constructor(e,r,i,o){this.activatedRoute=e,this.router=r,this.coursesService=i,this.coursesProgressService=o,this.courseId="",this.selectedLesson=null,this.selectedLessonProgressTime=0,this.updatedSelectedLessonProgressTime=0,this.selectedLessonIndex=0,this.courseId$=this.activatedRoute.params.pipe(Z(s=>s.id),rn(s=>this.courseId=s)),this.viewState$=this.courseId$.pipe(nr(s=>this.coursesService.getCourse(s).pipe(rn(a=>{this.sortLessons(a);const[l,g]=this.getInitialSelectedLessonAndIndex(a.lessons);this.updateSelectedLesson(l,g),this.addLessonToQueryParams(g)}),Z(a=>({isLoading:!1,data:a})),Xr(()=>Oe({isLoading:!1,data:null,error:"Could not load the course"})),Li({isLoading:!0,data:null}))))}ngOnDestroy(){this.savePreviousLessonProgress()}isLessonSelected(e){return e===Rn(this.activatedRoute.snapshot.queryParams.lesson,null)}updateSelectedLesson(e,r){this.selectedLessonIndex=r,this.selectedLesson=e,this.selectedLessonProgressTime=this.coursesProgressService.getLessonProgress(this.courseId,e.id)?.progressTime??0}selectLesson(e,r){"locked"!==e.status&&e.id!==this.selectedLesson?.id&&(this.savePreviousLessonProgress(),this.recalculateProgressForPreviousLesson(),this.updateSelectedLesson(e,r))}onTimeWatchChanged(e){this.updatedSelectedLessonProgressTime=e}savePreviousLessonProgress(){this.coursesProgressService.saveLessonProgress(this.courseId,{id:this.selectedLesson?.id??"",progressTime:this.updatedSelectedLessonProgressTime})}recalculateProgressForPreviousLesson(){this.lessonCards.get(this.selectedLessonIndex)?.recalculate()}getInitialSelectedLessonAndIndex(e){const r=Rn(this.activatedRoute.snapshot.queryParams.lesson,null),i=null==r?0:r-1;return[e[i],i]}addLessonToQueryParams(e){this.router.navigate([],{queryParams:{lesson:e+1}})}sortLessons(e){e.lessons.sort((r,i)=>r.order-i.order)}}return n.\u0275fac=function(e){return new(e||n)(ne(No),ne(ir),ne(aS),ne(iw))},n.\u0275cmp=Dt({type:n,selectors:[["app-course"]],viewQuery:function(e,r){if(1&e&&gn(sw,5),2&e){let i;Tt(i=wt())&&(r.lessonCards=i)}},decls:4,vars:3,consts:[[4,"ngIf"],["noLessonSelected",""],["class","align-center-absolute",4,"ngIf"],["class","align-center-absolute",3,"errorMessage",4,"ngIf"],[1,"align-center-absolute"],[1,"align-center-absolute",3,"errorMessage"],["routerLink","../","color","primary","mat-raised-button",""],[1,"course-header"],[1,"course-card"],[1,"image-media",3,"src","alt"],[1,"course-card-content"],[1,"course-details"],[1,"lesson-player"],[1,"player-box"],["class","video-player",3,"src","poster","currentTime","timeWatch",4,"ngIf","ngIfElse"],[1,"lessons"],[3,"active-lesson","lesson","courseId","routerLink","queryParams","click",4,"ngFor","ngForOf"],[1,"video-player",3,"src","poster","currentTime","timeWatch"],[3,"lesson","courseId","routerLink","queryParams","click"]],template:function(e,r){1&e&&(Be(0,JK,4,3,"ng-container",0),Ro(1,"async"),Be(2,eW,2,0,"ng-template",null,1,qc)),2&e&&Ee("ngIf",ks(1,1,r.viewState$))},dependencies:[yu,Pi,Ad,Og,Zm,Bo,zK,JT,tw,sw,jp,mx,kg],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:85%;margin:0 auto;padding:2rem 0;min-height:100%;position:relative}.course-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;padding:1.2rem}.course-card[_ngcontent-%COMP%]   .course-card-content[_ngcontent-%COMP%]{width:100%;font-size:1rem}.course-card[_ngcontent-%COMP%]   .course-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;row-gap:1rem;margin-bottom:2.5rem}.lesson-player[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:3fr 1fr;height:35rem}.lesson-player[_ngcontent-%COMP%]   .player-box[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;padding-bottom:56.25%}.lesson-player[_ngcontent-%COMP%]   .player-box[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.lesson-player[_ngcontent-%COMP%]   .lessons[_ngcontent-%COMP%]{height:100%;overflow:auto}.image-media[_ngcontent-%COMP%]{height:auto;width:auto;max-width:50rem;max-height:15rem;position:relative;background-repeat:no-repeat;background-position:center;background-size:cover}@media screen and (max-width: 1000px){.course-card[_ngcontent-%COMP%]{flex-direction:column}.course-card[_ngcontent-%COMP%]   .image-media[_ngcontent-%COMP%]{max-width:none}}@media screen and (max-width: 960px){[_nghost-%COMP%]{max-width:none;padding:3rem}.lesson-player[_ngcontent-%COMP%]{grid-template-columns:1fr;height:85vh}.player-box[_ngcontent-%COMP%]{grid-column:1;grid-row:1}.lessons[_ngcontent-%COMP%]{grid-column:1;grid-row:2}}@media screen and (max-width: 767px){.player-box[_ngcontent-%COMP%]{padding-bottom:75%}}@media screen and (max-width: 480px){[_nghost-%COMP%]{padding:2.5rem 2rem}}"],changeDetection:0}),n})()}];let nW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({imports:[Oi,Ej,IK,CK,Qm,xd,cK,G3,sS,Zu.forChild(tW),eK,Zu]}),n})(),rW=(()=>{class n{constructor(e,r){this.basePath=e,this.http=r,this.token=""}getToken(){return this.token?Oe(this.token):this.http.get(`${this.basePath}/auth/anonymous?platform=subscriptions`).pipe(Xr(()=>Oe({token:""})),rn(({token:r})=>{this.token=r}),Z(({token:r})=>r))}}return n.\u0275fac=function(e){return new(e||n)(le(qm),le(rg))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iW=(()=>{class n{constructor(e,r){this.basePath=e,this.tokenService=r}intercept(e,r){let i=e;return!e.url.startsWith(this.basePath)||e.url.startsWith(this.basePath+"/auth")?r.handle(e):this.tokenService.getToken().pipe(Fi(o=>(i=e.clone({setHeaders:{Authorization:`Bearer ${o}`}}),r.handle(i))))}}return n.\u0275fac=function(e){return new(e||n)(le(qm),le(rW))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();function aw(n){return new he(3e3,!1)}function UW(){return typeof window<"u"&&typeof window.document<"u"}function Bg(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function lo(n){switch(n.length){case 0:return new Hl;case 1:return n[0];default:return new gT(n)}}function lw(n,t,e,r,i=new Map,o=new Map){const s=[],a=[];let l=-1,g=null;if(r.forEach(I=>{const j=I.get("offset"),X=j==l,q=X&&g||new Map;I.forEach((ee,ie)=>{let se=ie,ae=ee;if("offset"!==ie)switch(se=t.normalizePropertyName(se,s),ae){case Cg:ae=i.get(ie);break;case Ui:ae=o.get(ie);break;default:ae=t.normalizeStyleValue(ie,se,ae,s)}q.set(se,ae)}),X||a.push(q),g=q,l=j}),s.length)throw function wW(n){return new he(3502,!1)}();return a}function Ug(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&Vg(e,"start",n)));break;case"done":n.onDone(()=>r(e&&Vg(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&Vg(e,"destroy",n)))}}function Vg(n,t,e){const o=Hg(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),s=n._data;return null!=s&&(o._data=s),o}function Hg(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function br(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function cw(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let jg=(n,t)=>!1,uw=(n,t,e)=>[],dw=null;function Kg(n){const t=n.parentNode||n.host;return t===dw?null:t}(Bg()||typeof Element<"u")&&(UW()?(dw=(()=>document.documentElement)(),jg=(n,t)=>{for(;t;){if(t===n)return!0;t=Kg(t)}return!1}):jg=(n,t)=>n.contains(t),uw=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let Ko=null,fw=!1;const hw=jg,pw=uw;let mw=(()=>{class n{validateStyleProperty(e){return function HW(n){Ko||(Ko=function jW(){return typeof document<"u"?document.body:null}()||{},fw=!!Ko.style&&"WebkitAppearance"in Ko.style);let t=!0;return Ko.style&&!function VW(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Ko.style,!t&&fw&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ko.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return hw(e,r)}getParentElement(e){return Kg(e)}query(e,r,i){return pw(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],l){return new Hl(i,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),Wg=(()=>{class n{}return n.NOOP=new mw,n})();const KW=1e3,zg="ng-enter",Id="ng-leave",Rd="ng-trigger",Pd=".ng-trigger",vw="ng-animating",Gg=".ng-animating";function Hi(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:$g(parseFloat(t[1]),t[2])}function $g(n,t){return"s"===t?n*KW:n}function Od(n,t,e){return n.hasOwnProperty("duration")?n:function zW(n,t,e){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(aw()),{duration:0,delay:0,easing:""};i=$g(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=$g(parseFloat(l),a[4]));const g=a[5];g&&(s=g)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(function oW(){return new he(3100,!1)}()),a=!0),o<0&&(t.push(function sW(){return new he(3101,!1)}()),a=!0),a&&t.splice(l,0,aw())}return{duration:i,delay:o,easing:s}}(n,t,e)}function Wl(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function _w(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function co(n,t=new Map,e){if(e)for(let[r,i]of e)t.set(r,i);for(let[r,i]of n)t.set(r,i);return t}function bw(n,t,e){return e?t+":"+e+";":""}function Ew(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=bw(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=bw(0,XW(e),n.style[e]));n.setAttribute("style",t)}function mi(n,t,e){n.style&&(t.forEach((r,i)=>{const o=Xg(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r}),Bg()&&Ew(n))}function Wo(n,t){n.style&&(t.forEach((e,r)=>{const i=Xg(r);n.style[i]=""}),Bg()&&Ew(n))}function zl(n){return Array.isArray(n)?1==n.length?n[0]:pT(n):n}const Yg=new RegExp("{{\\s*(.+?)\\s*}}","g");function xw(n){let t=[];if("string"==typeof n){let e;for(;e=Yg.exec(n);)t.push(e[1]);Yg.lastIndex=0}return t}function Gl(n,t,e){const r=n.toString(),i=r.replace(Yg,(o,s)=>{let a=t[s];return null==a&&(e.push(function lW(n){return new he(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Ld(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const YW=/-+([a-z0-9])/g;function Xg(n){return n.replace(YW,(...t)=>t[1].toUpperCase())}function XW(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Er(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function cW(n){return new he(3004,!1)}()}}function Dw(n,t){return window.getComputedStyle(n)[t]}const Nd="*";function tz(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function nz(n,t,e){if(":"==n[0]){const l=function rz(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function DW(n){return new he(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function xW(n){return new he(3015,!1)}()),t;const i=r[1],o=r[2],s=r[3];t.push(Cw(i,s));"<"==o[0]&&!(i==Nd&&s==Nd)&&t.push(Cw(s,i))}(r,e,t)):e.push(n),e}const Bd=new Set(["true","1"]),Ud=new Set(["false","0"]);function Cw(n,t){const e=Bd.has(n)||Ud.has(n),r=Bd.has(t)||Ud.has(t);return(i,o)=>{let s=n==Nd||n==i,a=t==Nd||t==o;return!s&&e&&"boolean"==typeof i&&(s=i?Bd.has(n):Ud.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?Bd.has(t):Ud.has(t)),s&&a}}const iz=new RegExp("s*:selfs*,?","g");function Zg(n,t,e,r){return new oz(n).build(t,e,r)}class oz{constructor(t){this._driver=t}build(t,e,r){const i=new lz(e);return this._resetContextStyleTimingState(i),Er(this,zl(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function dW(){return new he(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,g=l.name;g.toString().split(/\s*,\s*/).forEach(I=>{l.name=I,o.push(this.visitState(l,e))}),l.name=g}else if(1==a.type){const l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,s.push(l)}else e.errors.push(function fW(){return new he(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{xw(l).forEach(g=>{s.hasOwnProperty(g)||o.add(g)})})}),o.size&&(Ld(o.values()),e.errors.push(function hW(n,t){return new he(3008,!1)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=Er(this,zl(t.animation),e);return{type:1,matchers:tz(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:zo(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>Er(this,r,e)),options:zo(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(s=>{e.currentTime=r;const a=Er(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:3,steps:o,options:zo(t.options)}}visitAnimate(t,e){const r=function uz(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Qg(Od(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Qg(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=Od(e,t);return Qg(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:Vi({});if(5==o.type)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const g={};r.easing&&(g.easing=r.easing),s=Vi(g)}e.currentTime+=r.duration+r.delay;const l=this.visitStyle(s,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)"string"==typeof a?a===Ui?r.push(a):e.errors.push(new he(3002,!1)):r.push(_w(a));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const g=e.collectedStyles.get(e.currentQuerySelector),I=g.get(l);let j=!0;I&&(o!=i&&o>=I.startTime&&i<=I.endTime&&(e.errors.push(function mW(n,t,e,r,i){return new he(3010,!1)}()),j=!1),o=I.startTime),j&&g.set(l,{startTime:o,endTime:i}),e.options&&function $W(n,t,e){const r=t.params||{},i=xw(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function aW(n){return new he(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function gW(){return new he(3011,!1)}()),r;let o=0;const s=[];let a=!1,l=!1,g=0;const I=t.steps.map(ae=>{const ye=this._makeStyleAst(ae,e);let de=null!=ye.offset?ye.offset:function cz(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(ye.styles),Ae=0;return null!=de&&(o++,Ae=ye.offset=de),l=l||Ae<0||Ae>1,a=a||Ae<g,g=Ae,s.push(Ae),ye});l&&e.errors.push(function vW(){return new he(3012,!1)}()),a&&e.errors.push(function _W(){return new he(3200,!1)}());const j=t.steps.length;let X=0;o>0&&o<j?e.errors.push(function yW(){return new he(3202,!1)}()):0==o&&(X=1/(j-1));const q=j-1,ee=e.currentTime,ie=e.currentAnimateTimings,se=ie.duration;return I.forEach((ae,ye)=>{const de=X>0?ye==q?1:X*ye:s[ye],Ae=de*se;e.currentTime=ee+ie.delay+Ae,ie.duration=Ae,this._validateStyleAst(ae,e),ae.offset=de,r.styles.push(ae)}),r}visitReference(t,e){return{type:8,animation:Er(this,zl(t.animation),e),options:zo(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:zo(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:zo(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function sz(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(iz,"")),n=n.replace(/@\*/g,Pd).replace(/@\w+/g,e=>Pd+"-"+e.slice(1)).replace(/:animating/g,Gg),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,br(e.collectedStyles,e.currentQuerySelector,new Map);const a=Er(this,zl(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:zo(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function bW(){return new he(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Od(t.timings,e.errors,!0);return{type:12,animation:Er(this,zl(t.animation),e),timings:r,options:null}}}class lz{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function zo(n){return n?(n=Wl(n)).params&&(n.params=function az(n){return n?Wl(n):null}(n.params)):n={},n}function Qg(n,t,e){return{duration:n,delay:t,easing:e}}function qg(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Vd{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const hz=new RegExp(":enter","g"),mz=new RegExp(":leave","g");function Jg(n,t,e,r,i,o=new Map,s=new Map,a,l,g=[]){return(new gz).buildKeyframes(n,t,e,r,i,o,s,a,l,g)}class gz{buildKeyframes(t,e,r,i,o,s,a,l,g,I=[]){g=g||new Vd;const j=new ev(t,e,g,i,o,I,[]);j.options=l;const X=l.delay?Hi(l.delay):0;j.currentTimeline.delayNextStep(X),j.currentTimeline.setStyles([s],null,j.errors,l),Er(this,r,j);const q=j.timelines.filter(ee=>ee.containsAnimation());if(q.length&&a.size){let ee;for(let ie=q.length-1;ie>=0;ie--){const se=q[ie];if(se.element===e){ee=se;break}}ee&&!ee.allowOnlyTimelineStyles()&&ee.setStyles([a],null,j.errors,l)}return q.length?q.map(ee=>ee.buildKeyframes()):[qg(e,[],[],[],0,X,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(const i of t){const o=i?.delay;if(o){const s="number"==typeof o?o:Hi(Gl(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const s=null!=r.duration?Hi(r.duration):null,a=null!=r.delay?Hi(r.delay):null;return 0!==s&&t.forEach(l=>{const g=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,g.duration+g.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Er(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Hd);const s=Hi(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>Er(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?Hi(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),Er(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Od(e.params?Gl(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Hi(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Hd);let s=r;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((g,I)=>{e.currentQueryIndex=I;const j=e.createSubContext(t.options,g);o&&j.delayNextStep(o),g===e.element&&(l=j.currentTimeline),Er(this,t.animation,j),j.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,j.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const I=e.currentTimeline;l&&I.delayNextStep(l);const j=I.currentTime;Er(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-j+(i.startTime-r.currentTimeline.startTime)}}const Hd={};class ev{constructor(t,e,r,i,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Hd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new jd(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=Hi(r.duration)),null!=r.delay&&(i.delay=Hi(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Gl(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new ev(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Hd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new vz(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(hz,"."+this._enterClassName)).replace(mz,"."+this._leaveClassName);let g=this._driver.query(this.element,t,1!=r);0!==r&&(g=r<0?g.slice(g.length+r,g.length):g.slice(0,r)),a.push(...g)}return!o&&0==a.length&&s.push(function EW(n){return new he(3014,!1)}()),a}}class jd{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new jd(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Ui),this._currentKeyframe.set(e,Ui);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);const o=i&&i.params||{},s=function _z(n,t){const e=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||t.keys();for(let o of r)e.set(o,Ui)}else co(i,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of s){const g=Gl(l,o,r);this._pendingStyles.set(a,g),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ui),this._updateStyle(a,g)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const g=co(a,new Map,this._backFill);g.forEach((I,j)=>{I===Cg?t.add(j):I===Ui&&e.add(j)}),r||g.set("offset",l/this.duration),i.push(g)});const o=t.size?Ld(t.values()):[],s=e.size?Ld(e.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return qg(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class vz extends jd{constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=r+e,a=e/s,l=co(t[0]);l.set("offset",0),o.push(l);const g=co(t[0]);g.set("offset",ww(a)),o.push(g);const I=t.length-1;for(let j=1;j<=I;j++){let X=co(t[j]);const q=X.get("offset");X.set("offset",ww((e+q*r)/s)),o.push(X)}r=s,e=0,i="",t=o}return qg(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function ww(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class tv{}const yz=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bz extends tv{normalizePropertyName(t,e){return Xg(t)}normalizeStyleValue(t,e,r,i){let o="";const s=r.toString().trim();if(yz.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function uW(n,t){return new he(3005,!1)}())}return s+o}}function Mw(n,t,e,r,i,o,s,a,l,g,I,j,X){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:g,postStyleProps:I,totalTime:j,errors:X}}const nv={};class Aw{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function Ez(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return void 0!==t&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,l,g,I){const j=[],X=this.ast.options&&this.ast.options.params||nv,ee=this.buildStyles(r,a&&a.params||nv,j),ie=l&&l.params||nv,se=this.buildStyles(i,ie,j),ae=new Set,ye=new Map,de=new Map,Ae="void"===i,dt={params:xz(ie,X),delay:this.ast.options?.delay},mt=I?[]:Jg(t,e,this.ast.animation,o,s,ee,se,dt,g,j);let On=0;if(mt.forEach(Ki=>{On=Math.max(Ki.duration+Ki.delay,On)}),j.length)return Mw(e,this._triggerName,r,i,Ae,ee,se,[],[],ye,de,On,j);mt.forEach(Ki=>{const Wi=Ki.element,Ww=br(ye,Wi,new Set);Ki.preStyleProps.forEach(Go=>Ww.add(Go));const Yl=br(de,Wi,new Set);Ki.postStyleProps.forEach(Go=>Yl.add(Go)),Wi!==e&&ae.add(Wi)});const ji=Ld(ae.values());return Mw(e,this._triggerName,r,i,Ae,ee,se,mt,ji,ye,de,On)}}function xz(n,t){const e=Wl(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class Dz{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,i=Wl(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(i[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Gl(s,i,e));const l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}}class Sz{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new Dz(i.style,i.options&&i.options.params||{},r))}),Iw(this.states,"true","1"),Iw(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new Aw(t,i,this.states))}),this.fallbackTransition=function Tz(n,t,e){return new Aw(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function Iw(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const wz=new Vd;class Mz{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],i=[],o=Zg(this._driver,e,r,i);if(r.length)throw function MW(n){return new he(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,r){const i=t.element,o=lw(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=Jg(this._driver,e,o,zg,Id,new Map,new Map,r,wz,i),s.forEach(I=>{const j=br(a,I.element,new Map);I.postStyleProps.forEach(X=>j.set(X,null))})):(i.push(function AW(){return new he(3300,!1)}()),s=[]),i.length)throw function IW(n){return new he(3504,!1)}();a.forEach((I,j)=>{I.forEach((X,q)=>{I.set(q,this._driver.computeStyle(j,q,Ui))})});const g=lo(s.map(I=>{const j=a.get(I.element);return this._buildPlayer(I,new Map,j)}));return this._playersById.set(t,g),g.onDestroy(()=>this.destroy(t)),this.players.push(g),g}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function RW(n){return new he(3301,!1)}();return e}listen(t,e,r,i){const o=Hg(e,"","","");return Ug(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const Rw="ng-animate-queued",rv="ng-animate-disabled",Oz=[],Pw={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fr="__ng_removed";class iv{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function Bz(n){return n??null}(r?t.value:t),r){const o=Wl(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const $l="void",ov=new iv($l);class Fz{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,kr(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw function PW(n,t){return new he(3302,!1)}();if(null==r||0==r.length)throw function OW(n){return new he(3303,!1)}();if(!function Uz(n){return"start"==n||"done"==n}(r))throw function LW(n,t){return new he(3400,!1)}();const o=br(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);const a=br(this._engine.statesByElement,t,new Map);return a.has(e)||(kr(t,Rd),kr(t,Rd+"-"+e),a.set(e,ov)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function FW(n){return new he(3401,!1)}();return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),s=new sv(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(kr(t,Rd),kr(t,Rd+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const g=new iv(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&g.absorbOptions(l.options),a.set(e,g),l||(l=ov),g.value!==$l&&l.value===g.value){if(!function jz(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(l.params,g.params)){const ie=[],se=o.matchStyles(l.value,l.params,ie),ae=o.matchStyles(g.value,g.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{Wo(t,se),mi(t,ae)})}return}const X=br(this._engine.playersByElement,t,[]);X.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==e&&ie.queued&&ie.destroy()});let q=o.matchTransition(l.value,g.value,t,g.params),ee=!1;if(!q){if(!i)return;q=o.fallbackTransition,ee=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:q,fromState:l,toState:g,player:s,isFallbackTransition:ee}),ee||(kr(t,Rw),s.onStart(()=>{aa(t,Rw)})),s.onDone(()=>{let ie=this.players.indexOf(s);ie>=0&&this.players.splice(ie,1);const se=this._engine.playersByElement.get(t);if(se){let ae=se.indexOf(s);ae>=0&&se.splice(ae,1)}}),this.players.push(s),X.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Pd,!0);r.forEach(i=>{if(i[Fr])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((l,g)=>{if(s.set(g,l.value),this._triggers.has(g)){const I=this.trigger(t,g,$l,i);I&&a.push(I)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&lo(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const l=this._triggers.get(s).fallbackTransition,g=r.get(s)||ov,I=new iv($l),j=new sv(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:g,toState:I,player:j,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[Fr];(!o||o===Pw)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){kr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const l=Hg(o,r.triggerName,r.fromState.value,r.toState.value);l._data=t,Ug(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class kz{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new Fz(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){const l=i.get(a);if(l){const g=r.indexOf(l);r.splice(g+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}return e}trigger(t,e,r,i){if(Kd(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!Kd(e))return;const o=e[Fr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),kr(t,rv)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),aa(t,rv))}removeNode(t,e,r,i){if(Kd(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Fr]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return Kd(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Pd,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Gg,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return lo(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Fr];if(e&&e.setForRemoval){if(t[Fr]=Pw,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(rv)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)kr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?lo(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function kW(n){return new he(3402,!1)}()}_flushAnimations(t,e){const r=new Vd,i=[],o=new Map,s=[],a=new Map,l=new Map,g=new Map,I=new Set;this.disabledNodes.forEach(Pe=>{I.add(Pe);const Le=this.driver.query(Pe,".ng-animate-queued",!0);for(let He=0;He<Le.length;He++)I.add(Le[He])});const j=this.bodyNode,X=Array.from(this.statesByElement.keys()),q=Fw(X,this.collectedEnterElements),ee=new Map;let ie=0;q.forEach((Pe,Le)=>{const He=zg+ie++;ee.set(Le,He),Pe.forEach(pt=>kr(pt,He))});const se=[],ae=new Set,ye=new Set;for(let Pe=0;Pe<this.collectedLeaveElements.length;Pe++){const Le=this.collectedLeaveElements[Pe],He=Le[Fr];He&&He.setForRemoval&&(se.push(Le),ae.add(Le),He.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(pt=>ae.add(pt)):ye.add(Le))}const de=new Map,Ae=Fw(X,Array.from(ae));Ae.forEach((Pe,Le)=>{const He=Id+ie++;de.set(Le,He),Pe.forEach(pt=>kr(pt,He))}),t.push(()=>{q.forEach((Pe,Le)=>{const He=ee.get(Le);Pe.forEach(pt=>aa(pt,He))}),Ae.forEach((Pe,Le)=>{const He=de.get(Le);Pe.forEach(pt=>aa(pt,He))}),se.forEach(Pe=>{this.processLeaveNode(Pe)})});const dt=[],mt=[];for(let Pe=this._namespaceList.length-1;Pe>=0;Pe--)this._namespaceList[Pe].drainQueuedTransitions(e).forEach(He=>{const pt=He.player,vn=He.element;if(dt.push(pt),this.collectedEnterElements.length){const Ln=vn[Fr];if(Ln&&Ln.setForMove){if(Ln.previousTriggersValues&&Ln.previousTriggersValues.has(He.triggerName)){const $o=Ln.previousTriggersValues.get(He.triggerName),Nr=this.statesByElement.get(He.element);if(Nr&&Nr.has(He.triggerName)){const Gd=Nr.get(He.triggerName);Gd.value=$o,Nr.set(He.triggerName,Gd)}}return void pt.destroy()}}const gi=!j||!this.driver.containsElement(j,vn),xr=de.get(vn),uo=ee.get(vn),jt=this._buildInstruction(He,r,uo,xr,gi);if(jt.errors&&jt.errors.length)return void mt.push(jt);if(gi)return pt.onStart(()=>Wo(vn,jt.fromStyles)),pt.onDestroy(()=>mi(vn,jt.toStyles)),void i.push(pt);if(He.isFallbackTransition)return pt.onStart(()=>Wo(vn,jt.fromStyles)),pt.onDestroy(()=>mi(vn,jt.toStyles)),void i.push(pt);const $w=[];jt.timelines.forEach(Ln=>{Ln.stretchStartingKeyframe=!0,this.disabledNodes.has(Ln.element)||$w.push(Ln)}),jt.timelines=$w,r.append(vn,jt.timelines),s.push({instruction:jt,player:pt,element:vn}),jt.queriedElements.forEach(Ln=>br(a,Ln,[]).push(pt)),jt.preStyleProps.forEach((Ln,$o)=>{if(Ln.size){let Nr=l.get($o);Nr||l.set($o,Nr=new Set),Ln.forEach((Gd,cv)=>Nr.add(cv))}}),jt.postStyleProps.forEach((Ln,$o)=>{let Nr=g.get($o);Nr||g.set($o,Nr=new Set),Ln.forEach((Gd,cv)=>Nr.add(cv))})});if(mt.length){const Pe=[];mt.forEach(Le=>{Pe.push(function NW(n,t){return new he(3505,!1)}())}),dt.forEach(Le=>Le.destroy()),this.reportError(Pe)}const On=new Map,ji=new Map;s.forEach(Pe=>{const Le=Pe.element;r.has(Le)&&(ji.set(Le,Le),this._beforeAnimationBuild(Pe.player.namespaceId,Pe.instruction,On))}),i.forEach(Pe=>{const Le=Pe.element;this._getPreviousPlayers(Le,!1,Pe.namespaceId,Pe.triggerName,null).forEach(pt=>{br(On,Le,[]).push(pt),pt.destroy()})});const Ki=se.filter(Pe=>Nw(Pe,l,g)),Wi=new Map;Lw(Wi,this.driver,ye,g,Ui).forEach(Pe=>{Nw(Pe,l,g)&&Ki.push(Pe)});const Yl=new Map;q.forEach((Pe,Le)=>{Lw(Yl,this.driver,new Set(Pe),l,Cg)}),Ki.forEach(Pe=>{const Le=Wi.get(Pe),He=Yl.get(Pe);Wi.set(Pe,new Map([...Array.from(Le?.entries()??[]),...Array.from(He?.entries()??[])]))});const Go=[],zw=[],Gw={};s.forEach(Pe=>{const{element:Le,player:He,instruction:pt}=Pe;if(r.has(Le)){if(I.has(Le))return He.onDestroy(()=>mi(Le,pt.toStyles)),He.disabled=!0,He.overrideTotalTime(pt.totalTime),void i.push(He);let vn=Gw;if(ji.size>1){let xr=Le;const uo=[];for(;xr=xr.parentNode;){const jt=ji.get(xr);if(jt){vn=jt;break}uo.push(xr)}uo.forEach(jt=>ji.set(jt,vn))}const gi=this._buildAnimation(He.namespaceId,pt,On,o,Yl,Wi);if(He.setRealPlayer(gi),vn===Gw)Go.push(He);else{const xr=this.playersByElement.get(vn);xr&&xr.length&&(He.parentPlayer=lo(xr)),i.push(He)}}else Wo(Le,pt.fromStyles),He.onDestroy(()=>mi(Le,pt.toStyles)),zw.push(He),I.has(Le)&&i.push(He)}),zw.forEach(Pe=>{const Le=o.get(Pe.element);if(Le&&Le.length){const He=lo(Le);Pe.setRealPlayer(He)}}),i.forEach(Pe=>{Pe.parentPlayer?Pe.syncPlayerEvents(Pe.parentPlayer):Pe.destroy()});for(let Pe=0;Pe<se.length;Pe++){const Le=se[Pe],He=Le[Fr];if(aa(Le,Id),He&&He.hasAnimation)continue;let pt=[];if(a.size){let gi=a.get(Le);gi&&gi.length&&pt.push(...gi);let xr=this.driver.query(Le,Gg,!0);for(let uo=0;uo<xr.length;uo++){let jt=a.get(xr[uo]);jt&&jt.length&&pt.push(...jt)}}const vn=pt.filter(gi=>!gi.destroyed);vn.length?Vz(this,Le,vn):this.processLeaveNode(Le)}return se.length=0,Go.forEach(Pe=>{this.players.push(Pe),Pe.onDone(()=>{Pe.destroy();const Le=this.players.indexOf(Pe);this.players.splice(Le,1)}),Pe.play()}),Go}elementContainsData(t,e){let r=!1;const i=e[Fr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==$l;a.forEach(g=>{g.queued||!l&&g.triggerName!=i||s.push(g)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const g=l.element,I=g!==o,j=br(r,g,[]);this._getPreviousPlayers(g,I,s,a,e.toState).forEach(q=>{const ee=q.getRealPlayer();ee.beforeDestroy&&ee.beforeDestroy(),q.destroy(),j.push(q)})}Wo(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){const a=e.triggerName,l=e.element,g=[],I=new Set,j=new Set,X=e.timelines.map(ee=>{const ie=ee.element;I.add(ie);const se=ie[Fr];if(se&&se.removedBeforeQueried)return new Hl(ee.duration,ee.delay);const ae=ie!==l,ye=function Hz(n){const t=[];return kw(n,t),t}((r.get(ie)||Oz).map(On=>On.getRealPlayer())).filter(On=>!!On.element&&On.element===ie),de=o.get(ie),Ae=s.get(ie),dt=lw(0,this._normalizer,0,ee.keyframes,de,Ae),mt=this._buildPlayer(ee,dt,ye);if(ee.subTimeline&&i&&j.add(ie),ae){const On=new sv(t,a,ie);On.setRealPlayer(mt),g.push(On)}return mt});g.forEach(ee=>{br(this.playersByQueriedElement,ee.element,[]).push(ee),ee.onDone(()=>function Nz(n,t,e){let r=n.get(t);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,ee.element,ee))}),I.forEach(ee=>kr(ee,vw));const q=lo(X);return q.onDestroy(()=>{I.forEach(ee=>aa(ee,vw)),mi(l,e.toStyles)}),j.forEach(ee=>{br(i,ee,[]).push(q)}),q}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Hl(t.duration,t.delay)}}class sv{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Hl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>Ug(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){br(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Kd(n){return n&&1===n.nodeType}function Ow(n,t){const e=n.style.display;return n.style.display=t??"none",e}function Lw(n,t,e,r,i){const o=[];e.forEach(l=>o.push(Ow(l)));const s=[];r.forEach((l,g)=>{const I=new Map;l.forEach(j=>{const X=t.computeStyle(g,j,i);I.set(j,X),(!X||0==X.length)&&(g[Fr]=Lz,s.push(g))}),n.set(g,I)});let a=0;return e.forEach(l=>Ow(l,o[a++])),s}function Fw(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=1,i=new Set(t),o=new Map;function s(a){if(!a)return r;let l=o.get(a);if(l)return l;const g=a.parentNode;return l=e.has(g)?g:i.has(g)?r:s(g),o.set(a,l),l}return t.forEach(a=>{const l=s(a);l!==r&&e.get(l).push(a)}),e}function kr(n,t){n.classList?.add(t)}function aa(n,t){n.classList?.remove(t)}function Vz(n,t,e){lo(e).onDone(()=>n.processLeaveNode(t))}function kw(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof gT?kw(r.players,t):t.push(r)}}function Nw(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class Wd{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new kz(t,e,r),this._timelineEngine=new Mz(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const s=t+"-"+i;let a=this._triggerCache[s];if(!a){const l=[],g=[],I=Zg(this._driver,o,l,g);if(l.length)throw function TW(n,t){return new he(3404,!1)}();a=function Cz(n,t,e){return new Sz(n,t,e)}(i,I,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,s]=cw(r);this._timelineEngine.command(o,e,s,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[s,a]=cw(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Wz=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&mi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(mi(this._element,this._initialStyles),this._endStyles&&(mi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Wo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wo(this._element,this._endStyles),this._endStyles=null),mi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function av(n){let t=null;return n.forEach((e,r)=>{(function zz(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class Bw{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&t.set(i,this._finished?r:Dw(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class Gz{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return hw(t,e)}getParentElement(t){return Kg(t)}query(t,e,r){return pw(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,o,s=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(l.easing=o);const g=new Map,I=s.filter(q=>q instanceof Bw);(function ZW(n,t){return 0===n||0===t})(r,i)&&I.forEach(q=>{q.currentSnapshot.forEach((ee,ie)=>g.set(ie,ee))});let j=function GW(n){return n.length?n[0]instanceof Map?n:n.map(t=>_w(t)):[]}(e).map(q=>co(q));j=function QW(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,Dw(n,a)))}}return t}(t,j,g);const X=function Kz(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=av(t[0]),t.length>1&&(r=av(t[t.length-1]))):t instanceof Map&&(e=av(t)),e||r?new Wz(n,e,r):null}(t,j);return new Bw(t,j,l,X)}}let $z=(()=>{class n extends hT{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:Ur.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?pT(e):e;return Uw(this._renderer,null,r,"register",[i]),new Yz(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(le(Ba),le(ot))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class Yz extends xj{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Xz(this._id,t,e||{},this._renderer)}}class Xz{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Uw(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Uw(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const Vw="@.disabled";let Zz=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(o);return I||(I=new Hw("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,I)),I}const s=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=I=>{Array.isArray(I)?I.forEach(l):this.engine.registerTrigger(s,a,e,I.name,I)};return r.data.animation.forEach(l),new Qz(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(le(Ba),le(Wd),le(Ue))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class Hw{constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>e.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==Vw?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Qz extends Hw{constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Vw?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function qz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function Jz(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,e,r)}}const jw=[{provide:hT,useClass:$z},{provide:tv,useFactory:function tG(){return new bz}},{provide:Wd,useClass:(()=>{class n extends Wd{constructor(e,r,i,o){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(le(ot),le(Wg),le(tv),le(Vs))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})()},{provide:Ba,useFactory:function nG(n,t,e){return new Zz(n,t,e)},deps:[Su,Wd,Ue]}],lv=[{provide:Wg,useFactory:()=>new Gz},{provide:_r,useValue:"BrowserAnimations"},...jw],Kw=[{provide:Wg,useClass:mw},{provide:_r,useValue:"NoopAnimations"},...jw];let rG=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Kw:lv}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n}),n.\u0275inj=at({providers:lv,imports:[Hx]}),n})(),iG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=lt({type:n,bootstrap:[$V]}),n.\u0275inj=at({providers:[{provide:qC,useClass:iW,multi:!0}],imports:[Qm,nW,Hx,sS,VV,rG,GV]}),n})();DN().bootstrapModule(iG).catch(n=>console.error(n))},70:function(la){var Ge;typeof window<"u"&&(Ge=()=>(()=>{var Yo={"./src/config.ts":
/*!***********************!*\
                  !*** ./src/config.ts ***!
                  \***********************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{enableStreamingMode:()=>d,hlsDefaultConfig:()=>b,mergeConfig:()=>u});var G=P(
/*! ./controller/abr-controller */
"./src/controller/abr-controller.ts"),B=P(
/*! ./controller/audio-stream-controller */
"./src/controller/audio-stream-controller.ts"),z=P(
/*! ./controller/audio-track-controller */
"./src/controller/audio-track-controller.ts"),V=P(
/*! ./controller/subtitle-stream-controller */
"./src/controller/subtitle-stream-controller.ts"),Y=P(
/*! ./controller/subtitle-track-controller */
"./src/controller/subtitle-track-controller.ts"),U=P(
/*! ./controller/buffer-controller */
"./src/controller/buffer-controller.ts"),k=P(
/*! ./controller/timeline-controller */
"./src/controller/timeline-controller.ts"),L=P(
/*! ./controller/cap-level-controller */
"./src/controller/cap-level-controller.ts"),R=P(
/*! ./controller/fps-controller */
"./src/controller/fps-controller.ts"),O=P(
/*! ./controller/eme-controller */
"./src/controller/eme-controller.ts"),x=P(
/*! ./controller/cmcd-controller */
"./src/controller/cmcd-controller.ts"),A=P(
/*! ./utils/xhr-loader */
"./src/utils/xhr-loader.ts"),T=P(
/*! ./utils/fetch-loader */
"./src/utils/fetch-loader.ts"),_=P(
/*! ./utils/cues */
"./src/utils/cues.ts"),m=P(
/*! ./utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts"),v=P(
/*! ./utils/logger */
"./src/utils/logger.ts");function h(){return h=Object.assign?Object.assign.bind():function(c){for(var p=1;p<arguments.length;p++){var M=arguments[p];for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&(c[S]=M[S])}return c},h.apply(this,arguments)}function E(c,p){var M=Object.keys(c);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(c);p&&(S=S.filter(function(F){return Object.getOwnPropertyDescriptor(c,F).enumerable})),M.push.apply(M,S)}return M}function D(c){for(var p=1;p<arguments.length;p++){var M=null!=arguments[p]?arguments[p]:{};p%2?E(Object(M),!0).forEach(function(S){f(c,S,M[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(M)):E(Object(M)).forEach(function(S){Object.defineProperty(c,S,Object.getOwnPropertyDescriptor(M,S))})}return c}function f(c,p,M){return p=function y(c){var p=function w(c,p){if("object"!=typeof c||null===c)return c;var M=c[Symbol.toPrimitive];if(void 0!==M){var S=M.call(c,p||"default");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(c)}(c,"string");return"symbol"==typeof p?p:String(p)}(p),p in c?Object.defineProperty(c,p,{value:M,enumerable:!0,configurable:!0,writable:!0}):c[p]=M,c}var b=D(D({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:A.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:G.default,bufferController:U.default,capLevelController:L.default,fpsController:R.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},function C(){return{cueHandler:_.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:V.SubtitleStreamController,subtitleTrackController:Y.default,timelineController:k.TimelineController,audioStreamController:B.default,audioTrackController:z.default,emeController:O.default,cmcdController:x.default});function u(c,p){if((p.liveSyncDurationCount||p.liveMaxLatencyDurationCount)&&(p.liveSyncDuration||p.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==p.liveMaxLatencyDurationCount&&(void 0===p.liveSyncDurationCount||p.liveMaxLatencyDurationCount<=p.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==p.liveMaxLatencyDuration&&(void 0===p.liveSyncDuration||p.liveMaxLatencyDuration<=p.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return h({},c,p)}function d(c){var p=c.loader;p!==T.default&&p!==A.default?(v.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),c.progressive=!1):(0,T.fetchSupported)()&&(c.loader=T.default,c.progressive=!0,c.enableSoftwareAES=!0,v.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/abr-controller.ts ***!
                  \******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>A});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../utils/ewma-bandwidth-estimator */
"./src/utils/ewma-bandwidth-estimator.ts"),z=P(
/*! ../events */
"./src/events.ts"),V=P(
/*! ../errors */
"./src/errors.ts"),Y=P(
/*! ../types/loader */
"./src/types/loader.ts"),U=P(
/*! ../utils/logger */
"./src/utils/logger.ts");function k(T,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(T,R(v.key),v)}}function R(T){var _=function O(T,_){if("object"!=typeof T||null===T)return T;var m=T[Symbol.toPrimitive];if(void 0!==m){var v=m.call(T,_||"default");if("object"!=typeof v)return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(T)}(T,"string");return"symbol"==typeof _?_:String(_)}const A=function(){function T(m){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=m;var v=m.config;this.bwEstimator=new B.default(v.abrEwmaSlowVoD,v.abrEwmaFastVoD,v.abrEwmaDefaultEstimate),this.registerListeners()}var _=T.prototype;return _.registerListeners=function(){var v=this.hls;v.on(z.Events.FRAG_LOADING,this.onFragLoading,this),v.on(z.Events.FRAG_LOADED,this.onFragLoaded,this),v.on(z.Events.FRAG_BUFFERED,this.onFragBuffered,this),v.on(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.on(z.Events.ERROR,this.onError,this)},_.unregisterListeners=function(){var v=this.hls;v.off(z.Events.FRAG_LOADING,this.onFragLoading,this),v.off(z.Events.FRAG_LOADED,this.onFragLoaded,this),v.off(z.Events.FRAG_BUFFERED,this.onFragBuffered,this),v.off(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.off(z.Events.ERROR,this.onError,this)},_.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},_.onFragLoading=function(v,h){var D,E=h.frag;E.type!==Y.PlaylistLevelType.MAIN||this.timer||(this.fragCurrent=E,this.partCurrent=null!=(D=h.part)?D:null,this.timer=self.setInterval(this.onCheck,100))},_.onLevelLoaded=function(v,h){var E=this.hls.config;h.details.live?this.bwEstimator.update(E.abrEwmaSlowLive,E.abrEwmaFastLive):this.bwEstimator.update(E.abrEwmaSlowVoD,E.abrEwmaFastVoD)},_._abandonRulesCheck=function(){var v=this.fragCurrent,h=this.partCurrent,E=this.hls,D=E.autoLevelEnabled,f=E.media;if(v&&f){var y=h?h.stats:v.stats,w=h?h.duration:v.duration;if(y.aborted||y.loaded&&y.loaded===y.total||0===v.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(D&&!f.paused&&f.playbackRate&&f.readyState){var b=E.mainForwardBufferInfo;if(null!==b){var C=performance.now()-y.loading.start,u=Math.abs(f.playbackRate);if(!(C<=500*w/u)){var d=y.loaded&&y.loading.first,c=this.bwEstimator.getEstimate(),p=E.levels,M=E.minAutoLevel,F=y.total||Math.max(y.loaded,Math.round(w*p[v.level].maxBitrate/8)),H=d?1e3*y.loaded/C:0,N=H?(F-y.loaded)/H:8*F/c,K=b.len/u;if(!(N<=K)){var $,W=Number.POSITIVE_INFINITY;for($=v.level-1;$>M;$--){var Q=p[$].maxBitrate;if((W=H?w*Q/(6.4*H):w*Q/c)<K)break}W>=N||(U.logger.warn("Fragment "+v.sn+(h?" part "+h.index:"")+" of level "+v.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+$+"\n      Current BW estimate: "+((0,G.isFiniteNumber)(c)?(c/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+N.toFixed(3)+" s\n      Estimated load time for the next fragment: "+W.toFixed(3)+" s\n      Time to underbuffer: "+K.toFixed(3)+" s"),E.nextLoadLevel=$,d&&this.bwEstimator.sample(C,y.loaded),this.clearTimer(),(v.loader||v.keyLoader)&&(this.fragCurrent=this.partCurrent=null,v.abortRequests()),E.trigger(z.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:v,part:h,stats:y}))}}}}}},_.onFragLoaded=function(v,h){var E=h.frag,D=h.part;if(E.type===Y.PlaylistLevelType.MAIN&&(0,G.isFiniteNumber)(E.sn)){var f=D?D.stats:E.stats,y=D?D.duration:E.duration;if(this.clearTimer(),this.lastLoadedFragLevel=E.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var w=this.hls.levels[E.level],b=(w.loaded?w.loaded.bytes:0)+f.loaded,C=(w.loaded?w.loaded.duration:0)+y;w.loaded={bytes:b,duration:C},w.realBitrate=Math.round(8*b/C)}E.bitrateTest&&this.onFragBuffered(z.Events.FRAG_BUFFERED,{stats:f,frag:E,part:D,id:E.type})}},_.onFragBuffered=function(v,h){var E=h.frag,D=h.part,f=D?D.stats:E.stats;if(!f.aborted&&E.type===Y.PlaylistLevelType.MAIN&&"initSegment"!==E.sn){var y=f.parsing.end-f.loading.start;this.bwEstimator.sample(y,f.loaded),f.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=E.bitrateTest?y/1e3:0}},_.onError=function(v,h){var E;if((null===(E=h.frag)||void 0===E?void 0:E.type)===Y.PlaylistLevelType.MAIN){if(h.type===V.ErrorTypes.KEY_SYSTEM_ERROR)return void this.clearTimer();switch(h.details){case V.ErrorDetails.FRAG_LOAD_ERROR:case V.ErrorDetails.FRAG_LOAD_TIMEOUT:case V.ErrorDetails.KEY_LOAD_ERROR:case V.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer()}}},_.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},_.getNextABRAutoLevel=function(){var v=this.fragCurrent,h=this.partCurrent,E=this.hls,D=E.maxAutoLevel,f=E.config,y=E.minAutoLevel,w=E.media,b=h?h.duration:v?v.duration:0,C=w&&0!==w.playbackRate?Math.abs(w.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():f.abrEwmaDefaultEstimate,d=E.mainForwardBufferInfo,c=(d?d.len:0)/C,p=this.findBestLevel(u,y,D,c,f.abrBandWidthFactor,f.abrBandWidthUpFactor);if(p>=0)return p;U.logger.trace((c?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var M=b?Math.min(b,f.maxStarvationDelay):f.maxStarvationDelay,S=f.abrBandWidthFactor,F=f.abrBandWidthUpFactor;if(!c){var H=this.bitrateTestDelay;H&&(M=(b?Math.min(b,f.maxLoadingDelay):f.maxLoadingDelay)-H,U.logger.trace("bitrate test took "+Math.round(1e3*H)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*M)+" ms"),S=F=1)}return p=this.findBestLevel(u,y,D,c+M,S,F),Math.max(p,0)},_.findBestLevel=function(v,h,E,D,f,y){for(var w,b=this.fragCurrent,C=this.partCurrent,u=this.lastLoadedFragLevel,d=this.hls.levels,c=d[u],p=!(null==c||null===(w=c.details)||void 0===w||!w.live),M=c?.codecSet,S=C?C.duration:b?b.duration:0,F=E;F>=h;F--){var H=d[F];if(H&&(!M||H.codecSet===M)){var W,N=H.details,K=(C?N?.partTarget:N?.averagetargetduration)||S,$=d[F].maxBitrate,Q=$*K/(W=F<=u?f*v:y*v);if(U.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+F+"/"+Math.round(W)+"/"+$+"/"+K+"/"+D+"/"+Q),W>$&&(0===Q||!(0,G.isFiniteNumber)(Q)||p&&!this.bitrateTestDelay||Q<D))return F}}return-1},function L(T,_,m){_&&k(T.prototype,_),m&&k(T,m),Object.defineProperty(T,"prototype",{writable:!1})}(T,[{key:"nextAutoLevel",get:function(){var v=this._nextAutoLevel;if(-1!==v&&!this.bwEstimator.canEstimate())return v;var E=this.getNextABRAutoLevel();return-1!==v&&this.hls.levels[E].loadError?v:(-1!==v&&(E=Math.min(v,E)),E)},set:function(v){this._nextAutoLevel=v}}]),T}()},"./src/controller/audio-stream-controller.ts":
/*!***************************************************!*\
                  !*** ./src/controller/audio-stream-controller.ts ***!
                  \***************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>f});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),z=P(
/*! ../events */
"./src/events.ts"),V=P(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),Y=P(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),U=P(
/*! ../types/level */
"./src/types/level.ts"),k=P(
/*! ../types/loader */
"./src/types/loader.ts"),L=P(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),R=P(
/*! ../demux/chunk-cache */
"./src/demux/chunk-cache.ts"),O=P(
/*! ../demux/transmuxer-interface */
"./src/demux/transmuxer-interface.ts"),x=P(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),A=P(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),T=P(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),_=P(
/*! ../errors */
"./src/errors.ts");function m(){return m=Object.assign?Object.assign.bind():function(y){for(var w=1;w<arguments.length;w++){var b=arguments[w];for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(y[C]=b[C])}return y},m.apply(this,arguments)}function h(y,w){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,u){return C.__proto__=u,C})(y,w)}const f=function(y){function w(C,u,d){var c;return(c=y.call(this,C,u,d,"[audio-stream-controller]")||this).videoBuffer=null,c.videoTrackCC=-1,c.waitingVideoCC=-1,c.audioSwitch=!1,c.trackId=-1,c.waitingData=null,c.mainDetails=null,c.bufferFlushed=!1,c.cachedTrackLoadedData=null,c._registerListeners(),c}!function v(y,w){y.prototype=Object.create(w.prototype),y.prototype.constructor=y,h(y,w)}(w,y);var b=w.prototype;return b.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},b._registerListeners=function(){var u=this.hls;u.on(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(z.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.on(z.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(z.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.on(z.Events.ERROR,this.onError,this),u.on(z.Events.BUFFER_RESET,this.onBufferReset,this),u.on(z.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(z.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(z.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.on(z.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var u=this.hls;u.off(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(z.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.off(z.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(z.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.off(z.Events.ERROR,this.onError,this),u.off(z.Events.BUFFER_RESET,this.onBufferReset,this),u.off(z.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(z.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(z.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.off(z.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.onInitPtsFound=function(u,d){var c=d.frag,M=d.initPTS;if("main"===d.id){var S=c.cc;this.initPTS[c.cc]=M,this.log("InitPTS for cc: "+S+" found from main: "+M),this.videoTrackCC=S,this.state===B.State.WAITING_INIT_PTS&&this.tick()}},b.startLoad=function(u){if(!this.levels)return this.startPosition=u,void(this.state=B.State.STOPPED);var d=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,d>0&&-1===u?(this.log("Override startPosition with lastCurrentTime @"+d.toFixed(3)),u=d,this.state=B.State.IDLE):(this.loadedmetadata=!1,this.state=B.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()},b.doTick=function(){switch(this.state){case B.State.IDLE:this.doTickIdle();break;case B.State.WAITING_TRACK:var u,d=this.levels,p=null==d||null===(u=d[this.trackId])||void 0===u?void 0:u.details;if(p){if(this.waitForCdnTuneIn(p))break;this.state=B.State.WAITING_INIT_PTS}break;case B.State.FRAG_LOADING_WAITING_RETRY:var M,S=performance.now(),F=this.retryDate;(!F||S>=F||null!==(M=this.media)&&void 0!==M&&M.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=B.State.IDLE);break;case B.State.WAITING_INIT_PTS:var H=this.waitingData;if(H){var N=H.frag,K=H.part,W=H.cache,$=H.complete;if(void 0!==this.initPTS[N.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=B.State.FRAG_LOADING;var te={frag:N,part:K,payload:W.flush(),networkDetails:null};this._handleFragmentLoadProgress(te),$&&y.prototype._handleFragmentLoadComplete.call(this,te)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+N.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var Z=this.getLoadPosition(),re=V.BufferHelper.bufferInfo(this.mediaBuffer,Z,this.config.maxBufferHole);(0,A.fragmentWithinToleranceTest)(re.end,this.config.maxFragLookUpTolerance,N)<0&&(this.log("Waiting fragment cc ("+N.cc+") @ "+N.start+" cancelled because another fragment at "+re.end+" is needed"),this.clearWaitingFragment())}}else this.state=B.State.IDLE}this.onTickEnd()},b.clearWaitingFragment=function(){var u=this.waitingData;u&&(this.fragmentTracker.removeFragment(u.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=B.State.IDLE)},b.resetLoadingState=function(){this.clearWaitingFragment(),y.prototype.resetLoadingState.call(this)},b.onTickEnd=function(){var u=this.media;!u||!u.readyState||(this.lastCurrentTime=u.currentTime)},b.doTickIdle=function(){var u=this.hls,d=this.levels,c=this.media,p=this.trackId;if(d&&d[p]&&(c||!this.startFragRequested&&u.config.startFragPrefetch)){var F=d[p].details;if(!F||F.live&&this.levelLastLoaded!==p||this.waitForCdnTuneIn(F))return void(this.state=B.State.WAITING_TRACK);var H=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&H&&(this.bufferFlushed=!1,this.afterBufferFlushed(H,L.ElementaryStreamTypes.AUDIO,k.PlaylistLevelType.AUDIO));var N=this.getFwdBufferInfo(H,k.PlaylistLevelType.AUDIO);if(null!==N){var K=this.audioSwitch;if(!K&&this._streamEnded(N,F))return u.trigger(z.Events.BUFFER_EOS,{type:"audio"}),void(this.state=B.State.ENDED);var W=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,k.PlaylistLevelType.MAIN);if(!(N.len>=this.getMaxBufferLength(W?.len))||K){var Z=F.fragments[0].start,re=N.end;if(K&&c){var oe=this.getLoadPosition();re=oe,F.PTSKnown&&oe<Z&&(N.end>Z||N.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),c.currentTime=Z+.05)}if(!(W&&re>W.end+F.targetduration)&&(W&&W.len||!N.len)){var ce=this.getNextFragment(re,F);if(!ce)return void(this.bufferFlushed=!0);this.loadFragment(ce,F,re)}}}}},b.getMaxBufferLength=function(u){var d=y.prototype.getMaxBufferLength.call(this);return u?Math.max(d,u):d},b.onMediaDetaching=function(){this.videoBuffer=null,y.prototype.onMediaDetaching.call(this)},b.onAudioTracksUpdated=function(u,d){var c=d.audioTracks;this.resetTransmuxer(),this.levels=c.map(function(p){return new U.Level(p)})},b.onAudioTrackSwitching=function(u,d){var c=!!d.url;this.trackId=d.id;var p=this.fragCurrent;p&&p.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),c?this.setInterval(100):this.resetTransmuxer(),c?(this.audioSwitch=!0,this.state=B.State.IDLE):this.state=B.State.STOPPED,this.tick()},b.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},b.onLevelLoaded=function(u,d){this.mainDetails=d.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(z.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},b.onAudioTrackLoaded=function(u,d){var c;if(null!=this.mainDetails){var p=this.levels,M=d.details,S=d.id;if(p){this.log("Track "+S+" loaded ["+M.startSN+","+M.endSN+"],duration:"+M.totalduration);var F=p[S],H=0;if(M.live||null!==(c=F.details)&&void 0!==c&&c.live){var N=this.mainDetails;if(M.fragments[0]||(M.deltaUpdateFailed=!0),M.deltaUpdateFailed||!N)return;!F.details&&M.hasProgramDateTime&&N.hasProgramDateTime?((0,T.alignMediaPlaylistByPDT)(M,N),H=M.fragments[0].start):H=this.alignPlaylists(M,F.details)}F.details=M,this.levelLastLoaded=S,!this.startFragRequested&&(this.mainDetails||!M.live)&&this.setStartPosition(F.details,H),this.state===B.State.WAITING_TRACK&&!this.waitForCdnTuneIn(M)&&(this.state=B.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+S)}else this.cachedTrackLoadedData=d},b._handleFragmentLoadProgress=function(u){var d,c=u.frag,p=u.part,M=u.payload,S=this.config,F=this.trackId,H=this.levels;if(H){var N=H[F];console.assert(N,"Audio track is defined on fragment load progress");var K=N.details;console.assert(K,"Audio track details are defined on fragment load progress");var W=S.defaultAudioCodec||N.audioCodec||"mp4a.40.2",$=this.transmuxer;$||($=this.transmuxer=new O.default(this.hls,k.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Q=this.initPTS[c.cc],te=null===(d=c.initSegment)||void 0===d?void 0:d.data;if(void 0!==Q){var re=p?p.index:-1,ce=new x.ChunkMetadata(c.level,c.sn,c.stats.chunkCount,M.byteLength,re,-1!==re);$.push(M,te,W,"",c,p,K.totalduration,!1,ce,Q)}else this.log("Unknown video PTS for cc "+c.cc+", waiting for video PTS before demuxing audio frag "+c.sn+" of ["+K.startSN+" ,"+K.endSN+"],track "+F),(this.waitingData=this.waitingData||{frag:c,part:p,cache:new R.default,complete:!1}).cache.push(new Uint8Array(M)),this.waitingVideoCC=this.videoTrackCC,this.state=B.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+c.sn+" of level "+c.level+" will not be buffered")},b._handleFragmentLoadComplete=function(u){this.waitingData?this.waitingData.complete=!0:y.prototype._handleFragmentLoadComplete.call(this,u)},b.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},b.onBufferCreated=function(u,d){var c=d.tracks.audio;c&&(this.mediaBuffer=c.buffer||null),d.tracks.video&&(this.videoBuffer=d.tracks.video.buffer||null)},b.onFragBuffered=function(u,d){var M,c=d.frag,p=d.part;c.type===k.PlaylistLevelType.AUDIO?this.fragContextChanged(c)?this.warn("Fragment "+c.sn+(p?" p: "+p.index:"")+" of level "+c.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==c.sn&&(this.fragPrevious=c,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(z.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(c,p)):this.loadedmetadata||c.type!==k.PlaylistLevelType.MAIN||null!==(M=this.videoBuffer||this.media)&&void 0!==M&&M.buffered.length&&(this.loadedmetadata=!0)},b.onError=function(u,d){if(d.type!==_.ErrorTypes.KEY_SYSTEM_ERROR)switch(d.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:case _.ErrorDetails.FRAG_PARSING_ERROR:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,d);break;case _.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case _.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==B.State.ERROR&&this.state!==B.State.STOPPED&&(this.state=d.fatal?B.State.ERROR:B.State.IDLE,this.warn(d.details+" while loading frag, switching to "+this.state+" state"));break;case _.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===d.parent&&(this.state===B.State.PARSING||this.state===B.State.PARSED)){var c=!0,p=this.getFwdBufferInfo(this.mediaBuffer,k.PlaylistLevelType.AUDIO);p&&p.len>.5&&(c=!this.reduceMaxBufferLength(p.len)),c&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,d)},b.onBufferFlushed=function(u,d){d.type===L.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===B.State.ENDED&&(this.state=B.State.IDLE))},b._handleTransmuxComplete=function(u){var d,c="audio",p=this.hls,M=u.remuxResult,S=u.chunkMeta,F=this.getCurrentContext(S);if(!F)return this.warn("The loading context changed while buffering fragment "+S.sn+" of level "+S.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(S.level);var H=F.frag,N=F.part,K=F.level.details,W=M.audio,$=M.text,Q=M.id3,te=M.initSegment;if(!this.fragContextChanged(H)&&K){if(this.state=B.State.PARSING,this.audioSwitch&&W&&this.completeAudioSwitch(),null!=te&&te.tracks&&(this._bufferInitSegment(te.tracks,H,S),p.trigger(z.Events.FRAG_PARSING_INIT_SEGMENT,{frag:H,id:c,tracks:te.tracks})),W){var Z=W.startPTS,re=W.endPTS,oe=W.startDTS,ce=W.endDTS;N&&(N.elementaryStreams[L.ElementaryStreamTypes.AUDIO]={startPTS:Z,endPTS:re,startDTS:oe,endDTS:ce}),H.setElementaryStreamInfo(L.ElementaryStreamTypes.AUDIO,Z,re,oe,ce),this.bufferFragmentData(W,H,N,S)}if(null!=Q&&null!==(d=Q.samples)&&void 0!==d&&d.length){var ue=m({id:c,frag:H,details:K},Q);p.trigger(z.Events.FRAG_PARSING_METADATA,ue)}if($){var fe=m({id:c,frag:H,details:K},$);p.trigger(z.Events.FRAG_PARSING_USERDATA,fe)}}},b._bufferInitSegment=function(u,d,c){if(this.state===B.State.PARSING){u.video&&delete u.video;var p=u.audio;if(p){p.levelCodec=p.codec,p.id="audio",this.log("Init audio buffer, container:"+p.container+", codecs[parsed]=["+p.codec+"]"),this.hls.trigger(z.Events.BUFFER_CODECS,u);var M=p.initSegment;null!=M&&M.byteLength&&this.hls.trigger(z.Events.BUFFER_APPENDING,{type:"audio",frag:d,part:null,chunkMeta:c,parent:d.type,data:M}),this.tick()}}},b.loadFragment=function(u,d,c){var p=this.fragmentTracker.getState(u);this.fragCurrent=u,(this.audioSwitch||p===Y.FragmentState.NOT_LOADED||p===Y.FragmentState.PARTIAL)&&("initSegment"===u.sn?this._loadInitSegment(u,d):d.live&&!(0,G.isFiniteNumber)(this.initPTS[u.cc])?(this.log("Waiting for video PTS in continuity counter "+u.cc+" of live stream before loading audio fragment "+u.sn+" of level "+this.trackId),this.state=B.State.WAITING_INIT_PTS):(this.startFragRequested=!0,y.prototype.loadFragment.call(this,u,d,c)))},b.completeAudioSwitch=function(){var u=this.hls,c=this.trackId;this.media&&(this.log("Switching audio track : flushing all audio"),y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,u.trigger(z.Events.AUDIO_TRACK_SWITCHED,{id:c})},w}(B.default)},"./src/controller/audio-track-controller.ts":
/*!**************************************************!*\
                  !*** ./src/controller/audio-track-controller.ts ***!
                  \**************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>A});var G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../errors */
"./src/errors.ts"),z=P(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),V=P(
/*! ../types/loader */
"./src/types/loader.ts");function Y(T,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(T,k(v.key),v)}}function k(T){var _=function L(T,_){if("object"!=typeof T||null===T)return T;var m=T[Symbol.toPrimitive];if(void 0!==m){var v=m.call(T,_||"default");if("object"!=typeof v)return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(T)}(T,"string");return"symbol"==typeof _?_:String(_)}function O(T,_){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,h){return v.__proto__=h,v})(T,_)}const A=function(T){function _(v){var h;return(h=T.call(this,v,"[audio-track-controller]")||this).tracks=[],h.groupId=null,h.tracksInGroup=[],h.trackId=-1,h.trackName="",h.selectDefaultTrack=!0,h.registerListeners(),h}!function R(T,_){T.prototype=Object.create(_.prototype),T.prototype.constructor=T,O(T,_)}(_,T);var m=_.prototype;return m.registerListeners=function(){var h=this.hls;h.on(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.on(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.on(G.Events.LEVEL_LOADING,this.onLevelLoading,this),h.on(G.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),h.on(G.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),h.on(G.Events.ERROR,this.onError,this)},m.unregisterListeners=function(){var h=this.hls;h.off(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.off(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.off(G.Events.LEVEL_LOADING,this.onLevelLoading,this),h.off(G.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),h.off(G.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),h.off(G.Events.ERROR,this.onError,this)},m.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,T.prototype.destroy.call(this)},m.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},m.onManifestParsed=function(h,E){this.tracks=E.audioTracks||[]},m.onAudioTrackLoaded=function(h,E){var D=E.id,f=E.details,y=this.tracksInGroup[D];if(y){var w=y.details;y.details=E.details,this.log("audioTrack "+D+" loaded ["+f.startSN+"-"+f.endSN+"]"),D===this.trackId&&(this.retryCount=0,this.playlistLoaded(D,E,w))}else this.warn("Invalid audio track id "+D)},m.onLevelLoading=function(h,E){this.switchLevel(E.level)},m.onLevelSwitching=function(h,E){this.switchLevel(E.level)},m.switchLevel=function(h){var E=this.hls.levels[h];if(null!=E&&E.audioGroupIds){var D=E.audioGroupIds[E.urlId];if(this.groupId!==D){this.groupId=D;var f=this.tracks.filter(function(w){return!D||w.groupId===D});this.selectDefaultTrack&&!f.some(function(w){return w.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=f;var y={audioTracks:f};this.log("Updating audio tracks, "+f.length+' track(s) found in "'+D+'" group-id'),this.hls.trigger(G.Events.AUDIO_TRACKS_UPDATED,y),this.selectInitialTrack()}}},m.onError=function(h,E){T.prototype.onError.call(this,h,E),!E.fatal&&E.context&&E.context.type===V.PlaylistContextType.AUDIO_TRACK&&E.context.id===this.trackId&&E.context.groupId===this.groupId&&this.retryLoadingOrFail(E)},m.setAudioTrack=function(h){var E=this.tracksInGroup;if(h<0||h>=E.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var D=E[this.trackId];this.log("Now switching to audio-track index "+h);var f=E[h],y=f.id,w=f.groupId,b=void 0===w?"":w,C=f.name,u=f.type,d=f.url;if(this.trackId=h,this.trackName=C,this.selectDefaultTrack=!1,this.hls.trigger(G.Events.AUDIO_TRACK_SWITCHING,{id:y,groupId:b,name:C,type:u,url:d}),!f.details||f.details.live){var c=this.switchParams(f.url,D?.details);this.loadPlaylist(c)}}},m.selectInitialTrack=function(){console.assert(this.tracksInGroup.length,"Initial audio track should be selected when tracks are known");var D=this.findTrackId(this.trackName)||this.findTrackId();-1!==D?this.setAudioTrack(D):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(G.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},m.findTrackId=function(h){for(var E=this.tracksInGroup,D=0;D<E.length;D++){var f=E[D];if((!this.selectDefaultTrack||f.default)&&(!h||h===f.name))return f.id}return-1},m.loadPlaylist=function(h){T.prototype.loadPlaylist.call(this);var E=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(E)){var D=E.id,f=E.groupId,y=E.url;if(h)try{y=h.addDirectives(y)}catch(w){this.warn("Could not construct new URL with HLS Delivery Directives: "+w)}this.log("loading audio-track playlist for id: "+D),this.clearTimer(),this.hls.trigger(G.Events.AUDIO_TRACK_LOADING,{url:y,id:D,groupId:f,deliveryDirectives:h||null})}},function U(T,_,m){_&&Y(T.prototype,_),m&&Y(T,m),Object.defineProperty(T,"prototype",{writable:!1})}(_,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(h){this.selectDefaultTrack=!1,this.setAudioTrack(h)}}]),_}(z.default)},"./src/controller/base-playlist-controller.ts":
/*!****************************************************!*\
                  !*** ./src/controller/base-playlist-controller.ts ***!
                  \****************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>Y});var G=P(
/*! ../types/level */
"./src/types/level.ts"),B=P(
/*! ./level-helper */
"./src/controller/level-helper.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=P(
/*! ../errors */
"./src/errors.ts"),Y=function(){function U(L,R){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=z.logger.log.bind(z.logger,R+":"),this.warn=z.logger.warn.bind(z.logger,R+":"),this.hls=L}var k=U.prototype;return k.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},k.onError=function(R,O){O.fatal&&(O.type===V.ErrorTypes.NETWORK_ERROR||O.type===V.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},k.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},k.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},k.stopLoad=function(){this.canLoad=!1,this.clearTimer()},k.switchParams=function(R,O){var x=O?.renditionReports;if(x)for(var A=0;A<x.length;A++){var T=x[A],_=void 0;try{_=new self.URL(T.URI,O.url).href}catch(E){z.logger.warn("Could not construct new URL for Rendition Report: "+E),_=T.URI||""}if(_===R.slice(-_.length)){var m=parseInt(T["LAST-MSN"])||O?.lastPartSn,v=parseInt(T["LAST-PART"])||O?.lastPartIndex;if(this.hls.config.lowLatencyMode){var h=Math.min(O.age-O.partTarget,O.targetduration);v>=0&&h>O.partTarget&&(v+=1)}return new G.HlsUrlParameters(m,v>=0?v:void 0,G.HlsSkip.No)}}},k.loadPlaylist=function(R){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},k.shouldLoadTrack=function(R){return this.canLoad&&R&&!!R.url&&(!R.details||R.details.live)},k.playlistLoaded=function(R,O,x){var A=this,T=O.details,_=O.stats,m=self.performance.now(),v=_.loading.first?Math.max(0,m-_.loading.first):0;if(T.advancedDateTime=Date.now()-v,T.live||null!=x&&x.live){if(T.reloaded(x),x&&this.log("live playlist "+R+" "+(T.advanced?"REFRESHED "+T.lastPartSn+"-"+T.lastPartIndex:"MISSED")),x&&T.fragments.length>0&&(0,B.mergeDetails)(x,T),!this.canLoad||!T.live)return;var h,E=void 0,D=void 0;if(T.canBlockReload&&T.endSN&&T.advanced){var f=this.hls.config.lowLatencyMode,y=T.lastPartSn,w=T.endSN,b=T.lastPartIndex,u=y===w;-1!==b?(E=u?w+1:y,D=u?f?0:b:b+1):E=w+1;var c=T.age,M=Math.min(c+T.ageHeader-T.partTarget,1.5*T.targetduration);if(M>0){if(x&&M>x.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+x.tuneInGoal+" to: "+M+" with playlist age: "+T.age),M=0;else{var S=Math.floor(M/T.targetduration);E+=S,void 0!==D&&(D+=Math.round(M%T.targetduration/T.partTarget)),this.log("CDN Tune-in age: "+T.ageHeader+"s last advanced "+c.toFixed(2)+"s goal: "+M+" skip sn "+S+" to part "+D)}T.tuneInGoal=M}if(h=this.getDeliveryDirectives(T,O.deliveryDirectives,E,D),f||!u)return void this.loadPlaylist(h)}else h=this.getDeliveryDirectives(T,O.deliveryDirectives,E,D);var H=this.hls.mainForwardBufferInfo,W=(0,B.computeReloadInterval)(T,1e3*(T.edge-(H?H.end-H.len:0)));T.updated?m>this.requestScheduled+W&&(this.requestScheduled=_.loading.start):this.requestScheduled=-1,this.requestScheduled=void 0!==E&&T.canBlockReload?_.loading.first+W-(1e3*T.partTarget||1e3):(-1===this.requestScheduled?m:this.requestScheduled)+W;var $=this.requestScheduled-m;$=Math.max(0,$),this.log("reload live playlist "+R+" in "+Math.round($)+" ms"),this.timer=self.setTimeout(function(){return A.loadPlaylist(h)},$)}else this.clearTimer()},k.getDeliveryDirectives=function(R,O,x,A){var T=(0,G.getSkipValue)(R,x);return null!=O&&O.skip&&R.deltaUpdateFailed&&(x=O.msn,A=O.part,T=G.HlsSkip.No),new G.HlsUrlParameters(x,A,T)},k.retryLoadingOrFail=function(R){var T,O=this,x=this.hls.config,A=this.retryCount<x.levelLoadingMaxRetry;if(A)if(this.requestScheduled=-1,this.retryCount++,R.details.indexOf("LoadTimeOut")>-1&&null!==(T=R.context)&&void 0!==T&&T.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+R.details+'"'),this.loadPlaylist();else{var _=Math.min(Math.pow(2,this.retryCount)*x.levelLoadingRetryDelay,x.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return O.loadPlaylist()},_),this.warn("retry playlist loading #"+this.retryCount+" in "+_+' ms after "'+R.details+'"')}else this.warn('cannot recover from error "'+R.details+'"'),this.clearTimer(),R.fatal=!0;return A},U}()},"./src/controller/base-stream-controller.ts":
/*!**************************************************!*\
                  !*** ./src/controller/base-stream-controller.ts ***!
                  \**************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{State:()=>C,default:()=>u});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../task-loop */
"./src/task-loop.ts"),z=P(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),V=P(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),Y=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),U=P(
/*! ../events */
"./src/events.ts"),k=P(
/*! ../errors */
"./src/errors.ts"),L=P(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),R=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),O=P(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),x=P(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),A=P(
/*! ./level-helper */
"./src/controller/level-helper.ts"),T=P(
/*! ../loader/fragment-loader */
"./src/loader/fragment-loader.ts"),_=P(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),m=P(
/*! ../utils/time-ranges */
"./src/utils/time-ranges.ts"),v=P(
/*! ../types/loader */
"./src/types/loader.ts");function h(d,c){for(var p=0;p<c.length;p++){var M=c[p];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(d,D(M.key),M)}}function D(d){var c=function f(d,c){if("object"!=typeof d||null===d)return d;var p=d[Symbol.toPrimitive];if(void 0!==p){var M=p.call(d,c||"default");if("object"!=typeof M)return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(d)}(d,"string");return"symbol"==typeof c?c:String(c)}function b(d,c){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,S){return M.__proto__=S,M})(d,c)}var C={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},u=function(d){function c(M,S,F,H){var N;return(N=d.call(this)||this).hls=void 0,N.fragPrevious=null,N.fragCurrent=null,N.fragmentTracker=void 0,N.transmuxer=null,N._state=C.STOPPED,N.media=null,N.mediaBuffer=null,N.config=void 0,N.bitrateTest=!1,N.lastCurrentTime=0,N.nextLoadPosition=0,N.startPosition=0,N.loadedmetadata=!1,N.fragLoadError=0,N.retryDate=0,N.levels=null,N.fragmentLoader=void 0,N.keyLoader=void 0,N.levelLastLoaded=null,N.startFragRequested=!1,N.decrypter=void 0,N.initPTS=[],N.onvseeking=null,N.onvended=null,N.logPrefix="",N.log=void 0,N.warn=void 0,N.logPrefix=H,N.log=Y.logger.log.bind(Y.logger,H+":"),N.warn=Y.logger.warn.bind(Y.logger,H+":"),N.hls=M,N.fragmentLoader=new T.default(M.config),N.keyLoader=F,N.fragmentTracker=S,N.config=M.config,N.decrypter=new _.default(M.config),M.on(U.Events.LEVEL_SWITCHING,N.onLevelSwitching,function y(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(N)),N}!function w(d,c){d.prototype=Object.create(c.prototype),d.prototype.constructor=d,b(d,c)}(c,d);var p=c.prototype;return p.doTick=function(){this.onTickEnd()},p.onTickEnd=function(){},p.startLoad=function(S){},p.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var S=this.fragCurrent;S&&(S.abortRequests(),this.fragmentTracker.removeFragment(S)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=C.STOPPED},p._streamEnded=function(S,F){if(F.live||S.nextStart||!S.end||!this.media)return!1;var H=F.partList;if(null!=H&&H.length){var N=H[H.length-1];return V.BufferHelper.isBuffered(this.media,N.start+N.duration/2)}return this.fragmentTracker.isEndListAppended(F.fragments[F.fragments.length-1].type)},p.getLevelDetails=function(){var S;if(this.levels&&null!==this.levelLastLoaded)return null===(S=this.levels[this.levelLastLoaded])||void 0===S?void 0:S.details},p.onMediaAttached=function(S,F){var H=this.media=this.mediaBuffer=F.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),H.addEventListener("seeking",this.onvseeking),H.addEventListener("ended",this.onvended);var N=this.config;this.levels&&N.autoStartLoad&&this.state===C.STOPPED&&this.startLoad(N.startPosition)},p.onMediaDetaching=function(){var S=this.media;null!=S&&S.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),S&&this.onvseeking&&this.onvended&&(S.removeEventListener("seeking",this.onvseeking),S.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},p.onMediaSeeking=function(){var S=this.config,F=this.fragCurrent,H=this.media,K=this.state,W=H?H.currentTime:0,$=V.BufferHelper.bufferInfo(this.mediaBuffer||H,W,S.maxBufferHole);if(this.log("media seeking to "+((0,G.isFiniteNumber)(W)?W.toFixed(3):W)+", state: "+K),this.state===C.ENDED)this.resetLoadingState();else if(F){var Q=S.maxFragLookUpTolerance,te=F.start-Q,Z=F.start+F.duration+Q;if(!$.len||Z<$.start||te>$.end){var re=W>Z;(W<te||re)&&(re&&F.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),F.abortRequests()),this.resetLoadingState())}}H&&(this.lastCurrentTime=W),!this.loadedmetadata&&!$.len&&(this.nextLoadPosition=this.startPosition=W),this.tickImmediate()},p.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},p.onLevelSwitching=function(S,F){this.fragLoadError=0},p.onHandlerDestroying=function(){this.stopLoad(),d.prototype.onHandlerDestroying.call(this)},p.onHandlerDestroyed=function(){this.state=C.STOPPED,this.hls.off(U.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,d.prototype.onHandlerDestroyed.call(this)},p.loadFragment=function(S,F,H){this._loadFragForPlayback(S,F,H)},p._loadFragForPlayback=function(S,F,H){var N=this;this._doFragLoad(S,F,H,function($){if(N.fragContextChanged(S))return N.warn("Fragment "+S.sn+($.part?" p: "+$.part.index:"")+" of level "+S.level+" was dropped during download."),void N.fragmentTracker.removeFragment(S);S.stats.chunkCount++,N._handleFragmentLoadProgress($)}).then(function(W){if(W){N.fragLoadError=0;var $=N.state;if(N.fragContextChanged(S))return void(($===C.FRAG_LOADING||!N.fragCurrent&&$===C.PARSING)&&(N.fragmentTracker.removeFragment(S),N.state=C.IDLE));"payload"in W&&(N.log("Loaded fragment "+S.sn+" of level "+S.level),N.hls.trigger(U.Events.FRAG_LOADED,W)),N._handleFragmentLoadComplete(W)}}).catch(function(W){N.state===C.STOPPED||N.state===C.ERROR||(N.warn(W),N.resetFragmentLoading(S))})},p.flushMainBuffer=function(S,F,H){if(void 0===H&&(H=null),S-F){var N={startOffset:S,endOffset:F,type:H};this.fragLoadError=0,this.hls.trigger(U.Events.BUFFER_FLUSHING,N)}},p._loadInitSegment=function(S,F){var H=this;this._doFragLoad(S,F).then(function(N){if(!N||H.fragContextChanged(S)||!H.levels)throw new Error("init load aborted");return N}).then(function(N){var K=H.hls,W=N.payload,$=S.decryptdata;if(W&&W.byteLength>0&&$&&$.key&&$.iv&&"AES-128"===$.method){var Q=self.performance.now();return H.decrypter.decrypt(new Uint8Array(W),$.key.buffer,$.iv.buffer).then(function(te){var Z=self.performance.now();return K.trigger(U.Events.FRAG_DECRYPTED,{frag:S,payload:te,stats:{tstart:Q,tdecrypt:Z}}),N.payload=te,N})}return N}).then(function(N){var K=H.fragCurrent,W=H.hls,$=H.levels;if(!$)throw new Error("init load aborted, missing levels");console.assert($[S.level].details,"Level details are defined when init segment is loaded");var te=S.stats;H.state=C.IDLE,H.fragLoadError=0,S.data=new Uint8Array(N.payload),te.parsing.start=te.buffering.start=self.performance.now(),te.parsing.end=te.buffering.end=self.performance.now(),N.frag===K&&W.trigger(U.Events.FRAG_BUFFERED,{stats:te,frag:K,part:null,id:S.type}),H.tick()}).catch(function(N){H.state===C.STOPPED||H.state===C.ERROR||(H.warn(N),H.resetFragmentLoading(S))})},p.fragContextChanged=function(S){var F=this.fragCurrent;return!S||!F||S.level!==F.level||S.sn!==F.sn||S.urlId!==F.urlId},p.fragBufferedComplete=function(S,F){var H,N,K,W,$=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+S.type+" sn: "+S.sn+(F?" part: "+F.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+S.level+" (frag:["+(null!=(H=S.startPTS)?H:NaN).toFixed(3)+"-"+(null!=(N=S.endPTS)?N:NaN).toFixed(3)+"] > buffer:"+($?m.default.toString(V.BufferHelper.getBuffered($)):"(detached)")+")"),this.state=C.IDLE,$&&(!this.loadedmetadata&&S.type==v.PlaylistLevelType.MAIN&&$.buffered.length&&(null===(K=this.fragCurrent)||void 0===K?void 0:K.sn)===(null===(W=this.fragPrevious)||void 0===W?void 0:W.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},p.seekToStartPos=function(){},p._handleFragmentLoadComplete=function(S){var F=this.transmuxer;if(F){var H=S.frag,N=S.part,K=S.partsLoaded,W=!K||0===K.length||K.some(function(Q){return!Q}),$=new L.ChunkMetadata(H.level,H.sn,H.stats.chunkCount+1,0,N?N.index:-1,!W);F.flush($)}},p._handleFragmentLoadProgress=function(S){},p._doFragLoad=function(S,F,H,N){var K,W=this;if(void 0===H&&(H=null),!this.levels)throw new Error("frag load aborted, missing levels");var $=null;if(!S.encrypted||null!==(K=S.decryptdata)&&void 0!==K&&K.key?!S.encrypted&&F.encryptedFragments.length&&this.keyLoader.loadClear(S,F.encryptedFragments):(this.log("Loading key for "+S.sn+" of ["+F.startSN+"-"+F.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+S.level),this.state=C.KEY_LOADING,this.fragCurrent=S,$=this.keyLoader.load(S).then(function(oe){if(!W.fragContextChanged(oe.frag))return W.hls.trigger(U.Events.KEY_LOADED,oe),W.state===C.KEY_LOADING&&(W.state=C.IDLE),oe}),this.hls.trigger(U.Events.KEY_LOADING,{frag:S}),this.throwIfFragContextChanged("KEY_LOADING")),H=Math.max(S.start,H||0),this.config.lowLatencyMode&&F){var Q=F.partList;if(Q&&N){H>S.end&&F.fragmentHint&&(S=F.fragmentHint);var te=this.getNextPart(Q,S,H);if(te>-1){var Z=Q[te];return this.log("Loading part sn: "+S.sn+" p: "+Z.index+" cc: "+S.cc+" of playlist ["+F.startSN+"-"+F.endSN+"] parts [0-"+te+"-"+(Q.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+S.level+", target: "+parseFloat(H.toFixed(3))),this.nextLoadPosition=Z.start+Z.duration,this.state=C.FRAG_LOADING,this.hls.trigger(U.Events.FRAG_LOADING,{frag:S,part:Q[te],targetBufferTime:H}),this.throwIfFragContextChanged("FRAG_LOADING parts"),$?$.then(function(oe){return!oe||W.fragContextChanged(oe.frag)?null:W.doFragPartsLoad(S,Q,te,N)}).catch(function(oe){return W.handleFragLoadError(oe)}):this.doFragPartsLoad(S,Q,te,N).catch(function(oe){return W.handleFragLoadError(oe)})}if(!S.url||this.loadedEndOfParts(Q,H))return Promise.resolve(null)}}this.log("Loading fragment "+S.sn+" cc: "+S.cc+" "+(F?"of ["+F.startSN+"-"+F.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+S.level+", target: "+parseFloat(H.toFixed(3))),(0,G.isFiniteNumber)(S.sn)&&!this.bitrateTest&&(this.nextLoadPosition=S.start+S.duration),this.state=C.FRAG_LOADING,this.hls.trigger(U.Events.FRAG_LOADING,{frag:S,targetBufferTime:H}),this.throwIfFragContextChanged("FRAG_LOADING");var re=this.config.progressive;return re&&$?$.then(function(oe){return!oe||W.fragContextChanged(oe?.frag)?null:W.fragmentLoader.load(S,N)}).catch(function(oe){return W.handleFragLoadError(oe)}):Promise.all([this.fragmentLoader.load(S,re?N:void 0),$]).then(function(oe){var ce=oe[0];return!re&&ce&&N&&N(ce),ce}).catch(function(oe){return W.handleFragLoadError(oe)})},p.throwIfFragContextChanged=function(S){if(null===this.fragCurrent)throw new Error("frag load aborted, context changed in "+S)},p.doFragPartsLoad=function(S,F,H,N){var K=this;return new Promise(function(W,$){var Q=[];!function Z(re){var oe=F[re];K.fragmentLoader.loadPart(S,oe,N).then(function(ce){Q[oe.index]=ce;var ue=ce.part;K.hls.trigger(U.Events.FRAG_LOADED,ce);var fe=F[re+1];if(!fe||fe.fragment!==S)return W({frag:S,part:ue,partsLoaded:Q});Z(re+1)}).catch($)}(H)})},p.handleFragLoadError=function(S){if("data"in S){var F=S.data;S.data&&F.details===k.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(F.frag,F.part):this.hls.trigger(U.Events.ERROR,F)}else this.hls.trigger(U.Events.ERROR,{type:k.ErrorTypes.OTHER_ERROR,details:k.ErrorDetails.INTERNAL_EXCEPTION,err:S,fatal:!0});return null},p._handleTransmuxerFlush=function(S){var F=this.getCurrentContext(S);if(F&&this.state===C.PARSING){var H=F.frag,N=F.part,K=F.level,W=self.performance.now();H.stats.parsing.end=W,N&&(N.stats.parsing.end=W),this.updateLevelTiming(H,N,K,S.partial)}else!this.fragCurrent&&this.state!==C.STOPPED&&this.state!==C.ERROR&&(this.state=C.IDLE)},p.getCurrentContext=function(S){var F=this.levels,H=S.level,N=S.sn,K=S.part;if(!F||!F[H])return this.warn("Levels object was unset while buffering fragment "+N+" of level "+H+". The current chunk will not be buffered."),null;var W=F[H],$=K>-1?(0,A.getPartWith)(W,N,K):null,Q=$?$.fragment:(0,A.getFragmentWithSN)(W,N,this.fragCurrent);return Q?{frag:Q,part:$,level:W}:null},p.bufferFragmentData=function(S,F,H,N){if(S&&this.state===C.PARSING){var K=S.data1,W=S.data2,$=K;K&&W&&($=(0,R.appendUint8Array)(K,W)),$&&$.length&&(this.hls.trigger(U.Events.BUFFER_APPENDING,{type:S.type,frag:F,part:H,chunkMeta:N,parent:F.type,data:$}),S.dropped&&S.independent&&!H&&this.flushBufferGap(F))}},p.flushBufferGap=function(S){var F=this.media;if(F){if(!V.BufferHelper.isBuffered(F,F.currentTime))return void this.flushMainBuffer(0,S.start);var H=F.currentTime,N=V.BufferHelper.bufferInfo(F,H,0),W=Math.min(2*this.config.maxFragLookUpTolerance,.25*S.duration),$=Math.max(Math.min(S.start-W,N.end-W),H+W);S.start-$>W&&this.flushMainBuffer($,S.start)}},p.getFwdBufferInfo=function(S,F){var H=this.config,N=this.getLoadPosition();if(!(0,G.isFiniteNumber)(N))return null;var K=V.BufferHelper.bufferInfo(S,N,H.maxBufferHole);if(0===K.len&&void 0!==K.nextStart){var W=this.fragmentTracker.getBufferedFrag(N,F);if(W&&K.nextStart<W.end)return V.BufferHelper.bufferInfo(S,N,Math.max(K.nextStart,H.maxBufferHole))}return K},p.getMaxBufferLength=function(S){var H,F=this.config;return H=S?Math.max(8*F.maxBufferSize/S,F.maxBufferLength):F.maxBufferLength,Math.min(H,F.maxMaxBufferLength)},p.reduceMaxBufferLength=function(S){var F=this.config;return F.maxMaxBufferLength>=(S||F.maxBufferLength)&&(F.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+F.maxMaxBufferLength+"s"),!0)},p.getNextFragment=function(S,F){var H=F.fragments,N=H.length;if(!N)return null;var $,K=this.config,W=H[0].start;if(F.live){var Q=K.initialLiveManifestSize;if(N<Q)return this.warn("Not enough fragments to start playback (have: "+N+", need: "+Q+")"),null;!F.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&($=this.getInitialLiveFragment(F,H),this.startPosition=$?this.hls.liveSyncPosition||$.start:S)}else S<=W&&($=H[0]);return $||($=this.getFragmentAtPosition(S,K.lowLatencyMode?F.partEnd:F.fragmentEnd,F)),this.mapToInitFragWhenRequired($)},p.mapToInitFragWhenRequired=function(S){return null==S||!S.initSegment||null!=S&&S.initSegment.data||this.bitrateTest?S:S.initSegment},p.getNextPart=function(S,F,H){for(var N=-1,K=!1,W=!0,$=0,Q=S.length;$<Q;$++){var te=S[$];if(W=W&&!te.independent,N>-1&&H<te.start)break;var Z=te.loaded;Z?N=-1:(K||te.independent||W)&&te.fragment===F&&(N=$),K=Z}return N},p.loadedEndOfParts=function(S,F){var H=S[S.length-1];return H&&F>H.start&&H.loaded},p.getInitialLiveFragment=function(S,F){var H=this.fragPrevious,N=null;if(H){if(S.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+H.programDateTime),N=(0,x.findFragmentByPDT)(F,H.endProgramDateTime,this.config.maxFragLookUpTolerance)),!N){var K=H.sn+1;if(K>=S.startSN&&K<=S.endSN){var W=F[K-S.startSN];H.cc===W.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(N=W).sn)}N||(N=(0,x.findFragWithCC)(F,H.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+N.sn)}}else{var $=this.hls.liveSyncPosition;null!==$&&(N=this.getFragmentAtPosition($,this.bitrateTest?S.fragmentEnd:S.edge,S))}return N},p.getFragmentAtPosition=function(S,F,H){var re,N=this.config,K=this.fragPrevious,W=H.fragments,$=H.endSN,Q=H.fragmentHint,te=N.maxFragLookUpTolerance,Z=!!(N.lowLatencyMode&&H.partList&&Q);if(Z&&Q&&!this.bitrateTest&&(W=W.concat(Q),$=Q.sn),re=S<F?(0,x.findFragmentByPTS)(K,W,S,S>F-te?0:te):W[W.length-1]){var ce=re.sn-H.startSN;if(this.fragmentTracker.getState(re)===z.FragmentState.OK&&(K=re),K&&re.sn===K.sn&&!Z&&K&&re.level===K.level){var fe=W[ce+1];re.sn<$&&this.fragmentTracker.getState(fe)!==z.FragmentState.OK?(this.log("SN "+re.sn+" just loaded, load next one: "+fe.sn),re=fe):re=null}}return re},p.synchronizeToLiveEdge=function(S){var F=this.config,H=this.media;if(H){var N=this.hls.liveSyncPosition,K=H.currentTime,$=S.edge,Q=K>=S.fragments[0].start-F.maxFragLookUpTolerance&&K<=$;null!==N&&H.duration>N&&(K<N||!Q)&&(!Q&&H.readyState<4||K<$-(void 0!==F.liveMaxLatencyDuration?F.liveMaxLatencyDuration:F.liveMaxLatencyDurationCount*S.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=N),H.readyState&&(this.warn("Playback: "+K.toFixed(3)+" is located too far from the end of live sliding playlist: "+$+", reset currentTime to : "+N.toFixed(3)),H.currentTime=N))}},p.alignPlaylists=function(S,F){var N=this.levelLastLoaded,K=this.fragPrevious,W=null!==N?this.levels[N]:null,$=S.fragments.length;if(!$)return this.warn("No fragments in live playlist"),0;var Q=S.fragments[0].start,te=!F,Z=S.alignedSliding&&(0,G.isFiniteNumber)(Q);if(te||!Z&&!Q){(0,O.alignStream)(K,W,S);var re=S.fragments[0].start;return this.log("Live playlist sliding: "+re.toFixed(2)+" start-sn: "+(F?F.startSN:"na")+"->"+S.startSN+" prev-sn: "+(K?K.sn:"na")+" fragments: "+$),re}return Q},p.waitForCdnTuneIn=function(S){return S.live&&S.canBlockReload&&S.partTarget&&S.tuneInGoal>Math.max(S.partHoldBack,3*S.partTarget)},p.setStartPosition=function(S,F){var H=this.startPosition;if(H<F&&(H=-1),-1===H||-1===this.lastCurrentTime){var N=S.startTimeOffset;(0,G.isFiniteNumber)(N)?(H=F+N,N<0&&(H+=S.totalduration),H=Math.min(Math.max(F,H),F+S.totalduration),this.log("Start time offset "+N+" found in playlist, adjust startPosition to "+H),this.startPosition=H):S.live?H=this.hls.liveSyncPosition||F:this.startPosition=H=0,this.lastCurrentTime=H}this.nextLoadPosition=H},p.getLoadPosition=function(){var S=this.media,F=0;return this.loadedmetadata&&S?F=S.currentTime:this.nextLoadPosition&&(F=this.nextLoadPosition),F},p.handleFragLoadAborted=function(S,F){this.transmuxer&&"initSegment"!==S.sn&&S.stats.aborted&&(this.warn("Fragment "+S.sn+(F?" part"+F.index:"")+" of level "+S.level+" was aborted"),this.resetFragmentLoading(S))},p.resetFragmentLoading=function(S){(!this.fragCurrent||!this.fragContextChanged(S)&&this.state!==C.FRAG_LOADING_WAITING_RETRY)&&(this.state=C.IDLE)},p.onFragmentOrKeyLoadError=function(S,F){if(F.fatal)return this.stopLoad(),void(this.state=C.ERROR);var H=this.config;if(F.chunkMeta){var N=this.getCurrentContext(F.chunkMeta);N&&(F.frag=N.frag,F.levelRetry=!0,this.fragLoadError=H.fragLoadingMaxRetry)}var K=F.frag;if(K&&K.type===S){var W=this.fragCurrent;if(console.assert(W&&K.sn===W.sn&&K.level===W.level&&K.urlId===W.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=H.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var $=Math.min(Math.pow(2,this.fragLoadError)*H.fragLoadingRetryDelay,H.fragLoadingMaxRetryTimeout);this.warn("Fragment "+K.sn+" of "+S+" "+K.level+" failed to load, retrying in "+$+"ms"),this.retryDate=self.performance.now()+$,this.fragLoadError++,this.state=C.FRAG_LOADING_WAITING_RETRY}else F.levelRetry?(S===v.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=C.IDLE):(Y.logger.error(F.details+" reaches max retry, redispatch as fatal ..."),F.fatal=!0,this.hls.stopLoad(),this.state=C.ERROR)}},p.afterBufferFlushed=function(S,F,H){if(S){var N=V.BufferHelper.getBuffered(S);this.fragmentTracker.detectEvictedFragments(F,N,H),this.state===C.ENDED&&this.resetLoadingState()}},p.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=C.IDLE},p.resetStartWhenNotLoaded=function(S){if(!this.loadedmetadata){this.startFragRequested=!1;var F=this.levels?this.levels[S].details:null;null!=F&&F.live?(this.startPosition=-1,this.setStartPosition(F,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},p.updateLevelTiming=function(S,F,H,N){var K=this,W=H.details;console.assert(!!W,"level.details must be defined"),Object.keys(S.elementaryStreams).reduce(function(Q,te){var Z=S.elementaryStreams[te];if(Z){var re=Z.endPTS-Z.startPTS;if(re<=0)return K.warn("Could not parse fragment "+S.sn+" "+te+" duration reliably ("+re+")"),Q||!1;var oe=N?0:(0,A.updateFragPTSDTS)(W,S,Z.startPTS,Z.endPTS,Z.startDTS,Z.endDTS);return K.hls.trigger(U.Events.LEVEL_PTS_UPDATED,{details:W,level:H,drift:oe,type:te,frag:S,start:Z.startPTS,end:Z.endPTS}),!0}return Q},!1)||(this.warn("Found no media in fragment "+S.sn+" of level "+H.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=C.PARSED,this.hls.trigger(U.Events.FRAG_PARSED,{frag:S,part:F})},p.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function E(d,c,p){c&&h(d.prototype,c),p&&h(d,p),Object.defineProperty(d,"prototype",{writable:!1})}(c,[{key:"state",get:function(){return this._state},set:function(S){var F=this._state;F!==S&&(this._state=S,this.log(F+"->"+S))}}]),c}(B.default)},"./src/controller/buffer-controller.ts":
/*!*********************************************!*\
                  !*** ./src/controller/buffer-controller.ts ***!
                  \*********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>x});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=P(
/*! ../errors */
"./src/errors.ts"),Y=P(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),U=P(
/*! ../utils/mediasource-helper */
"./src/utils/mediasource-helper.ts"),k=P(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),L=P(
/*! ./buffer-operation-queue */
"./src/controller/buffer-operation-queue.ts"),R=(0,U.getMediaSource)(),O=/([ha]vc.)(?:\.[^.,]+)+/,x=function(){function A(_){var m=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var v=m.media,h=m.mediaSource;z.logger.log("[buffer-controller]: Media source opened"),v&&(v.removeEventListener("emptied",m._onMediaEmptied),m.updateMediaElementDuration(),m.hls.trigger(B.Events.MEDIA_ATTACHED,{media:v})),h&&h.removeEventListener("sourceopen",m._onMediaSourceOpen),m.checkPendingTracks()},this._onMediaSourceClose=function(){z.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){z.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var v=m.media,h=m._objectUrl;v&&v.src!==h&&z.logger.error("Media element src was set while attaching MediaSource ("+h+" > "+v.src+")")},this.hls=_,this._initSourceBuffer(),this.registerListeners()}var T=A.prototype;return T.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},T.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},T.registerListeners=function(){var m=this.hls;m.on(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),m.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.on(B.Events.MANIFEST_PARSED,this.onManifestParsed,this),m.on(B.Events.BUFFER_RESET,this.onBufferReset,this),m.on(B.Events.BUFFER_APPENDING,this.onBufferAppending,this),m.on(B.Events.BUFFER_CODECS,this.onBufferCodecs,this),m.on(B.Events.BUFFER_EOS,this.onBufferEos,this),m.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),m.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),m.on(B.Events.FRAG_PARSED,this.onFragParsed,this),m.on(B.Events.FRAG_CHANGED,this.onFragChanged,this)},T.unregisterListeners=function(){var m=this.hls;m.off(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),m.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.off(B.Events.MANIFEST_PARSED,this.onManifestParsed,this),m.off(B.Events.BUFFER_RESET,this.onBufferReset,this),m.off(B.Events.BUFFER_APPENDING,this.onBufferAppending,this),m.off(B.Events.BUFFER_CODECS,this.onBufferCodecs,this),m.off(B.Events.BUFFER_EOS,this.onBufferEos,this),m.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),m.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),m.off(B.Events.FRAG_PARSED,this.onFragParsed,this),m.off(B.Events.FRAG_CHANGED,this.onFragChanged,this)},T._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new L.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},T.onManifestParsed=function(m,v){var h=2;(v.audio&&!v.video||!v.altAudio)&&(h=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=h,this.details=null,z.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},T.onMediaAttaching=function(m,v){var h=this.media=v.media;if(h&&R){var E=this.mediaSource=new R;E.addEventListener("sourceopen",this._onMediaSourceOpen),E.addEventListener("sourceended",this._onMediaSourceEnded),E.addEventListener("sourceclose",this._onMediaSourceClose),h.src=self.URL.createObjectURL(E),this._objectUrl=h.src,h.addEventListener("emptied",this._onMediaEmptied)}},T.onMediaDetaching=function(){var m=this.media,v=this.mediaSource,h=this._objectUrl;if(v){if(z.logger.log("[buffer-controller]: media source detaching"),"open"===v.readyState)try{v.endOfStream()}catch(E){z.logger.warn("[buffer-controller]: onMediaDetaching: "+E.message+" while calling endOfStream")}this.onBufferReset(),v.removeEventListener("sourceopen",this._onMediaSourceOpen),v.removeEventListener("sourceended",this._onMediaSourceEnded),v.removeEventListener("sourceclose",this._onMediaSourceClose),m&&(m.removeEventListener("emptied",this._onMediaEmptied),h&&self.URL.revokeObjectURL(h),m.src===h?(m.removeAttribute("src"),m.load()):z.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(B.Events.MEDIA_DETACHED,void 0)},T.onBufferReset=function(){var m=this;this.getSourceBufferTypes().forEach(function(v){var h=m.sourceBuffer[v];try{h&&(m.removeBufferListeners(v),m.mediaSource&&m.mediaSource.removeSourceBuffer(h),m.sourceBuffer[v]=void 0)}catch(E){z.logger.warn("[buffer-controller]: Failed to reset the "+v+" buffer",E)}}),this._initSourceBuffer()},T.onBufferCodecs=function(m,v){var h=this,E=this.getSourceBufferTypes().length;Object.keys(v).forEach(function(D){if(E){var f=h.tracks[D];if(f&&"function"==typeof f.buffer.changeType){var y=v[D],w=y.id,b=y.codec,C=y.levelCodec,u=y.container,d=y.metadata,c=(f.levelCodec||f.codec).replace(O,"$1"),p=(C||b).replace(O,"$1");c!==p&&(h.appendChangeType(D,u+";codecs="+(C||b)),z.logger.log("[buffer-controller]: switching codec "+c+" to "+p),h.tracks[D]={buffer:f.buffer,codec:b,container:u,levelCodec:C,metadata:d,id:w})}}else h.pendingTracks[D]=v[D]}),!E&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},T.appendChangeType=function(m,v){var h=this,E=this.operationQueue,D={execute:function(){var y=h.sourceBuffer[m];y&&(z.logger.log("[buffer-controller]: changing "+m+" sourceBuffer type to "+v),y.changeType(v)),E.shiftAndExecuteNext(m)},onStart:function(){},onComplete:function(){},onError:function(y){z.logger.warn("[buffer-controller]: Failed to change "+m+" SourceBuffer type",y)}};E.append(D,m)},T.onBufferAppending=function(m,v){var h=this,E=this.hls,D=this.operationQueue,f=this.tracks,y=v.data,w=v.type,b=v.frag,C=v.part,u=v.chunkMeta,d=u.buffering[w],c=self.performance.now();d.start=c;var p=b.stats.buffering,M=C?C.stats.buffering:null;0===p.start&&(p.start=c),M&&0===M.start&&(M.start=c);var F=!1;"audio"===w&&"audio/mpeg"===f.audio?.container&&(F=!this.lastMpegAudioChunk||1===u.id||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var H=b.start;D.append({execute:function(){if(d.executeStart=self.performance.now(),F){var W=h.sourceBuffer[w];if(W){var $=H-W.timestampOffset;Math.abs($)>=.1&&(z.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+H+" (delta: "+$+") sn: "+b.sn+")"),W.timestampOffset=H)}}h.appendExecutor(y,w)},onStart:function(){},onComplete:function(){var W=self.performance.now();d.executeEnd=d.end=W,0===p.first&&(p.first=W),M&&0===M.first&&(M.first=W);var $=h.sourceBuffer,Q={};for(var te in $)Q[te]=Y.BufferHelper.getBuffered($[te]);h.appendError=0,h.hls.trigger(B.Events.BUFFER_APPENDED,{type:w,frag:b,part:C,chunkMeta:u,parent:b.type,timeRanges:Q})},onError:function(W){z.logger.error("[buffer-controller]: Error encountered while trying to append to the "+w+" SourceBuffer",W);var $={type:V.ErrorTypes.MEDIA_ERROR,parent:b.type,details:V.ErrorDetails.BUFFER_APPEND_ERROR,err:W,fatal:!1};W.code===DOMException.QUOTA_EXCEEDED_ERR?$.details=V.ErrorDetails.BUFFER_FULL_ERROR:(h.appendError++,$.details=V.ErrorDetails.BUFFER_APPEND_ERROR,h.appendError>E.config.appendErrorMaxRetry&&(z.logger.error("[buffer-controller]: Failed "+E.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),$.fatal=!0,E.stopLoad())),E.trigger(B.Events.ERROR,$)}},w)},T.onBufferFlushing=function(m,v){var h=this,E=this.operationQueue,D=function(y){return{execute:h.removeExecutor.bind(h,y,v.startOffset,v.endOffset),onStart:function(){},onComplete:function(){h.hls.trigger(B.Events.BUFFER_FLUSHED,{type:y})},onError:function(b){z.logger.warn("[buffer-controller]: Failed to remove from "+y+" SourceBuffer",b)}}};v.type?E.append(D(v.type),v.type):this.getSourceBufferTypes().forEach(function(f){E.append(D(f),f)})},T.onFragParsed=function(m,v){var h=this,E=v.frag,D=v.part,f=[],y=D?D.elementaryStreams:E.elementaryStreams;y[k.ElementaryStreamTypes.AUDIOVIDEO]?f.push("audiovideo"):(y[k.ElementaryStreamTypes.AUDIO]&&f.push("audio"),y[k.ElementaryStreamTypes.VIDEO]&&f.push("video")),0===f.length&&z.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+E.type+" level: "+E.level+" sn: "+E.sn),this.blockBuffers(function(){var C=self.performance.now();E.stats.buffering.end=C,D&&(D.stats.buffering.end=C),h.hls.trigger(B.Events.FRAG_BUFFERED,{frag:E,part:D,stats:D?D.stats:E.stats,id:E.type})},f)},T.onFragChanged=function(m,v){this.flushBackBuffer()},T.onBufferEos=function(m,v){var h=this;this.getSourceBufferTypes().reduce(function(D,f){var y=h.sourceBuffer[f];return y&&(!v.type||v.type===f)&&(y.ending=!0,y.ended||(y.ended=!0,z.logger.log("[buffer-controller]: "+f+" sourceBuffer now EOS"))),D&&!(y&&!y.ended)},!0)&&(z.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){h.getSourceBufferTypes().forEach(function(f){var y=h.sourceBuffer[f];y&&(y.ending=!1)});var D=h.mediaSource;D&&"open"===D.readyState?(z.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),D.endOfStream()):D&&z.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+D.readyState)}))},T.onLevelUpdated=function(m,v){var h=v.details;h.fragments.length&&(this.details=h,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},T.flushBackBuffer=function(){var m=this.hls,v=this.details,h=this.media,E=this.sourceBuffer;if(h&&null!==v){var D=this.getSourceBufferTypes();if(D.length){var f=v.live&&null!==m.config.liveBackBufferLength?m.config.liveBackBufferLength:m.config.backBufferLength;if((0,G.isFiniteNumber)(f)&&!(f<0)){var y=h.currentTime,w=v.levelTargetDuration,b=Math.max(f,w),C=Math.floor(y/w)*w-b;D.forEach(function(u){var d=E[u];if(d){var c=Y.BufferHelper.getBuffered(d);if(c.length>0&&C>c.start(0)){if(m.trigger(B.Events.BACK_BUFFER_REACHED,{bufferEnd:C}),v.live)m.trigger(B.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:C});else if(d.ended&&c.end(c.length-1)-y<2*w)return void z.logger.info("[buffer-controller]: Cannot flush "+u+" back buffer while SourceBuffer is in ended state");m.trigger(B.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:C,type:u})}}})}}}},T.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var m=this.details,v=this.hls,E=this.mediaSource,D=m.fragments[0].start+m.totalduration,f=this.media.duration,y=(0,G.isFiniteNumber)(E.duration)?E.duration:0;m.live&&v.config.liveDurationInfinity?(z.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),E.duration=1/0,this.updateSeekableRange(m)):(D>y&&D>f||!(0,G.isFiniteNumber)(f))&&(z.logger.log("[buffer-controller]: Updating Media Source duration to "+D.toFixed(3)),E.duration=D)}},T.updateSeekableRange=function(m){var v=this.mediaSource,h=m.fragments;if(h.length&&m.live&&null!=v&&v.setLiveSeekableRange){var D=Math.max(0,h[0].start),f=Math.max(D,D+m.totalduration);v.setLiveSeekableRange(D,f)}},T.checkPendingTracks=function(){var m=this.bufferCodecEventsExpected,v=this.operationQueue,h=this.pendingTracks,E=Object.keys(h).length;if(E&&!m||2===E){this.createSourceBuffers(h),this.pendingTracks={};var D=this.getSourceBufferTypes();if(0===D.length)return void this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});D.forEach(function(f){v.executeNext(f)})}},T.createSourceBuffers=function(m){var v=this.sourceBuffer,h=this.mediaSource;if(!h)throw Error("createSourceBuffers called when mediaSource was null");var E=0;for(var D in m)if(!v[D]){var f=m[D];if(!f)throw Error("source buffer exists for track "+D+", however track does not");var y=f.levelCodec||f.codec,w=f.container+";codecs="+y;z.logger.log("[buffer-controller]: creating sourceBuffer("+w+")");try{var b=v[D]=h.addSourceBuffer(w),C=D;this.addBufferListener(C,"updatestart",this._onSBUpdateStart),this.addBufferListener(C,"updateend",this._onSBUpdateEnd),this.addBufferListener(C,"error",this._onSBUpdateError),this.tracks[D]={buffer:b,codec:y,container:f.container,levelCodec:f.levelCodec,metadata:f.metadata,id:f.id},E++}catch(u){z.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+u.message),this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,mimeType:w})}}E&&this.hls.trigger(B.Events.BUFFER_CREATED,{tracks:this.tracks})},T._onSBUpdateStart=function(m){this.operationQueue.current(m).onStart()},T._onSBUpdateEnd=function(m){var v=this.operationQueue;v.current(m).onComplete(),v.shiftAndExecuteNext(m)},T._onSBUpdateError=function(m,v){z.logger.error("[buffer-controller]: "+m+" SourceBuffer error",v),this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var h=this.operationQueue.current(m);h&&h.onError(v)},T.removeExecutor=function(m,v,h){var E=this.media,D=this.mediaSource,f=this.operationQueue,w=this.sourceBuffer[m];if(!E||!D||!w)return z.logger.warn("[buffer-controller]: Attempting to remove from the "+m+" SourceBuffer, but it does not exist"),void f.shiftAndExecuteNext(m);var b=(0,G.isFiniteNumber)(E.duration)?E.duration:1/0,C=(0,G.isFiniteNumber)(D.duration)?D.duration:1/0,u=Math.max(0,v),d=Math.min(h,b,C);d>u&&!w.ending?(w.ended=!1,z.logger.log("[buffer-controller]: Removing ["+u+","+d+"] from the "+m+" SourceBuffer"),console.assert(!w.updating,m+" sourceBuffer must not be updating"),w.remove(u,d)):f.shiftAndExecuteNext(m)},T.appendExecutor=function(m,v){var h=this.operationQueue,D=this.sourceBuffer[v];if(!D)return z.logger.warn("[buffer-controller]: Attempting to append to the "+v+" SourceBuffer, but it does not exist"),void h.shiftAndExecuteNext(v);D.ended=!1,console.assert(!D.updating,v+" sourceBuffer must not be updating"),D.appendBuffer(m)},T.blockBuffers=function(m,v){var h=this;if(void 0===v&&(v=this.getSourceBufferTypes()),!v.length)return z.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(m);var E=this.operationQueue,D=v.map(function(f){return E.appendBlocker(f)});Promise.all(D).then(function(){m(),v.forEach(function(f){var y=h.sourceBuffer[f];(!y||!y.updating)&&E.shiftAndExecuteNext(f)})})},T.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},T.addBufferListener=function(m,v,h){var E=this.sourceBuffer[m];if(E){var D=h.bind(this,m);this.listeners[m].push({event:v,listener:D}),E.addEventListener(v,D)}},T.removeBufferListeners=function(m){var v=this.sourceBuffer[m];v&&this.listeners[m].forEach(function(h){v.removeEventListener(h.event,h.listener)})},A}()},"./src/controller/buffer-operation-queue.ts":
/*!**************************************************!*\
                  !*** ./src/controller/buffer-operation-queue.ts ***!
                  \**************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>B});var G=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),B=function(){function z(Y){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=Y}var V=z.prototype;return V.append=function(U,k){var L=this.queues[k];L.push(U),1===L.length&&this.buffers[k]&&this.executeNext(k)},V.insertAbort=function(U,k){this.queues[k].unshift(U),this.executeNext(k)},V.appendBlocker=function(U){var k,L=new Promise(function(O){k=O});return this.append({execute:k,onStart:function(){},onComplete:function(){},onError:function(){}},U),L},V.executeNext=function(U){var R=this.buffers[U],O=this.queues[U];if(O.length){var x=O[0];try{x.execute()}catch(A){G.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),x.onError(A),(!R||!R.updating)&&(O.shift(),this.executeNext(U))}}},V.shiftAndExecuteNext=function(U){this.queues[U].shift(),this.executeNext(U)},V.current=function(U){return this.queues[U][0]},z}()},"./src/controller/cap-level-controller.ts":
/*!************************************************!*\
                  !*** ./src/controller/cap-level-controller.ts ***!
                  \************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>k});var G=P(
/*! ../events */
"./src/events.ts");function B(L,R){for(var O=0;O<R.length;O++){var x=R[O];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(L,V(x.key),x)}}function V(L){var R=function Y(L,R){if("object"!=typeof L||null===L)return L;var O=L[Symbol.toPrimitive];if(void 0!==O){var x=O.call(L,R||"default");if("object"!=typeof x)return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(L)}(L,"string");return"symbol"==typeof R?R:String(R)}const k=function(){function L(O){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=O,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var R=L.prototype;return R.setStreamController=function(x){this.streamController=x},R.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},R.registerListeners=function(){var x=this.hls;x.on(G.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),x.on(G.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),x.on(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.on(G.Events.BUFFER_CODECS,this.onBufferCodecs,this),x.on(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},R.unregisterListener=function(){var x=this.hls;x.off(G.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),x.off(G.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),x.off(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.off(G.Events.BUFFER_CODECS,this.onBufferCodecs,this),x.off(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},R.onFpsDropLevelCapping=function(x,A){L.isLevelAllowed(A.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(A.droppedLevel)},R.onMediaAttaching=function(x,A){this.media=A.media instanceof HTMLVideoElement?A.media:null,this.clientRect=null},R.onManifestParsed=function(x,A){var T=this.hls;this.restrictedLevels=[],this.firstLevel=A.firstLevel,T.config.capLevelToPlayerSize&&A.video&&this.startCapping()},R.onBufferCodecs=function(x,A){this.hls.config.capLevelToPlayerSize&&A.video&&this.startCapping()},R.onMediaDetaching=function(){this.stopCapping()},R.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var x=this.hls.levels;if(x.length){var A=this.hls;A.autoLevelCapping=this.getMaxLevel(x.length-1),A.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=A.autoLevelCapping}}},R.getMaxLevel=function(x){var A=this,T=this.hls.levels;if(!T.length)return-1;var _=T.filter(function(m,v){return L.isLevelAllowed(v,A.restrictedLevels)&&v<=x});return this.clientRect=null,L.getMaxLevelByMediaSize(_,this.mediaWidth,this.mediaHeight)},R.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},R.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},R.getDimensions=function(){if(this.clientRect)return this.clientRect;var x=this.media,A={width:0,height:0};if(x){var T=x.getBoundingClientRect();A.width=T.width,A.height=T.height,!A.width&&!A.height&&(A.width=T.right-T.left||x.width||0,A.height=T.bottom-T.top||x.height||0)}return this.clientRect=A,A},L.isLevelAllowed=function(x,A){return void 0===A&&(A=[]),-1===A.indexOf(x)},L.getMaxLevelByMediaSize=function(x,A,T){if(!x||!x.length)return-1;for(var m=x.length-1,v=0;v<x.length;v+=1){var h=x[v];if((h.width>=A||h.height>=T)&&(D=h,!(f=x[v+1])||D.width!==f.width||D.height!==f.height)){m=v;break}}var D,f;return m},function z(L,R,O){R&&B(L.prototype,R),O&&B(L,O),Object.defineProperty(L,"prototype",{writable:!1})}(L,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var x=1;if(!this.hls.config.ignoreDevicePixelRatio)try{x=self.devicePixelRatio}catch{}return x}}]),L}()},"./src/controller/cmcd-controller.ts":
/*!*******************************************!*\
                  !*** ./src/controller/cmcd-controller.ts ***!
                  \*******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>T});var G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../types/cmcd */
"./src/types/cmcd.ts"),z=P(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),V=P(
/*! ../utils/logger */
"./src/utils/logger.ts");function Y(_,m){for(var v=0;v<m.length;v++){var h=m[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(_,k(h.key),h)}}function U(_,m,v){return m&&Y(_.prototype,m),v&&Y(_,v),Object.defineProperty(_,"prototype",{writable:!1}),_}function k(_){var m=function L(_,m){if("object"!=typeof _||null===_)return _;var v=_[Symbol.toPrimitive];if(void 0!==v){var h=v.call(_,m||"default");if("object"!=typeof h)return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===m?String:Number)(_)}(_,"string");return"symbol"==typeof m?m:String(m)}function R(_,m){var v=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(v)return(v=v.call(_)).next.bind(v);if(Array.isArray(_)||(v=function O(_,m){if(_){if("string"==typeof _)return x(_,m);var v=Object.prototype.toString.call(_).slice(8,-1);if("Object"===v&&_.constructor&&(v=_.constructor.name),"Map"===v||"Set"===v)return Array.from(_);if("Arguments"===v||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return x(_,m)}}(_))||m&&_&&"number"==typeof _.length){v&&(_=v);var h=0;return function(){return h>=_.length?{done:!0}:{done:!1,value:_[h++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(_,m){(null==m||m>_.length)&&(m=_.length);for(var v=0,h=new Array(m);v<m;v++)h[v]=_[v];return h}function A(){return A=Object.assign?Object.assign.bind():function(_){for(var m=1;m<arguments.length;m++){var v=arguments[m];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(_[h]=v[h])}return _},A.apply(this,arguments)}var T=function(){function _(v){var h=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){h.initialized&&(h.starved=!0),h.buffering=!0},this.onPlaying=function(){h.initialized||(h.initialized=!0),h.buffering=!1},this.applyPlaylistData=function(f){try{h.apply(f,{ot:B.CMCDObjectType.MANIFEST,su:!h.initialized})}catch(y){V.logger.warn("Could not generate manifest CMCD data.",y)}},this.applyFragmentData=function(f){try{var y=f.frag,w=h.hls.levels[y.level],b=h.getObjectType(y),C={d:1e3*y.duration,ot:b};(b===B.CMCDObjectType.VIDEO||b===B.CMCDObjectType.AUDIO||b==B.CMCDObjectType.MUXED)&&(C.br=w.bitrate/1e3,C.tb=h.getTopBandwidth(b)/1e3,C.bl=h.getBufferLength(b)),h.apply(f,C)}catch(u){V.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=v;var E=this.config=v.config,D=E.cmcd;null!=D&&(E.pLoader=this.createPlaylistLoader(),E.fLoader=this.createFragmentLoader(),this.sid=D.sessionId||_.uuid(),this.cid=D.contentId,this.useHeaders=!0===D.useHeaders,this.registerListeners())}var m=_.prototype;return m.registerListeners=function(){var h=this.hls;h.on(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.on(G.Events.MEDIA_DETACHED,this.onMediaDetached,this),h.on(G.Events.BUFFER_CREATED,this.onBufferCreated,this)},m.unregisterListeners=function(){var h=this.hls;h.off(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.off(G.Events.MEDIA_DETACHED,this.onMediaDetached,this),h.off(G.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},m.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},m.onMediaAttached=function(h,E){this.media=E.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},m.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},m.onBufferCreated=function(h,E){var D,f;this.audioBuffer=null===(D=E.tracks.audio)||void 0===D?void 0:D.buffer,this.videoBuffer=null===(f=E.tracks.video)||void 0===f?void 0:f.buffer},m.createData=function(){var h;return{v:B.CMCDVersion,sf:B.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(h=this.media)||void 0===h?void 0:h.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},m.apply=function(h,E){if(void 0===E&&(E={}),A(E,this.createData()),this.starved&&(E.ot===B.CMCDObjectType.INIT||E.ot===B.CMCDObjectType.VIDEO||E.ot===B.CMCDObjectType.MUXED)&&(E.bs=!0,E.su=!0,this.starved=!1),null==E.su&&(E.su=this.buffering),this.useHeaders){var f=_.toHeaders(E);if(!Object.keys(f).length)return;h.headers||(h.headers={}),A(h.headers,f)}else{var y=_.toQuery(E);if(!y)return;h.url=_.appendQueryToUri(h.url,y)}},m.getObjectType=function(h){var E=h.type;return"subtitle"===E?B.CMCDObjectType.TIMED_TEXT:"initSegment"===h.sn?B.CMCDObjectType.INIT:"audio"===E?B.CMCDObjectType.AUDIO:"main"===E?this.hls.audioTracks.length?B.CMCDObjectType.VIDEO:B.CMCDObjectType.MUXED:void 0},m.getTopBandwidth=function(h){var D,E=0,f=this.hls;if(h===B.CMCDObjectType.AUDIO)D=f.audioTracks;else{var y=f.maxAutoLevel;D=f.levels.slice(0,y>-1?y+1:f.levels.length)}for(var C,b=R(D);!(C=b()).done;){var u=C.value;u.bitrate>E&&(E=u.bitrate)}return E>0?E:NaN},m.getBufferLength=function(h){var E=this.hls.media,D=h===B.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return D&&E?1e3*z.BufferHelper.bufferInfo(D,E.currentTime,this.config.maxBufferHole).len:NaN},m.createPlaylistLoader=function(){var E=this.applyPlaylistData,D=this.config.pLoader||this.config.loader;return function(){function f(w){this.loader=void 0,this.loader=new D(w)}var y=f.prototype;return y.destroy=function(){this.loader.destroy()},y.abort=function(){this.loader.abort()},y.load=function(b,C,u){E(b),this.loader.load(b,C,u)},U(f,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),f}()},m.createFragmentLoader=function(){var E=this.applyFragmentData,D=this.config.fLoader||this.config.loader;return function(){function f(w){this.loader=void 0,this.loader=new D(w)}var y=f.prototype;return y.destroy=function(){this.loader.destroy()},y.abort=function(){this.loader.abort()},y.load=function(b,C,u){E(b),this.loader.load(b,C,u)},U(f,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),f}()},_.uuid=function(){var h=URL.createObjectURL(new Blob),E=h.toString();return URL.revokeObjectURL(h),E.slice(E.lastIndexOf("/")+1)},_.serialize=function(h){for(var d,E=[],f=function(N){return Math.round(N)},y=function(N){return 100*f(N/100)},b={br:f,d:f,bl:y,dl:y,mtp:y,nor:function(N){return encodeURIComponent(N)},rtp:y,tb:f},u=R(Object.keys(h||{}).sort());!(d=u()).done;){var c=d.value,p=h[c];if(N=p,!(Number.isNaN(N)||null==N||""===N||!1===N||"v"===c&&1===p||"pr"==c&&1===p)){var M=b[c];M&&(p=M(p));var F,S=typeof p;F="ot"===c||"sf"===c||"st"===c?c+"="+p:"boolean"===S?c:"number"===S?c+"="+p:c+"="+JSON.stringify(p),E.push(F)}}var N;return E.join(",")},_.toHeaders=function(h){for(var D={},f=["Object","Request","Session","Status"],y=[{},{},{},{}],w={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},b=0,C=Object.keys(h);b<C.length;b++){var u=C[b];y[null!=w[u]?w[u]:1][u]=h[u]}for(var c=0;c<y.length;c++){var p=_.serialize(y[c]);p&&(D["CMCD-"+f[c]]=p)}return D},_.toQuery=function(h){return"CMCD="+encodeURIComponent(_.serialize(h))},_.appendQueryToUri=function(h,E){if(!E)return h;var D=h.includes("?")?"&":"?";return""+h+D+E},_}()},"./src/controller/eme-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/eme-controller.ts ***!
                  \******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>b});var G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../errors */
"./src/errors.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=P(
/*! ../utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts"),Y=P(
/*! ../utils/keysystem-util */
"./src/utils/keysystem-util.ts"),U=P(
/*! ../utils/numeric-encoding-utils */
"./src/utils/numeric-encoding-utils.ts"),k=P(
/*! ../loader/level-key */
"./src/loader/level-key.ts"),L=P(
/*! ../utils/hex */
"./src/utils/hex.ts"),R=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),O=P(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),x=P.n(O);function T(C){var u="function"==typeof Map?new Map:void 0;return T=function(c){if(null===c||!function v(C){return-1!==Function.toString.call(C).indexOf("[native code]")}(c))return c;if("function"!=typeof c)throw new TypeError("Super expression must either be null or a function");if(typeof u<"u"){if(u.has(c))return u.get(c);u.set(c,p)}function p(){return _(c,arguments,E(this).constructor)}return p.prototype=Object.create(c.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h(p,c)},T(C)}function _(C,u,d){return(_=function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(p,M,S){var F=[null];F.push.apply(F,M);var N=new(Function.bind.apply(p,F));return S&&h(N,S.prototype),N}).apply(null,arguments)}function h(C,u){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,p){return c.__proto__=p,c})(C,u)}function E(C){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)})(C)}var f="[eme]",y=function(){function C(d){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=C.CDMCleanupPromise?[C.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=z.logger.debug.bind(z.logger,f),this.log=z.logger.log.bind(z.logger,f),this.warn=z.logger.warn.bind(z.logger,f),this.error=z.logger.error.bind(z.logger,f),this.hls=d,this.config=d.config,this.registerListeners()}var u=C.prototype;return u.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},u.registerListeners=function(){this.hls.on(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(G.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(G.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.unregisterListeners=function(){this.hls.off(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(G.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(G.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.getLicenseServerUrl=function(c){var p=this.config,S=p.widevineLicenseUrl,F=p.drmSystems[c];if(F)return F.licenseUrl;if(c===V.KeySystems.WIDEVINE&&S)return S;throw new Error('no license server URL configured for key-system "'+c+'"')},u.getServerCertificateUrl=function(c){var M=this.config.drmSystems[c];if(M)return M.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+c+'"]')},u.attemptKeySystemAccess=function(c){var p=this,M=this.hls.levels,S=function(K,W,$){return!!K&&$.indexOf(K)===W},F=M.map(function(N){return N.audioCodec}).filter(S),H=M.map(function(N){return N.videoCodec}).filter(S);return F.length+H.length===0&&H.push("avc1.42e01e"),new Promise(function(N,K){!function $(Q){var te=Q.shift();p.getMediaKeysPromise(te,F,H).then(function(Z){return N({keySystem:te,mediaKeys:Z})}).catch(function(Z){Q.length?$(Q):K(Z instanceof w?Z:new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:Z,fatal:!0},Z.message))})}(c)})},u.requestMediaKeySystemAccess=function(c,p){var M=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof M){var S="Configured requestMediaKeySystemAccess is not a function "+M;return null===V.requestMediaKeySystemAccess&&"http:"===self.location.protocol&&(S="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(S))}return M(c,p)},u.getMediaKeysPromise=function(c,p,M){var S=this,F=(0,V.getSupportedMediaKeySystemConfigurations)(c,p,M,this.config.drmSystemOptions),H=this.keySystemAccessPromises[c],N=H?.keySystemAccess;if(!N){this.log('Requesting encrypted media "'+c+'" key-system access with config: '+JSON.stringify(F)),N=this.requestMediaKeySystemAccess(c,F);var K=this.keySystemAccessPromises[c]={keySystemAccess:N};return N.catch(function(W){S.log('Failed to obtain access to key-system "'+c+'": '+W)}),N.then(function(W){S.log('Access for key-system "'+W.keySystem+'" obtained');var $=S.fetchServerCertificate(c);return S.log('Create media-keys for "'+c+'"'),K.mediaKeys=W.createMediaKeys().then(function(Q){return S.log('Media-keys created for "'+c+'"'),$.then(function(te){return te?S.setMediaKeysServerCertificate(Q,c,te):Q})}),K.mediaKeys.catch(function(Q){S.error('Failed to create media-keys for "'+c+'"}: '+Q)}),K.mediaKeys})}return N.then(function(){return H.mediaKeys})},u.createMediaKeySessionContext=function(c){var p=c.decryptdata,M=c.keySystem,S=c.mediaKeys;console.assert(!!S,"mediaKeys is defined"),this.log('Creating key-system session "'+M+'" keyId: '+L.default.hexDump(p.keyId||[]));var F=S.createSession(),H={decryptdata:p,keySystem:M,mediaKeys:S,mediaKeysSession:F,keyStatus:"status-pending"};return this.mediaKeySessions.push(H),H},u.renewKeySession=function(c){var p=c.decryptdata;if(p.pssh){var M=this.createMediaKeySessionContext(c),S=this.getKeyIdString(p);this.keyIdToKeySessionPromise[S]=this.generateRequestWithPreferredKeySession(M,"cenc",p.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(c)},u.getKeyIdString=function(c){if(!c)throw new Error("Could not read keyId of undefined decryptdata");if(null===c.keyId)throw new Error("keyId is null");return L.default.hexDump(c.keyId)},u.updateKeySession=function(c,p){var M,S=c.mediaKeysSession;return this.log('Updating key-session "'+S.sessionId+'" for keyID '+L.default.hexDump((null===(M=c.decryptdata)||void 0===M?void 0:M.keyId)||[])+"\n      } (data length: "+(p&&p.byteLength)+")"),S.update(p)},u.selectKeySystemFormat=function(c){var p=Object.keys(c.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+c.sn+" "+c.type+": "+c.level+") key formats "+p.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(p)),this.keyFormatPromise},u.getKeyFormatPromise=function(c){var p=this;return new Promise(function(M,S){var F=(0,V.getKeySystemsForConfig)(p.config),H=c.map(V.keySystemFormatToKeySystemDomain).filter(function(N){return!!N&&-1!==F.indexOf(N)});return p.getKeySystemSelectionPromise(H).then(function(N){var K=N.keySystem,W=(0,V.keySystemDomainToKeySystemFormat)(K);W?M(W):S(new Error('Unable to find format for key-system "'+K+'"'))}).catch(S)})},u.loadKey=function(c){var p=this,M=c.keyInfo.decryptdata,S=this.getKeyIdString(M),F="(keyId: "+S+' format: "'+M.keyFormat+'" method: '+M.method+" uri: "+M.uri+")";this.log("Starting session for key "+F);var H=this.keyIdToKeySessionPromise[S];return H||(H=this.keyIdToKeySessionPromise[S]=this.getKeySystemForKeyPromise(M).then(function(N){var K=N.keySystem,W=N.mediaKeys;return p.throwIfDestroyed(),p.log("Handle encrypted media sn: "+c.frag.sn+" "+c.frag.type+": "+c.frag.level+" using key "+F),p.attemptSetMediaKeys(K,W).then(function(){p.throwIfDestroyed();var $=p.createMediaKeySessionContext({keySystem:K,mediaKeys:W,decryptdata:M});return p.generateRequestWithPreferredKeySession($,"cenc",M.pssh,"playlist-key")})})).catch(function(N){return p.handleError(N)}),H},u.throwIfDestroyed=function(c){if(void 0===c&&(c="Invalid state"),!this.hls)throw new Error("invalid state")},u.handleError=function(c){this.hls&&(this.error(c.message),this.hls.trigger(G.Events.ERROR,c instanceof w?c.data:{type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:c,fatal:!0}))},u.getKeySystemForKeyPromise=function(c){var p=this.getKeyIdString(c),M=this.keyIdToKeySessionPromise[p];if(!M){var S=(0,V.keySystemFormatToKeySystemDomain)(c.keyFormat),F=S?[S]:(0,V.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(F)}return M},u.getKeySystemSelectionPromise=function(c){if(c.length||(c=(0,V.getKeySystemsForConfig)(this.config)),0===c.length)throw new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(c)},u._onMediaEncrypted=function(c){var p=this,M=c.initDataType,S=c.initData;if(this.debug('"'+c.type+'" event: init data type: "'+M+'"'),null!==S){var F,H;if("sinf"===M&&this.config.drmSystems[V.KeySystems.FAIRPLAY]){var N=(0,R.bin2str)(new Uint8Array(S));try{var K=(0,U.base64Decode)(JSON.parse(N).sinf),W=(0,R.parseSinf)(new Uint8Array(K));if(!W)return;F=W.subarray(8,24),H=V.KeySystems.FAIRPLAY}catch{return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var $=(0,R.parsePssh)(S);if(null===$)return;0===$.version&&$.systemId===V.KeySystemIds.WIDEVINE&&$.data&&(F=$.data.subarray(8,24)),H=(0,V.keySystemIdToKeySystemDomain)($.systemId)}if(H&&F){for(var Q=L.default.hexDump(F),te=this.keyIdToKeySessionPromise,Z=this.mediaKeySessions,re=te[Q],oe=function(De){var Re=Z[De],Te=Re.decryptdata;if(Te.pssh||!Te.keyId)return"continue";var Ce=L.default.hexDump(Te.keyId);return Q===Ce||-1!==Te.uri.replace(/-/g,"").indexOf(Q)?(re=te[Ce],delete te[Ce],Te.pssh=new Uint8Array(S),Te.keyId=F,re=te[Q]=re.then(function(){return p.generateRequestWithPreferredKeySession(Re,M,S,"encrypted-event-key-match")}),"break"):void 0},ce=0;ce<Z.length;ce++){var ue=oe(ce);if("continue"!==ue&&"break"===ue)break}re||(re=te[Q]=this.getKeySystemSelectionPromise([H]).then(function(fe){var De,Re=fe.keySystem,Te=fe.mediaKeys;p.throwIfDestroyed();var Ce=new k.LevelKey("ISO-23001-7",Q,null!=(De=(0,V.keySystemDomainToKeySystemFormat)(Re))?De:"");return Ce.pssh=new Uint8Array(S),Ce.keyId=F,p.attemptSetMediaKeys(Re,Te).then(function(){p.throwIfDestroyed();var we=p.createMediaKeySessionContext({decryptdata:Ce,keySystem:Re,mediaKeys:Te});return p.generateRequestWithPreferredKeySession(we,M,S,"encrypted-event-no-match")})})),re.catch(function(fe){return p.handleError(fe)})}}},u._onWaitingForKey=function(c){this.log('"'+c.type+'" event')},u.attemptSetMediaKeys=function(c,p){var M=this,S=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+c+'"');var F=Promise.all(S).then(function(){if(!M.media)throw new Error("Attempted to set mediaKeys without media element attached");return M.media.setMediaKeys(p)});return this.setMediaKeysQueue.push(F),F.then(function(){M.log('Media-keys set for "'+c+'"'),S.push(F),M.setMediaKeysQueue=M.setMediaKeysQueue.filter(function(H){return-1===S.indexOf(H)})})},u.generateRequestWithPreferredKeySession=function(c,p,M,S){var F,H,N=this,K=null===(F=this.config.drmSystems)||void 0===F||null===(H=F[c.keySystem])||void 0===H?void 0:H.generateRequest;if(K)try{var W=K.call(this.hls,p,M,c);if(!W)throw new Error("Invalid response from configured generateRequest filter");p=W.initDataType,M=c.decryptdata.pssh=W.initData?new Uint8Array(W.initData):null}catch(re){var $;if(this.warn(re.message),null!==($=this.hls)&&void 0!==$&&$.config.debug)throw re}if(null===M)return this.log('Skipping key-session request for "'+S+'" (no initData)'),Promise.resolve(c);var Q=this.getKeyIdString(c.decryptdata);this.log('Generating key-session request for "'+S+'": '+Q+" (init data type: "+p+" length: "+(M?M.byteLength:null)+")");var te=new(x());c.mediaKeysSession.onmessage=function(re){var oe=c.mediaKeysSession;if(oe){var ce=re.messageType,ue=re.message;N.log('"'+ce+'" message event for session "'+oe.sessionId+'" message size: '+ue.byteLength),"license-request"===ce||"license-renewal"===ce?N.renewLicense(c,ue).catch(function(fe){N.handleError(fe),te.emit("error",fe)}):"license-release"===ce?c.keySystem===V.KeySystems.FAIRPLAY&&(N.updateKeySession(c,(0,Y.strToUtf8array)("acknowledged")),N.removeSession(c)):N.warn('unhandled media key message type "'+ce+'"')}else te.emit("error",new Error("invalid state"))},c.mediaKeysSession.onkeystatuseschange=function(re){if(c.mediaKeysSession){N.onKeyStatusChange(c);var ce=c.keyStatus;te.emit("keyStatus",ce),"expired"===ce&&(N.warn(c.keySystem+" expired for key "+Q),N.renewKeySession(c))}else te.emit("error",new Error("invalid state"))};var Z=new Promise(function(re,oe){te.on("error",oe),te.on("keyStatus",function(ce){ce.startsWith("usable")?re():"output-restricted"===ce?oe(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===ce?oe(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+ce+'"')):"expired"===ce?oe(new Error("key expired while generating request")):N.warn('unhandled key status change "'+ce+'"')})});return c.mediaKeysSession.generateRequest(p,M).then(function(){var re;N.log('Request generated for key-session "'+(null===(re=c.mediaKeysSession)||void 0===re?void 0:re.sessionId)+'" keyId: '+Q)}).catch(function(re){throw new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:re,fatal:!1},"Error generating key-session request: "+re)}).then(function(){return Z}).catch(function(re){throw te.removeAllListeners(),N.removeSession(c),re}).then(function(){return te.removeAllListeners(),c})},u.onKeyStatusChange=function(c){var p=this;c.mediaKeysSession.keyStatuses.forEach(function(M,S){p.log('key status change "'+M+'" for keyStatuses keyId: '+L.default.hexDump("buffer"in S?new Uint8Array(S.buffer,S.byteOffset,S.byteLength):new Uint8Array(S))+" session keyId: "+L.default.hexDump(new Uint8Array(c.decryptdata.keyId||[]))+" uri: "+c.decryptdata.uri),c.keyStatus=M})},u.fetchServerCertificate=function(c){var p=this;return new Promise(function(M,S){var F=p.getServerCertificateUrl(c);if(!F)return M();p.log('Fetching serverCertificate for "'+c+'"');var H=new XMLHttpRequest;H.open("GET",F,!0),H.responseType="arraybuffer",H.onreadystatechange=function(){H.readyState===XMLHttpRequest.DONE&&(200===H.status?M(H.response):S(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:H},'"'+c+'" certificate request XHR failed ('+F+"). Status: "+H.status+" ("+H.statusText+")")))},H.send()})},u.setMediaKeysServerCertificate=function(c,p,M){var S=this;return new Promise(function(F,H){c.setServerCertificate(M).then(function(N){S.log("setServerCertificate "+(N?"success":"not supported by CDM")+" ("+M?.byteLength+') on "'+p+'"'),F(c)}).catch(function(N){H(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:N,fatal:!0},N.message))})})},u.renewLicense=function(c,p){var M=this;return this.requestLicense(c,new Uint8Array(p)).then(function(S){return M.updateKeySession(c,new Uint8Array(S)).catch(function(F){throw new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:F,fatal:!0},F.message)})})},u.setupLicenseXHR=function(c,p,M,S){var F=this,H=this.config.licenseXhrSetup;return H?Promise.resolve().then(function(){if(!M.decryptdata)throw new Error("Key removed");return H.call(F.hls,c,p,M,S)}).catch(function(N){if(!M.decryptdata)throw N;return c.open("POST",p,!0),H.call(F.hls,c,p,M,S)}).then(function(N){return c.readyState||c.open("POST",p,!0),{xhr:c,licenseChallenge:N||S}}):(c.open("POST",p,!0),Promise.resolve({xhr:c,licenseChallenge:S}))},u.requestLicense=function(c,p){var M=this;return new Promise(function(S,F){var H=M.getLicenseServerUrl(c.keySystem);M.log("Sending license request to URL: "+H);var N=new XMLHttpRequest;N.responseType="arraybuffer",N.onreadystatechange=function(){if(!M.hls||!c.mediaKeysSession)return F(new Error("invalid state"));if(4===N.readyState)if(200===N.status){M._requestLicenseFailureCount=0;var K=N.response;M.log("License received "+(K instanceof ArrayBuffer?K.byteLength:K));var W=M.config.licenseResponseCallback;if(W)try{K=W.call(M.hls,N,H,c)}catch(Q){M.error(Q)}S(K)}else M._requestLicenseFailureCount++,M._requestLicenseFailureCount>3||N.status>=400&&N.status<500?F(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:N},"License Request XHR failed ("+H+"). Status: "+N.status+" ("+N.statusText+")")):(M.warn("Retrying license request, "+(3-M._requestLicenseFailureCount+1)+" attempts left"),M.requestLicense(c,p).then(S,F))},c.licenseXhr&&c.licenseXhr.readyState!==XMLHttpRequest.DONE&&c.licenseXhr.abort(),c.licenseXhr=N,M.setupLicenseXHR(N,H,c,p).then(function(K){K.xhr.send(K.licenseChallenge)})})},u.onMediaAttached=function(c,p){if(this.config.emeEnabled){var M=p.media;this.media=M,M.addEventListener("encrypted",this.onMediaEncrypted),M.addEventListener("waitingforkey",this.onWaitingForKey)}},u.onMediaDetached=function(){var c=this,p=this.media,M=this.mediaKeySessions;p&&(p.removeEventListener("encrypted",this.onMediaEncrypted),p.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},k.LevelKey.clearKeyUriToKeyIdMap();var S=M.length;C.CDMCleanupPromise=Promise.all(M.map(function(F){return c.removeSession(F)}).concat(p?.setMediaKeys(null).catch(function(F){c.log("Could not clear media keys: "+F+". media.src: "+p?.src)}))).then(function(){S&&(c.log("finished closing key sessions and clearing media keys"),M.length=0)}).catch(function(F){c.log("Could not close sessions and clear media keys: "+F+". media.src: "+p?.src)})},u.onManifestLoaded=function(c,p){var M=p.sessionKeys;if(M&&this.config.emeEnabled&&!this.keyFormatPromise){var S=M.reduce(function(F,H){return-1===F.indexOf(H.keyFormat)&&F.push(H.keyFormat),F},[]);this.log("Selecting key-system from session-keys "+S.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(S)}},u.removeSession=function(c){var p=this,M=c.mediaKeysSession,S=c.licenseXhr;if(M){this.log("Remove licenses and keys and close session "+M.sessionId),M.onmessage=null,M.onkeystatuseschange=null,S&&S.readyState!==XMLHttpRequest.DONE&&S.abort(),c.mediaKeysSession=c.decryptdata=c.licenseXhr=void 0;var F=this.mediaKeySessions.indexOf(c);return F>-1&&this.mediaKeySessions.splice(F,1),M.remove().catch(function(H){p.log("Could not remove session: "+H)}).then(function(){return M.close()}).catch(function(H){p.log("Could not close session: "+H)})}},C}();y.CDMCleanupPromise=void 0;var w=function(C){function u(d,c){var p;return(p=C.call(this,c)||this).data=void 0,p.data=d,d.err=d.error,p}return function A(C,u){C.prototype=Object.create(u.prototype),C.prototype.constructor=C,h(C,u)}(u,C),u}(T(Error));const b=y},"./src/controller/fps-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/fps-controller.ts ***!
                  \******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>V});var G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../utils/logger */
"./src/utils/logger.ts");const V=function(){function Y(k){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=k,this.registerListeners()}var U=Y.prototype;return U.setStreamController=function(L){this.streamController=L},U.registerListeners=function(){this.hls.on(G.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},U.unregisterListeners=function(){this.hls.off(G.Events.MEDIA_ATTACHING,this.onMediaAttaching)},U.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},U.onMediaAttaching=function(L,R){var O=this.hls.config;if(O.capLevelOnFPSDrop){var x=R.media instanceof self.HTMLVideoElement?R.media:null;this.media=x,x&&"function"==typeof x.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),O.fpsDroppedMonitoringPeriod)}},U.checkFPS=function(L,R,O){var x=performance.now();if(R){if(this.lastTime){var T=O-this.lastDroppedFrames,_=R-this.lastDecodedFrames,m=1e3*T/(x-this.lastTime),v=this.hls;if(v.trigger(G.Events.FPS_DROP,{currentDropped:T,currentDecoded:_,totalDroppedFrames:O}),m>0&&T>v.config.fpsDroppedMonitoringThreshold*_){var h=v.currentLevel;B.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(-1===v.autoLevelCapping||v.autoLevelCapping>=h)&&(v.trigger(G.Events.FPS_DROP_LEVEL_CAPPING,{level:h-=1,droppedLevel:v.currentLevel}),v.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=x,this.lastDroppedFrames=O,this.lastDecodedFrames=R}},U.checkFPSInterval=function(){var L=this.media;if(L)if(this.isVideoPlaybackQualityAvailable){var R=L.getVideoPlaybackQuality();this.checkFPS(L,R.totalVideoFrames,R.droppedVideoFrames)}else this.checkFPS(L,L.webkitDecodedFrameCount,L.webkitDroppedFrameCount)},Y}()},"./src/controller/fragment-finders.ts":
/*!********************************************!*\
                  !*** ./src/controller/fragment-finders.ts ***!
                  \********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{findFragWithCC:()=>k,findFragmentByPDT:()=>z,findFragmentByPTS:()=>V,fragmentWithinToleranceTest:()=>Y,pdtWithinToleranceTest:()=>U});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../utils/binary-search */
"./src/utils/binary-search.ts");function z(L,R,O){if(null===R||!Array.isArray(L)||!L.length||!(0,G.isFiniteNumber)(R))return null;if(R<(L[0].programDateTime||0))return null;if(R>=(L[L.length-1].endProgramDateTime||0))return null;O=O||0;for(var T=0;T<L.length;++T){var _=L[T];if(U(R,O,_))return _}return null}function V(L,R,O,x){void 0===O&&(O=0),void 0===x&&(x=0);var A=null;if(L?A=R[L.sn-R[0].sn+1]||null:0===O&&0===R[0].start&&(A=R[0]),A&&0===Y(O,x,A))return A;var T=B.default.search(R,Y.bind(null,O,x));return!T||T===L&&A?A:T}function Y(L,R,O){if(void 0===L&&(L=0),void 0===R&&(R=0),O.start<=L&&O.start+O.duration>L)return 0;var x=Math.min(R,O.duration+(O.deltaPTS?O.deltaPTS:0));return O.start+O.duration-x<=L?1:O.start-x>L&&O.start?-1:0}function U(L,R,O){var x=1e3*Math.min(R,O.duration+(O.deltaPTS?O.deltaPTS:0));return(O.endProgramDateTime||0)-x>L}function k(L,R){return B.default.search(L,function(O){return O.cc<R?1:O.cc>R?-1:0})}},"./src/controller/fragment-tracker.ts":
/*!********************************************!*\
                  !*** ./src/controller/fragment-tracker.ts ***!
                  \********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{FragmentState:()=>z,FragmentTracker:()=>V});var G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../types/loader */
"./src/types/loader.ts"),z=(()=>{return(k=z||(z={})).NOT_LOADED="NOT_LOADED",k.APPENDING="APPENDING",k.PARTIAL="PARTIAL",k.OK="OK",z;var k})(),V=function(){function k(R){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=R,this._registerListeners()}var L=k.prototype;return L._registerListeners=function(){var O=this.hls;O.on(G.Events.BUFFER_APPENDED,this.onBufferAppended,this),O.on(G.Events.FRAG_BUFFERED,this.onFragBuffered,this),O.on(G.Events.FRAG_LOADED,this.onFragLoaded,this)},L._unregisterListeners=function(){var O=this.hls;O.off(G.Events.BUFFER_APPENDED,this.onBufferAppended,this),O.off(G.Events.FRAG_BUFFERED,this.onFragBuffered,this),O.off(G.Events.FRAG_LOADED,this.onFragLoaded,this)},L.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},L.getAppendedFrag=function(O,x){if(x===B.PlaylistLevelType.MAIN){var A=this.activeFragment,T=this.activeParts;if(!A)return null;if(T)for(var _=T.length;_--;){var m=T[_],v=m?m.end:A.appendedPTS;if(m.start<=O&&void 0!==v&&O<=v)return _>9&&(this.activeParts=T.slice(_-9)),m}else if(A.start<=O&&void 0!==A.appendedPTS&&O<=A.appendedPTS)return A}return this.getBufferedFrag(O,x)},L.getBufferedFrag=function(O,x){for(var A=this.fragments,T=Object.keys(A),_=T.length;_--;){var m=A[T[_]];if(m?.body.type===x&&m.buffered){var v=m.body;if(v.start<=O&&O<=v.end)return v}}return null},L.detectEvictedFragments=function(O,x,A){var T=this;this.timeRanges&&(this.timeRanges[O]=x),Object.keys(this.fragments).forEach(function(_){var m=T.fragments[_];if(m){if(!m.buffered&&!m.loaded)return void(m.body.type===A&&T.removeFragment(m.body));var v=m.range[O];v&&v.time.some(function(h){var E=!T.isTimeBuffered(h.startPTS,h.endPTS,x);return E&&T.removeFragment(m.body),E})}})},L.detectPartialFragments=function(O){var x=this,A=this.timeRanges,T=O.frag,_=O.part;if(A&&"initSegment"!==T.sn){var m=U(T),v=this.fragments[m];v&&(Object.keys(A).forEach(function(h){var E=T.elementaryStreams[h];E&&(v.range[h]=x.getBufferedTimes(T,_,null!==_||!0===E.partial,A[h]))}),v.loaded=null,Object.keys(v.range).length?(v.buffered=!0,v.body.endList&&(this.endListFragments[v.body.type]=v)):this.removeFragment(v.body))}},L.fragBuffered=function(O){var x=U(O),A=this.fragments[x];A&&(A.loaded=null,A.buffered=!0)},L.getBufferedTimes=function(O,x,A,T){for(var _={time:[],partial:A},m=x?x.start:O.start,v=x?x.end:O.end,h=O.minEndPTS||v,E=O.maxStartPTS||m,D=0;D<T.length;D++){var f=T.start(D)-this.bufferPadding,y=T.end(D)+this.bufferPadding;if(E>=f&&h<=y){_.time.push({startPTS:Math.max(m,T.start(D)),endPTS:Math.min(v,T.end(D))});break}if(m<y&&v>f)_.partial=!0,_.time.push({startPTS:Math.max(m,T.start(D)),endPTS:Math.min(v,T.end(D))});else if(v<=f)break}return _},L.getPartialFragment=function(O){var A,T,_,x=null,m=0,v=this.bufferPadding,h=this.fragments;return Object.keys(h).forEach(function(E){var D=h[E];D&&Y(D)&&(_=D.body.end+v,O>=(T=D.body.start-v)&&O<=_&&(A=Math.min(O-T,_-O),m<=A&&(x=D.body,m=A)))}),x},L.isEndListAppended=function(O){var x=this.endListFragments[O];return void 0!==x&&(x.buffered||Y(x))},L.getState=function(O){var x=U(O),A=this.fragments[x];return A?A.buffered?Y(A)?z.PARTIAL:z.OK:z.APPENDING:z.NOT_LOADED},L.isTimeBuffered=function(O,x,A){for(var T,_,m=0;m<A.length;m++){if(T=A.start(m)-this.bufferPadding,_=A.end(m)+this.bufferPadding,O>=T&&x<=_)return!0;if(x<=T)return!1}return!1},L.onFragLoaded=function(O,x){var A=x.frag;if("initSegment"!==A.sn&&!A.bitrateTest&&!x.part){var _=U(A);this.fragments[_]={body:A,loaded:x,buffered:!1,range:Object.create(null)}}},L.onBufferAppended=function(O,x){var A=this,T=x.frag,_=x.part,m=x.timeRanges;if(T.type===B.PlaylistLevelType.MAIN)if(this.activeFragment!==T&&(this.activeFragment=T,T.appendedPTS=void 0),_){var v=this.activeParts;v||(this.activeParts=v=[]),v.push(_)}else this.activeParts=null;this.timeRanges=m,Object.keys(m).forEach(function(h){var E=m[h];if(A.detectEvictedFragments(h,E),!_&&T.type===B.PlaylistLevelType.MAIN){var D=T.elementaryStreams[h];if(!D)return;for(var f=0;f<E.length;f++){var y=E.end(f);T.appendedPTS=y<=D.endPTS&&y>D.startPTS?Math.max(y,T.appendedPTS||0):D.endPTS}}})},L.onFragBuffered=function(O,x){this.detectPartialFragments(x)},L.hasFragment=function(O){var x=U(O);return!!this.fragments[x]},L.removeFragmentsInRange=function(O,x,A){var T=this;Object.keys(this.fragments).forEach(function(_){var m=T.fragments[_];if(m&&m.buffered){var v=m.body;v.type===A&&v.start<x&&v.end>O&&T.removeFragment(v)}})},L.removeFragment=function(O){var x=U(O);O.stats.loaded=0,O.clearElementaryStreamInfo(),O.appendedPTS=void 0,delete this.fragments[x],O.endList&&delete this.endListFragments[O.type]},L.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},k}();function Y(k){var L,R;return k.buffered&&((null===(L=k.range.video)||void 0===L?void 0:L.partial)||(null===(R=k.range.audio)||void 0===R?void 0:R.partial))}function U(k){return k.type+"_"+k.level+"_"+k.urlId+"_"+k.sn}},"./src/controller/gap-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/gap-controller.ts ***!
                  \******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{MAX_START_GAP_JUMP:()=>U,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>k,SKIP_BUFFER_RANGE_START:()=>L,STALL_MINIMUM_DURATION_MS:()=>Y,default:()=>R});var G=P(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),B=P(
/*! ../errors */
"./src/errors.ts"),z=P(
/*! ../events */
"./src/events.ts"),V=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=250,U=2,k=.1,L=.05,R=function(){function O(A,T,_,m){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=A,this.media=T,this.fragmentTracker=_,this.hls=m}var x=O.prototype;return x.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},x.poll=function(T,_){var m=this.config,v=this.media,h=this.stalled;if(null!==v){var E=v.currentTime,D=v.seeking,f=this.seeking&&!D,y=!this.seeking&&D;if(this.seeking=D,E!==T){if(this.moved=!0,null!==h){if(this.stallReported){var w=self.performance.now()-h;V.logger.warn("playback not stuck anymore @"+E+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((y||f)&&(this.stalled=null),!(v.paused&&!D||v.ended||0===v.playbackRate)&&G.BufferHelper.getBuffered(v).length){var b=G.BufferHelper.bufferInfo(v,E,0),u=b.nextStart||0;if(b.len>0||u){if(D){var d=b.len>U,c=!u||_&&_.start<=E||u-E>U&&!this.fragmentTracker.getPartialFragment(E);if(d||c)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,M=Math.max(u,b.start||0)-E,S=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,F=null==S||null===(p=S.details)||void 0===p?void 0:p.live;if(M>0&&M<=(F?2*S.details.targetduration:U))return void this._trySkipBufferHole(null)}var N=self.performance.now();if(null===h)return void(this.stalled=N);var K=N-h;if(D||!(K>=Y)||(this._reportStall(b),this.media)){var W=G.BufferHelper.bufferInfo(v,E,m.maxBufferHole);this._tryFixBufferStall(W,K)}}}}},x._tryFixBufferStall=function(T,_){var m=this.config,h=this.media;if(null!==h){var D=this.fragmentTracker.getPartialFragment(h.currentTime);if(D&&(this._trySkipBufferHole(D)||!this.media))return;T.len>m.maxBufferHole&&_>1e3*m.highBufferWatchdogPeriod&&(V.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},x._reportStall=function(T){var _=this.hls,m=this.media;!this.stallReported&&m&&(this.stallReported=!0,V.logger.warn("Playback stalling at @"+m.currentTime+" due to low buffer ("+JSON.stringify(T)+")"),_.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:T.len}))},x._trySkipBufferHole=function(T){var _=this.config,m=this.hls,v=this.media;if(null===v)return 0;for(var h=v.currentTime,E=0,D=G.BufferHelper.getBuffered(v),f=0;f<D.length;f++){var y=D.start(f);if(h+_.maxBufferHole>=E&&h<y){var w=Math.max(y+L,v.currentTime+k);return V.logger.warn("skipping hole, adjusting currentTime from "+h+" to "+w),this.moved=!0,this.stalled=null,v.currentTime=w,T&&m.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+h+" to "+w,frag:T}),w}E=D.end(f)}return 0},x._tryNudgeBuffer=function(){var T=this.config,_=this.hls,m=this.media,v=this.nudgeRetry;if(null!==m){var h=m.currentTime;if(this.nudgeRetry++,v<T.nudgeMaxRetry){var E=h+(v+1)*T.nudgeOffset;V.logger.warn("Nudging 'currentTime' from "+h+" to "+E),m.currentTime=E,_.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else V.logger.error("Playhead still not moving while enough data buffered @"+h+" after "+T.nudgeMaxRetry+" nudges"),_.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},O}()},"./src/controller/id3-track-controller.ts":
/*!************************************************!*\
                  !*** ./src/controller/id3-track-controller.ts ***!
                  \************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>T});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),V=P(
/*! ../demux/id3 */
"./src/demux/id3.ts"),Y=P(
/*! ../loader/date-range */
"./src/loader/date-range.ts"),U=P(
/*! ../types/demuxer */
"./src/types/demuxer.ts");function L(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var R=function(){var _=L();try{new _(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function O(_,m){return _.getTime()/1e3-m}function x(_){return Uint8Array.from(_.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}const T=function(){function _(v){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=v,this._registerListeners()}var m=_.prototype;return m.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},m._registerListeners=function(){var h=this.hls;h.on(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),h.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.on(B.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),h.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),h.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},m._unregisterListeners=function(){var h=this.hls;h.off(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),h.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.off(B.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),h.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),h.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},m.onMediaAttached=function(h,E){this.media=E.media},m.onMediaDetaching=function(){this.id3Track&&((0,z.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},m.onManifestLoading=function(){this.dateRangeCuesAppended={}},m.createTrack=function(h){var E=this.getID3Track(h.textTracks);return E.mode="hidden",E},m.getID3Track=function(h){if(this.media){for(var E=0;E<h.length;E++){var D=h[E];if("metadata"===D.kind&&"id3"===D.label)return(0,z.sendAddTrackEvent)(D,this.media),D}return this.media.addTextTrack("metadata","id3")}},m.onFragParsingMetadata=function(h,E){if(this.media){var D=this.hls.config,f=D.enableEmsgMetadataCues,y=D.enableID3MetadataCues;if(f||y){var w=E.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var b=L(),C=0;C<w.length;C++){var u=w[C].type;if((u!==U.MetadataSchema.emsg||f)&&y){var d=V.getID3Frames(w[C].data);if(d){var c=w[C].pts,p=c+w[C].duration;p>R&&(p=R),p-c<=0&&(p=c+.25);for(var S=0;S<d.length;S++){var F=d[S];if(!V.isTimeStampFrame(F)){this.updateId3CueEnds(c);var H=new b(c,p,"");H.value=F,u&&(H.type=u),this.id3Track.addCue(H)}}}}}}}},m.updateId3CueEnds=function(h){var E,D=null===(E=this.id3Track)||void 0===E?void 0:E.cues;if(D)for(var f=D.length;f--;){var y=D[f];y.startTime<h&&y.endTime===R&&(y.endTime=h)}},m.onBufferFlushing=function(h,E){var y=E.type,w=this.id3Track,b=this.hls;if(b){var C=b.config,u=C.enableEmsgMetadataCues,d=C.enableID3MetadataCues;w&&(u||d)&&(0,z.removeCuesInRange)(w,E.startOffset,E.endOffset,"audio"===y?function(M){return M.type===U.MetadataSchema.audioId3&&d}:"video"===y?function(M){return M.type===U.MetadataSchema.emsg&&u}:function(M){return M.type===U.MetadataSchema.audioId3&&d||M.type===U.MetadataSchema.emsg&&u})}},m.onLevelUpdated=function(h,E){var D=this,f=E.details;if(this.media&&f.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var y=this.dateRangeCuesAppended,w=this.id3Track,b=f.dateRanges,C=Object.keys(b);if(w)for(var u=Object.keys(y).filter(function(N){return!C.includes(N)}),d=function(K){var W=u[K];Object.keys(y[W].cues).forEach(function($){w.removeCue(y[W].cues[$])}),delete y[W]},c=u.length;c--;)d(c);var p=f.fragments[f.fragments.length-1];if(0!==C.length&&(0,G.isFiniteNumber)(p?.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var M=p.programDateTime/1e3-p.start,S=L(),F=function(K){var W=C[K],$=b[W],Q=y[W],te=Q?.cues||{},Z=Q?.durationKnown||!1,re=O($.startDate,M),oe=R,ce=$.endDate;if(ce)oe=O(ce,M),Z=!0;else if($.endOnNext&&!Z){var ue=C.reduce(function(we,et){var ct=b[et];return ct.class===$.class&&ct.id!==et&&ct.startDate>$.startDate&&we.push(ct),we},[]).sort(function(we,et){return we.startDate.getTime()-et.startDate.getTime()})[0];ue&&(oe=O(ue.startDate,M),Z=!0)}for(var fe=Object.keys($.attr),De=0;De<fe.length;De++){var Re=fe[De];if(Re!==Y.DateRangeAttribute.ID&&Re!==Y.DateRangeAttribute.CLASS&&Re!==Y.DateRangeAttribute.START_DATE&&Re!==Y.DateRangeAttribute.DURATION&&Re!==Y.DateRangeAttribute.END_DATE&&Re!==Y.DateRangeAttribute.END_ON_NEXT){var Te=te[Re];if(Te)Z&&!Q.durationKnown&&(Te.endTime=oe);else{var Ce=$.attr[Re];Te=new S(re,oe,""),(Re===Y.DateRangeAttribute.SCTE35_OUT||Re===Y.DateRangeAttribute.SCTE35_IN)&&(Ce=x(Ce)),Te.value={key:Re,data:Ce},Te.type=U.MetadataSchema.dateRange,D.id3Track.addCue(Te),te[Re]=Te}}}y[W]={cues:te,dateRange:$,durationKnown:Z}},H=0;H<C.length;H++)F(H)}}},_}()},"./src/controller/latency-controller.ts":
/*!**********************************************!*\
                  !*** ./src/controller/latency-controller.ts ***!
                  \**********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>L});var G=P(
/*! ../errors */
"./src/errors.ts"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts");function V(R,O){for(var x=0;x<O.length;x++){var A=O[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,U(A.key),A)}}function U(R){var O=function k(R,O){if("object"!=typeof R||null===R)return R;var x=R[Symbol.toPrimitive];if(void 0!==x){var A=x.call(R,O||"default");if("object"!=typeof A)return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===O?String:Number)(R)}(R,"string");return"symbol"==typeof O?O:String(O)}var L=function(){function R(x){var A=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return A.timeupdate()},this.hls=x,this.config=x.config,this.registerListeners()}var O=R.prototype;return O.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},O.registerListeners=function(){this.hls.on(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(B.Events.ERROR,this.onError,this)},O.unregisterListeners=function(){this.hls.off(B.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(B.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(B.Events.ERROR,this.onError)},O.onMediaAttached=function(A,T){this.media=T.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},O.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},O.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},O.onLevelUpdated=function(A,T){var _=T.details;this.levelDetails=_,_.advanced&&this.timeupdate(),!_.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},O.onError=function(A,T){T.details===G.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,z.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},O.timeupdate=function(){var A=this.media,T=this.levelDetails;if(A&&T){this.currentTime=A.currentTime;var _=this.computeLatency();if(null!==_){this._latency=_;var m=this.config,h=m.maxLiveSyncPlaybackRate;if(m.lowLatencyMode&&1!==h){var E=this.targetLatency;if(null!==E){var D=_-E,f=Math.min(this.maxLatency,E+T.targetduration);if(T.live&&D<f&&D>.05&&this.forwardBufferLength>1){var w=Math.min(2,Math.max(1,h)),b=Math.round(2/(1+Math.exp(-.75*D-this.edgeStalled))*20)/20;A.playbackRate=Math.min(w,Math.max(1,b))}else 1!==A.playbackRate&&0!==A.playbackRate&&(A.playbackRate=1)}}}}},O.estimateLiveEdge=function(){var A=this.levelDetails;return null===A?null:A.edge+A.age},O.computeLatency=function(){var A=this.estimateLiveEdge();return null===A?null:A-this.currentTime},function Y(R,O,x){O&&V(R.prototype,O),x&&V(R,x),Object.defineProperty(R,"prototype",{writable:!1})}(R,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var A=this.config,T=this.levelDetails;return void 0!==A.liveMaxLatencyDuration?A.liveMaxLatencyDuration:T?A.liveMaxLatencyDurationCount*T.targetduration:0}},{key:"targetLatency",get:function(){var A=this.levelDetails;if(null===A)return null;var m=A.targetduration,v=this.config,h=v.liveSyncDuration,f=this.hls.userConfig,y=v.lowLatencyMode&&A.partHoldBack||A.holdBack;return(f.liveSyncDuration||f.liveSyncDurationCount||0===y)&&(y=void 0!==h?h:v.liveSyncDurationCount*m),y+Math.min(1*this.stallCount,m)}},{key:"liveSyncPosition",get:function(){var A=this.estimateLiveEdge(),T=this.targetLatency,_=this.levelDetails;if(null===A||null===T||null===_)return null;var m=_.edge,E=m-(this.config.lowLatencyMode&&_.partTarget||_.targetduration);return Math.min(Math.max(m-_.totalduration,A-T-this.edgeStalled),E)}},{key:"drift",get:function(){var A=this.levelDetails;return null===A?1:A.drift}},{key:"edgeStalled",get:function(){var A=this.levelDetails;return null===A?0:Math.max(A.age-3*(this.config.lowLatencyMode&&A.partTarget||A.targetduration),0)}},{key:"forwardBufferLength",get:function(){var A=this.media,T=this.levelDetails;if(!A||!T)return 0;var _=A.buffered.length;return(_?A.buffered.end(_-1):T.edge)-this.currentTime}}]),R}()},"./src/controller/level-controller.ts":
/*!********************************************!*\
                  !*** ./src/controller/level-controller.ts ***!
                  \********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>v});var G=P(
/*! ../types/level */
"./src/types/level.ts"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../errors */
"./src/errors.ts"),V=P(
/*! ../utils/codecs */
"./src/utils/codecs.ts"),Y=P(
/*! ./level-helper */
"./src/controller/level-helper.ts"),U=P(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),k=P(
/*! ../types/loader */
"./src/types/loader.ts");function L(){return L=Object.assign?Object.assign.bind():function(h){for(var E=1;E<arguments.length;E++){var D=arguments[E];for(var f in D)Object.prototype.hasOwnProperty.call(D,f)&&(h[f]=D[f])}return h},L.apply(this,arguments)}function R(h,E){for(var D=0;D<E.length;D++){var f=E[D];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,x(f.key),f)}}function x(h){var E=function A(h,E){if("object"!=typeof h||null===h)return h;var D=h[Symbol.toPrimitive];if(void 0!==D){var f=D.call(h,E||"default");if("object"!=typeof f)return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===E?String:Number)(h)}(h,"string");return"symbol"==typeof E?E:String(E)}function _(h,E){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,y){return f.__proto__=y,f})(h,E)}var m=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),v=function(h){function E(f){var y;return(y=h.call(this,f,"[level-controller]")||this)._levels=[],y._firstLevel=-1,y._startLevel=void 0,y.currentLevelIndex=-1,y.manualLevelIndex=-1,y.onParsedComplete=void 0,y._registerListeners(),y}!function T(h,E){h.prototype=Object.create(E.prototype),h.prototype.constructor=h,_(h,E)}(E,h);var D=E.prototype;return D._registerListeners=function(){var y=this.hls;y.on(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),y.on(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.on(B.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),y.on(B.Events.FRAG_LOADED,this.onFragLoaded,this),y.on(B.Events.ERROR,this.onError,this)},D._unregisterListeners=function(){var y=this.hls;y.off(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),y.off(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.off(B.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),y.off(B.Events.FRAG_LOADED,this.onFragLoaded,this),y.off(B.Events.ERROR,this.onError,this)},D.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,h.prototype.destroy.call(this)},D.startLoad=function(){this._levels.forEach(function(w){w.loadError=0}),h.prototype.startLoad.call(this)},D.onManifestLoaded=function(y,w){var d,p,b=[],C=[],u=[],c={},M=!1,S=!1,F=!1;if(w.levels.forEach(function(W){var $=W.attrs;M=M||!(!W.width||!W.height),S=S||!!W.videoCodec,F=F||!!W.audioCodec,m&&W.audioCodec&&-1!==W.audioCodec.indexOf("mp4a.40.34")&&(W.audioCodec=void 0);var Q=W.bitrate+"-"+W.attrs.RESOLUTION+"-"+W.attrs.CODECS;(p=c[Q])?p.url.push(W.url):(p=new G.Level(W),c[Q]=p,b.push(p)),$&&($.AUDIO&&(0,Y.addGroupId)(p,"audio",$.AUDIO),$.SUBTITLES&&(0,Y.addGroupId)(p,"text",$.SUBTITLES))}),(M||S)&&F&&(b=b.filter(function(W){return!!W.videoCodec||!(!W.width||!W.height)})),b=b.filter(function(W){var $=W.audioCodec,Q=W.videoCodec;return(!$||(0,V.isCodecSupportedInMp4)($,"audio"))&&(!Q||(0,V.isCodecSupportedInMp4)(Q,"video"))}),w.audioTracks&&(C=w.audioTracks.filter(function(W){return!W.audioCodec||(0,V.isCodecSupportedInMp4)(W.audioCodec,"audio")}),(0,Y.assignTrackIdsByGroup)(C)),w.subtitles&&(0,Y.assignTrackIdsByGroup)(u=w.subtitles),b.length>0){d=b[0].bitrate,b.sort(function(W,$){return W.attrs["HDCP-LEVEL"]!==$.attrs["HDCP-LEVEL"]?(W.attrs["HDCP-LEVEL"]||"")>($.attrs["HDCP-LEVEL"]||"")?1:-1:W.bitrate!==$.bitrate?W.bitrate-$.bitrate:W.attrs.SCORE!==$.attrs.SCORE?W.attrs.decimalFloatingPoint("SCORE")-$.attrs.decimalFloatingPoint("SCORE"):M&&W.height!==$.height?W.height-$.height:0}),this._levels=b;for(var H=0;H<b.length;H++)if(b[H].bitrate===d){this._firstLevel=H,this.log("manifest loaded, "+b.length+" level(s) found, first bitrate: "+d);break}var K={levels:b,audioTracks:C,subtitleTracks:u,sessionData:w.sessionData,sessionKeys:w.sessionKeys,firstLevel:this._firstLevel,stats:w.stats,audio:F,video:S,altAudio:!(F&&!S)&&C.some(function(W){return!!W.url})};this.hls.trigger(B.Events.MANIFEST_PARSED,K),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(B.Events.ERROR,{type:z.ErrorTypes.MEDIA_ERROR,details:z.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:w.url,reason:"no level with compatible codecs found in manifest"})},D.onError=function(y,w){var b,C;if(h.prototype.onError.call(this,y,w),!w.fatal){var u=w.context,d=this._levels[this.currentLevelIndex];if(u&&(u.type===k.PlaylistContextType.AUDIO_TRACK&&d.audioGroupIds&&u.groupId===d.audioGroupIds[d.urlId]||u.type===k.PlaylistContextType.SUBTITLE_TRACK&&d.textGroupIds&&u.groupId===d.textGroupIds[d.urlId]))return void this.redundantFailover(this.currentLevelIndex);var M,c=!1,p=!0;switch(w.details){case z.ErrorDetails.FRAG_LOAD_ERROR:case z.ErrorDetails.FRAG_LOAD_TIMEOUT:case z.ErrorDetails.KEY_LOAD_ERROR:case z.ErrorDetails.KEY_LOAD_TIMEOUT:if(w.frag){var S=w.frag.type===k.PlaylistLevelType.MAIN?w.frag.level:this.currentLevelIndex,F=this._levels[S];F?(F.fragmentError++,F.fragmentError>this.hls.config.fragLoadingMaxRetry&&(M=S)):M=S}break;case z.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var H=d.attrs["HDCP-LEVEL"];H&&(this.hls.maxHdcpLevel=G.HdcpLevels[G.HdcpLevels.indexOf(H)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'));case z.ErrorDetails.FRAG_PARSING_ERROR:case z.ErrorDetails.KEY_SYSTEM_NO_SESSION:M=(null===(b=w.frag)||void 0===b?void 0:b.type)===k.PlaylistLevelType.MAIN?w.frag.level:this.currentLevelIndex,w.levelRetry=!1;break;case z.ErrorDetails.LEVEL_LOAD_ERROR:case z.ErrorDetails.LEVEL_LOAD_TIMEOUT:u&&(u.deliveryDirectives&&(p=!1),M=u.level),c=!0;break;case z.ErrorDetails.REMUX_ALLOC_ERROR:M=null!=(C=w.level)?C:this.currentLevelIndex,c=!0}void 0!==M&&this.recoverLevel(w,M,c,p)}},D.recoverLevel=function(y,w,b,C){var u=y.details,d=this._levels[w];if(d.loadError++,b){if(!this.retryLoadingOrFail(y))return void(this.currentLevelIndex=-1);y.levelRetry=!0}if(C){var p=d.url.length;if(p>1&&d.loadError<p)y.levelRetry=!0,this.redundantFailover(w);else if(-1===this.manualLevelIndex){for(var M=-1,S=this._levels,F=S.length;F--;){var H=(F+this.currentLevelIndex)%S.length;if(H!==this.currentLevelIndex&&0===S[H].loadError){M=H;break}}M>-1&&this.currentLevelIndex!==M?(this.warn(u+": switch to "+M),y.levelRetry=!0,this.hls.nextAutoLevel=M):!1===y.levelRetry&&(y.fatal=!0)}}},D.redundantFailover=function(y){var w=this._levels[y],b=w.url.length;if(b>1){var C=(w.urlId+1)%b;this.warn("Switching to redundant URL-id "+C),this._levels.forEach(function(u){u.urlId=C}),this.level=y}},D.onFragLoaded=function(y,w){var b=w.frag;if(void 0!==b&&b.type===k.PlaylistLevelType.MAIN){var C=this._levels[b.level];void 0!==C&&(C.fragmentError=0,C.loadError=0)}},D.onLevelLoaded=function(y,w){var b,c,C=w.level,u=w.details,d=this._levels[C];if(!d)return this.warn("Invalid level index "+C),void(null!==(c=w.deliveryDirectives)&&void 0!==c&&c.skip&&(u.deltaUpdateFailed=!0));C===this.currentLevelIndex?(0===d.fragmentError&&(d.loadError=0,this.retryCount=0),this.playlistLoaded(C,w,d.details)):null!==(b=w.deliveryDirectives)&&void 0!==b&&b.skip&&(u.deltaUpdateFailed=!0)},D.onAudioTrackSwitched=function(y,w){var b=this.hls.levels[this.currentLevelIndex];if(b&&b.audioGroupIds){for(var C=-1,u=this.hls.audioTracks[w.id].groupId,d=0;d<b.audioGroupIds.length;d++)if(b.audioGroupIds[d]===u){C=d;break}C!==b.urlId&&(b.urlId=C,this.startLoad())}},D.loadPlaylist=function(y){h.prototype.loadPlaylist.call(this);var w=this.currentLevelIndex,b=this._levels[w];if(this.canLoad&&b&&b.url.length>0){var C=b.urlId,u=b.url[C];if(y)try{u=y.addDirectives(u)}catch(d){this.warn("Could not construct new URL with HLS Delivery Directives: "+d)}this.log("Attempt loading level index "+w+(void 0!==y?.msn?" at sn "+y.msn+" part "+y.part:"")+" with URL-id "+C+" "+u),this.clearTimer(),this.hls.trigger(B.Events.LEVEL_LOADING,{url:u,level:w,id:C,deliveryDirectives:y||null})}},D.removeLevel=function(y,w){var b=function(d,c){return c!==w},C=this._levels.filter(function(u,d){return d!==y||u.url.length>1&&void 0!==w&&(u.url=u.url.filter(b),u.audioGroupIds&&(u.audioGroupIds=u.audioGroupIds.filter(b)),u.textGroupIds&&(u.textGroupIds=u.textGroupIds.filter(b)),u.urlId=0,!0)}).map(function(u,d){var c=u.details;return null!=c&&c.fragments&&c.fragments.forEach(function(p){p.level=d}),u});this._levels=C,this.hls.trigger(B.Events.LEVELS_UPDATED,{levels:C})},function O(h,E,D){E&&R(h.prototype,E),D&&R(h,D),Object.defineProperty(h,"prototype",{writable:!1})}(E,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(y){var w,b=this._levels;if(0!==b.length&&(this.currentLevelIndex!==y||null===(w=b[y])||void 0===w||!w.details)){if(y<0||y>=b.length){var C=y<0;if(this.hls.trigger(B.Events.ERROR,{type:z.ErrorTypes.OTHER_ERROR,details:z.ErrorDetails.LEVEL_SWITCH_ERROR,level:y,fatal:C,reason:"invalid level idx"}),C)return;y=Math.min(y,b.length-1)}this.clearTimer();var u=this.currentLevelIndex,d=b[u],c=b[y];this.log("switching to level "+y+" from "+u),this.currentLevelIndex=y;var p=L({},c,{level:y,maxBitrate:c.maxBitrate,uri:c.uri,urlId:c.urlId});delete p._urlId,this.hls.trigger(B.Events.LEVEL_SWITCHING,p);var M=c.details;if(!M||M.live){var S=this.switchParams(c.uri,d?.details);this.loadPlaylist(S)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(y){this.manualLevelIndex=y,void 0===this._startLevel&&(this._startLevel=y),-1!==y&&(this.level=y)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(y){this._firstLevel=y}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var y=this.hls.config.startLevel;return void 0!==y?y:this._firstLevel}return this._startLevel},set:function(y){this._startLevel=y}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(y){this.level=y,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=y)}}]),E}(U.default)},"./src/controller/level-helper.ts":
/*!****************************************!*\
                  !*** ./src/controller/level-helper.ts ***!
                  \****************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{addGroupId:()=>Y,addSliding:()=>m,adjustSliding:()=>_,assignTrackIdsByGroup:()=>U,computeReloadInterval:()=>v,getFragmentWithSN:()=>h,getPartWith:()=>E,mapFragmentIntersection:()=>T,mapPartIntersection:()=>A,mergeDetails:()=>O,updateFragPTSDTS:()=>R,updatePTS:()=>k});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),z=P(
/*! ../loader/date-range */
"./src/loader/date-range.ts");function V(){return V=Object.assign?Object.assign.bind():function(D){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(D[w]=y[w])}return D},V.apply(this,arguments)}function Y(D,f,y){switch(f){case"audio":D.audioGroupIds||(D.audioGroupIds=[]),D.audioGroupIds.push(y);break;case"text":D.textGroupIds||(D.textGroupIds=[]),D.textGroupIds.push(y)}}function U(D){var f={};D.forEach(function(y){var w=y.groupId||"";y.id=f[w]=f[w]||0,f[w]++})}function k(D,f,y){L(D[f],D[y])}function L(D,f){var y=f.startPTS;if((0,G.isFiniteNumber)(y)){var b,w=0;f.sn>D.sn?(w=y-D.start,b=D):(w=D.start-y,b=f),b.duration!==w&&(b.duration=w)}else f.start=f.sn>D.sn?D.cc===f.cc&&D.minEndPTS?D.start+(D.minEndPTS-D.start):D.start+D.duration:Math.max(D.start-f.duration,0)}function R(D,f,y,w,b,C){w-y<=0&&(B.logger.warn("Fragment should have a positive duration",f),w=y+f.duration,C=b+f.duration);var d=y,c=w,p=f.startPTS,M=f.endPTS;if((0,G.isFiniteNumber)(p)){var S=Math.abs(p-y);f.deltaPTS=(0,G.isFiniteNumber)(f.deltaPTS)?Math.max(S,f.deltaPTS):S,d=Math.max(y,p),y=Math.min(y,p),b=Math.min(b,f.startDTS),c=Math.min(w,M),w=Math.max(w,M),C=Math.max(C,f.endDTS)}f.duration=w-y;var F=y-f.start;f.start=f.startPTS=y,f.maxStartPTS=d,f.startDTS=b,f.endPTS=w,f.minEndPTS=c,f.endDTS=C;var H=f.sn;if(!D||H<D.startSN||H>D.endSN)return 0;var N,K=H-D.startSN,W=D.fragments;for(W[K]=f,N=K;N>0;N--)L(W[N],W[N-1]);for(N=K;N<W.length-1;N++)L(W[N],W[N+1]);return D.fragmentHint&&L(W[W.length-1],D.fragmentHint),D.PTSKnown=D.alignedSliding=!0,F}function O(D,f){for(var y=null,w=D.fragments,b=w.length-1;b>=0;b--){var C=w[b].initSegment;if(C){y=C;break}}D.fragmentHint&&delete D.fragmentHint.endPTS;var d,u=0;if(T(D,f,function(N,K){N.relurl&&(u=N.cc-K.cc),(0,G.isFiniteNumber)(N.startPTS)&&(0,G.isFiniteNumber)(N.endPTS)&&(K.start=K.startPTS=N.startPTS,K.startDTS=N.startDTS,K.appendedPTS=N.appendedPTS,K.maxStartPTS=N.maxStartPTS,K.endPTS=N.endPTS,K.endDTS=N.endDTS,K.minEndPTS=N.minEndPTS,K.duration=N.endPTS-N.startPTS,K.duration&&(d=K),f.PTSKnown=f.alignedSliding=!0),K.elementaryStreams=N.elementaryStreams,K.loader=N.loader,K.stats=N.stats,K.urlId=N.urlId,N.initSegment&&(K.initSegment=N.initSegment,y=N.initSegment)}),y&&(f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments).forEach(function(N){var K;(!N.initSegment||N.initSegment.relurl===(null===(K=y)||void 0===K?void 0:K.relurl))&&(N.initSegment=y)}),f.skippedSegments)if(f.deltaUpdateFailed=f.fragments.some(function(N){return!N}),f.deltaUpdateFailed){B.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=f.skippedSegments;p--;)f.fragments.shift();f.startSN=f.fragments[0].sn,f.startCC=f.fragments[0].cc}else f.canSkipDateRanges&&(f.dateRanges=function x(D,f,y){var w=V({},D);return y&&y.forEach(function(b){delete w[b]}),Object.keys(f).forEach(function(b){var C=new z.DateRange(f[b].attr,w[b]);C.isValid?w[b]=C:B.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(f[b].attr)+'"')}),w}(D.dateRanges,f.dateRanges,f.recentlyRemovedDateranges));var M=f.fragments;if(u){B.logger.warn("discontinuity sliding from playlist, take drift into account");for(var S=0;S<M.length;S++)M[S].cc+=u}f.skippedSegments&&(f.startCC=f.fragments[0].cc),A(D.partList,f.partList,function(N,K){K.elementaryStreams=N.elementaryStreams,K.stats=N.stats}),d?R(f,d,d.startPTS,d.endPTS,d.startDTS,d.endDTS):_(D,f),M.length&&(f.totalduration=f.edge-M[0].start),f.driftStartTime=D.driftStartTime,f.driftStart=D.driftStart;var F=f.advancedDateTime;if(f.advanced&&F){var H=f.edge;f.driftStart||(f.driftStartTime=F,f.driftStart=H),f.driftEndTime=F,f.driftEnd=H}else f.driftEndTime=D.driftEndTime,f.driftEnd=D.driftEnd,f.advancedDateTime=D.advancedDateTime}function A(D,f,y){if(D&&f)for(var w=0,b=0,C=D.length;b<=C;b++){var u=D[b],d=f[b+w];u&&d&&u.index===d.index&&u.fragment.sn===d.fragment.sn?y(u,d):w--}}function T(D,f,y){for(var w=f.skippedSegments,b=Math.max(D.startSN,f.startSN)-f.startSN,C=(D.fragmentHint?1:0)+(w?f.endSN:Math.min(D.endSN,f.endSN))-f.startSN,u=f.startSN-D.startSN,d=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments,c=D.fragmentHint?D.fragments.concat(D.fragmentHint):D.fragments,p=b;p<=C;p++){var M=c[u+p],S=d[p];w&&!S&&p<w&&(S=f.fragments[p]=M),M&&S&&y(M,S)}}function _(D,f){var y=f.startSN+f.skippedSegments-D.startSN,w=D.fragments;y<0||y>=w.length||m(f,w[y].start)}function m(D,f){if(f){for(var y=D.fragments,w=D.skippedSegments;w<y.length;w++)y[w].start+=f;D.fragmentHint&&(D.fragmentHint.start+=f)}}function v(D,f){void 0===f&&(f=1/0);var y=1e3*D.targetduration;if(D.updated){var w=D.fragments;if(w.length&&4*y>f){var C=1e3*w[w.length-1].duration;C<y&&(y=C)}}else y/=2;return Math.round(y)}function h(D,f,y){if(!D||!D.details)return null;var w=D.details,b=w.fragments[f-w.startSN];return b||(b=w.fragmentHint)&&b.sn===f?b:f<w.startSN&&y&&y.sn===f?y:null}function E(D,f,y){if(!D||!D.details)return null;var w=D.details.partList;if(w)for(var b=w.length;b--;){var C=w[b];if(C.index===y&&C.fragment.sn===f)return C}return null}},"./src/controller/stream-controller.ts":
/*!*********************************************!*\
                  !*** ./src/controller/stream-controller.ts ***!
                  \*********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>f});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),z=P(
/*! ../is-supported */
"./src/is-supported.ts"),V=P(
/*! ../events */
"./src/events.ts"),Y=P(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),U=P(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),k=P(
/*! ../types/loader */
"./src/types/loader.ts"),L=P(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),R=P(
/*! ../demux/transmuxer-interface */
"./src/demux/transmuxer-interface.ts"),O=P(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),x=P(
/*! ./gap-controller */
"./src/controller/gap-controller.ts"),A=P(
/*! ../errors */
"./src/errors.ts");function T(y,w){for(var b=0;b<w.length;b++){var C=w[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,m(C.key),C)}}function m(y){var w=function v(y,w){if("object"!=typeof y||null===y)return y;var b=y[Symbol.toPrimitive];if(void 0!==b){var C=b.call(y,w||"default");if("object"!=typeof C)return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===w?String:Number)(y)}(y,"string");return"symbol"==typeof w?w:String(w)}function E(y,w){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,u){return C.__proto__=u,C})(y,w)}var f=function(y){function w(C,u,d){var c;return(c=y.call(this,C,u,d,"[stream-controller]")||this).audioCodecSwap=!1,c.gapController=null,c.level=-1,c._forceStartLoad=!1,c.altAudio=!1,c.audioOnly=!1,c.fragPlaying=null,c.onvplaying=null,c.onvseeked=null,c.fragLastKbps=0,c.couldBacktrack=!1,c.backtrackFragment=null,c.audioCodecSwitch=!1,c.videoBuffer=null,c._registerListeners(),c}!function h(y,w){y.prototype=Object.create(w.prototype),y.prototype.constructor=y,E(y,w)}(w,y);var b=w.prototype;return b._registerListeners=function(){var u=this.hls;u.on(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(V.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(V.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(V.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.on(V.Events.ERROR,this.onError,this),u.on(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(V.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.on(V.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(V.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.on(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var u=this.hls;u.off(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(V.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(V.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.off(V.Events.ERROR,this.onError,this),u.off(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(V.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.off(V.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(V.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.off(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},b.startLoad=function(u){if(this.levels){var d=this.lastCurrentTime,c=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var p=c.startLevel;-1===p&&(c.config.testBandwidth&&this.levels.length>1?(p=0,this.bitrateTest=!0):p=c.nextAutoLevel),this.level=c.nextLoadLevel=p,this.loadedmetadata=!1}d>0&&-1===u&&(this.log("Override startPosition with lastCurrentTime @"+d.toFixed(3)),u=d),this.state=B.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()}else this._forceStartLoad=!0,this.state=B.State.STOPPED},b.stopLoad=function(){this._forceStartLoad=!1,y.prototype.stopLoad.call(this)},b.doTick=function(){switch(this.state){case B.State.IDLE:this.doTickIdle();break;case B.State.WAITING_LEVEL:var u,d=this.levels,p=null==d||null===(u=d[this.level])||void 0===u?void 0:u.details;if(p&&(!p.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(p))break;this.state=B.State.IDLE;break}break;case B.State.FRAG_LOADING_WAITING_RETRY:var M,S=self.performance.now(),F=this.retryDate;(!F||S>=F||null!==(M=this.media)&&void 0!==M&&M.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=B.State.IDLE)}this.onTickEnd()},b.onTickEnd=function(){y.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},b.doTickIdle=function(){var u=this.hls,c=this.levels,S=u.nextLoadLevel;if(null!==this.levelLastLoaded&&(this.media||!this.startFragRequested&&u.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&c&&c[S]){var F=c[S],H=this.getMainFwdBufferInfo();if(null!==H){var N=this.getLevelDetails();if(N&&this._streamEnded(H,N)){var K={};return this.altAudio&&(K.type="video"),this.hls.trigger(V.Events.BUFFER_EOS,K),void(this.state=B.State.ENDED)}this.level=u.nextLoadLevel=S;var W=F.details;if(!W||this.state===B.State.WAITING_LEVEL||W.live&&this.levelLastLoaded!==S)return this.level=S,void(this.state=B.State.WAITING_LEVEL);if(!(H.len>=this.getMaxBufferLength(F.maxBitrate))){this.backtrackFragment&&this.backtrackFragment.start>H.end&&(this.backtrackFragment=null);var te=this.backtrackFragment?this.backtrackFragment.start:H.end,Z=this.getNextFragment(te,W);if(this.couldBacktrack&&!this.fragPrevious&&Z&&"initSegment"!==Z.sn&&this.fragmentTracker.getState(Z)!==U.FragmentState.OK){var re,oe=(null!=(re=this.backtrackFragment)?re:Z).sn,ue=W.fragments[oe-W.startSN-1];ue&&Z.cc===ue.cc&&(Z=ue,this.fragmentTracker.removeFragment(ue))}else this.backtrackFragment&&H.len&&(this.backtrackFragment=null);if(Z&&this.fragmentTracker.getState(Z)===U.FragmentState.OK&&this.nextLoadPosition>te){var fe=this.audioOnly&&!this.altAudio?L.ElementaryStreamTypes.AUDIO:L.ElementaryStreamTypes.VIDEO,De=(fe===L.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;De&&this.afterBufferFlushed(De,fe,k.PlaylistLevelType.MAIN),Z=this.getNextFragment(this.nextLoadPosition,W)}Z&&(Z.initSegment&&!Z.initSegment.data&&!this.bitrateTest&&(Z=Z.initSegment),this.loadFragment(Z,W,te))}}}},b.loadFragment=function(u,d,c){var p,M=this.fragmentTracker.getState(u);this.fragCurrent=u,M===U.FragmentState.NOT_LOADED?"initSegment"===u.sn?this._loadInitSegment(u,d):this.bitrateTest?(this.log("Fragment "+u.sn+" of level "+u.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(u,d)):(this.startFragRequested=!0,y.prototype.loadFragment.call(this,u,d,c)):M===U.FragmentState.APPENDING?this.reduceMaxBufferLength(u.duration)&&this.fragmentTracker.removeFragment(u):0===(null===(p=this.media)||void 0===p?void 0:p.buffered.length)&&this.fragmentTracker.removeAllFragments()},b.getAppendedFrag=function(u){var d=this.fragmentTracker.getAppendedFrag(u,k.PlaylistLevelType.MAIN);return d&&"fragment"in d?d.fragment:d},b.getBufferedFrag=function(u){return this.fragmentTracker.getBufferedFrag(u,k.PlaylistLevelType.MAIN)},b.followingBufferedFrag=function(u){return u?this.getBufferedFrag(u.end+.5):null},b.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},b.nextLevelSwitch=function(){var u=this.levels,d=this.media;if(null!=d&&d.readyState){var c,p=this.getAppendedFrag(d.currentTime);if(p&&p.start>1&&this.flushMainBuffer(0,p.start-1),!d.paused&&u){var F=this.fragLastKbps;c=F&&this.fragCurrent?this.fragCurrent.duration*u[this.hls.nextLoadLevel].maxBitrate/(1e3*F)+1:0}else c=0;var H=this.getBufferedFrag(d.currentTime+c);if(H){var N=this.followingBufferedFrag(H);if(N){this.abortCurrentFrag();var W=N.duration,$=Math.max(H.end,(N.maxStartPTS?N.maxStartPTS:N.start)+Math.min(Math.max(W-this.config.maxFragLookUpTolerance,.5*W),.75*W));this.flushMainBuffer($,Number.POSITIVE_INFINITY)}}}},b.abortCurrentFrag=function(){var u=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,u&&u.abortRequests(),this.state){case B.State.KEY_LOADING:case B.State.FRAG_LOADING:case B.State.FRAG_LOADING_WAITING_RETRY:case B.State.PARSING:case B.State.PARSED:this.state=B.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},b.flushMainBuffer=function(u,d){y.prototype.flushMainBuffer.call(this,u,d,this.altAudio?"video":null)},b.onMediaAttached=function(u,d){y.prototype.onMediaAttached.call(this,u,d);var c=d.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),c.addEventListener("playing",this.onvplaying),c.addEventListener("seeked",this.onvseeked),this.gapController=new x.default(this.config,c,this.fragmentTracker,this.hls)},b.onMediaDetaching=function(){var u=this.media;u&&this.onvplaying&&this.onvseeked&&(u.removeEventListener("playing",this.onvplaying),u.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),y.prototype.onMediaDetaching.call(this)},b.onMediaPlaying=function(){this.tick()},b.onMediaSeeked=function(){var u=this.media,d=u?u.currentTime:null;(0,G.isFiniteNumber)(d)&&this.log("Media seeked to "+d.toFixed(3)),this.tick()},b.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(V.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},b.onManifestParsed=function(u,d){var M,c=!1,p=!1;d.levels.forEach(function(S){(M=S.audioCodec)&&(-1!==M.indexOf("mp4a.40.2")&&(c=!0),-1!==M.indexOf("mp4a.40.5")&&(p=!0))}),this.audioCodecSwitch=c&&p&&!(0,z.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=d.levels,this.startFragRequested=!1},b.onLevelLoading=function(u,d){var c=this.levels;if(c&&this.state===B.State.IDLE){var p=c[d.level];(!p.details||p.details.live&&this.levelLastLoaded!==d.level||this.waitForCdnTuneIn(p.details))&&(this.state=B.State.WAITING_LEVEL)}},b.onLevelLoaded=function(u,d){var c,p=this.levels,M=d.level,S=d.details;if(p){this.log("Level "+M+" loaded ["+S.startSN+","+S.endSN+"], cc ["+S.startCC+", "+S.endCC+"] duration:"+S.totalduration);var H=this.fragCurrent;H&&(this.state===B.State.FRAG_LOADING||this.state===B.State.FRAG_LOADING_WAITING_RETRY)&&H.level!==d.level&&H.loader&&(this.state=B.State.IDLE,this.backtrackFragment=null,H.abortRequests());var N=p[M],K=0;if(S.live||null!==(c=N.details)&&void 0!==c&&c.live){if(S.fragments[0]||(S.deltaUpdateFailed=!0),S.deltaUpdateFailed)return;K=this.alignPlaylists(S,N.details)}if(N.details=S,this.levelLastLoaded=M,this.hls.trigger(V.Events.LEVEL_UPDATED,{details:S,level:M}),this.state===B.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(S))return;this.state=B.State.IDLE}this.startFragRequested?S.live&&this.synchronizeToLiveEdge(S):this.setStartPosition(S,K),this.tick()}else this.warn("Levels were reset while loading level "+M)},b._handleFragmentLoadProgress=function(u){var d,c=u.frag,p=u.part,M=u.payload,S=this.levels;if(S){var F=S[c.level],H=F.details;if(H){var N=F.videoCodec,K=H.PTSKnown||!H.live,W=null===(d=c.initSegment)||void 0===d?void 0:d.data,$=this._getAudioCodec(F),Q=this.transmuxer=this.transmuxer||new R.default(this.hls,k.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),te=p?p.index:-1,re=new O.ChunkMetadata(c.level,c.sn,c.stats.chunkCount,M.byteLength,te,-1!==te);Q.push(M,W,$,N,c,p,H.totalduration,K,re,this.initPTS[c.cc])}else this.warn("Dropping fragment "+c.sn+" of level "+c.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+c.sn+" of level "+c.level+" will not be buffered")},b.onAudioTrackSwitching=function(u,d){var c=this.altAudio,M=d.id;if(!d.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var S=this.fragCurrent;S&&(this.log("Switching to main audio track, cancel main fragment load"),S.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var F=this.hls;c&&F.trigger(V.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),F.trigger(V.Events.AUDIO_TRACK_SWITCHED,{id:M})}},b.onAudioTrackSwitched=function(u,d){var p=!!this.hls.audioTracks[d.id].url;if(p){var M=this.videoBuffer;M&&this.mediaBuffer!==M&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=M)}this.altAudio=p,this.tick()},b.onBufferCreated=function(u,d){var p,M,c=d.tracks,S=!1;for(var F in c){var H=c[F];if("main"===H.id){if(M=F,p=H,"video"===F){var N=c[F];N&&(this.videoBuffer=N.buffer)}}else S=!0}S&&p?(this.log("Alternate track found, use "+M+".buffered to schedule main fragment loading"),this.mediaBuffer=p.buffer):this.mediaBuffer=this.media},b.onFragBuffered=function(u,d){var c=d.frag,p=d.part;if(!c||c.type===k.PlaylistLevelType.MAIN){if(this.fragContextChanged(c))return this.warn("Fragment "+c.sn+(p?" p: "+p.index:"")+" of level "+c.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===B.State.PARSED&&(this.state=B.State.IDLE));var M=p?p.stats:c.stats;this.fragLastKbps=Math.round(8*M.total/(M.buffering.end-M.loading.first)),"initSegment"!==c.sn&&(this.fragPrevious=c),this.fragBufferedComplete(c,p)}},b.onError=function(u,d){if(d.type!==A.ErrorTypes.KEY_SYSTEM_ERROR)switch(d.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:case A.ErrorDetails.FRAG_PARSING_ERROR:case A.ErrorDetails.KEY_LOAD_ERROR:case A.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,d);break;case A.ErrorDetails.LEVEL_LOAD_ERROR:case A.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==B.State.ERROR&&(d.fatal?(this.warn(""+d.details),this.state=B.State.ERROR):!d.levelRetry&&this.state===B.State.WAITING_LEVEL&&(this.state=B.State.IDLE));break;case A.ErrorDetails.BUFFER_FULL_ERROR:if("main"===d.parent&&(this.state===B.State.PARSING||this.state===B.State.PARSED)){var c=!0,p=this.getFwdBufferInfo(this.media,k.PlaylistLevelType.MAIN);p&&p.len>.5&&(c=!this.reduceMaxBufferLength(p.len)),c&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,d)},b.checkBuffer=function(){var u=this.media,d=this.gapController;u&&d&&u.readyState&&(!this.loadedmetadata&&Y.BufferHelper.getBuffered(u).length||d.poll(this.lastCurrentTime,this.state!==B.State.IDLE?this.fragCurrent:null),this.lastCurrentTime=u.currentTime)},b.onFragLoadEmergencyAborted=function(){this.state=B.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},b.onBufferFlushed=function(u,d){var c=d.type;(c!==L.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((c===L.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,c,k.PlaylistLevelType.MAIN)},b.onLevelsUpdated=function(u,d){this.levels=d.levels},b.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},b.seekToStartPos=function(){var u=this.media;if(u){var d=u.currentTime,c=this.startPosition;if(c>=0&&d<c){if(u.seeking)return void this.log("could not seek to "+c+", already seeking at "+d);var p=Y.BufferHelper.getBuffered(u),S=(p.length?p.start(0):0)-c;S>0&&(S<this.config.maxBufferHole||S<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+S+" to match buffer start"),this.startPosition=c+=S),this.log("seek to target start position "+c+" from current time "+d),u.currentTime=c}}},b._getAudioCodec=function(u){var d=this.config.defaultAudioCodec||u.audioCodec;return this.audioCodecSwap&&d&&(this.log("Swapping audio codec"),d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),d},b._loadBitrateTestFrag=function(u,d){var c=this;u.bitrateTest=!0,this._doFragLoad(u,d).then(function(p){var M=c.hls;if(p&&!c.fragContextChanged(u)){c.fragLoadError=0,c.state=B.State.IDLE,c.startFragRequested=!1,c.bitrateTest=!1;var S=u.stats;S.parsing.start=S.parsing.end=S.buffering.start=S.buffering.end=self.performance.now(),M.trigger(V.Events.FRAG_LOADED,p),u.bitrateTest=!1}})},b._handleTransmuxComplete=function(u){var d,c="main",p=this.hls,M=u.remuxResult,S=u.chunkMeta,F=this.getCurrentContext(S);if(!F)return this.warn("The loading context changed while buffering fragment "+S.sn+" of level "+S.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(S.level);var H=F.frag,N=F.part,K=F.level,W=M.video,$=M.text,Q=M.id3,te=M.initSegment,Z=K.details,re=this.altAudio?void 0:M.audio;if(!this.fragContextChanged(H)){if(this.state=B.State.PARSING,te){te.tracks&&(this._bufferInitSegment(K,te.tracks,H,S),p.trigger(V.Events.FRAG_PARSING_INIT_SEGMENT,{frag:H,id:c,tracks:te.tracks}));var oe=te.initPTS,ce=te.timescale;(0,G.isFiniteNumber)(oe)&&(this.initPTS[H.cc]=oe,p.trigger(V.Events.INIT_PTS_FOUND,{frag:H,id:c,initPTS:oe,timescale:ce}))}if(W&&!1!==M.independent){if(Z){var ue=W.startPTS,fe=W.endPTS,De=W.startDTS,Re=W.endDTS;if(N)N.elementaryStreams[W.type]={startPTS:ue,endPTS:fe,startDTS:De,endDTS:Re};else if(W.firstKeyFrame&&W.independent&&1===S.id&&(this.couldBacktrack=!0),W.dropped&&W.independent){var Te=this.getMainFwdBufferInfo();if((Te?Te.end:this.getLoadPosition())+this.config.maxBufferHole<(W.firstKeyFramePTS?W.firstKeyFramePTS:ue)-this.config.maxBufferHole)return void this.backtrack(H);H.setElementaryStreamInfo(W.type,H.start,fe,H.start,Re,!0)}H.setElementaryStreamInfo(W.type,ue,fe,De,Re),this.backtrackFragment&&(this.backtrackFragment=H),this.bufferFragmentData(W,H,N,S)}}else if(!1===M.independent)return void this.backtrack(H);if(re){var et=re.startPTS,ct=re.endPTS,Ft=re.startDTS,bt=re.endDTS;N&&(N.elementaryStreams[L.ElementaryStreamTypes.AUDIO]={startPTS:et,endPTS:ct,startDTS:Ft,endDTS:bt}),H.setElementaryStreamInfo(L.ElementaryStreamTypes.AUDIO,et,ct,Ft,bt),this.bufferFragmentData(re,H,N,S)}Z&&null!=Q&&null!==(d=Q.samples)&&void 0!==d&&d.length&&p.trigger(V.Events.FRAG_PARSING_METADATA,{id:c,frag:H,details:Z,samples:Q.samples}),Z&&$&&p.trigger(V.Events.FRAG_PARSING_USERDATA,{id:c,frag:H,details:Z,samples:$.samples})}},b._bufferInitSegment=function(u,d,c,p){var M=this;if(this.state===B.State.PARSING){this.audioOnly=!!d.audio&&!d.video,this.altAudio&&!this.audioOnly&&delete d.audio;var S=d.audio,F=d.video,H=d.audiovideo;if(S){var N=u.audioCodec,K=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(N&&(N=-1!==N.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==S.metadata.channelCount&&-1===K.indexOf("firefox")&&(N="mp4a.40.5")),-1!==K.indexOf("android")&&"audio/mpeg"!==S.container&&this.log("Android: force audio codec to "+(N="mp4a.40.2")),u.audioCodec&&u.audioCodec!==N&&this.log('Swapping manifest audio codec "'+u.audioCodec+'" for "'+N+'"'),S.levelCodec=N,S.id="main",this.log("Init audio buffer, container:"+S.container+", codecs[selected/level/parsed]=["+(N||"")+"/"+(u.audioCodec||"")+"/"+S.codec+"]")}F&&(F.levelCodec=u.videoCodec,F.id="main",this.log("Init video buffer, container:"+F.container+", codecs[level/parsed]=["+(u.videoCodec||"")+"/"+F.codec+"]")),H&&this.log("Init audiovideo buffer, container:"+H.container+", codecs[level/parsed]=["+(u.attrs.CODECS||"")+"/"+H.codec+"]"),this.hls.trigger(V.Events.BUFFER_CODECS,d),Object.keys(d).forEach(function(W){var Q=d[W].initSegment;null!=Q&&Q.byteLength&&M.hls.trigger(V.Events.BUFFER_APPENDING,{type:W,data:Q,frag:c,part:null,chunkMeta:p,parent:c.type})}),this.tick()}},b.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,k.PlaylistLevelType.MAIN)},b.backtrack=function(u){this.couldBacktrack=!0,this.backtrackFragment=u,this.resetTransmuxer(),this.flushBufferGap(u),this.fragmentTracker.removeFragment(u),this.fragPrevious=null,this.nextLoadPosition=u.start,this.state=B.State.IDLE},b.checkFragmentChanged=function(){var u=this.media,d=null;if(u&&u.readyState>1&&!1===u.seeking){var c=u.currentTime;if(Y.BufferHelper.isBuffered(u,c)?d=this.getAppendedFrag(c):Y.BufferHelper.isBuffered(u,c+.1)&&(d=this.getAppendedFrag(c+.1)),d){this.backtrackFragment=null;var p=this.fragPlaying,M=d.level;(!p||d.sn!==p.sn||p.level!==M||d.urlId!==p.urlId)&&(this.fragPlaying=d,this.hls.trigger(V.Events.FRAG_CHANGED,{frag:d}),(!p||p.level!==M)&&this.hls.trigger(V.Events.LEVEL_SWITCHED,{level:M}))}}},function _(y,w,b){w&&T(y.prototype,w),b&&T(y,b),Object.defineProperty(y,"prototype",{writable:!1})}(w,[{key:"nextLevel",get:function(){var u=this.nextBufferedFrag;return u?u.level:-1}},{key:"currentFrag",get:function(){var u=this.media;return u?this.fragPlaying||this.getAppendedFrag(u.currentTime):null}},{key:"currentProgramDateTime",get:function(){var u=this.media;if(u){var d=u.currentTime,c=this.currentFrag;if(c&&(0,G.isFiniteNumber)(d)&&(0,G.isFiniteNumber)(c.programDateTime))return new Date(c.programDateTime+1e3*(d-c.start))}return null}},{key:"currentLevel",get:function(){var u=this.currentFrag;return u?u.level:-1}},{key:"nextBufferedFrag",get:function(){var u=this.currentFrag;return u?this.followingBufferedFrag(u):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),w}(B.default)},"./src/controller/subtitle-stream-controller.ts":
/*!******************************************************!*\
                  !*** ./src/controller/subtitle-stream-controller.ts ***!
                  \******************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{SubtitleStreamController:()=>h});var G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),z=P(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),V=P(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),Y=P(
/*! ./level-helper */
"./src/controller/level-helper.ts"),U=P(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),k=P(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),L=P(
/*! ../types/loader */
"./src/types/loader.ts"),R=P(
/*! ../types/level */
"./src/types/level.ts");function O(D,f){for(var y=0;y<f.length;y++){var w=f[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(D,A(w.key),w)}}function A(D){var f=function T(D,f){if("object"!=typeof D||null===D)return D;var y=D[Symbol.toPrimitive];if(void 0!==y){var w=y.call(D,f||"default");if("object"!=typeof w)return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===f?String:Number)(D)}(D,"string");return"symbol"==typeof f?f:String(f)}function m(D,f){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,b){return w.__proto__=b,w})(D,f)}var h=function(D){function f(w,b,C){var u;return(u=D.call(this,w,b,C,"[subtitle-stream-controller]")||this).levels=[],u.currentTrackId=-1,u.tracksBuffered=[],u.mainDetails=null,u._registerListeners(),u}!function _(D,f){D.prototype=Object.create(f.prototype),D.prototype.constructor=D,m(D,f)}(f,D);var y=f.prototype;return y.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},y._registerListeners=function(){var b=this.hls;b.on(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),b.on(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.on(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.on(G.Events.LEVEL_LOADED,this.onLevelLoaded,this),b.on(G.Events.ERROR,this.onError,this),b.on(G.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),b.on(G.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),b.on(G.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),b.on(G.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),b.on(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),b.on(G.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y._unregisterListeners=function(){var b=this.hls;b.off(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),b.off(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.off(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.off(G.Events.LEVEL_LOADED,this.onLevelLoaded,this),b.off(G.Events.ERROR,this.onError,this),b.off(G.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),b.off(G.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),b.off(G.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),b.off(G.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),b.off(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),b.off(G.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y.startLoad=function(b){this.stopLoad(),this.state=k.State.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=b,this.tick()},y.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},y.onLevelLoaded=function(b,C){this.mainDetails=C.details},y.onSubtitleFragProcessed=function(b,C){var u=C.frag,d=C.success;if(this.fragPrevious=u,this.state=k.State.IDLE,d){var c=this.tracksBuffered[this.currentTrackId];if(c){for(var p,M=u.start,S=0;S<c.length;S++)if(M>=c[S].start&&M<=c[S].end){p=c[S];break}var F=u.start+u.duration;p?p.end=F:c.push(p={start:M,end:F}),this.fragmentTracker.fragBuffered(u)}}},y.onBufferFlushing=function(b,C){var u=C.startOffset,d=C.endOffset;if(0===u&&d!==Number.POSITIVE_INFINITY){var c=this.currentTrackId,p=this.levels;if(!p.length||!p[c]||!p[c].details)return;var F=d-p[c].details.targetduration;if(F<=0)return;C.endOffsetSubtitles=Math.max(0,F),this.tracksBuffered.forEach(function(H){for(var N=0;N<H.length;)if(H[N].end<=F)H.shift();else{if(!(H[N].start<F))break;H[N].start=F,N++}}),this.fragmentTracker.removeFragmentsInRange(u,F,L.PlaylistLevelType.SUBTITLE)}},y.onFragBuffered=function(b,C){var u;this.loadedmetadata||C.frag.type!==L.PlaylistLevelType.MAIN||null!==(u=this.media)&&void 0!==u&&u.buffered.length&&(this.loadedmetadata=!0)},y.onError=function(b,C){var u=C.frag;!u||u.type!==L.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=k.State.IDLE)},y.onSubtitleTracksUpdated=function(b,C){var u=this,d=C.subtitleTracks;this.tracksBuffered=[],this.levels=d.map(function(c){return new R.Level(c)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(c){u.tracksBuffered[c.id]=[]}),this.mediaBuffer=null},y.onSubtitleTrackSwitch=function(b,C){if(this.currentTrackId=C.id,this.levels.length&&-1!==this.currentTrackId){var u=this.levels[this.currentTrackId];this.mediaBuffer=null!=u&&u.details?this.mediaBufferTimeRanges:null,u&&this.setInterval(500)}else this.clearInterval()},y.onSubtitleTrackLoaded=function(b,C){var u,d=C.details,c=C.id,p=this.currentTrackId,M=this.levels;if(M.length){var S=M[p];if(!(c>=M.length||c!==p)&&S){this.mediaBuffer=this.mediaBufferTimeRanges;var F=0;if(d.live||null!==(u=S.details)&&void 0!==u&&u.live){var H=this.mainDetails;if(d.deltaUpdateFailed||!H)return;var N=H.fragments[0];S.details?0===(F=this.alignPlaylists(d,S.details))&&N&&(0,Y.addSliding)(d,F=N.start):d.hasProgramDateTime&&H.hasProgramDateTime?((0,V.alignMediaPlaylistByPDT)(d,H),F=d.fragments[0].start):N&&(0,Y.addSliding)(d,F=N.start)}S.details=d,this.levelLastLoaded=c,!this.startFragRequested&&(this.mainDetails||!d.live)&&this.setStartPosition(S.details,F),this.tick(),d.live&&!this.fragCurrent&&this.media&&this.state===k.State.IDLE&&((0,z.findFragmentByPTS)(null,d.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),S.details=void 0))}}},y._handleFragmentLoadComplete=function(b){var C=this,u=b.frag,d=b.payload,c=u.decryptdata,p=this.hls;if(!this.fragContextChanged(u)&&d&&d.byteLength>0&&c&&c.key&&c.iv&&"AES-128"===c.method){var M=performance.now();this.decrypter.decrypt(new Uint8Array(d),c.key.buffer,c.iv.buffer).then(function(S){var F=performance.now();p.trigger(G.Events.FRAG_DECRYPTED,{frag:u,payload:S,stats:{tstart:M,tdecrypt:F}})}).catch(function(S){C.warn(S.name+": "+S.message),C.state=k.State.IDLE})}},y.doTick=function(){if(this.media){if(this.state===k.State.IDLE){var b=this.currentTrackId,C=this.levels;if(!C.length||!C[b]||!C[b].details)return;var u=C[b].details,d=u.targetduration,c=this.config,p=this.getLoadPosition(),M=B.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],p-d,c.maxBufferHole),S=M.end,F=M.len,H=this.getFwdBufferInfo(this.media,L.PlaylistLevelType.MAIN);if(F>this.getMaxBufferLength(H?.len)+d)return;console.assert(u,"Subtitle track details are defined on idle subtitle stream controller tick");var K=u.fragments,W=K.length,Q=null,te=this.fragPrevious;if(S<u.edge){var Z=c.maxFragLookUpTolerance;!(Q=(0,z.findFragmentByPTS)(te,K,Math.max(K[0].start,S),Z))&&te&&te.start<K[0].start&&(Q=K[0])}else Q=K[W-1];if(!Q)return;Q=this.mapToInitFragWhenRequired(Q),this.fragmentTracker.getState(Q)===U.FragmentState.NOT_LOADED&&this.loadFragment(Q,u,S)}}else this.state=k.State.IDLE},y.getMaxBufferLength=function(b){var C=D.prototype.getMaxBufferLength.call(this);return b?Math.max(C,b):C},y.loadFragment=function(b,C,u){this.fragCurrent=b,"initSegment"===b.sn?this._loadInitSegment(b,C):(this.startFragRequested=!0,D.prototype.loadFragment.call(this,b,C,u))},function x(D,f,y){f&&O(D.prototype,f),y&&O(D,y),Object.defineProperty(D,"prototype",{writable:!1})}(f,[{key:"mediaBufferTimeRanges",get:function(){return new E(this.tracksBuffered[this.currentTrackId]||[])}}]),f}(k.default),E=function(f){this.buffered=void 0;var y=function(b,C,u){if((C>>>=0)>u-1)throw new DOMException("Failed to execute '"+b+"' on 'TimeRanges': The index provided ("+C+") is greater than the maximum bound ("+u+")");return f[C][b]};this.buffered={get length(){return f.length},end:function(b){return y("end",b,f.length)},start:function(b){return y("start",b,f.length)}}}},"./src/controller/subtitle-track-controller.ts":
/*!*****************************************************!*\
                  !*** ./src/controller/subtitle-track-controller.ts ***!
                  \*****************************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>T});var G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),z=P(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),V=P(
/*! ../types/loader */
"./src/types/loader.ts");function Y(_,m){for(var v=0;v<m.length;v++){var h=m[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(_,k(h.key),h)}}function k(_){var m=function L(_,m){if("object"!=typeof _||null===_)return _;var v=_[Symbol.toPrimitive];if(void 0!==v){var h=v.call(_,m||"default");if("object"!=typeof h)return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===m?String:Number)(_)}(_,"string");return"symbol"==typeof m?m:String(m)}function O(_,m){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,E){return h.__proto__=E,h})(_,m)}function A(_){for(var m=[],v=0;v<_.length;v++){var h=_[v];"subtitles"===h.kind&&h.label&&m.push(_[v])}return m}const T=function(_){function m(h){var E;return(E=_.call(this,h,"[subtitle-track-controller]")||this).media=null,E.tracks=[],E.groupId=null,E.tracksInGroup=[],E.trackId=-1,E.selectDefaultTrack=!0,E.queuedDefaultTrack=-1,E.trackChangeListener=function(){return E.onTextTracksChanged()},E.asyncPollTrackChange=function(){return E.pollTrackChange(0)},E.useTextTrackPolling=!1,E.subtitlePollingInterval=-1,E._subtitleDisplay=!0,E.registerListeners(),E}!function R(_,m){_.prototype=Object.create(m.prototype),_.prototype.constructor=_,O(_,m)}(m,_);var v=m.prototype;return v.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,_.prototype.destroy.call(this)},v.registerListeners=function(){var E=this.hls;E.on(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.on(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.on(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.on(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),E.on(G.Events.LEVEL_LOADING,this.onLevelLoading,this),E.on(G.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),E.on(G.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),E.on(G.Events.ERROR,this.onError,this)},v.unregisterListeners=function(){var E=this.hls;E.off(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.off(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.off(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.off(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),E.off(G.Events.LEVEL_LOADING,this.onLevelLoading,this),E.off(G.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),E.off(G.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),E.off(G.Events.ERROR,this.onError,this)},v.onMediaAttached=function(E,D){this.media=D.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},v.pollTrackChange=function(E){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,E)},v.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),A(this.media.textTracks).forEach(function(D){(0,B.clearCurrentCues)(D)}),this.subtitleTrack=-1,this.media=null)},v.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},v.onManifestParsed=function(E,D){this.tracks=D.subtitleTracks},v.onSubtitleTrackLoaded=function(E,D){var f=D.id,y=D.details,b=this.tracksInGroup[this.trackId];if(b){var C=b.details;b.details=D.details,this.log("subtitle track "+f+" loaded ["+y.startSN+"-"+y.endSN+"]"),f===this.trackId&&(this.retryCount=0,this.playlistLoaded(f,D,C))}else this.warn("Invalid subtitle track id "+f)},v.onLevelLoading=function(E,D){this.switchLevel(D.level)},v.onLevelSwitching=function(E,D){this.switchLevel(D.level)},v.switchLevel=function(E){var D=this.hls.levels[E];if(null!=D&&D.textGroupIds){var f=D.textGroupIds[D.urlId];if(this.groupId!==f){var y=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,w=this.tracks.filter(function(u){return!f||u.groupId===f});this.tracksInGroup=w;var b=this.findTrackId(y?.name)||this.findTrackId();this.groupId=f;var C={subtitleTracks:w};this.log("Updating subtitle tracks, "+w.length+' track(s) found in "'+f+'" group-id'),this.hls.trigger(G.Events.SUBTITLE_TRACKS_UPDATED,C),-1!==b&&this.setSubtitleTrack(b,y)}}},v.findTrackId=function(E){for(var D=this.tracksInGroup,f=0;f<D.length;f++){var y=D[f];if((!this.selectDefaultTrack||y.default)&&(!E||E===y.name))return y.id}return-1},v.onError=function(E,D){_.prototype.onError.call(this,E,D),!D.fatal&&D.context&&D.context.type===V.PlaylistContextType.SUBTITLE_TRACK&&D.context.id===this.trackId&&D.context.groupId===this.groupId&&this.retryLoadingOrFail(D)},v.loadPlaylist=function(E){_.prototype.loadPlaylist.call(this);var D=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(D)){var f=D.id,y=D.groupId,w=D.url;if(E)try{w=E.addDirectives(w)}catch(b){this.warn("Could not construct new URL with HLS Delivery Directives: "+b)}this.log("Loading subtitle playlist for id "+f),this.hls.trigger(G.Events.SUBTITLE_TRACK_LOADING,{url:w,id:f,groupId:y,deliveryDirectives:E||null})}},v.toggleTrackModes=function(E){var D=this,f=this.media,y=this.trackId;if(f){var w=A(f.textTracks),b=w.filter(function(d){return d.groupId===D.groupId});if(-1===E)[].slice.call(w).forEach(function(d){d.mode="disabled"});else{var C=b[y];C&&(C.mode="disabled")}var u=b[E];u&&(u.mode=this.subtitleDisplay?"showing":"hidden")}},v.setSubtitleTrack=function(E,D){var f,y=this.tracksInGroup;if(this.media){if(this.trackId!==E&&this.toggleTrackModes(E),!(this.trackId===E&&(-1===E||null!==(f=y[E])&&void 0!==f&&f.details)||E<-1||E>=y.length)){this.clearTimer();var w=y[E];if(this.log("Switching to subtitle track "+E),this.trackId=E,w){var C=w.groupId;this.hls.trigger(G.Events.SUBTITLE_TRACK_SWITCH,{id:w.id,groupId:void 0===C?"":C,name:w.name,type:w.type,url:w.url});var M=this.switchParams(w.url,D?.details);this.loadPlaylist(M)}else this.hls.trigger(G.Events.SUBTITLE_TRACK_SWITCH,{id:E})}}else this.queuedDefaultTrack=E},v.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var E=-1,D=A(this.media.textTracks),f=0;f<D.length;f++)if("hidden"===D[f].mode)E=f;else if("showing"===D[f].mode){E=f;break}this.subtitleTrack!==E&&(this.subtitleTrack=E)}},function U(_,m,v){m&&Y(_.prototype,m),v&&Y(_,v),Object.defineProperty(_,"prototype",{writable:!1})}(m,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(E){this._subtitleDisplay=E,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(E){this.selectDefaultTrack=!1,this.setSubtitleTrack(E,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}}]),m}(z.default)},"./src/controller/timeline-controller.ts":
/*!***********************************************!*\
                  !*** ./src/controller/timeline-controller.ts ***!
                  \***********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{TimelineController:()=>x});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../utils/cea-608-parser */
"./src/utils/cea-608-parser.ts"),V=P(
/*! ../utils/output-filter */
"./src/utils/output-filter.ts"),Y=P(
/*! ../utils/webvtt-parser */
"./src/utils/webvtt-parser.ts"),U=P(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),k=P(
/*! ../utils/imsc1-ttml-parser */
"./src/utils/imsc1-ttml-parser.ts"),L=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),R=P(
/*! ../types/loader */
"./src/types/loader.ts"),O=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),x=function(){function m(h){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=h,this.config=h.config,this.Cues=h.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var E=new V.default(this,"textTrack1"),D=new V.default(this,"textTrack2"),f=new V.default(this,"textTrack3"),y=new V.default(this,"textTrack4");this.cea608Parser1=new z.default(1,E,D),this.cea608Parser2=new z.default(3,f,y)}h.on(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),h.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),h.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.on(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),h.on(B.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),h.on(B.Events.FRAG_LOADING,this.onFragLoading,this),h.on(B.Events.FRAG_LOADED,this.onFragLoaded,this),h.on(B.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),h.on(B.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),h.on(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),h.on(B.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),h.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var v=m.prototype;return v.destroy=function(){var E=this.hls;E.off(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),E.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.off(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),E.off(B.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),E.off(B.Events.FRAG_LOADING,this.onFragLoading,this),E.off(B.Events.FRAG_LOADED,this.onFragLoaded,this),E.off(B.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),E.off(B.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),E.off(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),E.off(B.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),E.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},v.addCues=function(E,D,f,y,w){for(var b=!1,C=w.length;C--;){var u=w[C],d=T(u[0],u[1],D,f);if(d>=0&&(u[0]=Math.min(u[0],D),u[1]=Math.max(u[1],f),b=!0,d/(f-D)>.5))return}if(b||w.push([D,f]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[E],D,f,y);else{var p=this.Cues.newCue(null,D,f,y);this.hls.trigger(B.Events.CUES_PARSED,{type:"captions",cues:p,track:E})}},v.onInitPtsFound=function(E,D){var f=this,y=D.frag,C=D.timescale,u=this.unparsedVttFrags;"main"===D.id&&(this.initPTS[y.cc]=D.initPTS,this.timescale[y.cc]=C),u.length&&(this.unparsedVttFrags=[],u.forEach(function(d){f.onFragLoaded(B.Events.FRAG_LOADED,d)}))},v.getExistingTrack=function(E){var D=this.media;if(D)for(var f=0;f<D.textTracks.length;f++){var y=D.textTracks[f];if(y[E])return y}return null},v.createCaptionsTrack=function(E){this.config.renderTextTracksNatively?this.createNativeTrack(E):this.createNonNativeTrack(E)},v.createNativeTrack=function(E){if(!this.captionsTracks[E]){var f=this.captionsTracks,y=this.media,w=this.captionsProperties[E],b=w.label,C=w.languageCode,u=this.getExistingTrack(E);if(u)f[E]=u,(0,U.clearCurrentCues)(f[E]),(0,U.sendAddTrackEvent)(f[E],y);else{var d=this.createTextTrack("captions",b,C);d&&(d[E]=!0,f[E]=d)}}},v.createNonNativeTrack=function(E){if(!this.nonNativeCaptionsTracks[E]){var D=this.captionsProperties[E];if(D){var y={_id:E,label:D.label,kind:"captions",default:!!D.media&&!!D.media.default,closedCaptions:D.media};this.nonNativeCaptionsTracks[E]=y,this.hls.trigger(B.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[y]})}}},v.createTextTrack=function(E,D,f){var y=this.media;if(y)return y.addTextTrack(E,D,f)},v.onMediaAttaching=function(E,D){this.media=D.media,this._cleanTracks()},v.onMediaDetaching=function(){var E=this.captionsTracks;Object.keys(E).forEach(function(D){(0,U.clearCurrentCues)(E[D]),delete E[D]}),this.nonNativeCaptionsTracks={}},v.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},v._cleanTracks=function(){var E=this.media;if(E){var D=E.textTracks;if(D)for(var f=0;f<D.length;f++)(0,U.clearCurrentCues)(D[f])}},v.onSubtitleTracksUpdated=function(E,D){var f=this;this.textTracks=[];var y=D.subtitleTracks||[],w=y.some(function(d){return d.textCodec===k.IMSC1_CODEC});if(this.config.enableWebVTT||w&&this.config.enableIMSC1){var b=this.tracks&&y&&this.tracks.length===y.length;if(this.tracks=y||[],this.config.renderTextTracksNatively){var C=this.media?this.media.textTracks:[];this.tracks.forEach(function(d,c){var p;if(c<C.length){for(var M=null,S=0;S<C.length;S++)if(A(C[S],d)){M=C[S];break}M&&(p=M)}if(p)(0,U.clearCurrentCues)(p);else{var F=f._captionsOrSubtitlesFromCharacteristics(d);(p=f.createTextTrack(F,d.name,d.lang))&&(p.mode="disabled")}p&&(p.groupId=d.groupId,f.textTracks.push(p))})}else if(!b&&this.tracks&&this.tracks.length){var u=this.tracks.map(function(d){return{label:d.name,kind:d.type.toLowerCase(),default:d.default,subtitleTrack:d}});this.hls.trigger(B.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:u})}}},v._captionsOrSubtitlesFromCharacteristics=function(E){var D;if(null!==(D=E.attrs)&&void 0!==D&&D.CHARACTERISTICS){var f=/transcribes-spoken-dialog/gi.test(E.attrs.CHARACTERISTICS),y=/describes-music-and-sound/gi.test(E.attrs.CHARACTERISTICS);if(f&&y)return"captions"}return"subtitles"},v.onManifestLoaded=function(E,D){var f=this;this.config.enableCEA708Captions&&D.captions&&D.captions.forEach(function(y){var w=/(?:CC|SERVICE)([1-4])/.exec(y.instreamId);if(w){var C=f.captionsProperties["textTrack"+w[1]];C&&(C.label=y.name,y.lang&&(C.languageCode=y.lang),C.media=y)}})},v.closedCaptionsForLevel=function(E){return this.hls.levels[E.level]?.attrs["CLOSED-CAPTIONS"]},v.onFragLoading=function(E,D){var f=this.cea608Parser1,y=this.cea608Parser2,w=this.lastSn;if(this.enabled&&f&&y&&D.frag.type===R.PlaylistLevelType.MAIN){var C,u,d=D.frag.sn,c=null!=(C=null==D||null===(u=D.part)||void 0===u?void 0:u.index)?C:-1;d===w+1||d===w&&c===this.lastPartIndex+1||(f.reset(),y.reset()),this.lastSn=d,this.lastPartIndex=c}},v.onFragLoaded=function(E,D){var f=D.frag,y=D.payload,w=this.initPTS,b=this.unparsedVttFrags;if(f.type===R.PlaylistLevelType.SUBTITLE)if(y.byteLength){if(!(0,G.isFiniteNumber)(w[f.cc]))return b.push(D),void(w.length&&this.hls.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f,error:new Error("Missing initial subtitle PTS")}));var C=f.decryptdata;if(null==C||!C.encrypted||"stats"in D){var d=this.tracks[f.level],c=this.vttCCs;c[f.cc]||(c[f.cc]={start:f.start,prevCC:this.prevCC,new:!0},this.prevCC=f.cc),d&&d.textCodec===k.IMSC1_CODEC?this._parseIMSC1(f,y):this._parseVTTs(f,y,c)}}else this.hls.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f,error:new Error("Empty subtitle payload")})},v._parseIMSC1=function(E,D){var f=this,y=this.hls;(0,k.parseIMSC1)(D,this.initPTS[E.cc],this.timescale[E.cc],function(w){f._appendCues(w,E.level),y.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:E})},function(w){O.logger.log("Failed to parse IMSC1: "+w),y.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:E,error:w})})},v._parseVTTs=function(E,D,f){var y,w=this,b=this.hls,C=null!==(y=E.initSegment)&&void 0!==y&&y.data?(0,L.appendUint8Array)(E.initSegment.data,new Uint8Array(D)):D;(0,Y.parseWebVTT)(C,this.initPTS[E.cc],this.timescale[E.cc],f,E.cc,E.start,function(u){w._appendCues(u,E.level),b.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:E})},function(u){w._fallbackToIMSC1(E,D),O.logger.log("Failed to parse VTT cue: "+u),b.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:E,error:u})})},v._fallbackToIMSC1=function(E,D){var f=this,y=this.tracks[E.level];y.textCodec||(0,k.parseIMSC1)(D,this.initPTS[E.cc],this.timescale[E.cc],function(){y.textCodec=k.IMSC1_CODEC,f._parseIMSC1(E,D)},function(){y.textCodec="wvtt"})},v._appendCues=function(E,D){var f=this.hls;if(this.config.renderTextTracksNatively){var y=this.textTracks[D];if(!y||"disabled"===y.mode)return;E.forEach(function(C){return(0,U.addCueToTrack)(y,C)})}else{var w=this.tracks[D];if(!w)return;f.trigger(B.Events.CUES_PARSED,{type:"subtitles",cues:E,track:w.default?"default":"subtitles"+D})}},v.onFragDecrypted=function(E,D){var f=D.frag;if(f.type===R.PlaylistLevelType.SUBTITLE){if(!(0,G.isFiniteNumber)(this.initPTS[f.cc]))return void this.unparsedVttFrags.push(D);this.onFragLoaded(B.Events.FRAG_LOADED,D)}},v.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},v.onFragParsingUserdata=function(E,D){var f=this.cea608Parser1,y=this.cea608Parser2;if(this.enabled&&f&&y){var w=D.frag,b=D.samples;if(w.type!==R.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(w))for(var C=0;C<b.length;C++){var u=b[C].bytes;if(u){var d=this.extractCea608Data(u);f.addData(b[C].pts,d[0]),y.addData(b[C].pts,d[1])}}}},v.onBufferFlushing=function(E,D){var f=D.startOffset,y=D.endOffset,w=D.endOffsetSubtitles,b=D.type,C=this.media;if(C&&!(C.currentTime<y)){if(!b||"video"===b){var u=this.captionsTracks;Object.keys(u).forEach(function(c){return(0,U.removeCuesInRange)(u[c],f,y)})}if(this.config.renderTextTracksNatively&&0===f&&void 0!==w){var d=this.textTracks;Object.keys(d).forEach(function(c){return(0,U.removeCuesInRange)(d[c],f,w)})}}},v.extractCea608Data=function(E){for(var D=[[],[]],f=31&E[0],y=2,w=0;w<f;w++){var b=E[y++],C=127&E[y++],u=127&E[y++];if((0!==C||0!==u)&&0!=(4&b)){var c=3&b;(0===c||1===c)&&(D[c].push(C),D[c].push(u))}}return D},m}();function A(m,v){return m&&m.label===v.name&&!(m.textTrack1||m.textTrack2)}function T(m,v,h,E){return Math.min(v,E)-Math.max(m,h)}},"./src/crypt/aes-crypto.ts":
/*!*********************************!*\
                  !*** ./src/crypt/aes-crypto.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>G});var G=function(){function B(V,Y){this.subtle=void 0,this.aesIV=void 0,this.subtle=V,this.aesIV=Y}return B.prototype.decrypt=function(Y,U){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},U,Y)},B}()},"./src/crypt/aes-decryptor.ts":
/*!************************************!*\
                  !*** ./src/crypt/aes-decryptor.ts ***!
                  \************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>z,removePadding:()=>B});var G=P(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts");function B(V){var Y=V.byteLength,U=Y&&new DataView(V.buffer).getUint8(Y-1);return U?(0,G.sliceUint8)(V,0,Y-U):V}var z=function(){function V(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var Y=V.prototype;return Y.uint8ArrayToUint32Array_=function(k){for(var L=new DataView(k),R=new Uint32Array(4),O=0;O<4;O++)R[O]=L.getUint32(4*O);return R},Y.initTable=function(){var k=this.sBox,L=this.invSBox,R=this.subMix,O=R[0],x=R[1],A=R[2],T=R[3],_=this.invSubMix,m=_[0],v=_[1],h=_[2],E=_[3],D=new Uint32Array(256),f=0,y=0,w=0;for(w=0;w<256;w++)D[w]=w<128?w<<1:w<<1^283;for(w=0;w<256;w++){var b=y^y<<1^y<<2^y<<3^y<<4;k[f]=b=b>>>8^255&b^99,L[b]=f;var C=D[f],u=D[C],d=D[u],c=257*D[b]^16843008*b;O[f]=c<<24|c>>>8,x[f]=c<<16|c>>>16,A[f]=c<<8|c>>>24,T[f]=c,m[b]=(c=16843009*d^65537*u^257*C^16843008*f)<<24|c>>>8,v[b]=c<<16|c>>>16,h[b]=c<<8|c>>>24,E[b]=c,f?(f=C^D[D[D[d^C]]],y^=D[D[y]]):f=y=1}},Y.expandKey=function(k){for(var L=this.uint8ArrayToUint32Array_(k),R=!0,O=0;O<L.length&&R;)R=L[O]===this.key[O],O++;if(!R){this.key=L;var x=this.keySize=L.length;if(4!==x&&6!==x&&8!==x)throw new Error("Invalid aes key size="+x);var T,_,C,u,A=this.ksRows=4*(x+6+1),m=this.keySchedule=new Uint32Array(A),v=this.invKeySchedule=new Uint32Array(A),h=this.sBox,E=this.rcon,D=this.invSubMix,f=D[0],y=D[1],w=D[2],b=D[3];for(T=0;T<A;T++)T<x?C=m[T]=L[T]:(u=C,T%x==0?(u=h[(u=u<<8|u>>>24)>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=E[T/x|0]<<24):x>6&&T%x==4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]),m[T]=C=(m[T-x]^u)>>>0);for(_=0;_<A;_++)T=A-_,u=3&_?m[T]:m[T-4],v[_]=_<4||T<=4?u:f[h[u>>>24]]^y[h[u>>>16&255]]^w[h[u>>>8&255]]^b[h[255&u]],v[_]=v[_]>>>0}},Y.networkToHostOrderSwap=function(k){return k<<24|(65280&k)<<8|(16711680&k)>>8|k>>>24},Y.decrypt=function(k,L,R){for(var d,c,p,M,S,F,H,N,K,W,$,Q,te,O=this.keySize+6,x=this.invKeySchedule,A=this.invSBox,T=this.invSubMix,_=T[0],m=T[1],v=T[2],h=T[3],E=this.uint8ArrayToUint32Array_(R),D=E[0],f=E[1],y=E[2],w=E[3],b=new Int32Array(k),C=new Int32Array(b.length),Z=this.networkToHostOrderSwap;L<b.length;){for(N=Z(b[L]),K=Z(b[L+1]),W=Z(b[L+2]),$=Z(b[L+3]),M=N^x[0],S=$^x[1],F=W^x[2],H=K^x[3],Q=4,te=1;te<O;te++)d=_[S>>>24]^m[F>>16&255]^v[H>>8&255]^h[255&M]^x[Q+1],c=_[F>>>24]^m[H>>16&255]^v[M>>8&255]^h[255&S]^x[Q+2],p=_[H>>>24]^m[M>>16&255]^v[S>>8&255]^h[255&F]^x[Q+3],M=_[M>>>24]^m[S>>16&255]^v[F>>8&255]^h[255&H]^x[Q],S=d,F=c,H=p,Q+=4;d=A[S>>>24]<<24^A[F>>16&255]<<16^A[H>>8&255]<<8^A[255&M]^x[Q+1],c=A[F>>>24]<<24^A[H>>16&255]<<16^A[M>>8&255]<<8^A[255&S]^x[Q+2],p=A[H>>>24]<<24^A[M>>16&255]<<16^A[S>>8&255]<<8^A[255&F]^x[Q+3],C[L]=Z(A[M>>>24]<<24^A[S>>16&255]<<16^A[F>>8&255]<<8^A[255&H]^x[Q]^D),C[L+1]=Z(p^f),C[L+2]=Z(c^y),C[L+3]=Z(d^w),D=N,f=K,y=W,w=$,L+=4}return C.buffer},V}()},"./src/crypt/decrypter.ts":
/*!********************************!*\
                  !*** ./src/crypt/decrypter.ts ***!
                  \********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>L});var G=P(
/*! ./aes-crypto */
"./src/crypt/aes-crypto.ts"),B=P(
/*! ./fast-aes-key */
"./src/crypt/fast-aes-key.ts"),z=P(
/*! ./aes-decryptor */
"./src/crypt/aes-decryptor.ts"),V=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),U=P(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts"),L=function(){function R(x,A){var _=(void 0===A?{}:A).removePKCS7Padding,m=void 0===_||_;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=x.enableSoftwareAES,this.removePKCS7Padding=m,m)try{var v=self.crypto;v&&(this.subtle=v.subtle||v.webkitSubtle)}catch{}null===this.subtle&&(this.useSoftware=!0)}var O=R.prototype;return O.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},O.isSync=function(){return this.useSoftware},O.flush=function(){var A=this.currentResult;if(!A||this.remainderData)return this.reset(),null;var _=new Uint8Array(A);return this.reset(),this.removePKCS7Padding?(0,z.removePadding)(_):_},O.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},O.decrypt=function(A,T,_){var m=this;return this.useSoftware?new Promise(function(v,h){m.softwareDecrypt(new Uint8Array(A),T,_);var E=m.flush();E?v(E.buffer):h(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(A),T,_)},O.softwareDecrypt=function(A,T,_){var m=this.currentIV,v=this.currentResult,h=this.remainderData;this.logOnce("JS AES decrypt"),h&&(A=(0,Y.appendUint8Array)(h,A),this.remainderData=null);var E=this.getValidChunk(A);if(!E.length)return null;m&&(_=m);var D=this.softwareDecrypter;D||(D=this.softwareDecrypter=new z.default),D.expandKey(T);var f=v;return this.currentResult=D.decrypt(E.buffer,0,_),this.currentIV=(0,U.sliceUint8)(E,-16).buffer,f||null},O.webCryptoDecrypt=function(A,T,_){var m=this,v=this.subtle;return(this.key!==T||!this.fastAesKey)&&(this.key=T,this.fastAesKey=new B.default(v,T)),this.fastAesKey.expandKey().then(function(h){return v?(m.logOnce("WebCrypto AES decrypt"),new G.default(v,new Uint8Array(_)).decrypt(A.buffer,h)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(h){return V.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+h.name+": "+h.message),m.onWebCryptoError(A,T,_)})},O.onWebCryptoError=function(A,T,_){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(A,T,_);var m=this.flush();if(m)return m.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},O.getValidChunk=function(A){var T=A,_=A.length-A.length%16;return _!==A.length&&(T=(0,U.sliceUint8)(A,0,_),this.remainderData=(0,U.sliceUint8)(A,_)),T},O.logOnce=function(A){this.logEnabled&&(V.logger.log("[decrypter]: "+A),this.logEnabled=!1)},R}()},"./src/crypt/fast-aes-key.ts":
/*!***********************************!*\
                  !*** ./src/crypt/fast-aes-key.ts ***!
                  \***********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>G});var G=function(){function B(V,Y){this.subtle=void 0,this.key=void 0,this.subtle=V,this.key=Y}return B.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},B}()},"./src/demux/aacdemuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/aacdemuxer.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>L});var G=P(
/*! ./base-audio-demuxer */
"./src/demux/base-audio-demuxer.ts"),B=P(
/*! ./adts */
"./src/demux/adts.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=P(
/*! ../demux/id3 */
"./src/demux/id3.ts");function U(R,O){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,T){return A.__proto__=T,A})(R,O)}const L=function(R){function O(A,T){var _;return(_=R.call(this)||this).observer=void 0,_.config=void 0,_.observer=A,_.config=T,_}!function Y(R,O){R.prototype=Object.create(O.prototype),R.prototype.constructor=R,U(R,O)}(O,R);var x=O.prototype;return x.resetInitSegment=function(T,_,m,v){R.prototype.resetInitSegment.call(this,T,_,m,v),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:_,duration:v,inputTimeScale:9e4,dropped:0}},O.probe=function(T){if(!T)return!1;for(var m=(V.getID3Data(T,0)||[]).length,v=T.length;m<v;m++)if(B.probe(T,m))return z.logger.log("ADTS sync word found !"),!0;return!1},x.canParse=function(T,_){return B.canParse(T,_)},x.appendFrame=function(T,_,m){B.initTrackConfig(T,this.observer,_,m,T.manifestCodec);var v=B.appendFrame(T,_,m,this.basePTS,this.frameIndex);if(v&&0===v.missing)return v},O}(G.default)},"./src/demux/adts.ts":
/*!***************************!*\
                  !*** ./src/demux/adts.ts ***!
                  \***************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{appendFrame:()=>m,canGetFrameLength:()=>L,canParse:()=>O,getAudioConfig:()=>V,getFrameDuration:()=>T,getFullFrameLength:()=>k,getHeaderLength:()=>U,initTrackConfig:()=>A,isHeader:()=>R,isHeaderPattern:()=>Y,parseFrameHeader:()=>_,probe:()=>x});var G=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),B=P(
/*! ../errors */
"./src/errors.ts"),z=P(
/*! ../events */
"./src/events.ts");function V(v,h,E,D){var f,y,w,b,C=navigator.userAgent.toLowerCase(),u=D,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];f=1+((192&h[E+2])>>>6);var c=(60&h[E+2])>>>2;if(!(c>d.length-1))return w=(1&h[E+2])<<2,w|=(192&h[E+3])>>>6,G.logger.log("manifest codec:"+D+", ADTS type:"+f+", samplingIndex:"+c),/firefox/i.test(C)?c>=6?(f=5,b=new Array(4),y=c-3):(f=2,b=new Array(2),y=c):-1!==C.indexOf("android")?(f=2,b=new Array(2),y=c):(f=5,b=new Array(4),D&&(-1!==D.indexOf("mp4a.40.29")||-1!==D.indexOf("mp4a.40.5"))||!D&&c>=6?y=c-3:((D&&-1!==D.indexOf("mp4a.40.2")&&(c>=6&&1===w||/vivaldi/i.test(C))||!D&&1===w)&&(f=2,b=new Array(2)),y=c)),b[0]=f<<3,b[0]|=(14&c)>>1,b[1]|=(1&c)<<7,b[1]|=w<<3,5===f&&(b[1]|=(14&y)>>1,b[2]=(1&y)<<7,b[2]|=8,b[3]=0),{config:b,samplerate:d[c],channelCount:w,codec:"mp4a.40."+f,manifestCodec:u};v.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}function Y(v,h){return 255===v[h]&&240==(246&v[h+1])}function U(v,h){return 1&v[h+1]?7:9}function k(v,h){return(3&v[h+3])<<11|v[h+4]<<3|(224&v[h+5])>>>5}function L(v,h){return h+5<v.length}function R(v,h){return h+1<v.length&&Y(v,h)}function O(v,h){return L(v,h)&&Y(v,h)&&k(v,h)<=v.length-h}function x(v,h){if(R(v,h)){var E=U(v,h);if(h+E>=v.length)return!1;var D=k(v,h);if(D<=E)return!1;var f=h+D;return f===v.length||R(v,f)}return!1}function A(v,h,E,D,f){if(!v.samplerate){var y=V(h,E,D,f);if(!y)return;v.config=y.config,v.samplerate=y.samplerate,v.channelCount=y.channelCount,v.codec=y.codec,v.manifestCodec=y.manifestCodec,G.logger.log("parsed codec:"+v.codec+", rate:"+y.samplerate+", channels:"+y.channelCount)}}function T(v){return 9216e4/v}function _(v,h){var E=U(v,h);if(h+E<=v.length){var D=k(v,h)-E;if(D>0)return{headerLength:E,frameLength:D}}}function m(v,h,E,D,f){var C,w=D+f*T(v.samplerate),b=_(h,E);if(b){var d=b.headerLength,c=d+b.frameLength,p=Math.max(0,E+c-h.length);p?(C=new Uint8Array(c-d)).set(h.subarray(E+d,h.length),0):C=h.subarray(E+d,E+c);var M={unit:C,pts:w};return p||v.samples.push(M),{sample:M,length:c,missing:p}}var S=h.length-E;return(C=new Uint8Array(S)).set(h.subarray(E,h.length),0),{sample:{unit:C,pts:w},length:S,missing:-1}}},"./src/demux/base-audio-demuxer.ts":
/*!*****************************************!*\
                  !*** ./src/demux/base-audio-demuxer.ts ***!
                  \*****************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>R,initPTSFn:()=>L});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../demux/id3 */
"./src/demux/id3.ts"),z=P(
/*! ../types/demuxer */
"./src/types/demuxer.ts"),V=P(
/*! ./dummy-demuxed-track */
"./src/demux/dummy-demuxed-track.ts"),Y=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),U=P(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts"),k=function(){function O(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var x=O.prototype;return x.resetInitSegment=function(T,_,m,v){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},x.resetTimeStamp=function(T){this.initPTS=T,this.resetContiguity()},x.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},x.canParse=function(T,_){return!1},x.appendFrame=function(T,_,m){},x.demux=function(T,_){this.cachedData&&(T=(0,Y.appendUint8Array)(this.cachedData,T),this.cachedData=null);var h,m=B.getID3Data(T,0),v=m?m.length:0,E=this._audioTrack,D=this._id3Track,f=m?B.getTimeStamp(m):void 0,y=T.length;for((null===this.basePTS||0===this.frameIndex&&(0,G.isFiniteNumber)(f))&&(this.basePTS=L(f,_,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),m&&m.length>0&&D.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:m,type:z.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});v<y;){if(this.canParse(T,v)){var w=this.appendFrame(E,T,v);w?(this.frameIndex++,this.lastPTS=w.sample.pts,h=v+=w.length):v=y}else B.canParse(T,v)?(m=B.getID3Data(T,v),D.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:m,type:z.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),h=v+=m.length):v++;if(v===y&&h!==y){var b=(0,U.sliceUint8)(T,h);this.cachedData=this.cachedData?(0,Y.appendUint8Array)(this.cachedData,b):b}}return{audioTrack:E,videoTrack:(0,V.dummyTrack)(),id3Track:D,textTrack:(0,V.dummyTrack)()}},x.demuxSampleAes=function(T,_,m){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},x.flush=function(T){var _=this.cachedData;return _&&(this.cachedData=null,this.demux(_,0)),{audioTrack:this._audioTrack,videoTrack:(0,V.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,V.dummyTrack)()}},x.destroy=function(){},O}(),L=function(x,A,T){return(0,G.isFiniteNumber)(x)?90*x:9e4*A+(T||0)};const R=k},"./src/demux/chunk-cache.ts":
/*!**********************************!*\
                  !*** ./src/demux/chunk-cache.ts ***!
                  \**********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>G});var G=function(){function z(){this.chunks=[],this.dataLength=0}var V=z.prototype;return V.push=function(U){this.chunks.push(U),this.dataLength+=U.length},V.flush=function(){var L,U=this.chunks;return U.length?(L=1===U.length?U[0]:function B(z,V){for(var Y=new Uint8Array(V),U=0,k=0;k<z.length;k++){var L=z[k];Y.set(L,U),U+=L.length}return Y}(U,this.dataLength),this.reset(),L):new Uint8Array(0)},V.reset=function(){this.chunks.length=0,this.dataLength=0},z}()},"./src/demux/dummy-demuxed-track.ts":
/*!******************************************!*\
                  !*** ./src/demux/dummy-demuxed-track.ts ***!
                  \******************************************/(pe,J,P)=>{"use strict";function G(B,z){return void 0===B&&(B=""),void 0===z&&(z=9e4),{type:B,id:-1,pid:-1,inputTimeScale:z,sequenceNumber:-1,samples:[],dropped:0}}P.r(J),P.d(J,{dummyTrack:()=>G})},"./src/demux/exp-golomb.ts":
/*!*********************************!*\
                  !*** ./src/demux/exp-golomb.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>z});var G=P(
/*! ../utils/logger */
"./src/utils/logger.ts");const z=function(){function V(U){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=U,this.bytesAvailable=U.byteLength,this.word=0,this.bitsAvailable=0}var Y=V.prototype;return Y.loadWord=function(){var k=this.data,L=this.bytesAvailable,R=k.byteLength-L,O=new Uint8Array(4),x=Math.min(4,L);if(0===x)throw new Error("no bytes available");O.set(k.subarray(R,R+x)),this.word=new DataView(O.buffer).getUint32(0),this.bitsAvailable=8*x,this.bytesAvailable-=x},Y.skipBits=function(k){var L;k=Math.min(k,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>k?(this.word<<=k,this.bitsAvailable-=k):(k-=this.bitsAvailable,k-=(L=k>>3)<<3,this.bytesAvailable-=L,this.loadWord(),this.word<<=k,this.bitsAvailable-=k)},Y.readBits=function(k){var L=Math.min(this.bitsAvailable,k),R=this.word>>>32-L;if(k>32&&G.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=L,this.bitsAvailable>0)this.word<<=L;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(L=k-L)>0&&this.bitsAvailable?R<<L|this.readBits(L):R},Y.skipLZ=function(){var k;for(k=0;k<this.bitsAvailable;++k)if(this.word&2147483648>>>k)return this.word<<=k,this.bitsAvailable-=k,k;return this.loadWord(),k+this.skipLZ()},Y.skipUEG=function(){this.skipBits(1+this.skipLZ())},Y.skipEG=function(){this.skipBits(1+this.skipLZ())},Y.readUEG=function(){var k=this.skipLZ();return this.readBits(k+1)-1},Y.readEG=function(){var k=this.readUEG();return 1&k?1+k>>>1:-1*(k>>>1)},Y.readBoolean=function(){return 1===this.readBits(1)},Y.readUByte=function(){return this.readBits(8)},Y.readUShort=function(){return this.readBits(16)},Y.readUInt=function(){return this.readBits(32)},Y.skipScalingList=function(k){for(var L=8,R=8,x=0;x<k;x++)0!==R&&(R=(L+this.readEG()+256)%256),L=0===R?L:R},Y.readSPS=function(){var x,A,T,k=0,L=0,R=0,O=0,_=this.readUByte.bind(this),m=this.readBits.bind(this),v=this.readUEG.bind(this),h=this.readBoolean.bind(this),E=this.skipBits.bind(this),D=this.skipEG.bind(this),f=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);_();var w=_();if(m(5),E(3),_(),f(),100===w||110===w||122===w||244===w||44===w||83===w||86===w||118===w||128===w){var b=v();if(3===b&&E(1),f(),f(),E(1),h())for(A=3!==b?8:12,T=0;T<A;T++)h()&&y(T<6?16:64)}f();var C=v();if(0===C)v();else if(1===C)for(E(1),D(),D(),x=v(),T=0;T<x;T++)D();f(),E(1);var u=v(),d=v(),c=m(1);0===c&&E(1),E(1),h()&&(k=v(),L=v(),R=v(),O=v());var p=[1,1];if(h()&&h())switch(_()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[_()<<8|_(),_()<<8|_()]}return{width:Math.ceil(16*(u+1)-2*k-2*L),height:(2-c)*(d+1)*16-(c?2:4)*(R+O),pixelRatio:p}},Y.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},V}()},"./src/demux/id3.ts":
/*!**************************!*\
                  !*** ./src/demux/id3.ts ***!
                  \**************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{canParse:()=>Y,decodeFrame:()=>O,getID3Data:()=>z,getID3Frames:()=>R,getTimeStamp:()=>U,isFooter:()=>B,isHeader:()=>G,isTimeStampFrame:()=>k,testables:()=>v,utf8ArrayToStr:()=>m});var h,G=function(f,y){return y+10<=f.length&&73===f[y]&&68===f[y+1]&&51===f[y+2]&&f[y+3]<255&&f[y+4]<255&&f[y+6]<128&&f[y+7]<128&&f[y+8]<128&&f[y+9]<128},B=function(f,y){return y+10<=f.length&&51===f[y]&&68===f[y+1]&&73===f[y+2]&&f[y+3]<255&&f[y+4]<255&&f[y+6]<128&&f[y+7]<128&&f[y+8]<128&&f[y+9]<128},z=function(f,y){for(var w=y,b=0;G(f,y);)b+=10,b+=V(f,y+6),B(f,y+10)&&(b+=10),y+=b;if(b>0)return f.subarray(w,w+b)},V=function(f,y){var w=0;return w=(127&f[y])<<21,w|=(127&f[y+1])<<14,(w|=(127&f[y+2])<<7)|127&f[y+3]},Y=function(f,y){return G(f,y)&&V(f,y+6)+10<=f.length-y},U=function(f){for(var y=R(f),w=0;w<y.length;w++){var b=y[w];if(k(b))return _(b)}},k=function(f){return f&&"PRIV"===f.key&&"com.apple.streaming.transportStreamTimestamp"===f.info},L=function(f){var y=String.fromCharCode(f[0],f[1],f[2],f[3]),w=V(f,4);return{type:y,size:w,data:f.subarray(10,10+w)}},R=function(f){for(var y=0,w=[];G(f,y);){for(var b=V(f,y+6),C=(y+=10)+b;y+8<C;){var u=L(f.subarray(y)),d=O(u);d&&w.push(d),y+=u.size+10}B(f,y)&&(y+=10)}return w},O=function(f){return"PRIV"===f.type?x(f):"W"===f.type[0]?T(f):A(f)},x=function(f){if(!(f.size<2)){var y=m(f.data,!0),w=new Uint8Array(f.data.subarray(y.length+1));return{key:f.type,info:y,data:w.buffer}}},A=function(f){if(!(f.size<2)){if("TXXX"===f.type){var y=1,w=m(f.data.subarray(y),!0),b=m(f.data.subarray(y+=w.length+1));return{key:f.type,info:w,data:b}}var C=m(f.data.subarray(1));return{key:f.type,data:C}}},T=function(f){if("WXXX"===f.type){if(f.size<2)return;var y=1,w=m(f.data.subarray(y),!0),b=m(f.data.subarray(y+=w.length+1));return{key:f.type,info:w,data:b}}var C=m(f.data);return{key:f.type,data:C}},_=function(f){if(8===f.data.byteLength){var y=new Uint8Array(f.data),b=(y[4]<<23)+(y[5]<<15)+(y[6]<<7)+y[7];return b/=45,1&y[3]&&(b+=47721858.84),Math.round(b)}},m=function(f,y){void 0===y&&(y=!1);var w=function E(){return!h&&typeof self.TextDecoder<"u"&&(h=new self.TextDecoder("utf-8")),h}();if(w){var b=w.decode(f);if(y){var C=b.indexOf("\0");return-1!==C?b.substring(0,C):b}return b.replace(/\0/g,"")}for(var d,c,p,u=f.length,M="",S=0;S<u;){if(0===(d=f[S++])&&y)return M;if(0!==d&&3!==d)switch(d>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:M+=String.fromCharCode(d);break;case 12:case 13:c=f[S++],M+=String.fromCharCode((31&d)<<6|63&c);break;case 14:c=f[S++],p=f[S++],M+=String.fromCharCode((15&d)<<12|(63&c)<<6|(63&p)<<0)}}return M},v={decodeTextFrame:A}},"./src/demux/mp3demuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/mp3demuxer.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>L});var G=P(
/*! ./base-audio-demuxer */
"./src/demux/base-audio-demuxer.ts"),B=P(
/*! ../demux/id3 */
"./src/demux/id3.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=P(
/*! ./mpegaudio */
"./src/demux/mpegaudio.ts");function U(R,O){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,T){return A.__proto__=T,A})(R,O)}var k=function(R){function O(){return R.apply(this,arguments)||this}!function Y(R,O){R.prototype=Object.create(O.prototype),R.prototype.constructor=R,U(R,O)}(O,R);var x=O.prototype;return x.resetInitSegment=function(T,_,m,v){R.prototype.resetInitSegment.call(this,T,_,m,v),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:_,duration:v,inputTimeScale:9e4,dropped:0}},O.probe=function(T){if(!T)return!1;for(var m=(B.getID3Data(T,0)||[]).length,v=T.length;m<v;m++)if(V.probe(T,m))return z.logger.log("MPEG Audio sync word found !"),!0;return!1},x.canParse=function(T,_){return V.canParse(T,_)},x.appendFrame=function(T,_,m){if(null!==this.basePTS)return V.appendFrame(T,_,m,this.basePTS,this.frameIndex)},O}(G.default);const L=k},"./src/demux/mp4demuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/mp4demuxer.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>k});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../types/demuxer */
"./src/types/demuxer.ts"),z=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),V=P(
/*! ./dummy-demuxed-track */
"./src/demux/dummy-demuxed-track.ts"),Y=/\/emsg[-/]ID3/i;const k=function(){function L(O,x){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=x}var R=L.prototype;return R.resetTimeStamp=function(){},R.resetInitSegment=function(x,A,T,_){var m=this.videoTrack=(0,V.dummyTrack)("video",1),v=this.audioTrack=(0,V.dummyTrack)("audio",1),h=this.txtTrack=(0,V.dummyTrack)("text",1);if(this.id3Track=(0,V.dummyTrack)("id3",1),this.timeOffset=0,x&&x.byteLength){var E=(0,z.parseInitSegment)(x);if(E.video){var D=E.video,y=D.timescale,w=D.codec;m.id=D.id,m.timescale=h.timescale=y,m.codec=w}if(E.audio){var b=E.audio,u=b.timescale,d=b.codec;v.id=b.id,v.timescale=u,v.codec=d}h.id=z.RemuxerTrackIdConfig.text,m.sampleDuration=0,m.duration=v.duration=_}},R.resetContiguity=function(){},L.probe=function(x){return x=x.length>16384?x.subarray(0,16384):x,(0,z.findBox)(x,["moof"]).length>0},R.demux=function(x,A){this.timeOffset=A;var T=x,_=this.videoTrack,m=this.txtTrack;if(this.config.progressive){this.remainderData&&(T=(0,z.appendUint8Array)(this.remainderData,x));var v=(0,z.segmentValidRange)(T);this.remainderData=v.remainder,_.samples=v.valid||new Uint8Array}else _.samples=T;var h=this.extractID3Track(_,A);return m.samples=(0,z.parseSamples)(A,_),{videoTrack:_,audioTrack:this.audioTrack,id3Track:h,textTrack:this.txtTrack}},R.flush=function(){var x=this.timeOffset,A=this.videoTrack,T=this.txtTrack;A.samples=this.remainderData||new Uint8Array,this.remainderData=null;var _=this.extractID3Track(A,this.timeOffset);return T.samples=(0,z.parseSamples)(x,A),{videoTrack:A,audioTrack:(0,V.dummyTrack)(),id3Track:_,textTrack:(0,V.dummyTrack)()}},R.extractID3Track=function(x,A){var T=this.id3Track;if(x.samples.length){var _=(0,z.findBox)(x.samples,["emsg"]);_&&_.forEach(function(m){var v=(0,z.parseEmsg)(m);if(Y.test(v.schemeIdUri)){var h=(0,G.isFiniteNumber)(v.presentationTime)?v.presentationTime/v.timeScale:A+v.presentationTimeDelta/v.timeScale,E=4294967295===v.eventDuration?Number.POSITIVE_INFINITY:v.eventDuration/v.timeScale;E<=.001&&(E=Number.POSITIVE_INFINITY);var D=v.payload;T.samples.push({data:D,len:D.byteLength,dts:h,pts:h,type:B.MetadataSchema.emsg,duration:E})}})}return T},R.demuxSampleAes=function(x,A,T){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},R.destroy=function(){},L}()},"./src/demux/mpegaudio.ts":
/*!********************************!*\
                  !*** ./src/demux/mpegaudio.ts ***!
                  \********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{appendFrame:()=>U,canParse:()=>O,isHeader:()=>R,isHeaderPattern:()=>L,parseHeader:()=>k,probe:()=>x});var G=null,B=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],z=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],V=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Y=[0,1,1,4];function U(A,T,_,m,v){if(!(_+24>T.length)){var h=k(T,_);if(h&&_+h.frameLength<=T.length){var D=m+v*(9e4*h.samplesPerFrame/h.sampleRate),f={unit:T.subarray(_,_+h.frameLength),pts:D,dts:D};return A.config=[],A.channelCount=h.channelCount,A.samplerate=h.sampleRate,A.samples.push(f),{sample:f,length:h.frameLength,missing:0}}}}function k(A,T){var _=A[T+1]>>3&3,m=A[T+1]>>1&3,v=A[T+2]>>4&15,h=A[T+2]>>2&3;if(1!==_&&0!==v&&15!==v&&3!==h){var D=A[T+3]>>6,y=1e3*B[14*(3===_?3-m:3===m?3:4)+v-1],b=z[3*(3===_?0:2===_?1:2)+h],C=3===D?1:2,u=V[_][m],d=Y[m],c=8*u*d,p=Math.floor(u*y/b+(A[T+2]>>1&1))*d;if(null===G){var S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);G=S?parseInt(S[1]):0}return!!G&&G<=87&&2===m&&y>=224e3&&0===D&&(A[T+3]=128|A[T+3]),{sampleRate:b,channelCount:C,frameLength:p,samplesPerFrame:c}}}function L(A,T){return 255===A[T]&&224==(224&A[T+1])&&0!=(6&A[T+1])}function R(A,T){return T+1<A.length&&L(A,T)}function O(A,T){return L(A,T)&&4<=A.length-T}function x(A,T){if(T+1<A.length&&L(A,T)){var m=k(A,T),v=4;null!=m&&m.frameLength&&(v=m.frameLength);var h=T+v;return h===A.length||R(A,h)}return!1}},"./src/demux/sample-aes.ts":
/*!*********************************!*\
                  !*** ./src/demux/sample-aes.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>V});var G=P(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),B=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts");const V=function(){function Y(k,L,R){this.keyData=void 0,this.decrypter=void 0,this.keyData=R,this.decrypter=new G.default(L,{removePKCS7Padding:!1})}var U=Y.prototype;return U.decryptBuffer=function(L){return this.decrypter.decrypt(L,this.keyData.key.buffer,this.keyData.iv.buffer)},U.decryptAacSample=function(L,R,O){var x=this,A=L[R].unit;if(!(A.length<=16)){var T=A.subarray(16,A.length-A.length%16),_=T.buffer.slice(T.byteOffset,T.byteOffset+T.length);this.decryptBuffer(_).then(function(m){var v=new Uint8Array(m);A.set(v,16),x.decrypter.isSync()||x.decryptAacSamples(L,R+1,O)})}},U.decryptAacSamples=function(L,R,O){for(;;R++){if(R>=L.length)return void O();if(!(L[R].unit.length<32||(this.decryptAacSample(L,R,O),this.decrypter.isSync())))return}},U.getAvcEncryptedData=function(L){for(var R=16*Math.floor((L.length-48)/160)+16,O=new Int8Array(R),x=0,A=32;A<L.length-16;A+=160,x+=16)O.set(L.subarray(A,A+16),x);return O},U.getAvcDecryptedUnit=function(L,R){for(var O=new Uint8Array(R),x=0,A=32;A<L.length-16;A+=160,x+=16)L.set(O.subarray(x,x+16),A);return L},U.decryptAvcSample=function(L,R,O,x,A){var T=this,_=(0,B.discardEPB)(A.data),m=this.getAvcEncryptedData(_);this.decryptBuffer(m.buffer).then(function(v){A.data=T.getAvcDecryptedUnit(_,v),T.decrypter.isSync()||T.decryptAvcSamples(L,R,O+1,x)})},U.decryptAvcSamples=function(L,R,O,x){if(L instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;R++,O=0){if(R>=L.length)return void x();for(var A=L[R].units;!(O>=A.length);O++){var T=A[O];if(!(T.data.length<=48||1!==T.type&&5!==T.type||(this.decryptAvcSample(L,R,O,x,T),this.decrypter.isSync())))return}}},Y}()},"./src/demux/transmuxer-interface.ts":
/*!*******************************************!*\
                  !*** ./src/demux/transmuxer-interface.ts ***!
                  \*******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>O});var G=P(
/*! ./webworkify-webpack */
"./src/demux/webworkify-webpack.js"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../demux/transmuxer */
"./src/demux/transmuxer.ts"),V=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=P(
/*! ../errors */
"./src/errors.ts"),U=P(
/*! ../utils/mediasource-helper */
"./src/utils/mediasource-helper.ts"),k=P(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),R=(0,U.getMediaSource)()||{isTypeSupported:function(){return!1}},O=function(){function x(T,_,m,v){var h=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var E=T.config;this.hls=T,this.id=_,this.useWorker=!!E.enableWorker,this.onTransmuxComplete=m,this.onFlush=v;var D=function(C,u){(u=u||{}).frag=h.frag,u.id=h.id,h.hls.trigger(C,u)};this.observer=new k.EventEmitter,this.observer.on(B.Events.FRAG_DECRYPTED,D),this.observer.on(B.Events.ERROR,D);var f={mp4:R.isTypeSupported("video/mp4"),mpeg:R.isTypeSupported("audio/mpeg"),mp3:R.isTypeSupported('audio/mp4; codecs="mp3"')},y=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){var w;V.logger.log("demuxing in webworker");try{w=this.worker=(0,G.default)(
/*! ../demux/transmuxer-worker.ts */
"./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),w.addEventListener("message",this.onwmsg),w.onerror=function(b){h.useWorker=!1,V.logger.warn("Exception in webworker, fallback to inline"),h.hls.trigger(B.Events.ERROR,{type:Y.ErrorTypes.OTHER_ERROR,details:Y.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(b.message+"  ("+b.filename+":"+b.lineno+")")})},w.postMessage({cmd:"init",typeSupported:f,vendor:y,id:_,config:JSON.stringify(E)})}catch(b){V.logger.warn("Error in worker:",b),V.logger.error("Error while initializing DemuxerWorker, fallback to inline"),w&&self.URL.revokeObjectURL(w.objectURL),this.transmuxer=new z.default(this.observer,f,E,y,_),this.worker=null}}else this.transmuxer=new z.default(this.observer,f,E,y,_)}var A=x.prototype;return A.destroy=function(){var _=this.worker;if(_)_.removeEventListener("message",this.onwmsg),_.terminate(),this.worker=null,this.onwmsg=void 0;else{var m=this.transmuxer;m&&(m.destroy(),this.transmuxer=null)}var v=this.observer;v&&v.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},A.push=function(_,m,v,h,E,D,f,y,w,b){var C,u,d=this;w.transmuxing.start=self.performance.now();var c=this.transmuxer,p=this.worker,M=D?D.start:E.start,S=E.decryptdata,F=this.frag,H=!(F&&E.cc===F.cc),N=!(F&&w.level===F.level),K=F?w.sn-F.sn:-1,W=this.part?w.part-this.part.index:-1,Q=!N&&(1===K||0===K&&(1===W||0===K&&w.id>1&&w.id===F?.stats.chunkCount&&W<=0)),te=self.performance.now();(N||K||0===E.stats.parsing.start)&&(E.stats.parsing.start=te),D&&(W||!Q)&&(D.stats.parsing.start=te);var Z=!(F&&(null===(C=E.initSegment)||void 0===C?void 0:C.url)===(null===(u=F.initSegment)||void 0===u?void 0:u.url)),re=new z.TransmuxState(H,Q,y,N,M,Z);if(!Q||H||Z){V.logger.log("[transmuxer-interface, "+E.type+"]: Starting new transmux session for sn: "+w.sn+" p: "+w.part+" level: "+w.level+" id: "+w.id+"\n        discontinuity: "+H+"\n        trackSwitch: "+N+"\n        contiguous: "+Q+"\n        accurateTimeOffset: "+y+"\n        timeOffset: "+M+"\n        initSegmentChange: "+Z);var oe=new z.TransmuxConfig(v,h,m,f,b);this.configureTransmuxer(oe)}if(this.frag=E,this.part=D,p)p.postMessage({cmd:"demux",data:_,decryptdata:S,chunkMeta:w,state:re},_ instanceof ArrayBuffer?[_]:[]);else if(c){var ce=c.push(_,S,w,re);(0,z.isPromise)(ce)?(c.async=!0,ce.then(function(ue){d.handleTransmuxComplete(ue)}).catch(function(ue){d.transmuxerError(ue,w,"transmuxer-interface push error")})):(c.async=!1,this.handleTransmuxComplete(ce))}},A.flush=function(_){var m=this;_.transmuxing.start=self.performance.now();var v=this.transmuxer,h=this.worker;if(h)h.postMessage({cmd:"flush",chunkMeta:_});else if(v){var E=v.flush(_);(0,z.isPromise)(E)||v.async?((0,z.isPromise)(E)||(E=Promise.resolve(E)),E.then(function(f){m.handleFlushResult(f,_)}).catch(function(f){m.transmuxerError(f,_,"transmuxer-interface flush error")})):this.handleFlushResult(E,_)}},A.transmuxerError=function(_,m,v){this.hls&&this.hls.trigger(B.Events.ERROR,{type:Y.ErrorTypes.MEDIA_ERROR,details:Y.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:m,fatal:!1,error:_,err:_,reason:v})},A.handleFlushResult=function(_,m){var v=this;_.forEach(function(h){v.handleTransmuxComplete(h)}),this.onFlush(m)},A.onWorkerMessage=function(_){var m=_.data,v=this.hls;switch(m.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(m.data);break;case"flush":this.onFlush(m.data);break;case"workerLog":V.logger[m.data.logType]&&V.logger[m.data.logType](m.data.message);break;default:m.data=m.data||{},m.data.frag=this.frag,m.data.id=this.id,v.trigger(m.event,m.data)}},A.configureTransmuxer=function(_){var m=this.worker,v=this.transmuxer;m?m.postMessage({cmd:"configure",config:_}):v&&v.configure(_)},A.handleTransmuxComplete=function(_){_.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(_)},x}()},"./src/demux/transmuxer-worker.ts":
/*!****************************************!*\
                  !*** ./src/demux/transmuxer-worker.ts ***!
                  \****************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>k});var G=P(
/*! ../demux/transmuxer */
"./src/demux/transmuxer.ts"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=P(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),U=P(
/*! ../errors */
"./src/errors.ts");function k(A){var T=new V.EventEmitter,_=function(h,E){A.postMessage({event:h,data:E})};T.on(B.Events.FRAG_DECRYPTED,_),T.on(B.Events.ERROR,_),A.addEventListener("message",function(v){var h=v.data;switch(h.cmd){case"init":var E=JSON.parse(h.config);A.transmuxer=new G.default(T,h.typeSupported,E,h.vendor,h.id),(0,z.enableLogs)(E.debug,h.id),function(){var h=function(f){z.logger[f]=function(b){_("workerLog",{logType:f,message:b})}};for(var E in z.logger)h(E)}(),_("init",null);break;case"configure":A.transmuxer.configure(h.config);break;case"demux":var D=A.transmuxer.push(h.data,h.decryptdata,h.chunkMeta,h.state);(0,G.isPromise)(D)?(A.transmuxer.async=!0,D.then(function(b){L(A,b)}).catch(function(b){_(B.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:b,err:b,reason:"transmuxer-worker push error"})})):(A.transmuxer.async=!1,L(A,D));break;case"flush":var f=h.chunkMeta,y=A.transmuxer.flush(f);(0,G.isPromise)(y)||A.transmuxer.async?((0,G.isPromise)(y)||(y=Promise.resolve(y)),y.then(function(b){O(A,b,f)}).catch(function(b){_(B.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:b,err:b,reason:"transmuxer-worker flush error"})})):O(A,y,f)}})}function L(A,T){if(function x(A){return!(A.audio||A.video||A.text||A.id3||A.initSegment)}(T.remuxResult))return!1;var _=[],m=T.remuxResult,v=m.audio,h=m.video;return v&&R(_,v),h&&R(_,h),A.postMessage({event:"transmuxComplete",data:T},_),!0}function R(A,T){T.data1&&A.push(T.data1.buffer),T.data2&&A.push(T.data2.buffer)}function O(A,T,_){T.reduce(function(v,h){return L(A,h)||v},!1)||A.postMessage({event:"transmuxComplete",data:T[0]}),A.postMessage({event:"flush",data:_})}},"./src/demux/transmuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/transmuxer.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{TransmuxConfig:()=>h,TransmuxState:()=>E,default:()=>T,isPromise:()=>v});var x,G=P(
/*! ../events */
"./src/events.ts"),B=P(
/*! ../errors */
"./src/errors.ts"),z=P(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),V=P(
/*! ../demux/aacdemuxer */
"./src/demux/aacdemuxer.ts"),Y=P(
/*! ../demux/mp4demuxer */
"./src/demux/mp4demuxer.ts"),U=P(
/*! ../demux/tsdemuxer */
"./src/demux/tsdemuxer.ts"),k=P(
/*! ../demux/mp3demuxer */
"./src/demux/mp3demuxer.ts"),L=P(
/*! ../remux/mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),R=P(
/*! ../remux/passthrough-remuxer */
"./src/remux/passthrough-remuxer.ts"),O=P(
/*! ../utils/logger */
"./src/utils/logger.ts");try{x=self.performance.now.bind(self.performance)}catch{O.logger.debug("Unable to use Performance API on this environment"),x=self.Date.now}var A=[{demux:Y.default,remux:R.default},{demux:U.default,remux:L.default},{demux:V.default,remux:L.default},{demux:k.default,remux:L.default}],T=function(){function D(y,w,b,C,u){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=y,this.typeSupported=w,this.config=b,this.vendor=C,this.id=u}var f=D.prototype;return f.configure=function(w){this.transmuxConfig=w,this.decrypter&&this.decrypter.reset()},f.push=function(w,b,C,u){var d=this,c=C.transmuxing;c.executeStart=x();var p=new Uint8Array(w),M=this.currentTransmuxState,S=this.transmuxConfig;u&&(this.currentTransmuxState=u);var F=u||M,H=F.contiguous,N=F.discontinuity,K=F.trackSwitch,W=F.accurateTimeOffset,$=F.timeOffset,Q=F.initSegmentChange,te=S.audioCodec,Z=S.videoCodec,re=S.defaultInitPts,oe=S.duration,ce=S.initSegmentData,ue=function _(D,f){var y=null;return D.byteLength>0&&null!=f&&null!=f.key&&null!==f.iv&&null!=f.method&&(y=f),y}(p,b);if(ue&&"AES-128"===ue.method){var fe=this.getDecrypter();if(!fe.isSync())return this.decryptionPromise=fe.webCryptoDecrypt(p,ue.key.buffer,ue.iv.buffer).then(function(et){var ct=d.push(et,null,C);return d.decryptionPromise=null,ct}),this.decryptionPromise;var De=fe.softwareDecrypt(p,ue.key.buffer,ue.iv.buffer);if(C.part>-1&&(De=fe.flush()),!De)return c.executeEnd=x(),m(C);p=new Uint8Array(De)}var Te=this.needsProbing(N,K);Te&&this.configureTransmuxer(p),(N||K||Q||Te)&&this.resetInitSegment(ce,te,Z,oe,b),(N||Q||Te)&&this.resetInitialTimestamp(re),H||this.resetContiguity();var Ce=this.transmux(p,ue,$,W,C),we=this.currentTransmuxState;return we.contiguous=!0,we.discontinuity=!1,we.trackSwitch=!1,c.executeEnd=x(),Ce},f.flush=function(w){var b=this,C=w.transmuxing;C.executeStart=x();var u=this.decrypter,d=this.currentTransmuxState,c=this.decryptionPromise;if(c)return c.then(function(){return b.flush(w)});var p=[],M=d.timeOffset;if(u){var S=u.flush();S&&p.push(this.push(S,null,w))}var F=this.demuxer;if(!F||!this.remuxer)return this.observer.emit(G.Events.ERROR,G.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),C.executeEnd=x(),[m(w)];var N=F.flush(M);return v(N)?N.then(function(K){return b.flushRemux(p,K,w),p}):(this.flushRemux(p,N,w),p)},f.flushRemux=function(w,b,C){var u=b.audioTrack,d=b.videoTrack,c=b.id3Track,p=b.textTrack,M=this.currentTransmuxState,S=M.accurateTimeOffset,F=M.timeOffset;O.logger.log("[transmuxer.ts]: Flushed fragment "+C.sn+(C.part>-1?" p: "+C.part:"")+" of level "+C.level);var H=this.remuxer.remux(u,d,c,p,F,S,!0,this.id);w.push({remuxResult:H,chunkMeta:C}),C.transmuxing.executeEnd=x()},f.resetInitialTimestamp=function(w){var b=this.demuxer,C=this.remuxer;!b||!C||(b.resetTimeStamp(w),C.resetTimeStamp(w))},f.resetContiguity=function(){var w=this.demuxer,b=this.remuxer;!w||!b||(w.resetContiguity(),b.resetNextTimestamp())},f.resetInitSegment=function(w,b,C,u,d){var c=this.demuxer,p=this.remuxer;!c||!p||(c.resetInitSegment(w,b,C,u),p.resetInitSegment(w,b,C,d))},f.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},f.transmux=function(w,b,C,u,d){return b&&"SAMPLE-AES"===b.method?this.transmuxSampleAes(w,b,C,u,d):this.transmuxUnencrypted(w,C,u,d)},f.transmuxUnencrypted=function(w,b,C,u){var d=this.demuxer.demux(w,b,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(d.audioTrack,d.videoTrack,d.id3Track,d.textTrack,b,C,!1,this.id),chunkMeta:u}},f.transmuxSampleAes=function(w,b,C,u,d){var c=this;return this.demuxer.demuxSampleAes(w,b,C).then(function(p){return{remuxResult:c.remuxer.remux(p.audioTrack,p.videoTrack,p.id3Track,p.textTrack,C,u,!1,c.id),chunkMeta:d}})},f.configureTransmuxer=function(w){for(var c,b=this.config,C=this.observer,u=this.typeSupported,d=this.vendor,p=0,M=A.length;p<M;p++)if(A[p].demux.probe(w)){c=A[p];break}c||(O.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),c={demux:Y.default,remux:R.default});var S=this.demuxer,F=this.remuxer,H=c.remux,N=c.demux;(!F||!(F instanceof H))&&(this.remuxer=new H(C,b,u,d)),(!S||!(S instanceof N))&&(this.demuxer=new N(C,b,u),this.probe=N.probe)},f.needsProbing=function(w,b){return!this.demuxer||!this.remuxer||w||b},f.getDecrypter=function(){var w=this.decrypter;return w||(w=this.decrypter=new z.default(this.config)),w},D}(),m=function(f){return{remuxResult:{},chunkMeta:f}};function v(D){return"then"in D&&D.then instanceof Function}var h=function(f,y,w,b,C){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=f,this.videoCodec=y,this.initSegmentData=w,this.duration=b,this.defaultInitPts=C},E=function(f,y,w,b,C,u){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=f,this.contiguous=y,this.accurateTimeOffset=w,this.trackSwitch=b,this.timeOffset=C,this.initSegmentChange=u}},"./src/demux/tsdemuxer.ts":
/*!********************************!*\
                  !*** ./src/demux/tsdemuxer.ts ***!
                  \********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>D});var G=P(
/*! ./adts */
"./src/demux/adts.ts"),B=P(
/*! ./mpegaudio */
"./src/demux/mpegaudio.ts"),z=P(
/*! ./exp-golomb */
"./src/demux/exp-golomb.ts"),V=P(
/*! ./sample-aes */
"./src/demux/sample-aes.ts"),Y=P(
/*! ../events */
"./src/events.ts"),U=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),k=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),L=P(
/*! ../errors */
"./src/errors.ts"),R=P(
/*! ../types/demuxer */
"./src/types/demuxer.ts");function O(){return O=Object.assign?Object.assign.bind():function(f){for(var y=1;y<arguments.length;y++){var w=arguments[y];for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(f[b]=w[b])}return f},O.apply(this,arguments)}var x=188;function T(f,y,w,b){return{key:f,frame:!1,pts:y,dts:w,units:[],debug:b,length:0}}function _(f,y){return((31&f[y+1])<<8)+f[y+2]}function m(f,y){return(31&f[y+10])<<8|f[y+11]}function v(f,y,w,b){var C={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},d=y+3+((15&f[y+1])<<8|f[y+2])-4;for(y+=12+((15&f[y+10])<<8|f[y+11]);y<d;){var p=_(f,y);switch(f[y]){case 207:if(!b){k.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===C.audio&&(C.audio=p);break;case 21:-1===C.id3&&(C.id3=p);break;case 219:if(!b){k.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===C.avc&&(C.avc=p);break;case 3:case 4:!0!==w.mpeg&&!0!==w.mp3?k.logger.log("MPEG audio found, not supported in this browser"):-1===C.audio&&(C.audio=p,C.segmentCodec="mp3");break;case 36:k.logger.warn("Unsupported HEVC stream type found")}y+=5+((15&f[y+3])<<8|f[y+4])}return C}function h(f){var w,b,C,u,d,y=0,c=f.data;if(!f||0===f.size)return null;for(;c[0].length<19&&c.length>1;){var p=new Uint8Array(c[0].length+c[1].length);p.set(c[0]),p.set(c[1],c[0].length),c[0]=p,c.splice(1,1)}if(1===((w=c[0])[0]<<16)+(w[1]<<8)+w[2]){if((b=(w[4]<<8)+w[5])&&b>f.size-6)return null;var S=w[7];192&S&&(u=536870912*(14&w[9])+4194304*(255&w[10])+16384*(254&w[11])+128*(255&w[12])+(254&w[13])/2,64&S?u-(d=536870912*(14&w[14])+4194304*(255&w[15])+16384*(254&w[16])+128*(255&w[17])+(254&w[18])/2)>54e5&&(k.logger.warn(Math.round((u-d)/9e4)+"s delta between PTS and DTS, align them"),u=d):d=u);var F=(C=w[8])+9;if(f.size<=F)return null;f.size-=F;for(var H=new Uint8Array(f.size),N=0,K=c.length;N<K;N++){var W=(w=c[N]).byteLength;if(F){if(F>W){F-=W;continue}w=w.subarray(F),W-=F,F=0}H.set(w,y),y+=W}return b&&(b-=C+3),{data:H,pts:u,dts:d,len:b}}return null}function E(f,y){if(f.units.length&&f.frame){if(void 0===f.pts){var w=y.samples,b=w.length;if(!b)return void y.dropped++;var C=w[b-1];f.pts=C.pts,f.dts=C.dts}y.samples.push(f)}f.debug.length&&k.logger.log(f.pts+"/"+f.dts+":"+f.debug)}const D=function(){function f(w,b,C){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=w,this.config=b,this.typeSupported=C}f.probe=function(b){var C=f.syncOffset(b);return C>0&&k.logger.warn("MPEG2-TS detected but first sync word found @ offset "+C),-1!==C},f.syncOffset=function(b){for(var C=b.length,u=Math.min(940,b.length-x)+1,d=0;d<u;){for(var c=!1,p=d;p<C&&71===b[p];p+=x)if(!c&&0===_(b,p)&&(c=!0),c&&p+x>u)return d;d++}return-1},f.createTrack=function(b,C){return{container:"video"===b||"audio"===b?"video/mp2t":void 0,type:b,id:U.RemuxerTrackIdConfig[b],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===b?C:void 0}};var y=f.prototype;return y.resetInitSegment=function(b,C,u,d){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=f.createTrack("video"),this._audioTrack=f.createTrack("audio",d),this._id3Track=f.createTrack("id3"),this._txtTrack=f.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=C,this.videoCodec=u,this._duration=d},y.resetTimeStamp=function(){},y.resetContiguity=function(){var b=this._audioTrack,C=this._avcTrack,u=this._id3Track;b&&(b.pesData=null),C&&(C.pesData=null),u&&(u.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},y.demux=function(b,C,u,d){void 0===u&&(u=!1),void 0===d&&(d=!1),u||(this.sampleAes=null);var c,p=this._avcTrack,M=this._audioTrack,S=this._id3Track,F=this._txtTrack,H=p.pid,N=p.pesData,K=M.pid,W=S.pid,$=M.pesData,Q=S.pesData,te=null,Z=this.pmtParsed,re=this._pmtId,oe=b.length;if(this.remainderData&&(oe=(b=(0,U.appendUint8Array)(this.remainderData,b)).length,this.remainderData=null),oe<x&&!d)return this.remainderData=b,{audioTrack:M,videoTrack:p,id3Track:S,textTrack:F};var ce=Math.max(0,f.syncOffset(b));(oe-=(oe-ce)%x)<b.byteLength&&!d&&(this.remainderData=new Uint8Array(b.buffer,oe,b.buffer.byteLength-oe));for(var ue=0,fe=ce;fe<oe;fe+=x)if(71===b[fe]){var De=!!(64&b[fe+1]),Re=_(b,fe),Ce=void 0;if((48&b[fe+3])>>4>1){if((Ce=fe+5+b[fe+4])===fe+x)continue}else Ce=fe+4;switch(Re){case H:De&&(N&&(c=h(N))&&this.parseAVCPES(p,F,c,!1),N={data:[],size:0}),N&&(N.data.push(b.subarray(Ce,fe+x)),N.size+=fe+x-Ce);break;case K:if(De){if($&&(c=h($)))switch(M.segmentCodec){case"aac":this.parseAACPES(M,c);break;case"mp3":this.parseMPEGPES(M,c)}$={data:[],size:0}}$&&($.data.push(b.subarray(Ce,fe+x)),$.size+=fe+x-Ce);break;case W:De&&(Q&&(c=h(Q))&&this.parseID3PES(S,c),Q={data:[],size:0}),Q&&(Q.data.push(b.subarray(Ce,fe+x)),Q.size+=fe+x-Ce);break;case 0:De&&(Ce+=b[Ce]+1),re=this._pmtId=m(b,Ce);break;case re:De&&(Ce+=b[Ce]+1);var we=v(b,Ce,this.typeSupported,u);(H=we.avc)>0&&(p.pid=H),(K=we.audio)>0&&(M.pid=K,M.segmentCodec=we.segmentCodec),(W=we.id3)>0&&(S.pid=W),null!==te&&!Z&&(k.logger.warn("MPEG-TS PMT found at "+fe+" after unknown PID '"+te+"'. Backtracking to sync byte @"+ce+" to parse all TS packets."),te=null,fe=ce-188),Z=this.pmtParsed=!0;break;case 17:case 8191:break;default:te=Re}}else ue++;ue>0&&this.observer.emit(Y.Events.ERROR,Y.Events.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+ue+" TS packet/s that do not start with 0x47"}),p.pesData=N,M.pesData=$,S.pesData=Q;var et={audioTrack:M,videoTrack:p,id3Track:S,textTrack:F};return d&&this.extractRemainingSamples(et),et},y.flush=function(){var C,b=this.remainderData;return this.remainderData=null,C=b?this.demux(b,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(C),this.sampleAes?this.decrypt(C,this.sampleAes):C},y.extractRemainingSamples=function(b){var F,C=b.audioTrack,u=b.videoTrack,d=b.id3Track,c=b.textTrack,p=u.pesData,M=C.pesData,S=d.pesData;if(p&&(F=h(p))?(this.parseAVCPES(u,c,F,!0),u.pesData=null):u.pesData=p,M&&(F=h(M))){switch(C.segmentCodec){case"aac":this.parseAACPES(C,F);break;case"mp3":this.parseMPEGPES(C,F)}C.pesData=null}else null!=M&&M.size&&k.logger.log("last AAC PES packet truncated,might overlap between fragments"),C.pesData=M;S&&(F=h(S))?(this.parseID3PES(d,F),d.pesData=null):d.pesData=S},y.demuxSampleAes=function(b,C,u){var d=this.demux(b,u,!0,!this.config.progressive),c=this.sampleAes=new V.default(this.observer,this.config,C);return this.decrypt(d,c)},y.decrypt=function(b,C){return new Promise(function(u){var d=b.audioTrack,c=b.videoTrack;d.samples&&"aac"===d.segmentCodec?C.decryptAacSamples(d.samples,0,function(){c.samples?C.decryptAvcSamples(c.samples,0,0,function(){u(b)}):u(b)}):c.samples&&C.decryptAvcSamples(c.samples,0,0,function(){u(b)})})},y.destroy=function(){this._duration=0},y.parseAVCPES=function(b,C,u,d){var F,c=this,p=this.parseAVCNALu(b,u.data),S=this.avcSample,H=!1;u.data=null,S&&p.length&&!b.audFound&&(E(S,b),S=this.avcSample=T(!1,u.pts,u.dts,"")),p.forEach(function(N){switch(N.type){case 1:F=!0,S||(S=c.avcSample=T(!0,u.pts,u.dts,"")),S.frame=!0;var K=N.data;if(H&&K.length>4){var W=new z.default(K).readSliceType();(2===W||4===W||7===W||9===W)&&(S.key=!0)}break;case 5:F=!0,S||(S=c.avcSample=T(!0,u.pts,u.dts,"")),S.key=!0,S.frame=!0;break;case 6:F=!0,(0,U.parseSEIMessageFromNALu)(N.data,1,u.pts,C.samples);break;case 7:if(F=!0,H=!0,!b.sps){var Q=new z.default(N.data).readSPS();b.width=Q.width,b.height=Q.height,b.pixelRatio=Q.pixelRatio,b.sps=[N.data],b.duration=c._duration;for(var te=N.data.subarray(1,4),Z="avc1.",re=0;re<3;re++){var oe=te[re].toString(16);oe.length<2&&(oe="0"+oe),Z+=oe}b.codec=Z}break;case 8:F=!0,b.pps||(b.pps=[N.data]);break;case 9:F=!1,b.audFound=!0,S&&E(S,b),S=c.avcSample=T(!1,u.pts,u.dts,"");break;case 12:F=!0;break;default:F=!1,S&&(S.debug+="unknown NAL "+N.type+" ")}S&&F&&S.units.push(N)}),d&&S&&(E(S,b),this.avcSample=null)},y.getLastNalUnit=function(b){var C,d,u=this.avcSample;if((!u||0===u.units.length)&&(u=b[b.length-1]),null!==(C=u)&&void 0!==C&&C.units){var c=u.units;d=c[c.length-1]}return d},y.parseAVCNALu=function(b,C){var S,F,u=C.byteLength,d=b.naluState||0,c=d,p=[],M=0,N=-1,K=0;for(-1===d&&(N=0,K=31&C[0],d=0,M=1);M<u;)if(S=C[M++],d)if(1!==d)if(S)if(1===S){if(N>=0){var W={data:C.subarray(N,M-d-1),type:K};p.push(W)}else{var $=this.getLastNalUnit(b.samples);if($&&(c&&M<=4-c&&$.state&&($.data=$.data.subarray(0,$.data.byteLength-c)),(F=M-d-1)>0)){var Q=new Uint8Array($.data.byteLength+F);Q.set($.data,0),Q.set(C.subarray(0,F),$.data.byteLength),$.data=Q,$.state=0}}M<u?(N=M,K=31&C[M],d=0):d=-1}else d=0;else d=3;else d=S?0:2;else d=S?0:1;if(N>=0&&d>=0){var te={data:C.subarray(N,u),type:K,state:d};p.push(te)}if(0===p.length){var Z=this.getLastNalUnit(b.samples);if(Z){var re=new Uint8Array(Z.data.byteLength+C.byteLength);re.set(Z.data,0),re.set(C,Z.data.byteLength),Z.data=re}}return b.naluState=d,p},y.parseAACPES=function(b,C){var H,N,K,W,$,u=0,d=this.aacOverFlow,c=C.data;if(d){this.aacOverFlow=null;var p=d.missing,M=d.sample.unit.byteLength;if(-1===p){var S=new Uint8Array(M+c.byteLength);S.set(d.sample.unit,0),S.set(c,M),c=S}else{var F=M-p;d.sample.unit.set(c.subarray(0,p),F),b.samples.push(d.sample),u=d.missing}}for(H=u,N=c.length;H<N-1&&!G.isHeader(c,H);H++);if(H===u||(H<N-1?(K="AAC PES did not start with ADTS header,offset:"+H,W=!1):(K="no ADTS header found in AAC PES",W=!0),k.logger.warn("parsing error:"+K),this.observer.emit(Y.Events.ERROR,Y.Events.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:W,reason:K}),!W)){if(G.initTrackConfig(b,this.observer,c,H,this.audioCodec),void 0!==C.pts)$=C.pts;else{if(!d)return void k.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var Q=G.getFrameDuration(b.samplerate);$=d.sample.pts+Q}for(var Z,te=0;H<N;){if(H+=(Z=G.appendFrame(b,c,H,$,te)).length,Z.missing){this.aacOverFlow=Z;break}for(te++;H<N-1&&!G.isHeader(c,H);H++);}}},y.parseMPEGPES=function(b,C){var u=C.data,d=u.length,c=0,p=0,M=C.pts;if(void 0!==M)for(;p<d;)if(B.isHeader(u,p)){var S=B.appendFrame(b,u,p,M,c);if(!S)break;p+=S.length,c++}else p++;else k.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},y.parseID3PES=function(b,C){if(void 0!==C.pts){var u=O({},C,{type:this._avcTrack?R.MetadataSchema.emsg:R.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});b.samples.push(u)}else k.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},f}()},"./src/demux/webworkify-webpack.js":
/*!*****************************************!*\
                  !*** ./src/demux/webworkify-webpack.js ***!
                  \*****************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>x});var B=function(){var T=ENTRY_MODULE,_={},m=function h(E){var D=_[E];if(void 0!==D)return D.exports;var f=_[E]={exports:{}};return T[E].call(f.exports,f,f.exports,h),f.exports};m.m=T,m.n=function(h){var E=h&&h.__esModule?function(){return h.default}:function(){return h};return m.d(E,{a:E}),E},m.d=function(h,E){for(var D in E)m.o(E,D)&&!m.o(h,D)&&Object.defineProperty(h,D,{enumerable:!0,get:E[D]})},m.o=function(h,E){return Object.prototype.hasOwnProperty.call(h,E)},m.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var v=m(ENTRY_MODULE);return v.default||v}.toString().split("ENTRY_MODULE"),z="[\\.|\\-|\\+|\\w|/|@]+",V="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+z+").*?\\)";function Y(A){return(A+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function U(A){return!isNaN(1*A)}function k(A,T,_){var m={};m[_]=[];var v=T.toString().replace(/^"[^"]+"/,"function"),h=v.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||v.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!h)return m;for(var f,E=h[1],D=new RegExp("(\\\\n|\\W)"+Y(E)+V,"g");f=D.exec(v);)"dll-reference"!==f[3]&&m[_].push(f[3]);for(D=new RegExp("\\("+Y(E)+'\\("(dll-reference\\s('+z+'))"\\)\\)'+V,"g");f=D.exec(v);)A[f[2]]||(m[_].push(f[1]),A[f[2]]=P(f[1]).m),m[f[2]]=m[f[2]]||[],m[f[2]].push(f[4]);for(var y=Object.keys(m),w=0;w<y.length;w++)for(var b=0;b<m[y[w]].length;b++)U(m[y[w]][b])&&(m[y[w]][b]=1*m[y[w]][b]);return m}function L(A){return Object.keys(A).reduce(function(_,m){return _||A[m].length>0},!1)}function O(A,T,_,m){var v=A[m].map(function(h){return'"'+h+'": '+T[m][h].toString().replace(/^"[^"]+"/,"function")}).join(",");return B[0]+"{"+v+"}"+B[1]+'"'+_+'"'+B[2]}function x(A,T){var _={main:P.m},m=(T=T||{}).all?{main:Object.keys(_.main)}:function R(A,T){for(var _={main:[T]},m={main:[]},v={main:{}};L(_);)for(var h=Object.keys(_),E=0;E<h.length;E++){var D=h[E],y=_[D].pop();if(v[D]=v[D]||{},!v[D][y]&&A[D][y]){v[D][y]=!0,m[D]=m[D]||[],m[D].push(y);for(var w=k(A,A[D][y],D),b=Object.keys(w),C=0;C<b.length;C++)_[b[C]]=_[b[C]]||[],_[b[C]]=_[b[C]].concat(w[b[C]])}}return m}(_,A),v="";Object.keys(m).filter(function(y){return"main"!==y}).forEach(function(y){for(var w=0;m[y][w];)w++;m[y].push(w),_[y][w]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",v=v+"var "+y+" = ("+O(m,_,w,modules)+")();\n"}),v=v+"new (("+O(m,_,A,"main")+")())(self);";var h=new window.Blob([v],{type:"text/javascript"}),D=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(h),f=new window.Worker(D);return f.objectURL=D,f}},"./src/errors.ts":
/*!***********************!*\
                  !*** ./src/errors.ts ***!
                  \***********************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{ErrorDetails:()=>B,ErrorTypes:()=>G});var G=(()=>{return(z=G||(G={})).NETWORK_ERROR="networkError",z.MEDIA_ERROR="mediaError",z.KEY_SYSTEM_ERROR="keySystemError",z.MUX_ERROR="muxError",z.OTHER_ERROR="otherError",G;var z})(),B=(()=>{return(z=B||(B={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",z.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",z.KEY_SYSTEM_NO_SESSION="keySystemNoSession",z.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",z.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",z.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",z.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",z.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",z.MANIFEST_LOAD_ERROR="manifestLoadError",z.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",z.MANIFEST_PARSING_ERROR="manifestParsingError",z.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",z.LEVEL_EMPTY_ERROR="levelEmptyError",z.LEVEL_LOAD_ERROR="levelLoadError",z.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",z.LEVEL_SWITCH_ERROR="levelSwitchError",z.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",z.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",z.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",z.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",z.FRAG_LOAD_ERROR="fragLoadError",z.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",z.FRAG_DECRYPT_ERROR="fragDecryptError",z.FRAG_PARSING_ERROR="fragParsingError",z.REMUX_ALLOC_ERROR="remuxAllocError",z.KEY_LOAD_ERROR="keyLoadError",z.KEY_LOAD_TIMEOUT="keyLoadTimeOut",z.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",z.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",z.BUFFER_APPEND_ERROR="bufferAppendError",z.BUFFER_APPENDING_ERROR="bufferAppendingError",z.BUFFER_STALLED_ERROR="bufferStalledError",z.BUFFER_FULL_ERROR="bufferFullError",z.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",z.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",z.INTERNAL_EXCEPTION="internalException",z.INTERNAL_ABORTED="aborted",z.UNKNOWN="unknown",B;var z})()},"./src/events.ts":
/*!***********************!*\
                  !*** ./src/events.ts ***!
                  \***********************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{Events:()=>G});var G=(()=>{return(B=G||(G={})).MEDIA_ATTACHING="hlsMediaAttaching",B.MEDIA_ATTACHED="hlsMediaAttached",B.MEDIA_DETACHING="hlsMediaDetaching",B.MEDIA_DETACHED="hlsMediaDetached",B.BUFFER_RESET="hlsBufferReset",B.BUFFER_CODECS="hlsBufferCodecs",B.BUFFER_CREATED="hlsBufferCreated",B.BUFFER_APPENDING="hlsBufferAppending",B.BUFFER_APPENDED="hlsBufferAppended",B.BUFFER_EOS="hlsBufferEos",B.BUFFER_FLUSHING="hlsBufferFlushing",B.BUFFER_FLUSHED="hlsBufferFlushed",B.MANIFEST_LOADING="hlsManifestLoading",B.MANIFEST_LOADED="hlsManifestLoaded",B.MANIFEST_PARSED="hlsManifestParsed",B.LEVEL_SWITCHING="hlsLevelSwitching",B.LEVEL_SWITCHED="hlsLevelSwitched",B.LEVEL_LOADING="hlsLevelLoading",B.LEVEL_LOADED="hlsLevelLoaded",B.LEVEL_UPDATED="hlsLevelUpdated",B.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",B.LEVELS_UPDATED="hlsLevelsUpdated",B.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",B.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",B.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",B.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",B.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",B.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",B.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",B.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",B.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",B.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",B.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",B.CUES_PARSED="hlsCuesParsed",B.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",B.INIT_PTS_FOUND="hlsInitPtsFound",B.FRAG_LOADING="hlsFragLoading",B.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",B.FRAG_LOADED="hlsFragLoaded",B.FRAG_DECRYPTED="hlsFragDecrypted",B.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",B.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",B.FRAG_PARSING_METADATA="hlsFragParsingMetadata",B.FRAG_PARSED="hlsFragParsed",B.FRAG_BUFFERED="hlsFragBuffered",B.FRAG_CHANGED="hlsFragChanged",B.FPS_DROP="hlsFpsDrop",B.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",B.ERROR="hlsError",B.DESTROYING="hlsDestroying",B.KEY_LOADING="hlsKeyLoading",B.KEY_LOADED="hlsKeyLoaded",B.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",B.BACK_BUFFER_REACHED="hlsBackBufferReached",G;var B})()},"./src/hls.ts":
/*!********************!*\
                  !*** ./src/hls.ts ***!
                  \********************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>w});var G=P(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),z=P(
/*! ./loader/playlist-loader */
"./src/loader/playlist-loader.ts"),V=P(
/*! ./controller/id3-track-controller */
"./src/controller/id3-track-controller.ts"),Y=P(
/*! ./controller/latency-controller */
"./src/controller/latency-controller.ts"),U=P(
/*! ./controller/level-controller */
"./src/controller/level-controller.ts"),k=P(
/*! ./controller/fragment-tracker */
"./src/controller/fragment-tracker.ts"),L=P(
/*! ./loader/key-loader */
"./src/loader/key-loader.ts"),R=P(
/*! ./controller/stream-controller */
"./src/controller/stream-controller.ts"),O=P(
/*! ./is-supported */
"./src/is-supported.ts"),x=P(
/*! ./utils/logger */
"./src/utils/logger.ts"),A=P(
/*! ./config */
"./src/config.ts"),T=P(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),m=P(
/*! ./events */
"./src/events.ts"),v=P(
/*! ./errors */
"./src/errors.ts"),h=P(
/*! ./types/level */
"./src/types/level.ts");function E(b,C){for(var u=0;u<C.length;u++){var d=C[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,f(d.key),d)}}function f(b){var C=function y(b,C){if("object"!=typeof b||null===b)return b;var u=b[Symbol.toPrimitive];if(void 0!==u){var d=u.call(b,C||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===C?String:Number)(b)}(b,"string");return"symbol"==typeof C?C:String(C)}var w=function(){function b(u){void 0===u&&(u={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new T.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var d=this.config=(0,A.mergeConfig)(b.DefaultConfig,u);this.userConfig=u,(0,x.enableLogs)(d.debug,"Hls instance"),this._autoLevelCapping=-1,d.progressive&&(0,A.enableStreamingMode)(d);var p=d.bufferController,M=d.capLevelController,S=d.fpsController,F=this.abrController=new(0,d.abrController)(this),H=this.bufferController=new p(this),N=this.capLevelController=new M(this),K=new S(this),W=new z.default(this),$=new V.default(this),Q=this.levelController=new U.default(this),te=new k.FragmentTracker(this),Z=new L.default(this.config),re=this.streamController=new R.default(this,te,Z);N.setStreamController(re),K.setStreamController(re);var oe=[W,Q,re];this.networkControllers=oe;var ce=[F,H,N,K,$,te];this.audioTrackController=this.createController(d.audioTrackController,oe);var ue=d.audioStreamController;ue&&oe.push(new ue(this,te,Z)),this.subtitleTrackController=this.createController(d.subtitleTrackController,oe);var fe=d.subtitleStreamController;fe&&oe.push(new fe(this,te,Z)),this.createController(d.timelineController,ce),Z.emeController=this.emeController=this.createController(d.emeController,ce),this.cmcdController=this.createController(d.cmcdController,ce),this.latencyController=this.createController(Y.default,ce),this.coreComponents=ce}b.isSupported=function(){return(0,O.isSupported)()};var C=b.prototype;return C.createController=function(d,c){if(d){var p=new d(this);return c&&c.push(p),p}return null},C.on=function(d,c,p){void 0===p&&(p=this),this._emitter.on(d,c,p)},C.once=function(d,c,p){void 0===p&&(p=this),this._emitter.once(d,c,p)},C.removeAllListeners=function(d){this._emitter.removeAllListeners(d)},C.off=function(d,c,p,M){void 0===p&&(p=this),this._emitter.off(d,c,p,M)},C.listeners=function(d){return this._emitter.listeners(d)},C.emit=function(d,c,p){return this._emitter.emit(d,c,p)},C.trigger=function(d,c){if(this.config.debug)return this.emit(d,d,c);try{return this.emit(d,d,c)}catch(p){x.logger.error("An internal error happened while handling event "+d+'. Error message: "'+p.message+'". Here is a stacktrace:',p),this.trigger(m.Events.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:d,error:p})}return!1},C.listenerCount=function(d){return this._emitter.listenerCount(d)},C.destroy=function(){x.logger.log("destroy"),this.trigger(m.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(d){return d.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(d){return d.destroy()}),this.coreComponents.length=0},C.attachMedia=function(d){x.logger.log("attachMedia"),this._media=d,this.trigger(m.Events.MEDIA_ATTACHING,{media:d})},C.detachMedia=function(){x.logger.log("detachMedia"),this.trigger(m.Events.MEDIA_DETACHING,void 0),this._media=null},C.loadSource=function(d){this.stopLoad();var c=this.media,p=this.url,M=this.url=G.buildAbsoluteURL(self.location.href,d,{alwaysNormalize:!0});x.logger.log("loadSource:"+M),c&&p&&p!==M&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(c)),this.trigger(m.Events.MANIFEST_LOADING,{url:d})},C.startLoad=function(d){void 0===d&&(d=-1),x.logger.log("startLoad("+d+")"),this.networkControllers.forEach(function(c){c.startLoad(d)})},C.stopLoad=function(){x.logger.log("stopLoad"),this.networkControllers.forEach(function(d){d.stopLoad()})},C.swapAudioCodec=function(){x.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},C.recoverMediaError=function(){x.logger.log("recoverMediaError");var d=this._media;this.detachMedia(),d&&this.attachMedia(d)},C.removeLevel=function(d,c){void 0===c&&(c=0),this.levelController.removeLevel(d,c)},function D(b,C,u){C&&E(b.prototype,C),u&&E(b,u),Object.defineProperty(b,"prototype",{writable:!1})}(b,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(d){x.logger.log("set currentLevel:"+d),this.loadLevel=d,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(d){x.logger.log("set nextLevel:"+d),this.levelController.manualLevel=d,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(d){x.logger.log("set loadLevel:"+d),this.levelController.manualLevel=d}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(d){this.levelController.nextLoadLevel=d}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(d){x.logger.log("set firstLevel:"+d),this.levelController.firstLevel=d}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(d){x.logger.log("set startLevel:"+d),-1!==d&&(d=Math.max(d,this.minAutoLevel)),this.levelController.startLevel=d}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(d){var c=!!d;c!==this.config.capLevelToPlayerSize&&(c?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=c)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(d){this._autoLevelCapping!==d&&(x.logger.log("set autoLevelCapping:"+d),this._autoLevelCapping=d)}},{key:"bandwidthEstimate",get:function(){var d=this.abrController.bwEstimator;return d?d.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(d){h.HdcpLevels.indexOf(d)>-1&&(this._maxHdcpLevel=d)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var d=this.levels,c=this.config.minAutoBitrate;if(!d)return 0;for(var p=d.length,M=0;M<p;M++)if(d[M].maxBitrate>=c)return M;return 0}},{key:"maxAutoLevel",get:function(){var M,d=this.levels,c=this.autoLevelCapping,p=this.maxHdcpLevel;if(M=-1===c&&d&&d.length?d.length-1:c,p)for(var S=M;S--;){var F=d[S].attrs["HDCP-LEVEL"];if(F&&F<=p)return S}return M}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(d){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,d)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var d=this.audioTrackController;return d?d.audioTracks:[]}},{key:"audioTrack",get:function(){var d=this.audioTrackController;return d?d.audioTrack:-1},set:function(d){var c=this.audioTrackController;c&&(c.audioTrack=d)}},{key:"subtitleTracks",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTrack:-1},set:function(d){var c=this.subtitleTrackController;c&&(c.subtitleTrack=d)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var d=this.subtitleTrackController;return!!d&&d.subtitleDisplay},set:function(d){var c=this.subtitleTrackController;c&&(c.subtitleDisplay=d)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(d){this.config.lowLatencyMode=d}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return m.Events}},{key:"ErrorTypes",get:function(){return v.ErrorTypes}},{key:"ErrorDetails",get:function(){return v.ErrorDetails}},{key:"DefaultConfig",get:function(){return b.defaultConfig?b.defaultConfig:A.hlsDefaultConfig},set:function(d){b.defaultConfig=d}}]),b}();w.defaultConfig=void 0},"./src/is-supported.ts":
/*!*****************************!*\
                  !*** ./src/is-supported.ts ***!
                  \*****************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{changeTypeSupported:()=>V,isSupported:()=>z});var G=P(
/*! ./utils/mediasource-helper */
"./src/utils/mediasource-helper.ts");function B(){return self.SourceBuffer||self.WebKitSourceBuffer}function z(){var Y=(0,G.getMediaSource)();if(!Y)return!1;var U=B();return!(!Y||"function"!=typeof Y.isTypeSupported||!Y.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||U&&(!U.prototype||"function"!=typeof U.prototype.appendBuffer||"function"!=typeof U.prototype.remove))}function V(){var Y,U=B();return"function"==typeof(null==U||null===(Y=U.prototype)||void 0===Y?void 0:Y.changeType)}},"./src/loader/date-range.ts":
/*!**********************************!*\
                  !*** ./src/loader/date-range.ts ***!
                  \**********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{DateRange:()=>O,DateRangeAttribute:()=>R});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts"),z=P(
/*! ../utils/logger */
"./src/utils/logger.ts");function V(){return V=Object.assign?Object.assign.bind():function(x){for(var A=1;A<arguments.length;A++){var T=arguments[A];for(var _ in T)Object.prototype.hasOwnProperty.call(T,_)&&(x[_]=T[_])}return x},V.apply(this,arguments)}function Y(x,A){for(var T=0;T<A.length;T++){var _=A[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,k(_.key),_)}}function k(x){var A=function L(x,A){if("object"!=typeof x||null===x)return x;var T=x[Symbol.toPrimitive];if(void 0!==T){var _=T.call(x,A||"default");if("object"!=typeof _)return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===A?String:Number)(x)}(x,"string");return"symbol"==typeof A?A:String(A)}var R=(()=>{return(x=R||(R={})).ID="ID",x.CLASS="CLASS",x.START_DATE="START-DATE",x.DURATION="DURATION",x.END_DATE="END-DATE",x.END_ON_NEXT="END-ON-NEXT",x.PLANNED_DURATION="PLANNED-DURATION",x.SCTE35_OUT="SCTE35-OUT",x.SCTE35_IN="SCTE35-IN",R;var x})(),O=function(){function x(A,T){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,T){var _=T.attr;for(var m in _)if(Object.prototype.hasOwnProperty.call(A,m)&&A[m]!==_[m]){z.logger.warn('DATERANGE tag attribute: "'+m+'" does not match for tags with ID: "'+A.ID+'"'),this._badValueForSameId=m;break}A=V(new B.AttrList({}),_,A)}if(this.attr=A,this._startDate=new Date(A[R.START_DATE]),R.END_DATE in this.attr){var v=new Date(this.attr[R.END_DATE]);(0,G.isFiniteNumber)(v.getTime())&&(this._endDate=v)}}return function U(x,A,T){A&&Y(x.prototype,A),T&&Y(x,T),Object.defineProperty(x,"prototype",{writable:!1})}(x,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var T=this.duration;return null!==T?new Date(this._startDate.getTime()+1e3*T):null}},{key:"duration",get:function(){if(R.DURATION in this.attr){var T=this.attr.decimalFloatingPoint(R.DURATION);if((0,G.isFiniteNumber)(T))return T}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return R.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(R.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(R.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,G.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),x}()},"./src/loader/fragment-loader.ts":
/*!***************************************!*\
                  !*** ./src/loader/fragment-loader.ts ***!
                  \***************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{LoadError:()=>T,default:()=>x});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../errors */
"./src/errors.ts");function V(_){var m="function"==typeof Map?new Map:void 0;return V=function(h){if(null===h||!function k(_){return-1!==Function.toString.call(_).indexOf("[native code]")}(h))return h;if("function"!=typeof h)throw new TypeError("Super expression must either be null or a function");if(typeof m<"u"){if(m.has(h))return m.get(h);m.set(h,E)}function E(){return Y(h,arguments,R(this).constructor)}return E.prototype=Object.create(h.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),L(E,h)},V(_)}function Y(_,m,v){return(Y=function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(E,D,f){var y=[null];y.push.apply(y,D);var b=new(Function.bind.apply(E,y));return f&&L(b,f.prototype),b}).apply(null,arguments)}function L(_,m){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,E){return h.__proto__=E,h})(_,m)}function R(_){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)})(_)}var O=Math.pow(2,17),x=function(){function _(v){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=v}var m=_.prototype;return m.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},m.abort=function(){this.loader&&this.loader.abort()},m.load=function(h,E){var D=this,f=h.url;if(!f)return Promise.reject(new T({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,networkDetails:null},"Fragment does not have a "+(f?"part list":"url")));this.abort();var y=this.config,w=y.fLoader,b=y.loader;return new Promise(function(C,u){D.loader&&D.loader.destroy();var d=D.loader=h.loader=w?new w(y):new b(y),c=A(h),p={timeout:y.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:y.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===h.sn?1/0:O};h.stats=d.stats,d.load(c,p,{onSuccess:function(S,F,H,N){D.resetLoader(h,d);var K=S.data;H.resetIV&&h.decryptdata&&(h.decryptdata.iv=new Uint8Array(K.slice(0,16)),K=K.slice(16)),C({frag:h,part:null,payload:K,networkDetails:N})},onError:function(S,F,H){D.resetLoader(h,d),u(new T({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,response:S,networkDetails:H}))},onAbort:function(S,F,H){D.resetLoader(h,d),u(new T({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:h,networkDetails:H}))},onTimeout:function(S,F,H){D.resetLoader(h,d),u(new T({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:h,networkDetails:H}))},onProgress:function(S,F,H,N){E&&E({frag:h,part:null,payload:H,networkDetails:N})}})})},m.loadPart=function(h,E,D){var f=this;this.abort();var y=this.config,w=y.fLoader,b=y.loader;return new Promise(function(C,u){f.loader&&f.loader.destroy();var d=f.loader=h.loader=w?new w(y):new b(y),c=A(h,E),p={timeout:y.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:y.fragLoadingMaxRetryTimeout,highWaterMark:O};E.stats=d.stats,d.load(c,p,{onSuccess:function(S,F,H,N){f.resetLoader(h,d),f.updateStatsFromPart(h,E);var K={frag:h,part:E,payload:S.data,networkDetails:N};D(K),C(K)},onError:function(S,F,H){f.resetLoader(h,d),u(new T({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,part:E,response:S,networkDetails:H}))},onAbort:function(S,F,H){h.stats.aborted=E.stats.aborted,f.resetLoader(h,d),u(new T({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:h,part:E,networkDetails:H}))},onTimeout:function(S,F,H){f.resetLoader(h,d),u(new T({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:h,part:E,networkDetails:H}))}})})},m.updateStatsFromPart=function(h,E){var D=h.stats,f=E.stats,y=f.total;if(D.loaded+=f.loaded,y){var w=Math.round(h.duration/E.duration),b=Math.min(Math.round(D.loaded/y),w),u=(w-b)*Math.round(D.loaded/b);D.total=D.loaded+u}else D.total=Math.max(D.loaded,D.total);var d=D.loading,c=f.loading;d.start?d.first+=c.first-c.start:(d.start=c.start,d.first=c.first),d.end=c.end},m.resetLoader=function(h,E){h.loader=null,this.loader===E&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),E.destroy()},_}();function A(_,m){void 0===m&&(m=null);var v=m||_,h={frag:_,part:m,responseType:"arraybuffer",url:v.url,headers:{},rangeStart:0,rangeEnd:0},E=v.byteRangeStartOffset,D=v.byteRangeEndOffset;if((0,G.isFiniteNumber)(E)&&(0,G.isFiniteNumber)(D)){var f,y=E,w=D;if("initSegment"===_.sn&&"AES-128"===(null===(f=_.decryptdata)||void 0===f?void 0:f.method)){var b=D-E;b%16&&(w=D+(16-b%16)),0!==E&&(h.resetIV=!0,y=E-16)}h.rangeStart=y,h.rangeEnd=w}return h}var T=function(_){function m(v){for(var h,E=arguments.length,D=new Array(E>1?E-1:0),f=1;f<E;f++)D[f-1]=arguments[f];return(h=_.call.apply(_,[this].concat(D))||this).data=void 0,h.data=v,h}return function z(_,m){_.prototype=Object.create(m.prototype),_.prototype.constructor=_,L(_,m)}(m,_),m}(V(Error))},"./src/loader/fragment.ts":
/*!********************************!*\
                  !*** ./src/loader/fragment.ts ***!
                  \********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{BaseSegment:()=>A,ElementaryStreamTypes:()=>x,Fragment:()=>T,Part:()=>_});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),V=P(
/*! ./load-stats */
"./src/loader/load-stats.ts");function Y(m,v){m.prototype=Object.create(v.prototype),m.prototype.constructor=m,U(m,v)}function U(m,v){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,D){return E.__proto__=D,E})(m,v)}function k(m,v){for(var h=0;h<v.length;h++){var E=v[h];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,R(E.key),E)}}function L(m,v,h){return v&&k(m.prototype,v),h&&k(m,h),Object.defineProperty(m,"prototype",{writable:!1}),m}function R(m){var v=function O(m,v){if("object"!=typeof m||null===m)return m;var h=m[Symbol.toPrimitive];if(void 0!==h){var E=h.call(m,v||"default");if("object"!=typeof E)return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(m)}(m,"string");return"symbol"==typeof v?v:String(v)}var x=(()=>{return(m=x||(x={})).AUDIO="audio",m.VIDEO="video",m.AUDIOVIDEO="audiovideo",x;var m})(),A=function(){function m(h){var E;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((E={})[x.AUDIO]=null,E[x.VIDEO]=null,E[x.AUDIOVIDEO]=null,E),this.baseurl=h}return m.prototype.setByteRange=function(E,D){var f=E.split("@",2),y=[];y[0]=1===f.length?D?D.byteRangeEndOffset:0:parseInt(f[1]),y[1]=parseInt(f[0])+y[0],this._byteRange=y},L(m,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,B.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(E){this._url=E}}]),m}(),T=function(m){function v(E,D){var f;return(f=m.call(this,D)||this)._decryptdata=null,f.rawProgramDateTime=null,f.programDateTime=null,f.tagList=[],f.duration=0,f.sn=0,f.levelkeys=void 0,f.type=void 0,f.loader=null,f.keyLoader=null,f.level=-1,f.cc=0,f.startPTS=void 0,f.endPTS=void 0,f.appendedPTS=void 0,f.startDTS=void 0,f.endDTS=void 0,f.start=0,f.deltaPTS=void 0,f.maxStartPTS=void 0,f.minEndPTS=void 0,f.stats=new V.LoadStats,f.urlId=0,f.data=void 0,f.bitrateTest=!1,f.title=null,f.initSegment=null,f.endList=void 0,f.type=E,f}Y(v,m);var h=v.prototype;return h.setKeyFormat=function(D){if(this.levelkeys){var f=this.levelkeys[D];f&&!this._decryptdata&&(this._decryptdata=f.getDecryptData(this.sn))}},h.abortRequests=function(){var D,f;null===(D=this.loader)||void 0===D||D.abort(),null===(f=this.keyLoader)||void 0===f||f.abort()},h.setElementaryStreamInfo=function(D,f,y,w,b,C){void 0===C&&(C=!1);var u=this.elementaryStreams,d=u[D];d?(d.startPTS=Math.min(d.startPTS,f),d.endPTS=Math.max(d.endPTS,y),d.startDTS=Math.min(d.startDTS,w),d.endDTS=Math.max(d.endDTS,b)):u[D]={startPTS:f,endPTS:y,startDTS:w,endDTS:b,partial:C}},h.clearElementaryStreamInfo=function(){var D=this.elementaryStreams;D[x.AUDIO]=null,D[x.VIDEO]=null,D[x.AUDIOVIDEO]=null},L(v,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var f=this.levelkeys.identity;if(f)this._decryptdata=f.getDecryptData(this.sn);else{var y=Object.keys(this.levelkeys);if(1===y.length)return this._decryptdata=this.levelkeys[y[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!(0,G.isFiniteNumber)(this.programDateTime))return null;var D=(0,G.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*D}},{key:"encrypted",get:function(){var D;if(null!==(D=this._decryptdata)&&void 0!==D&&D.encrypted)return!0;if(this.levelkeys){var f=Object.keys(this.levelkeys),y=f.length;if(y>1||1===y&&this.levelkeys[f[0]].encrypted)return!0}return!1}}]),v}(A),_=function(m){function v(h,E,D,f,y){var w;(w=m.call(this,D)||this).fragOffset=0,w.duration=0,w.gap=!1,w.independent=!1,w.relurl=void 0,w.fragment=void 0,w.index=void 0,w.stats=new V.LoadStats,w.duration=h.decimalFloatingPoint("DURATION"),w.gap=h.bool("GAP"),w.independent=h.bool("INDEPENDENT"),w.relurl=h.enumeratedString("URI"),w.fragment=E,w.index=f;var b=h.enumeratedString("BYTERANGE");return b&&w.setByteRange(b,y),y&&(w.fragOffset=y.fragOffset+y.duration),w}return Y(v,m),L(v,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var E=this.elementaryStreams;return!!(E.audio||E.video||E.audiovideo)}}]),v}(A)},"./src/loader/key-loader.ts":
/*!**********************************!*\
                  !*** ./src/loader/key-loader.ts ***!
                  \**********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>z});var G=P(
/*! ../errors */
"./src/errors.ts"),B=P(
/*! ./fragment-loader */
"./src/loader/fragment-loader.ts"),z=function(){function V(U){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=U}var Y=V.prototype;return Y.abort=function(){for(var k in this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[k].loader;L&&L.abort()}},Y.detach=function(){for(var k in this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[k];(L.mediaKeySessionContext||L.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[k]}},Y.destroy=function(){for(var k in this.detach(),this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[k].loader;L&&L.destroy()}this.keyUriToKeyInfo={}},Y.createKeyLoadError=function(k,L,R,O){return void 0===L&&(L=G.ErrorDetails.KEY_LOAD_ERROR),new B.LoadError({type:G.ErrorTypes.NETWORK_ERROR,details:L,fatal:!1,frag:k,networkDetails:R})},Y.loadClear=function(k,L){var R=this;if(this.emeController&&this.config.emeEnabled)for(var O=k.sn,x=k.cc,A=function(v){var h=L[v];if(x<=h.cc&&("initSegment"===O||O<h.sn))return R.emeController.selectKeySystemFormat(h).then(function(E){h.setKeyFormat(E)}),"break"},T=0;T<L.length&&"break"!==A(T);T++);},Y.load=function(k){var L=this;return!k.decryptdata&&k.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(k).then(function(R){return L.loadInternal(k,R)}):this.loadInternal(k)},Y.loadInternal=function(k,L){var R,O;L&&k.setKeyFormat(L);var x=k.decryptdata;if(!x)return Promise.reject(this.createKeyLoadError(k,G.ErrorDetails.KEY_LOAD_ERROR,null,L?"Expected frag.decryptdata to be defined after setting format "+L:"Missing decryption data on fragment in onKeyLoading"));var T=x.uri;if(!T)return Promise.reject(this.createKeyLoadError(k,G.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+T+'"'));var m,_=this.keyUriToKeyInfo[T];if(null!==(R=_)&&void 0!==R&&R.decryptdata.key)return x.key=_.decryptdata.key,Promise.resolve({frag:k,keyInfo:_});if(null!==(O=_)&&void 0!==O&&O.keyLoadPromise)switch(null===(m=_.mediaKeySessionContext)||void 0===m?void 0:m.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return _.keyLoadPromise.then(function(v){return x.key=v.keyInfo.decryptdata.key,{frag:k,keyInfo:_}})}switch(_=this.keyUriToKeyInfo[T]={decryptdata:x,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},x.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===x.keyFormat?this.loadKeyHTTP(_,k):this.loadKeyEME(_,k);case"AES-128":return this.loadKeyHTTP(_,k);default:return Promise.reject(this.createKeyLoadError(k,G.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+x.method+'"'))}},Y.loadKeyEME=function(k,L){var R={frag:L,keyInfo:k};if(this.emeController&&this.config.emeEnabled){var O=this.emeController.loadKey(R);if(O)return(k.keyLoadPromise=O.then(function(x){return k.mediaKeySessionContext=x,R})).catch(function(x){throw k.keyLoadPromise=null,x})}return Promise.resolve(R)},Y.loadKeyHTTP=function(k,L){var R=this,O=this.config,A=new(0,O.loader)(O);return L.keyLoader=k.loader=A,k.keyLoadPromise=new Promise(function(T,_){A.load({keyInfo:k,frag:L,responseType:"arraybuffer",url:k.decryptdata.uri},{timeout:O.fragLoadingTimeOut,maxRetry:0,retryDelay:O.fragLoadingRetryDelay,maxRetryDelay:O.fragLoadingMaxRetryTimeout,highWaterMark:0},{onSuccess:function(D,f,y,w){var b=y.frag,C=y.keyInfo;if(!b.decryptdata||C!==R.keyUriToKeyInfo[y.url])return _(R.createKeyLoadError(b,G.ErrorDetails.KEY_LOAD_ERROR,w,"after key load, decryptdata unset or changed"));C.decryptdata.key=b.decryptdata.key=new Uint8Array(D.data),b.keyLoader=null,C.loader=null,T({frag:b,keyInfo:C})},onError:function(D,f,y){R.resetLoader(f),_(R.createKeyLoadError(L,G.ErrorDetails.KEY_LOAD_ERROR,y))},onTimeout:function(D,f,y){R.resetLoader(f),_(R.createKeyLoadError(L,G.ErrorDetails.KEY_LOAD_TIMEOUT,y))},onAbort:function(D,f,y){R.resetLoader(f),_(R.createKeyLoadError(L,G.ErrorDetails.INTERNAL_ABORTED,y))}})})},Y.resetLoader=function(k){var L=k.frag,R=k.keyInfo,O=k.url,x=R.loader;L.keyLoader===x&&(L.keyLoader=null,R.loader=null),delete this.keyUriToKeyInfo[O],x&&x.destroy()},V}()},"./src/loader/level-details.ts":
/*!*************************************!*\
                  !*** ./src/loader/level-details.ts ***!
                  \*************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{LevelDetails:()=>k});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts");function B(L,R){for(var O=0;O<R.length;O++){var x=R[O];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(L,V(x.key),x)}}function V(L){var R=function Y(L,R){if("object"!=typeof L||null===L)return L;var O=L[Symbol.toPrimitive];if(void 0!==O){var x=O.call(L,R||"default");if("object"!=typeof x)return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(L)}(L,"string");return"symbol"==typeof R?R:String(R)}var k=function(){function L(O){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=O}return L.prototype.reloaded=function(x){if(!x)return this.advanced=!0,void(this.updated=!0);var A=this.lastPartSn-x.lastPartSn,T=this.lastPartIndex-x.lastPartIndex;this.updated=this.endSN!==x.endSN||!!T||!!A,this.advanced=this.endSN>x.endSN||A>0||0===A&&T>0,this.misses=this.updated||this.advanced?Math.floor(.6*x.misses):x.misses+1,this.availabilityDelay=x.availabilityDelay},function z(L,R,O){R&&B(L.prototype,R),O&&B(L,O),Object.defineProperty(L,"prototype",{writable:!1})}(L,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,G.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var x=this.driftEndTime-this.driftStartTime;return x>0?1e3*(this.driftEnd-this.driftStart)/x:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var x;return null!==(x=this.partList)&&void 0!==x&&x.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var x;return null!==(x=this.fragments)&&void 0!==x&&x.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var x;return null!==(x=this.partList)&&void 0!==x&&x.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var x;return null!==(x=this.partList)&&void 0!==x&&x.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),L}()},"./src/loader/level-key.ts":
/*!*********************************!*\
                  !*** ./src/loader/level-key.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{LevelKey:()=>k});var G=P(
/*! ../utils/keysystem-util */
"./src/utils/keysystem-util.ts"),B=P(
/*! ../utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts"),z=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),V=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=P(
/*! ../utils/numeric-encoding-utils */
"./src/utils/numeric-encoding-utils.ts"),U={},k=function(){function R(x,A,T,_,m){void 0===_&&(_=[1]),void 0===m&&(m=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=x,this.uri=A,this.keyFormat=T,this.keyFormatVersions=_,this.iv=m,this.encrypted=!!x&&"NONE"!==x,this.isCommonEncryption=this.encrypted&&"AES-128"!==x}R.clearKeyUriToKeyIdMap=function(){U={}};var O=R.prototype;return O.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;switch(this.keyFormat){case"identity":return"SAMPLE-AES"===this.method;case B.KeySystemFormats.FAIRPLAY:case B.KeySystemFormats.WIDEVINE:case B.KeySystemFormats.PLAYREADY:case B.KeySystemFormats.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},O.getDecryptData=function(A){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof A&&("AES-128"===this.method&&!this.iv&&V.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),A=0);var T=function L(R){for(var O=new Uint8Array(16),x=12;x<16;x++)O[x]=R>>8*(15-x)&255;return O}(A);return new R(this.method,this.uri,"identity",this.keyFormatVersions,T)}var m=(0,G.convertDataUriToArrayBytes)(this.uri);if(m)switch(this.keyFormat){case B.KeySystemFormats.WIDEVINE:this.pssh=m,m.length>=22&&(this.keyId=m.subarray(m.length-22,m.length-6));break;case B.KeySystemFormats.PLAYREADY:var v=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,z.mp4pssh)(v,null,m);var h=new Uint16Array(m.buffer,m.byteOffset,m.byteLength/2),E=String.fromCharCode.apply(null,Array.from(h)),D=E.substring(E.indexOf("<"),E.length),w=(new DOMParser).parseFromString(D,"text/xml").getElementsByTagName("KID")[0];if(w){var b=w.childNodes[0]?w.childNodes[0].nodeValue:w.getAttribute("VALUE");if(b){var C=(0,Y.base64Decode)(b).subarray(0,16);(0,G.changeEndianness)(C),this.keyId=C}}break;default:var u=m.subarray(0,16);if(16!==u.length){var d=new Uint8Array(16);d.set(u,16-u.length),u=d}this.keyId=u}if(!this.keyId||16!==this.keyId.byteLength){var c=U[this.uri];if(!c){var p=Object.keys(U).length%Number.MAX_SAFE_INTEGER;c=new Uint8Array(16),new DataView(c.buffer,12,4).setUint32(0,p),U[this.uri]=c}this.keyId=c}return this},R}()},"./src/loader/load-stats.ts":
/*!**********************************!*\
                  !*** ./src/loader/load-stats.ts ***!
                  \**********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{LoadStats:()=>G});var G=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":
/*!***********************************!*\
                  !*** ./src/loader/m3u8-parser.ts ***!
                  \***********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>v});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),V=P(
/*! ./date-range */
"./src/loader/date-range.ts"),Y=P(
/*! ./fragment */
"./src/loader/fragment.ts"),U=P(
/*! ./level-details */
"./src/loader/level-details.ts"),k=P(
/*! ./level-key */
"./src/loader/level-key.ts"),L=P(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts"),R=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),O=P(
/*! ../utils/codecs */
"./src/utils/codecs.ts");function x(){return x=Object.assign?Object.assign.bind():function(C){for(var u=1;u<arguments.length;u++){var d=arguments[u];for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(C[c]=d[c])}return C},x.apply(this,arguments)}var A=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,T=/#EXT-X-MEDIA:(.*)/g,_=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),m=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),v=function(){function C(){}return C.findGroup=function(d,c){for(var p=0;p<d.length;p++){var M=d[p];if(M.id===c)return M}},C.convertAVC1ToAVCOTI=function(d){var c=d.split(".");if(c.length>2){var p=c.shift()+".";return(p+=parseInt(c.shift()).toString(16))+("000"+parseInt(c.shift()).toString(16)).slice(-4)}return d},C.resolve=function(d,c){return(0,B.buildAbsoluteURL)(c,d,{alwaysNormalize:!0})},C.parseMasterPlaylist=function(d,c){var N,p=[],M=[],S={},F=[],H=!1;for(A.lastIndex=0;null!=(N=A.exec(d));)if(N[1]){var K,W=new L.AttrList(N[1]),$={attrs:W,bitrate:W.decimalInteger("AVERAGE-BANDWIDTH")||W.decimalInteger("BANDWIDTH"),name:W.NAME,url:C.resolve(N[2],c)},Q=W.decimalResolution("RESOLUTION");Q&&($.width=Q.width,$.height=Q.height),E((W.CODECS||"").split(/[ ,]+/).filter(function(ce){return ce}),$),$.videoCodec&&-1!==$.videoCodec.indexOf("avc1")&&($.videoCodec=C.convertAVC1ToAVCOTI($.videoCodec)),null!==(K=$.unknownCodecs)&&void 0!==K&&K.length||M.push($),p.push($)}else if(N[3]){var te=new L.AttrList(N[3]);te["DATA-ID"]&&(H=!0,S[te["DATA-ID"]]=te)}else if(N[4]){var Z=N[4],re=h(Z,c);re.encrypted&&re.isSupported()?F.push(re):R.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+Z+'"')}return{levels:M.length>0&&M.length<p.length?M:p,sessionData:H?S:null,sessionKeys:F.length?F:null}},C.parseMasterPlaylistMedia=function(d,c,p,M){void 0===M&&(M=[]);var S,F=[],H=0;for(T.lastIndex=0;null!==(S=T.exec(d));){var N=new L.AttrList(S[1]);if(N.TYPE===p){var K={attrs:N,bitrate:0,id:H++,groupId:N["GROUP-ID"],instreamId:N["INSTREAM-ID"],name:N.NAME||N.LANGUAGE||"",type:p,default:N.bool("DEFAULT"),autoselect:N.bool("AUTOSELECT"),forced:N.bool("FORCED"),lang:N.LANGUAGE,url:N.URI?C.resolve(N.URI,c):""};if(M.length){var W=C.findGroup(M,K.groupId)||M[0];D(K,W,"audioCodec"),D(K,W,"textCodec")}F.push(K)}}return F},C.parseLevelPlaylist=function(d,c,p,M,S){var re,oe,ce,F=new U.LevelDetails(c),H=F.fragments,N=null,K=0,W=0,$=0,Q=0,te=null,Z=new Y.Fragment(M,c),ue=-1,fe=!1;for(_.lastIndex=0,F.m3u8=d;null!==(re=_.exec(d));){fe&&(fe=!1,(Z=new Y.Fragment(M,c)).start=$,Z.sn=K,Z.cc=Q,Z.level=p,N&&(Z.initSegment=N,Z.rawProgramDateTime=N.rawProgramDateTime,N.rawProgramDateTime=null));var De=re[1];if(De){Z.duration=parseFloat(De);var Re=(" "+re[2]).slice(1);Z.title=Re||null,Z.tagList.push(Re?["INF",De,Re]:["INF",De])}else if(re[3])(0,G.isFiniteNumber)(Z.duration)&&(Z.start=$,ce&&b(Z,ce,F),Z.sn=K,Z.level=p,Z.cc=Q,Z.urlId=S,H.push(Z),Z.relurl=(" "+re[3]).slice(1),y(Z,te),te=Z,$+=Z.duration,K++,W=0,fe=!0);else if(re[4]){var Te=(" "+re[4]).slice(1);te?Z.setByteRange(Te,te):Z.setByteRange(Te)}else if(re[5])Z.rawProgramDateTime=(" "+re[5]).slice(1),Z.tagList.push(["PROGRAM-DATE-TIME",Z.rawProgramDateTime]),-1===ue&&(ue=H.length);else{if(!(re=re[0].match(m))){R.logger.warn("No matches on slow regex match for level playlist!");continue}for(oe=1;oe<re.length&&!(typeof re[oe]<"u");oe++);var Ce=(" "+re[oe]).slice(1),we=(" "+re[oe+1]).slice(1),et=re[oe+2]?(" "+re[oe+2]).slice(1):"";switch(Ce){case"PLAYLIST-TYPE":F.type=we.toUpperCase();break;case"MEDIA-SEQUENCE":K=F.startSN=parseInt(we);break;case"SKIP":var ct=new L.AttrList(we),Ft=ct.decimalInteger("SKIPPED-SEGMENTS");if((0,G.isFiniteNumber)(Ft)){F.skippedSegments=Ft;for(var bt=Ft;bt--;)H.unshift(null);K+=Ft}var kt=ct.enumeratedString("RECENTLY-REMOVED-DATERANGES");kt&&(F.recentlyRemovedDateranges=kt.split("\t"));break;case"TARGETDURATION":F.targetduration=parseFloat(we);break;case"VERSION":F.version=parseInt(we);break;case"EXTM3U":break;case"ENDLIST":F.live=!1;break;case"#":(we||et)&&Z.tagList.push(et?[we,et]:[we]);break;case"DISCONTINUITY":Q++,Z.tagList.push(["DIS"]);break;case"GAP":Z.tagList.push([Ce]);break;case"BITRATE":Z.tagList.push([Ce,we]);break;case"DATERANGE":var gt=new L.AttrList(we),Rt=new V.DateRange(gt,F.dateRanges[gt.ID]);Rt.isValid||F.skippedSegments?F.dateRanges[Rt.id]=Rt:R.logger.warn('Ignoring invalid DATERANGE tag: "'+we+'"'),Z.tagList.push(["EXT-X-DATERANGE",we]);break;case"DISCONTINUITY-SEQUENCE":Q=parseInt(we);break;case"KEY":var vt=h(we,c);if(vt.isSupported()){if("NONE"===vt.method){ce=void 0;break}ce||(ce={}),ce[vt.keyFormat]&&(ce=x({},ce)),ce[vt.keyFormat]=vt}else R.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+we+'"');break;case"START":var hn=new L.AttrList(we).decimalFloatingPoint("TIME-OFFSET");(0,G.isFiniteNumber)(hn)&&(F.startTimeOffset=hn);break;case"MAP":var Mt=new L.AttrList(we);if(Z.duration){var xn=new Y.Fragment(M,c);w(xn,Mt,p,ce),Z.initSegment=N=xn,N.rawProgramDateTime&&!Z.rawProgramDateTime&&(Z.rawProgramDateTime=N.rawProgramDateTime)}else w(Z,Mt,p,ce),N=Z,fe=!0;break;case"SERVER-CONTROL":var Fn=new L.AttrList(we);F.canBlockReload=Fn.bool("CAN-BLOCK-RELOAD"),F.canSkipUntil=Fn.optionalFloat("CAN-SKIP-UNTIL",0),F.canSkipDateRanges=F.canSkipUntil>0&&Fn.bool("CAN-SKIP-DATERANGES"),F.partHoldBack=Fn.optionalFloat("PART-HOLD-BACK",0),F.holdBack=Fn.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var or=new L.AttrList(we);F.partTarget=or.decimalFloatingPoint("PART-TARGET");break;case"PART":var zn=F.partList;zn||(zn=F.partList=[]);var sr=W>0?zn[zn.length-1]:void 0,Dr=W++,Gn=new Y.Part(new L.AttrList(we),Z,c,Dr,sr);zn.push(Gn),Z.duration+=Gn.duration;break;case"PRELOAD-HINT":var _n=new L.AttrList(we);F.preloadHint=_n;break;case"RENDITION-REPORT":var Dn=new L.AttrList(we);F.renditionReports=F.renditionReports||[],F.renditionReports.push(Dn);break;default:R.logger.warn("line parsed but not handled: "+re)}}}te&&!te.relurl?(H.pop(),$-=te.duration,F.partList&&(F.fragmentHint=te)):F.partList&&(y(Z,te),Z.cc=Q,F.fragmentHint=Z,ce&&b(Z,ce,F));var $n=H.length,Yn=H[0],Ut=H[$n-1];if(($+=F.skippedSegments*F.targetduration)>0&&$n&&Ut){F.averagetargetduration=$/$n;var Cn=Ut.sn;F.endSN="initSegment"!==Cn?Cn:0,F.live||(Ut.endList=!0),Yn&&(F.startCC=Yn.cc)}else F.endSN=0,F.startCC=0;return F.fragmentHint&&($+=F.fragmentHint.duration),F.totalduration=$,F.endCC=Q,ue>0&&function f(C,u){for(var d=C[u],c=u;c--;){var p=C[c];if(!p)return;p.programDateTime=d.programDateTime-1e3*p.duration,d=p}}(H,ue),F},C}();function h(C,u){var d,c,p=new L.AttrList(C),M=null!=(d=p.enumeratedString("METHOD"))?d:"",S=p.URI,F=p.hexadecimalInteger("IV"),H=p.enumeratedString("KEYFORMATVERSIONS"),N=null!=(c=p.enumeratedString("KEYFORMAT"))?c:"identity";S&&p.IV&&!F&&R.logger.error("Invalid IV: "+p.IV);var K=S?v.resolve(S,u):"",W=(H||"1").split("/").map(Number).filter(Number.isFinite);return new k.LevelKey(M,K,N,W,F)}function E(C,u){["video","audio","text"].forEach(function(d){var c=C.filter(function(M){return(0,O.isCodecType)(M,d)});if(c.length){var p=c.filter(function(M){return 0===M.lastIndexOf("avc1",0)||0===M.lastIndexOf("mp4a",0)});u[d+"Codec"]=p.length>0?p[0]:c[0],C=C.filter(function(M){return-1===c.indexOf(M)})}}),u.unknownCodecs=C}function D(C,u,d){var c=u[d];c&&(C[d]=c)}function y(C,u){C.rawProgramDateTime?C.programDateTime=Date.parse(C.rawProgramDateTime):null!=u&&u.programDateTime&&(C.programDateTime=u.endProgramDateTime),(0,G.isFiniteNumber)(C.programDateTime)||(C.programDateTime=null,C.rawProgramDateTime=null)}function w(C,u,d,c){C.relurl=u.URI,u.BYTERANGE&&C.setByteRange(u.BYTERANGE),C.level=d,C.sn="initSegment",c&&(C.levelkeys=c),C.initSegment=null}function b(C,u,d){C.levelkeys=u;var c=d.encryptedFragments;(!c.length||c[c.length-1].levelkeys!==u)&&Object.keys(u).some(function(p){return u[p].isCommonEncryption})&&c.push(C)}},"./src/loader/playlist-loader.ts":
/*!***************************************!*\
                  !*** ./src/loader/playlist-loader.ts ***!
                  \***************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>x});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../events */
"./src/events.ts"),z=P(
/*! ../errors */
"./src/errors.ts"),V=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=P(
/*! ./m3u8-parser */
"./src/loader/m3u8-parser.ts"),U=P(
/*! ../types/loader */
"./src/types/loader.ts"),k=P(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts");function R(A,T){var _=A.url;return(void 0===_||0===_.indexOf("data:"))&&(_=T.url),_}const x=function(){function A(_){this.hls=void 0,this.loaders=Object.create(null),this.hls=_,this.registerListeners()}var T=A.prototype;return T.startLoad=function(m){},T.stopLoad=function(){this.destroyInternalLoaders()},T.registerListeners=function(){var m=this.hls;m.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),m.on(B.Events.LEVEL_LOADING,this.onLevelLoading,this),m.on(B.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),m.on(B.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},T.unregisterListeners=function(){var m=this.hls;m.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),m.off(B.Events.LEVEL_LOADING,this.onLevelLoading,this),m.off(B.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),m.off(B.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},T.createInternalLoader=function(m){var v=this.hls.config,f=new(v.pLoader||v.loader)(v);return m.loader=f,this.loaders[m.type]=f,f},T.getInternalLoader=function(m){return this.loaders[m.type]},T.resetInternalLoader=function(m){this.loaders[m]&&delete this.loaders[m]},T.destroyInternalLoaders=function(){for(var m in this.loaders){var v=this.loaders[m];v&&v.destroy(),this.resetInternalLoader(m)}},T.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},T.onManifestLoading=function(m,v){this.load({id:null,groupId:null,level:0,responseType:"text",type:U.PlaylistContextType.MANIFEST,url:v.url,deliveryDirectives:null})},T.onLevelLoading=function(m,v){this.load({id:v.id,groupId:null,level:v.level,responseType:"text",type:U.PlaylistContextType.LEVEL,url:v.url,deliveryDirectives:v.deliveryDirectives})},T.onAudioTrackLoading=function(m,v){this.load({id:v.id,groupId:v.groupId,level:null,responseType:"text",type:U.PlaylistContextType.AUDIO_TRACK,url:v.url,deliveryDirectives:v.deliveryDirectives})},T.onSubtitleTrackLoading=function(m,v){this.load({id:v.id,groupId:v.groupId,level:null,responseType:"text",type:U.PlaylistContextType.SUBTITLE_TRACK,url:v.url,deliveryDirectives:v.deliveryDirectives})},T.load=function(m){var v,f,y,w,b,C,h=this.hls.config,E=this.getInternalLoader(m);if(E){var D=E.context;if(D&&D.url===m.url)return void V.logger.trace("[playlist-loader]: playlist request ongoing");V.logger.log("[playlist-loader]: aborting previous loader for type: "+m.type),E.abort()}switch(m.type){case U.PlaylistContextType.MANIFEST:f=h.manifestLoadingMaxRetry,y=h.manifestLoadingTimeOut,w=h.manifestLoadingRetryDelay,b=h.manifestLoadingMaxRetryTimeout;break;case U.PlaylistContextType.LEVEL:case U.PlaylistContextType.AUDIO_TRACK:case U.PlaylistContextType.SUBTITLE_TRACK:f=0,y=h.levelLoadingTimeOut;break;default:f=h.levelLoadingMaxRetry,y=h.levelLoadingTimeOut,w=h.levelLoadingRetryDelay,b=h.levelLoadingMaxRetryTimeout}if(E=this.createInternalLoader(m),null!==(v=m.deliveryDirectives)&&void 0!==v&&v.part&&(m.type===U.PlaylistContextType.LEVEL&&null!==m.level?C=this.hls.levels[m.level].details:m.type===U.PlaylistContextType.AUDIO_TRACK&&null!==m.id?C=this.hls.audioTracks[m.id].details:m.type===U.PlaylistContextType.SUBTITLE_TRACK&&null!==m.id&&(C=this.hls.subtitleTracks[m.id].details),C)){var u=C.partTarget,d=C.targetduration;u&&d&&(y=Math.min(1e3*Math.max(3*u,.8*d),y))}var c={timeout:y,maxRetry:f,retryDelay:w,maxRetryDelay:b,highWaterMark:0},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};E.load(m,c,p)},T.loadsuccess=function(m,v,h,E){void 0===E&&(E=null),this.resetInternalLoader(h.type);var D=m.data;0===D.indexOf("#EXTM3U")?(v.parsing.start=performance.now(),D.indexOf("#EXTINF:")>0||D.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(m,v,h,E):this.handleMasterPlaylist(m,v,h,E)):this.handleManifestParsingError(m,h,"no EXTM3U delimiter",E)},T.loaderror=function(m,v,h){void 0===h&&(h=null),this.handleNetworkError(v,h,!1,m)},T.loadtimeout=function(m,v,h){void 0===h&&(h=null),this.handleNetworkError(v,h,!0)},T.handleMasterPlaylist=function(m,v,h,E){var D=this.hls,f=m.data,y=R(m,h),w=Y.default.parseMasterPlaylist(f,y),b=w.levels,C=w.sessionData,u=w.sessionKeys;if(b.length){var d=b.map(function(H){return{id:H.attrs.AUDIO,audioCodec:H.audioCodec}}),c=b.map(function(H){return{id:H.attrs.SUBTITLES,textCodec:H.textCodec}}),p=Y.default.parseMasterPlaylistMedia(f,y,"AUDIO",d),M=Y.default.parseMasterPlaylistMedia(f,y,"SUBTITLES",c),S=Y.default.parseMasterPlaylistMedia(f,y,"CLOSED-CAPTIONS");p.length&&!p.some(function(H){return!H.url})&&b[0].audioCodec&&!b[0].attrs.AUDIO&&(V.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new k.AttrList({}),bitrate:0,url:""})),D.trigger(B.Events.MANIFEST_LOADED,{levels:b,audioTracks:p,subtitles:M,captions:S,url:y,stats:v,networkDetails:E,sessionData:C,sessionKeys:u})}else this.handleManifestParsingError(m,h,"no level found in manifest",E)},T.handleTrackOrLevelPlaylist=function(m,v,h,E){var D=this.hls,f=h.id,y=h.level,w=h.type,b=R(m,h),C=(0,G.isFiniteNumber)(f)?f:0,u=(0,G.isFiniteNumber)(y)?y:C,d=function L(A){switch(A.type){case U.PlaylistContextType.AUDIO_TRACK:return U.PlaylistLevelType.AUDIO;case U.PlaylistContextType.SUBTITLE_TRACK:return U.PlaylistLevelType.SUBTITLE;default:return U.PlaylistLevelType.MAIN}}(h),c=Y.default.parseLevelPlaylist(m.data,b,u,d,C);if(c.fragments.length){if(w===U.PlaylistContextType.MANIFEST){var p={attrs:new k.AttrList({}),bitrate:0,details:c,name:"",url:b};D.trigger(B.Events.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:b,stats:v,networkDetails:E,sessionData:null,sessionKeys:null})}v.parsing.end=performance.now(),h.levelDetails=c,this.handlePlaylistLoaded(m,v,h,E)}else D.trigger(B.Events.ERROR,{type:z.ErrorTypes.NETWORK_ERROR,details:z.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:b,reason:"no fragments found in level",level:"number"==typeof h.level?h.level:void 0})},T.handleManifestParsingError=function(m,v,h,E){this.hls.trigger(B.Events.ERROR,{type:z.ErrorTypes.NETWORK_ERROR,details:z.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:v.type===U.PlaylistContextType.MANIFEST,url:m.url,reason:h,response:m,context:v,networkDetails:E})},T.handleNetworkError=function(m,v,h,E){void 0===h&&(h=!1),V.logger.warn("[playlist-loader]: A network "+(h?"timeout":"error")+" occurred while loading "+m.type+" level: "+m.level+" id: "+m.id+' group-id: "'+m.groupId+'"');var D=z.ErrorDetails.UNKNOWN,f=!1,y=this.getInternalLoader(m);switch(m.type){case U.PlaylistContextType.MANIFEST:D=h?z.ErrorDetails.MANIFEST_LOAD_TIMEOUT:z.ErrorDetails.MANIFEST_LOAD_ERROR,f=!0;break;case U.PlaylistContextType.LEVEL:D=h?z.ErrorDetails.LEVEL_LOAD_TIMEOUT:z.ErrorDetails.LEVEL_LOAD_ERROR,f=!1;break;case U.PlaylistContextType.AUDIO_TRACK:D=h?z.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:z.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,f=!1;break;case U.PlaylistContextType.SUBTITLE_TRACK:D=h?z.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:z.ErrorDetails.SUBTITLE_LOAD_ERROR,f=!1}y&&this.resetInternalLoader(m.type);var w={type:z.ErrorTypes.NETWORK_ERROR,details:D,fatal:f,url:m.url,loader:y,context:m,networkDetails:v};E&&(w.response=E),this.hls.trigger(B.Events.ERROR,w)},T.handlePlaylistLoaded=function(m,v,h,E){var D=h.type,f=h.level,y=h.id,w=h.groupId,b=h.loader,C=h.levelDetails,u=h.deliveryDirectives;if(null!=C&&C.targetduration){if(b)switch(C.live&&(b.getCacheAge&&(C.ageHeader=b.getCacheAge()||0),(!b.getCacheAge||isNaN(C.ageHeader))&&(C.ageHeader=0)),D){case U.PlaylistContextType.MANIFEST:case U.PlaylistContextType.LEVEL:this.hls.trigger(B.Events.LEVEL_LOADED,{details:C,level:f||0,id:y||0,stats:v,networkDetails:E,deliveryDirectives:u});break;case U.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(B.Events.AUDIO_TRACK_LOADED,{details:C,id:y||0,groupId:w||"",stats:v,networkDetails:E,deliveryDirectives:u});break;case U.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(B.Events.SUBTITLE_TRACK_LOADED,{details:C,id:y||0,groupId:w||"",stats:v,networkDetails:E,deliveryDirectives:u})}}else this.handleManifestParsingError(m,h,"invalid target duration",E)},A}()},"./src/polyfills/number.ts":
/*!*********************************!*\
                  !*** ./src/polyfills/number.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{MAX_SAFE_INTEGER:()=>B,isFiniteNumber:()=>G});var G=Number.isFinite||function(z){return"number"==typeof z&&isFinite(z)},B=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":
/*!*********************************!*\
                  !*** ./src/remux/aac-helper.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>B});const B=function(){function z(){}return z.getSilentFrame=function(Y,U){if("mp4a.40.2"===Y){if(1===U)return new Uint8Array([0,200,0,128,35,128]);if(2===U)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===U)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===U)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===U)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},z}()},"./src/remux/mp4-generator.ts":
/*!************************************!*\
                  !*** ./src/remux/mp4-generator.ts ***!
                  \************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>z});var G=Math.pow(2,32)-1,B=function(){function V(){}return V.init=function(){var U;for(U in V.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})V.types.hasOwnProperty(U)&&(V.types[U]=[U.charCodeAt(0),U.charCodeAt(1),U.charCodeAt(2),U.charCodeAt(3)]);var k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);V.HDLR_TYPES={video:k,audio:L};var R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]);V.STTS=V.STSC=V.STCO=O,V.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),V.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),V.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),V.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var x=new Uint8Array([105,115,111,109]),A=new Uint8Array([97,118,99,49]),T=new Uint8Array([0,0,0,1]);V.FTYP=V.box(V.types.ftyp,x,T,x,A),V.DINF=V.box(V.types.dinf,V.box(V.types.dref,R))},V.box=function(U){for(var k=8,L=arguments.length,R=new Array(L>1?L-1:0),O=1;O<L;O++)R[O-1]=arguments[O];for(var x=R.length,A=x;x--;)k+=R[x].byteLength;var T=new Uint8Array(k);for(T[0]=k>>24&255,T[1]=k>>16&255,T[2]=k>>8&255,T[3]=255&k,T.set(U,4),x=0,k=8;x<A;x++)T.set(R[x],k),k+=R[x].byteLength;return T},V.hdlr=function(U){return V.box(V.types.hdlr,V.HDLR_TYPES[U])},V.mdat=function(U){return V.box(V.types.mdat,U)},V.mdhd=function(U,k){k*=U;var L=Math.floor(k/(G+1)),R=Math.floor(k%(G+1));return V.box(V.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,255&U,L>>24,L>>16&255,L>>8&255,255&L,R>>24,R>>16&255,R>>8&255,255&R,85,196,0,0]))},V.mdia=function(U){return V.box(V.types.mdia,V.mdhd(U.timescale,U.duration),V.hdlr(U.type),V.minf(U))},V.mfhd=function(U){return V.box(V.types.mfhd,new Uint8Array([0,0,0,0,U>>24,U>>16&255,U>>8&255,255&U]))},V.minf=function(U){return V.box(V.types.minf,"audio"===U.type?V.box(V.types.smhd,V.SMHD):V.box(V.types.vmhd,V.VMHD),V.DINF,V.stbl(U))},V.moof=function(U,k,L){return V.box(V.types.moof,V.mfhd(U),V.traf(L,k))},V.moov=function(U){for(var k=U.length,L=[];k--;)L[k]=V.trak(U[k]);return V.box.apply(null,[V.types.moov,V.mvhd(U[0].timescale,U[0].duration)].concat(L).concat(V.mvex(U)))},V.mvex=function(U){for(var k=U.length,L=[];k--;)L[k]=V.trex(U[k]);return V.box.apply(null,[V.types.mvex].concat(L))},V.mvhd=function(U,k){k*=U;var L=Math.floor(k/(G+1)),R=Math.floor(k%(G+1)),O=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,255&U,L>>24,L>>16&255,L>>8&255,255&L,R>>24,R>>16&255,R>>8&255,255&R,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return V.box(V.types.mvhd,O)},V.sdtp=function(U){var R,O,k=U.samples||[],L=new Uint8Array(4+k.length);for(R=0;R<k.length;R++)L[R+4]=(O=k[R].flags).dependsOn<<4|O.isDependedOn<<2|O.hasRedundancy;return V.box(V.types.sdtp,L)},V.stbl=function(U){return V.box(V.types.stbl,V.stsd(U),V.box(V.types.stts,V.STTS),V.box(V.types.stsc,V.STSC),V.box(V.types.stsz,V.STSZ),V.box(V.types.stco,V.STCO))},V.avc1=function(U){var R,O,x,k=[],L=[];for(R=0;R<U.sps.length;R++)k.push((x=(O=U.sps[R]).byteLength)>>>8&255),k.push(255&x),k=k.concat(Array.prototype.slice.call(O));for(R=0;R<U.pps.length;R++)L.push((x=(O=U.pps[R]).byteLength)>>>8&255),L.push(255&x),L=L.concat(Array.prototype.slice.call(O));var A=V.box(V.types.avcC,new Uint8Array([1,k[3],k[4],k[5],255,224|U.sps.length].concat(k).concat([U.pps.length]).concat(L))),T=U.width,_=U.height,m=U.pixelRatio[0],v=U.pixelRatio[1];return V.box(V.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,T>>8&255,255&T,_>>8&255,255&_,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),A,V.box(V.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),V.box(V.types.pasp,new Uint8Array([m>>24,m>>16&255,m>>8&255,255&m,v>>24,v>>16&255,v>>8&255,255&v])))},V.esds=function(U){var k=U.config.length;return new Uint8Array([0,0,0,0,3,23+k,0,1,0,4,15+k,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([k]).concat(U.config).concat([6,1,2]))},V.mp4a=function(U){var k=U.samplerate;return V.box(V.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,k>>8&255,255&k,0,0]),V.box(V.types.esds,V.esds(U)))},V.mp3=function(U){var k=U.samplerate;return V.box(V.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,k>>8&255,255&k,0,0]))},V.stsd=function(U){return V.box(V.types.stsd,V.STSD,"audio"===U.type?"mp3"===U.segmentCodec&&"mp3"===U.codec?V.mp3(U):V.mp4a(U):V.avc1(U))},V.tkhd=function(U){var k=U.id,L=U.duration*U.timescale,R=U.width,O=U.height,x=Math.floor(L/(G+1)),A=Math.floor(L%(G+1));return V.box(V.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,k>>24&255,k>>16&255,k>>8&255,255&k,0,0,0,0,x>>24,x>>16&255,x>>8&255,255&x,A>>24,A>>16&255,A>>8&255,255&A,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,R>>8&255,255&R,0,0,O>>8&255,255&O,0,0]))},V.traf=function(U,k){var L=V.sdtp(U),R=U.id,O=Math.floor(k/(G+1)),x=Math.floor(k%(G+1));return V.box(V.types.traf,V.box(V.types.tfhd,new Uint8Array([0,0,0,0,R>>24,R>>16&255,R>>8&255,255&R])),V.box(V.types.tfdt,new Uint8Array([1,0,0,0,O>>24,O>>16&255,O>>8&255,255&O,x>>24,x>>16&255,x>>8&255,255&x])),V.trun(U,L.length+16+20+8+16+8+8),L)},V.trak=function(U){return U.duration=U.duration||4294967295,V.box(V.types.trak,V.tkhd(U),V.mdia(U))},V.trex=function(U){var k=U.id;return V.box(V.types.trex,new Uint8Array([0,0,0,0,k>>24,k>>16&255,k>>8&255,255&k,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},V.trun=function(U,k){var A,T,_,m,v,h,L=U.samples||[],R=L.length,O=12+16*R,x=new Uint8Array(O);for(x.set(["video"===U.type?1:0,0,15,1,R>>>24&255,R>>>16&255,R>>>8&255,255&R,(k+=8+O)>>>24&255,k>>>16&255,k>>>8&255,255&k],0),A=0;A<R;A++)x.set([(_=(T=L[A]).duration)>>>24&255,_>>>16&255,_>>>8&255,255&_,(m=T.size)>>>24&255,m>>>16&255,m>>>8&255,255&m,(v=T.flags).isLeading<<2|v.dependsOn,v.isDependedOn<<6|v.hasRedundancy<<4|v.paddingValue<<1|v.isNonSync,61440&v.degradPrio,15&v.degradPrio,(h=T.cts)>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*A);return V.box(V.types.trun,x)},V.initSegment=function(U){V.types||V.init();var k=V.moov(U),L=new Uint8Array(V.FTYP.byteLength+k.byteLength);return L.set(V.FTYP),L.set(k,V.FTYP.byteLength),L},V}();B.types=void 0,B.HDLR_TYPES=void 0,B.STTS=void 0,B.STSC=void 0,B.STCO=void 0,B.STSZ=void 0,B.VMHD=void 0,B.SMHD=void 0,B.STSD=void 0,B.FTYP=void 0,B.DINF=void 0;const z=B},"./src/remux/mp4-remuxer.ts":
/*!**********************************!*\
                  !*** ./src/remux/mp4-remuxer.ts ***!
                  \**********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>m,flushTextTrackMetadataCueSamples:()=>E,flushTextTrackUserdataCueSamples:()=>D,normalizePts:()=>v});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ./aac-helper */
"./src/remux/aac-helper.ts"),z=P(
/*! ./mp4-generator */
"./src/remux/mp4-generator.ts"),V=P(
/*! ../events */
"./src/events.ts"),Y=P(
/*! ../errors */
"./src/errors.ts"),U=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),k=P(
/*! ../types/loader */
"./src/types/loader.ts"),L=P(
/*! ../utils/timescale-conversion */
"./src/utils/timescale-conversion.ts");function R(){return R=Object.assign?Object.assign.bind():function(w){for(var b=1;b<arguments.length;b++){var C=arguments[b];for(var u in C)Object.prototype.hasOwnProperty.call(C,u)&&(w[u]=C[u])}return w},R.apply(this,arguments)}var T=null,_=null,m=function(){function w(C,u,d,c){if(void 0===c&&(c=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=C,this.config=u,this.typeSupported=d,this.ISGenerated=!1,null===T){var M=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);T=M?parseInt(M[1]):0}if(null===_){var S=navigator.userAgent.match(/Safari\/(\d+)/i);_=S?parseInt(S[1]):0}}var b=w.prototype;return b.destroy=function(){},b.resetTimeStamp=function(u){U.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=u},b.resetNextTimestamp=function(){U.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},b.resetInitSegment=function(){U.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},b.getVideoStartPts=function(u){var d=!1,c=u.reduce(function(p,M){var S=M.pts-p;return S<-4294967296?(d=!0,v(p,M.pts)):S>0?p:M.pts},u[0].pts);return d&&U.logger.debug("PTS rollover detected"),c},b.remux=function(u,d,c,p,M,S,F,H){var N,K,W,$,Q,te,Z=M,re=M,ce=d.pid>-1,ue=d.samples.length,fe=u.samples.length>0,De=F&&ue>0||ue>1;if((!(u.pid>-1)||fe)&&(!ce||De)||this.ISGenerated||F){this.ISGenerated||(W=this.generateIS(u,d,M));var we,Te=this.isVideoContiguous,Ce=-1;if(De&&(Ce=function h(w){for(var b=0;b<w.length;b++)if(w[b].key)return b;return-1}(d.samples),!Te&&this.config.forceKeyFrameOnDiscontinuity))if(te=!0,Ce>0){U.logger.warn("[mp4-remuxer]: Dropped "+Ce+" out of "+ue+" video samples due to a missing keyframe");var et=this.getVideoStartPts(d.samples);d.samples=d.samples.slice(Ce),d.dropped+=Ce,we=re+=(d.samples[0].pts-et)/d.inputTimeScale}else-1===Ce&&(U.logger.warn("[mp4-remuxer]: No keyframe found out of "+ue+" video samples"),te=!1);if(this.ISGenerated){if(fe&&De){var ct=this.getVideoStartPts(d.samples),bt=(v(u.samples[0].pts,ct)-ct)/d.inputTimeScale;Z+=Math.max(0,bt),re+=Math.max(0,-bt)}if(fe){if(u.samplerate||(U.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),W=this.generateIS(u,d,M)),K=this.remuxAudio(u,Z,this.isAudioContiguous,S,ce||De||H===k.PlaylistLevelType.AUDIO?re:void 0),De){var kt=K?K.endPTS-K.startPTS:0;d.inputTimeScale||(U.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),W=this.generateIS(u,d,M)),N=this.remuxVideo(d,re,Te,kt)}}else De&&(N=this.remuxVideo(d,re,Te,0));N&&(N.firstKeyFrame=Ce,N.independent=-1!==Ce,N.firstKeyFramePTS=we)}}return this.ISGenerated&&(c.samples.length&&(Q=E(c,M,this._initPTS,this._initDTS)),p.samples.length&&($=D(p,M,this._initPTS))),{audio:K,video:N,initSegment:W,independent:te,text:$,id3:Q}},b.generateIS=function(u,d,c){var K,W,$,p=u.samples,M=d.samples,S=this.typeSupported,F={},H=!(0,G.isFiniteNumber)(this._initPTS),N="audio/mp4";if(H&&(K=W=1/0),u.config&&p.length&&("mp3"===(u.timescale=u.samplerate,u.segmentCodec)&&(S.mpeg?(N="audio/mpeg",u.codec=""):S.mp3&&(u.codec="mp3")),F.audio={id:"audio",container:N,codec:u.codec,initSegment:"mp3"===u.segmentCodec&&S.mpeg?new Uint8Array(0):z.default.initSegment([u]),metadata:{channelCount:u.channelCount}},H&&($=u.inputTimeScale,K=W=p[0].pts-Math.round($*c))),d.sps&&d.pps&&M.length&&(d.timescale=d.inputTimeScale,F.video={id:"main",container:"video/mp4",codec:d.codec,initSegment:z.default.initSegment([d]),metadata:{width:d.width,height:d.height}},H)){$=d.inputTimeScale;var Q=this.getVideoStartPts(M),te=Math.round($*c);W=Math.min(W,v(M[0].dts,Q)-te),K=Math.min(K,Q-te)}if(Object.keys(F).length)return this.ISGenerated=!0,H&&(this._initPTS=K,this._initDTS=W),{tracks:F,initPTS:K,timescale:$}},b.remuxVideo=function(u,d,c,p){var Q,te,M=u.inputTimeScale,S=u.samples,F=[],H=S.length,N=this._initPTS,K=this.nextAvcDts,W=8,$=this.videoSampleDuration,Z=Number.POSITIVE_INFINITY,re=Number.NEGATIVE_INFINITY,oe=!1;c&&null!==K||(K=d*M-(S[0].pts-v(S[0].dts,S[0].pts)));for(var fe=0;fe<H;fe++){var De=S[fe];De.pts=v(De.pts-N,K),De.dts=v(De.dts-N,K),De.dts<S[fe>0?fe-1:fe].dts&&(oe=!0)}oe&&S.sort(function(kn,Zd){return kn.dts-Zd.dts||kn.pts-Zd.pts});var Re=S[S.length-1].dts-(Q=S[0].dts),Te=Re?Math.round(Re/(H-1)):$||u.inputTimeScale/30;if(c){var Ce=Q-K,we=Ce>Te,et=Ce<-1;if((we||et)&&(U.logger.warn(we?"AVC: "+(0,L.toMsFromMpegTsClock)(Ce,!0)+" ms ("+Ce+"dts) hole between fragments detected, filling it":"AVC: "+(0,L.toMsFromMpegTsClock)(-Ce,!0)+" ms ("+Ce+"dts) overlapping between fragments detected"),!et||K>S[0].pts)){var ct=S[0].pts-Ce;S[0].dts=Q=K,S[0].pts=ct,U.logger.log("Video: First PTS/DTS adjusted: "+(0,L.toMsFromMpegTsClock)(ct,!0)+"/"+(0,L.toMsFromMpegTsClock)(Q,!0)+", delta: "+(0,L.toMsFromMpegTsClock)(Ce,!0)+" ms")}}Q=Math.max(0,Q);for(var Ft=0,bt=0,kt=0;kt<H;kt++){for(var gt=S[kt],Rt=gt.units,vt=Rt.length,$t=0,hn=0;hn<vt;hn++)$t+=Rt[hn].data.length;bt+=$t,Ft+=vt,gt.length=$t,gt.dts=Math.max(gt.dts,Q),Z=Math.min(gt.pts,Z),re=Math.max(gt.pts,re)}te=S[H-1].dts;var xn,Mt=bt+4*Ft+8;try{xn=new Uint8Array(Mt)}catch{return void this.observer.emit(V.Events.ERROR,V.Events.ERROR,{type:Y.ErrorTypes.MUX_ERROR,details:Y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Mt,reason:"fail allocating video mdat "+Mt})}var Fn=new DataView(xn.buffer);Fn.setUint32(0,Mt),xn.set(z.default.types.mdat,4);for(var or=!1,zn=Number.POSITIVE_INFINITY,sr=Number.POSITIVE_INFINITY,Dr=Number.NEGATIVE_INFINITY,Gn=Number.NEGATIVE_INFINITY,_n=0;_n<H;_n++){for(var Dn=S[_n],$n=Dn.units,Yn=0,Ut=0,Cn=$n.length;Ut<Cn;Ut++){var Xn=$n[Ut],po=Xn.data,vi=Xn.data.byteLength;Fn.setUint32(W,vi),xn.set(po,W+=4),W+=vi,Yn+=4+vi}var _i=void 0;if(_n<H-1)$=S[_n+1].dts-Dn.dts,_i=S[_n+1].pts-Dn.pts;else{var ca=this.config,mo=_n>0?Dn.dts-S[_n-1].dts:Te;if(_i=_n>0?Dn.pts-S[_n-1].pts:Te,ca.stretchShortVideoTrack&&null!==this.nextAudioPts){var Xl=Math.floor(ca.maxBufferHole*M),cn=(p?Z+p*M:this.nextAudioPts)-Dn.pts;cn>Xl?(($=cn-mo)<0?$=mo:or=!0,U.logger.log("[mp4-remuxer]: It is approximately "+cn/90+" ms to the next segment; using duration "+$/90+" ms for the last video frame.")):$=mo}else $=mo}var $d=Math.round(Dn.pts-Dn.dts);zn=Math.min(zn,$),Dr=Math.max(Dr,$),sr=Math.min(sr,_i),Gn=Math.max(Gn,_i),F.push(new f(Dn.key,$,Yn,$d))}if(F.length)if(T){if(T<70){var Zl=F[0].flags;Zl.dependsOn=2,Zl.isNonSync=0}}else if(_&&Gn-sr<Dr-zn&&Te/Dr<.025&&0===F[0].cts){U.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ua=Q,ar=0,da=F.length;ar<da;ar++){var Ql=ua+F[ar].duration;F[ar].duration=ar<da-1?Ql+F[ar+1].cts-(ua+F[ar].cts):ar?F[ar-1].duration:Te,F[ar].cts=0,ua=Ql}}console.assert(null!==$,"mp4SampleDuration must be computed"),this.nextAvcDts=K=te+($=or||!$?Te:$),this.videoSampleDuration=$,this.isVideoContiguous=!0;var zi={data1:z.default.moof(u.sequenceNumber++,Q,R({},u,{samples:F})),data2:xn,startPTS:Z/M,endPTS:(re+$)/M,startDTS:Q/M,endDTS:K/M,type:"video",hasAudio:!1,hasVideo:!0,nb:F.length,dropped:u.dropped};return u.samples=[],u.dropped=0,console.assert(xn.length,"MDAT length must not be zero"),zi},b.remuxAudio=function(u,d,c,p,M){var S=u.inputTimeScale,H=S/(u.samplerate?u.samplerate:S),N="aac"===u.segmentCodec?1024:1152,K=N*H,W=this._initPTS,$="mp3"===u.segmentCodec&&this.typeSupported.mpeg,Q=[],te=void 0!==M,Z=u.samples,re=$?0:8,oe=this.nextAudioPts||-1,ce=d*S;if(this.isAudioContiguous=c=c||Z.length&&oe>0&&(p&&Math.abs(ce-oe)<9e3||Math.abs(v(Z[0].pts-W,ce)-oe)<20*K),Z.forEach(function(Xn){Xn.pts=v(Xn.pts-W,ce)}),!c||oe<0){if(!(Z=Z.filter(function(Xn){return Xn.pts>=0})).length)return;oe=0===M?0:p&&!te?Math.max(0,ce):Z[0].pts}if("aac"===u.segmentCodec)for(var ue=this.config.maxAudioFramesDrift,fe=0,De=oe;fe<Z.length;fe++){var Re=Z[fe],Te=Re.pts,Ce=Te-De,we=Math.abs(1e3*Ce/S);if(Ce<=-ue*K&&te)0===fe&&(U.logger.warn("Audio frame @ "+(Te/S).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Ce/S)+" ms."),this.nextAudioPts=oe=De=Te);else if(Ce>=ue*K&&we<1e4&&te){var et=Math.round(Ce/K);(De=Te-et*K)<0&&(et--,De+=K),0===fe&&(this.nextAudioPts=oe=De),U.logger.warn("[mp4-remuxer]: Injecting "+et+" audio frame @ "+(De/S).toFixed(3)+"s due to "+Math.round(1e3*Ce/S)+" ms gap.");for(var ct=0;ct<et;ct++){var Ft=Math.max(De,0),bt=B.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);bt||(U.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),bt=Re.unit.subarray()),Z.splice(fe,0,{unit:bt,pts:Ft}),De+=K,fe++}}Re.pts=De,De+=K}for(var Rt,kt=null,gt=null,vt=0,$t=Z.length;$t--;)vt+=Z[$t].unit.byteLength;for(var hn=0,Mt=Z.length;hn<Mt;hn++){var xn=Z[hn],Fn=xn.unit,or=xn.pts;if(null!==gt)Q[hn-1].duration=Math.round((or-gt)/H);else{if(c&&"aac"===u.segmentCodec&&(or=oe),kt=or,!(vt>0))return;vt+=re;try{Rt=new Uint8Array(vt)}catch{return void this.observer.emit(V.Events.ERROR,V.Events.ERROR,{type:Y.ErrorTypes.MUX_ERROR,details:Y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:vt,reason:"fail allocating audio mdat "+vt})}$||(new DataView(Rt.buffer).setUint32(0,vt),Rt.set(z.default.types.mdat,4))}Rt.set(Fn,re);var Dr=Fn.byteLength;re+=Dr,Q.push(new f(!0,N,Dr,0)),gt=or}var Gn=Q.length;if(Gn){this.nextAudioPts=oe=gt+H*Q[Q.length-1].duration;var Dn=$?new Uint8Array(0):z.default.moof(u.sequenceNumber++,kt/H,R({},u,{samples:Q}));u.samples=[];var $n=kt/S,Yn=oe/S,Cn={data1:Dn,data2:Rt,startPTS:$n,endPTS:Yn,startDTS:$n,endDTS:Yn,type:"audio",hasAudio:!0,hasVideo:!1,nb:Gn};return this.isAudioContiguous=!0,console.assert(Rt.length,"MDAT length must not be zero"),Cn}},b.remuxEmptyAudio=function(u,d,c,p){var M=u.inputTimeScale,H=this.nextAudioPts,N=(null!==H?H:p.startDTS*M)+this._initDTS,W=M/(u.samplerate?u.samplerate:M)*1024,$=Math.ceil((p.endDTS*M+this._initDTS-N)/W),Q=B.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);if(U.logger.warn("[mp4-remuxer]: remux empty Audio"),Q){for(var te=[],Z=0;Z<$;Z++){var re=N+Z*W;te.push({unit:Q,pts:re,dts:re})}return u.samples=te,this.remuxAudio(u,d,c,!1)}U.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},w}();function v(w,b){var C;if(null===b)return w;for(C=b<w?-8589934592:8589934592;Math.abs(w-b)>4294967296;)w+=C;return w}function E(w,b,C,u){var d=w.samples.length;if(d){for(var c=w.inputTimeScale,p=0;p<d;p++){var M=w.samples[p];M.pts=v(M.pts-C,b*c)/c,M.dts=v(M.dts-u,b*c)/c}var S=w.samples;return w.samples=[],{samples:S}}}function D(w,b,C){var u=w.samples.length;if(u){for(var d=w.inputTimeScale,c=0;c<u;c++){var p=w.samples[c];p.pts=v(p.pts-C,b*d)/d}w.samples.sort(function(S,F){return S.pts-F.pts});var M=w.samples;return w.samples=[],{samples:M}}}var f=function(b,C,u,d){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=C,this.size=u,this.cts=d,this.flags=new y(b)},y=function(b){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=b?2:1,this.isNonSync=b?0:1}},"./src/remux/passthrough-remuxer.ts":
/*!******************************************!*\
                  !*** ./src/remux/passthrough-remuxer.ts ***!
                  \******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>L});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ./mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),z=P(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),V=P(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),Y=P(
/*! ../utils/logger */
"./src/utils/logger.ts");function k(R,O){var x=R?.codec;return x&&x.length>4?x:"hvc1"===x||"hev1"===x?"hvc1.1.c.L120.90":"av01"===x?"av01.0.04M.08":"avc1"===x||O===V.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const L=function(){function R(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var O=R.prototype;return O.destroy=function(){},O.resetTimeStamp=function(A){this.initPTS=A,this.lastEndTime=null},O.resetNextTimestamp=function(){this.lastEndTime=null},O.resetInitSegment=function(A,T,_,m){this.audioCodec=T,this.videoCodec=_,this.generateInitSegment((0,z.patchEncyptionData)(A,m)),this.emitInitSegment=!0},O.generateInitSegment=function(A){var T=this.audioCodec,_=this.videoCodec;if(!A||!A.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var m=this.initData=(0,z.parseInitSegment)(A);T||(T=k(m.audio,V.ElementaryStreamTypes.AUDIO)),_||(_=k(m.video,V.ElementaryStreamTypes.VIDEO));var v={};m.audio&&m.video?v.audiovideo={container:"video/mp4",codec:T+","+_,initSegment:A,id:"main"}:m.audio?v.audio={container:"audio/mp4",codec:T,initSegment:A,id:"audio"}:m.video?v.video={container:"video/mp4",codec:_,initSegment:A,id:"main"}:Y.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=v},O.remux=function(A,T,_,m,v){var h,E=this.initPTS,D=this.lastEndTime,f={audio:void 0,video:void 0,text:m,id3:_,initSegment:void 0};(0,G.isFiniteNumber)(D)||(D=this.lastEndTime=v||0);var y=T.samples;if(!y||!y.length)return f;var w={initPTS:void 0,timescale:1},b=this.initData;if((!b||!b.length)&&(this.generateInitSegment(y),b=this.initData),!b||!b.length)return Y.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),f;this.emitInitSegment&&(w.tracks=this.initTracks,this.emitInitSegment=!1);var C=(0,z.getStartDTS)(b,y);(0,G.isFiniteNumber)(E)||(this.initPTS=w.initPTS=E=C-v);var u=(0,z.getDuration)(y,b),d=A?C-E:D,c=d+u;(0,z.offsetStartDTS)(b,y,E),u>0?this.lastEndTime=c:(Y.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var p=!!b.audio,M=!!b.video,S="";p&&(S+="audio"),M&&(S+="video");var F={data1:y,startPTS:d,startDTS:d,endPTS:c,endDTS:c,type:S,hasAudio:p,hasVideo:M,nb:1,dropped:0};f.audio="audio"===F.type?F:void 0,f.video="audio"!==F.type?F:void 0,f.initSegment=w;var H=null!=(h=this.initPTS)?h:0;return f.id3=(0,B.flushTextTrackMetadataCueSamples)(_,v,H,H),m.samples.length&&(f.text=(0,B.flushTextTrackUserdataCueSamples)(m,v,H)),f},R}()},"./src/task-loop.ts":
/*!**************************!*\
                  !*** ./src/task-loop.ts ***!
                  \**************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>G});var G=function(){function B(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var z=B.prototype;return z.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},z.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},z.onHandlerDestroyed=function(){},z.hasInterval=function(){return!!this._tickInterval},z.hasNextTick=function(){return!!this._tickTimer},z.setInterval=function(Y){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,Y),!0)},z.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},z.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},z.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},z.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},z.doTick=function(){},B}()},"./src/types/cmcd.ts":
/*!***************************!*\
                  !*** ./src/types/cmcd.ts ***!
                  \***************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{CMCDObjectType:()=>B,CMCDStreamType:()=>V,CMCDStreamingFormat:()=>z,CMCDVersion:()=>G});var G=1,B=(()=>{return(Y=B||(B={})).MANIFEST="m",Y.AUDIO="a",Y.VIDEO="v",Y.MUXED="av",Y.INIT="i",Y.CAPTION="c",Y.TIMED_TEXT="tt",Y.KEY="k",Y.OTHER="o",B;var Y})(),z=(()=>{return(Y=z||(z={})).DASH="d",Y.HLS="h",Y.SMOOTH="s",Y.OTHER="o",z;var Y})(),V=(()=>{return(Y=V||(V={})).VOD="v",Y.LIVE="l",V;var Y})()},"./src/types/demuxer.ts":
/*!******************************!*\
                  !*** ./src/types/demuxer.ts ***!
                  \******************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{MetadataSchema:()=>G});var G=(()=>{return(B=G||(G={})).audioId3="org.id3",B.dateRange="com.apple.quicktime.HLS",B.emsg="https://aomedia.org/emsg/ID3",G;var B})()},"./src/types/level.ts":
/*!****************************!*\
                  !*** ./src/types/level.ts ***!
                  \****************************/(pe,J,P)=>{"use strict";function G(O,x){for(var A=0;A<x.length;A++){var T=x[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(O,z(T.key),T)}}function z(O){var x=function V(O,x){if("object"!=typeof O||null===O)return O;var A=O[Symbol.toPrimitive];if(void 0!==A){var T=A.call(O,x||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(O)}(O,"string");return"symbol"==typeof x?x:String(x)}P.r(J),P.d(J,{HdcpLevels:()=>Y,HlsSkip:()=>U,HlsUrlParameters:()=>L,Level:()=>R,getSkipValue:()=>k});var Y=["NONE","TYPE-0","TYPE-1","TYPE-2",null],U=(()=>{return(O=U||(U={})).No="",O.Yes="YES",O.v2="v2",U;var O})();function k(O,x){var A=O.canSkipUntil;return A&&(void 0!==x?x-O.endSN:0)<A?O.canSkipDateRanges?U.v2:U.Yes:U.No}var L=function(){function O(A,T,_){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=A,this.part=T,this.skip=_}return O.prototype.addDirectives=function(T){var _=new self.URL(T);return void 0!==this.msn&&_.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&_.searchParams.set("_HLS_part",this.part.toString()),this.skip&&_.searchParams.set("_HLS_skip",this.skip),_.href},O}(),R=function(){function O(x){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[x.url],this.attrs=x.attrs,this.bitrate=x.bitrate,x.details&&(this.details=x.details),this.id=x.id||0,this.name=x.name,this.width=x.width||0,this.height=x.height||0,this.audioCodec=x.audioCodec,this.videoCodec=x.videoCodec,this.unknownCodecs=x.unknownCodecs,this.codecSet=[x.videoCodec,x.audioCodec].filter(function(A){return A}).join(",").replace(/\.[^.,]+/g,"")}return function B(O,x,A){x&&G(O.prototype,x),A&&G(O,A),Object.defineProperty(O,"prototype",{writable:!1})}(O,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(A){var T=A%this.url.length;this._urlId!==T&&(this.details=void 0,this._urlId=T)}}]),O}()},"./src/types/loader.ts":
/*!*****************************!*\
                  !*** ./src/types/loader.ts ***!
                  \*****************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{PlaylistContextType:()=>G,PlaylistLevelType:()=>B});var G=(()=>{return(z=G||(G={})).MANIFEST="manifest",z.LEVEL="level",z.AUDIO_TRACK="audioTrack",z.SUBTITLE_TRACK="subtitleTrack",G;var z})(),B=(()=>{return(z=B||(B={})).MAIN="main",z.AUDIO="audio",z.SUBTITLE="subtitle",B;var z})()},"./src/types/transmuxer.ts":
/*!*********************************!*\
                  !*** ./src/types/transmuxer.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{ChunkMetadata:()=>G});var G=function(V,Y,U,k,L,R){void 0===k&&(k=0),void 0===L&&(L=-1),void 0===R&&(R=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=V,this.sn=Y,this.id=U,this.size=k,this.part=L,this.partial=R}},"./src/utils/attr-list.ts":
/*!********************************!*\
                  !*** ./src/utils/attr-list.ts ***!
                  \********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{AttrList:()=>z});var G=/^(\d+)x(\d+)$/,B=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,z=function(){function V(U){for(var k in"string"==typeof U&&(U=V.parseAttrList(U)),U)U.hasOwnProperty(k)&&(this[k]=U[k])}var Y=V.prototype;return Y.decimalInteger=function(k){var L=parseInt(this[k],10);return L>Number.MAX_SAFE_INTEGER?1/0:L},Y.hexadecimalInteger=function(k){if(this[k]){var L=(this[k]||"0x").slice(2);L=(1&L.length?"0":"")+L;for(var R=new Uint8Array(L.length/2),O=0;O<L.length/2;O++)R[O]=parseInt(L.slice(2*O,2*O+2),16);return R}return null},Y.hexadecimalIntegerAsNumber=function(k){var L=parseInt(this[k],16);return L>Number.MAX_SAFE_INTEGER?1/0:L},Y.decimalFloatingPoint=function(k){return parseFloat(this[k])},Y.optionalFloat=function(k,L){var R=this[k];return R?parseFloat(R):L},Y.enumeratedString=function(k){return this[k]},Y.bool=function(k){return"YES"===this[k]},Y.decimalResolution=function(k){var L=G.exec(this[k]);if(null!==L)return{width:parseInt(L[1],10),height:parseInt(L[2],10)}},V.parseAttrList=function(k){var L,R={};for(B.lastIndex=0;null!==(L=B.exec(k));){var x=L[2];0===x.indexOf('"')&&x.lastIndexOf('"')===x.length-1&&(x=x.slice(1,-1)),R[L[1]]=x}return R},V}()},"./src/utils/binary-search.ts":
/*!************************************!*\
                  !*** ./src/utils/binary-search.ts ***!
                  \************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>B});const B={search:function(V,Y){for(var U=0,k=V.length-1,L=null,R=null;U<=k;){var O=Y(R=V[L=(U+k)/2|0]);if(O>0)U=L+1;else{if(!(O<0))return R;k=L-1}}return null}}},"./src/utils/buffer-helper.ts":
/*!************************************!*\
                  !*** ./src/utils/buffer-helper.ts ***!
                  \************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{BufferHelper:()=>z});var G=P(
/*! ./logger */
"./src/utils/logger.ts"),B={length:0,start:function(){return 0},end:function(){return 0}},z=function(){function V(){}return V.isBuffered=function(U,k){try{if(U)for(var L=V.getBuffered(U),R=0;R<L.length;R++)if(k>=L.start(R)&&k<=L.end(R))return!0}catch{}return!1},V.bufferInfo=function(U,k,L){try{if(U){var x,R=V.getBuffered(U),O=[];for(x=0;x<R.length;x++)O.push({start:R.start(x),end:R.end(x)});return this.bufferedInfo(O,k,L)}}catch{}return{len:0,start:k,end:k,nextStart:void 0}},V.bufferedInfo=function(U,k,L){k=Math.max(0,k),U.sort(function(f,y){return f.start-y.start||y.end-f.end});var R=[];if(L)for(var O=0;O<U.length;O++){var x=R.length;if(x){var A=R[x-1].end;U[O].start-A<L?U[O].end>A&&(R[x-1].end=U[O].end):R.push(U[O])}else R.push(U[O])}else R=U;for(var _,T=0,m=k,v=k,h=0;h<R.length;h++){var E=R[h].start,D=R[h].end;if(k+L>=E&&k<D)m=E,T=(v=D)-k;else if(k+L<E){_=E;break}}return{len:T,start:m||0,end:v||0,nextStart:_}},V.getBuffered=function(U){try{return U.buffered}catch(k){return G.logger.log("failed to get media.buffered",k),B}},V}()},"./src/utils/cea-608-parser.ts":
/*!*************************************!*\
                  !*** ./src/utils/cea-608-parser.ts ***!
                  \*************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{CaptionScreen:()=>h,Row:()=>v,default:()=>b});var G=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),B={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},z=function(u){var d=u;return B.hasOwnProperty(u)&&(d=B[u]),String.fromCharCode(d)},V=15,Y=100,U={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},k={17:2,18:4,21:6,22:8,23:10,19:13,20:15},L={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},R={25:2,26:4,29:6,30:8,31:10,27:13,28:15},O=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],x=(()=>{return(C=x||(x={}))[C.ERROR=0]="ERROR",C[C.TEXT=1]="TEXT",C[C.WARNING=2]="WARNING",C[C.INFO=2]="INFO",C[C.DEBUG=3]="DEBUG",C[C.DATA=3]="DATA",x;var C})(),A=function(){function C(){this.time=null,this.verboseLevel=x.ERROR}return C.prototype.log=function(c,p){if(this.verboseLevel>=c){var M="function"==typeof p?p():p;G.logger.log(this.time+" ["+c+"] "+M)}},C}(),T=function(u){for(var d=[],c=0;c<u.length;c++)d.push(u[c].toString(16));return d},_=function(){function C(d,c,p,M,S){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=d||"white",this.underline=c||!1,this.italics=p||!1,this.background=M||"black",this.flash=S||!1}var u=C.prototype;return u.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},u.setStyles=function(c){for(var p=["foreground","underline","italics","background","flash"],M=0;M<p.length;M++){var S=p[M];c.hasOwnProperty(S)&&(this[S]=c[S])}},u.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},u.equals=function(c){return this.foreground===c.foreground&&this.underline===c.underline&&this.italics===c.italics&&this.background===c.background&&this.flash===c.flash},u.copy=function(c){this.foreground=c.foreground,this.underline=c.underline,this.italics=c.italics,this.background=c.background,this.flash=c.flash},u.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},C}(),m=function(){function C(d,c,p,M,S,F){this.uchar=void 0,this.penState=void 0,this.uchar=d||" ",this.penState=new _(c,p,M,S,F)}var u=C.prototype;return u.reset=function(){this.uchar=" ",this.penState.reset()},u.setChar=function(c,p){this.uchar=c,this.penState.copy(p)},u.setPenState=function(c){this.penState.copy(c)},u.equals=function(c){return this.uchar===c.uchar&&this.penState.equals(c.penState)},u.copy=function(c){this.uchar=c.uchar,this.penState.copy(c.penState)},u.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},C}(),v=function(){function C(d){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var c=0;c<Y;c++)this.chars.push(new m);this.logger=d,this.pos=0,this.currPenState=new _}var u=C.prototype;return u.equals=function(c){for(var p=!0,M=0;M<Y;M++)if(!this.chars[M].equals(c.chars[M])){p=!1;break}return p},u.copy=function(c){for(var p=0;p<Y;p++)this.chars[p].copy(c.chars[p])},u.isEmpty=function(){for(var c=!0,p=0;p<Y;p++)if(!this.chars[p].isEmpty()){c=!1;break}return c},u.setCursor=function(c){this.pos!==c&&(this.pos=c),this.pos<0?(this.logger.log(x.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Y&&(this.logger.log(x.DEBUG,"Too large cursor position "+this.pos),this.pos=Y)},u.moveCursor=function(c){var p=this.pos+c;if(c>1)for(var M=this.pos+1;M<p+1;M++)this.chars[M].setPenState(this.currPenState);this.setCursor(p)},u.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},u.insertChar=function(c){var p=this;c>=144&&this.backSpace();var M=z(c);this.pos>=Y?this.logger.log(x.ERROR,function(){return"Cannot insert "+c.toString(16)+" ("+M+") at position "+p.pos+". Skipping it!"}):(this.chars[this.pos].setChar(M,this.currPenState),this.moveCursor(1))},u.clearFromPos=function(c){var p;for(p=c;p<Y;p++)this.chars[p].reset()},u.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},u.clearToEndOfRow=function(){this.clearFromPos(this.pos)},u.getTextString=function(){for(var c=[],p=!0,M=0;M<Y;M++){var S=this.chars[M].uchar;" "!==S&&(p=!1),c.push(S)}return p?"":c.join("")},u.setPenStyles=function(c){this.currPenState.setStyles(c),this.chars[this.pos].setPenState(this.currPenState)},C}(),h=function(){function C(d){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var c=0;c<V;c++)this.rows.push(new v(d));this.logger=d,this.currRow=V-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var u=C.prototype;return u.reset=function(){for(var c=0;c<V;c++)this.rows[c].clear();this.currRow=V-1},u.equals=function(c){for(var p=!0,M=0;M<V;M++)if(!this.rows[M].equals(c.rows[M])){p=!1;break}return p},u.copy=function(c){for(var p=0;p<V;p++)this.rows[p].copy(c.rows[p])},u.isEmpty=function(){for(var c=!0,p=0;p<V;p++)if(!this.rows[p].isEmpty()){c=!1;break}return c},u.backSpace=function(){this.rows[this.currRow].backSpace()},u.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},u.insertChar=function(c){this.rows[this.currRow].insertChar(c)},u.setPen=function(c){this.rows[this.currRow].setPenStyles(c)},u.moveCursor=function(c){this.rows[this.currRow].moveCursor(c)},u.setCursor=function(c){this.logger.log(x.INFO,"setCursor: "+c),this.rows[this.currRow].setCursor(c)},u.setPAC=function(c){this.logger.log(x.INFO,function(){return"pacData = "+JSON.stringify(c)});var p=c.row-1;if(this.nrRollUpRows&&p<this.nrRollUpRows-1&&(p=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==p){for(var M=0;M<V;M++)this.rows[M].clear();var S=this.currRow+1-this.nrRollUpRows,F=this.lastOutputScreen;if(F){var H=F.rows[S].cueStartTime,N=this.logger.time;if(H&&null!==N&&H<N)for(var K=0;K<this.nrRollUpRows;K++)this.rows[p-this.nrRollUpRows+K+1].copy(F.rows[S+K])}}this.currRow=p;var W=this.rows[this.currRow];if(null!==c.indent){var Q=Math.max(c.indent-1,0);W.setCursor(c.indent),c.color=W.chars[Q].penState.foreground}this.setPen({foreground:c.color,underline:c.underline,italics:c.italics,background:"black",flash:!1})},u.setBkgData=function(c){this.logger.log(x.INFO,function(){return"bkgData = "+JSON.stringify(c)}),this.backSpace(),this.setPen(c),this.insertChar(32)},u.setRollUpRows=function(c){this.nrRollUpRows=c},u.rollUp=function(){var c=this;if(null!==this.nrRollUpRows){this.logger.log(x.TEXT,function(){return c.getDisplayText()});var M=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];M.clear(),this.rows.splice(this.currRow,0,M),this.logger.log(x.INFO,"Rolling up")}else this.logger.log(x.DEBUG,"roll_up but nrRollUpRows not set yet")},u.getDisplayText=function(c){c=c||!1;for(var p=[],M="",F=0;F<V;F++){var H=this.rows[F].getTextString();H&&p.push(c?"Row "+(F+1)+": '"+H+"'":H.trim())}return p.length>0&&(M=c?"["+p.join(" | ")+"]":p.join("\n")),M},u.getTextAndFormat=function(){return this.rows},C}(),E=function(){function C(d,c,p){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=d,this.outputFilter=c,this.mode=null,this.verbose=0,this.displayedMemory=new h(p),this.nonDisplayedMemory=new h(p),this.lastOutputScreen=new h(p),this.currRollUpRow=this.displayedMemory.rows[V-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=p}var u=C.prototype;return u.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[V-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},u.getHandler=function(){return this.outputFilter},u.setHandler=function(c){this.outputFilter=c},u.setPAC=function(c){this.writeScreen.setPAC(c)},u.setBkgData=function(c){this.writeScreen.setBkgData(c)},u.setMode=function(c){c!==this.mode&&(this.mode=c,this.logger.log(x.INFO,function(){return"MODE="+c}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=c)},u.insertChars=function(c){for(var p=this,M=0;M<c.length;M++)this.writeScreen.insertChar(c[M]);var S=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(x.INFO,function(){return S+": "+p.writeScreen.getDisplayText(!0)}),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(x.TEXT,function(){return"DISPLAYED: "+p.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},u.ccRCL=function(){this.logger.log(x.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},u.ccBS=function(){this.logger.log(x.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},u.ccAOF=function(){},u.ccAON=function(){},u.ccDER=function(){this.logger.log(x.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},u.ccRU=function(c){this.logger.log(x.INFO,"RU("+c+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(c)},u.ccFON=function(){this.logger.log(x.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},u.ccRDC=function(){this.logger.log(x.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},u.ccTR=function(){this.logger.log(x.INFO,"TR"),this.setMode("MODE_TEXT")},u.ccRTD=function(){this.logger.log(x.INFO,"RTD"),this.setMode("MODE_TEXT")},u.ccEDM=function(){this.logger.log(x.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},u.ccCR=function(){this.logger.log(x.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},u.ccENM=function(){this.logger.log(x.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},u.ccEOC=function(){var c=this;if(this.logger.log(x.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var p=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=p,this.writeScreen=this.nonDisplayedMemory,this.logger.log(x.TEXT,function(){return"DISP: "+c.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},u.ccTO=function(c){this.logger.log(x.INFO,"TO("+c+") - Tab Offset"),this.writeScreen.moveCursor(c)},u.ccMIDROW=function(c){var p={flash:!1};if(p.underline=c%2==1,p.italics=c>=46,p.italics)p.foreground="white";else{var M=Math.floor(c/2)-16;p.foreground=["white","green","blue","cyan","red","yellow","magenta"][M]}this.logger.log(x.INFO,"MIDROW: "+JSON.stringify(p)),this.writeScreen.setPen(p)},u.outputDataUpdate=function(c){void 0===c&&(c=!1);var p=this.logger.time;null!==p&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,p,this.lastOutputScreen),c&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:p):this.cueStartTime=p,this.lastOutputScreen.copy(this.displayedMemory))},u.cueSplitAtTime=function(c){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,c,this.displayedMemory),this.cueStartTime=c))},C}();function f(C,u,d){d.a=C,d.b=u}function y(C,u,d){return d.a===C&&d.b===u}const b=function(){function C(d,c,p){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var M=new A;this.channels=[null,new E(d,c,M),new E(d+1,p,M)],this.cmdHistory={a:null,b:null},this.logger=M}var u=C.prototype;return u.getHandler=function(c){return this.channels[c].getHandler()},u.setHandler=function(c,p){this.channels[c].setHandler(p)},u.addData=function(c,p){var M,S,F,H=!1;this.logger.time=c;for(var N=0;N<p.length;N+=2)if(F=127&p[N+1],0!=(S=127&p[N])||0!==F){if(this.logger.log(x.DATA,"["+T([p[N],p[N+1]])+"] -> ("+T([S,F])+")"),(M=this.parseCmd(S,F))||(M=this.parseMidrow(S,F)),M||(M=this.parsePAC(S,F)),M||(M=this.parseBackgroundAttributes(S,F)),!M&&(H=this.parseChars(S,F))){var K=this.currentChannel;K&&K>0?this.channels[K].insertChars(H):this.logger.log(x.WARNING,"No channel found yet. TEXT-MODE?")}!M&&!H&&this.logger.log(x.WARNING,"Couldn't parse cleaned data "+T([S,F])+" orig: "+T([p[N],p[N+1]]))}},u.parseCmd=function(c,p){var M=this.cmdHistory;if(!((20===c||28===c||21===c||29===c)&&p>=32&&p<=47||(23===c||31===c)&&p>=33&&p<=35))return!1;if(y(c,p,M))return f(null,null,M),this.logger.log(x.DEBUG,"Repeated command ("+T([c,p])+") is dropped"),!0;var H=20===c||21===c||23===c?1:2,N=this.channels[H];return 20===c||21===c||28===c||29===c?32===p?N.ccRCL():33===p?N.ccBS():34===p?N.ccAOF():35===p?N.ccAON():36===p?N.ccDER():37===p?N.ccRU(2):38===p?N.ccRU(3):39===p?N.ccRU(4):40===p?N.ccFON():41===p?N.ccRDC():42===p?N.ccTR():43===p?N.ccRTD():44===p?N.ccEDM():45===p?N.ccCR():46===p?N.ccENM():47===p&&N.ccEOC():N.ccTO(p-32),f(c,p,M),this.currentChannel=H,!0},u.parseMidrow=function(c,p){var M=0;if((17===c||25===c)&&p>=32&&p<=47){if((M=17===c?1:2)!==this.currentChannel)return this.logger.log(x.ERROR,"Mismatch channel in midrow parsing"),!1;var S=this.channels[M];return!!S&&(S.ccMIDROW(p),this.logger.log(x.DEBUG,"MIDROW ("+T([c,p])+")"),!0)}return!1},u.parsePAC=function(c,p){var S=this.cmdHistory;if(!((c>=17&&c<=23||c>=25&&c<=31)&&p>=64&&p<=127||(16===c||24===c)&&p>=64&&p<=95))return!1;if(y(c,p,S))return f(null,null,S),!0;var N=c<=23?1:2,K=this.channels[N];return!!K&&(K.setPAC(this.interpretPAC(p>=64&&p<=95?1===N?U[c]:L[c]:1===N?k[c]:R[c],p)),f(c,p,S),this.currentChannel=N,!0)},u.interpretPAC=function(c,p){var M,S={color:null,italics:!1,indent:null,underline:!1,row:c};return S.underline=1==(1&(M=p>95?p-96:p-64)),M<=13?S.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(M/2)]:M<=15?(S.italics=!0,S.color="white"):S.indent=4*Math.floor((M-16)/2),S},u.parseChars=function(c,p){var M,H,S=null,F=null;if(c>=25?(M=2,F=c-8):(M=1,F=c),F>=17&&F<=19?(this.logger.log(x.INFO,"Special char '"+z(H=17===F?p+80:18===F?p+112:p+144)+"' in channel "+M),S=[H]):c>=32&&c<=127&&(S=0===p?[c]:[c,p]),S){var N=T(S);this.logger.log(x.DEBUG,"Char codes =  "+N.join(",")),f(c,p,this.cmdHistory)}return S},u.parseBackgroundAttributes=function(c,p){if(!((16===c||24===c)&&p>=32&&p<=47||(23===c||31===c)&&p>=45&&p<=47))return!1;var F,H={};return 16===c||24===c?(F=Math.floor((p-32)/2),H.background=O[F],p%2==1&&(H.background=H.background+"_semi")):45===p?H.background="transparent":(H.foreground="black",47===p&&(H.underline=!0)),this.channels[c<=23?1:2].setBkgData(H),f(c,p,this.cmdHistory),!0},u.reset=function(){for(var c=0;c<Object.keys(this.channels).length;c++){var p=this.channels[c];p&&p.reset()}this.cmdHistory={a:null,b:null}},u.cueSplitAtTime=function(c){for(var p=0;p<this.channels.length;p++){var M=this.channels[p];M&&M.cueSplitAtTime(c)}},C}()},"./src/utils/codecs.ts":
/*!*****************************!*\
                  !*** ./src/utils/codecs.ts ***!
                  \*****************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{isCodecSupportedInMp4:()=>z,isCodecType:()=>B});var G={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function B(V,Y){var U=G[Y];return!!U&&!0===U[V.slice(0,4)]}function z(V,Y){return MediaSource.isTypeSupported((Y||"video")+'/mp4;codecs="'+V+'"')}},"./src/utils/cues.ts":
/*!***************************!*\
                  !*** ./src/utils/cues.ts ***!
                  \***************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>U});var G=P(
/*! ./vttparser */
"./src/utils/vttparser.ts"),B=P(
/*! ./webvtt-parser */
"./src/utils/webvtt-parser.ts"),z=P(
/*! ./texttrack-utils */
"./src/utils/texttrack-utils.ts"),V=/\s/;const U={newCue:function(L,R,O,x){for(var T,_,m,v,h,A=[],E=self.VTTCue||self.TextTrackCue,D=0;D<x.rows.length;D++)if(m=!0,v=0,h="",!(T=x.rows[D]).isEmpty()){for(var f=0;f<T.chars.length;f++)V.test(T.chars[f].uchar)&&m?v++:(h+=T.chars[f].uchar,m=!1);T.cueStartTime=R,R===O&&(O+=1e-4),v>=16?v--:v++;var y=(0,G.fixLineBreaks)(h.trim()),w=(0,B.generateCueId)(R,O,y);(!L||!L.cues||!L.cues.getCueById(w))&&((_=new E(R,O,y)).id=w,_.line=D+1,_.align="left",_.position=10+Math.min(80,10*Math.floor(8*v/32)),A.push(_))}return L&&A.length&&(A.sort(function(b,C){return"auto"===b.line||"auto"===C.line?0:b.line>8&&C.line>8?C.line-b.line:b.line-C.line}),A.forEach(function(b){return(0,z.addCueToTrack)(L,b)})),A}}},"./src/utils/discontinuities.ts":
/*!**************************************!*\
                  !*** ./src/utils/discontinuities.ts ***!
                  \**************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{adjustSlidingStart:()=>L,alignMediaPlaylistByPDT:()=>A,alignPDT:()=>x,alignStream:()=>R,findDiscontinuousReferenceFrag:()=>U,findFirstFragWithCC:()=>V,shouldAlignOnDiscontinuities:()=>Y});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ./logger */
"./src/utils/logger.ts"),z=P(
/*! ../controller/level-helper */
"./src/controller/level-helper.ts");function V(T,_){for(var m=null,v=0,h=T.length;v<h;v++){var E=T[v];if(E&&E.cc===_){m=E;break}}return m}function Y(T,_,m){return!(!_.details||!(m.endCC>m.startCC||T&&T.cc<m.startCC))}function U(T,_,m){void 0===m&&(m=0);var v=T.fragments,h=_.fragments;if(h.length&&v.length){var E=V(v,h[0].cc);if(E&&(!E||E.startPTS))return E;B.logger.log("No frag in previous level to align on")}else B.logger.log("No fragments to align")}function k(T,_){if(T){var m=T.start+_;T.start=T.startPTS=m,T.endPTS=m+T.duration}}function L(T,_){for(var m=_.fragments,v=0,h=m.length;v<h;v++)k(m[v],T);_.fragmentHint&&k(_.fragmentHint,T),_.alignedSliding=!0}function R(T,_,m){_&&(function O(T,_,m){if(Y(T,m,_)){var v=U(m.details,_);v&&(0,G.isFiniteNumber)(v.start)&&(B.logger.log("Adjusting PTS using last level due to CC increase within current level "+_.url),L(v.start,_))}}(T,m,_),!m.alignedSliding&&_.details&&x(m,_.details),!m.alignedSliding&&_.details&&!m.skippedSegments&&(0,z.adjustSliding)(_.details,m))}function x(T,_){if(_.fragments.length&&T.hasProgramDateTime&&_.hasProgramDateTime){var m=_.fragments[0].programDateTime,v=T.fragments[0].programDateTime,h=(v-m)/1e3+_.fragments[0].start;h&&(0,G.isFiniteNumber)(h)&&(B.logger.log("Adjusting PTS using programDateTime delta "+(v-m)+"ms, sliding:"+h.toFixed(3)+" "+T.url+" "),L(h,T))}}function A(T,_){if(T.hasProgramDateTime&&_.hasProgramDateTime){var m=T.fragments,v=_.fragments;if(m.length&&v.length){var E=v[Math.round(v.length/2)-1],D=V(m,E.cc)||m[Math.round(m.length/2)-1],f=E.programDateTime,y=D.programDateTime;null!==f&&null!==y&&L((y-f)/1e3-(D.start-E.start),T)}}}},"./src/utils/ewma-bandwidth-estimator.ts":
/*!***********************************************!*\
                  !*** ./src/utils/ewma-bandwidth-estimator.ts ***!
                  \***********************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>z});var G=P(
/*! ../utils/ewma */
"./src/utils/ewma.ts");const z=function(){function V(U,k,L){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=L,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new G.default(U),this.fast_=new G.default(k)}var Y=V.prototype;return Y.update=function(k,L){var R=this.slow_,O=this.fast_;this.slow_.halfLife!==k&&(this.slow_=new G.default(k,R.getEstimate(),R.getTotalWeight())),this.fast_.halfLife!==L&&(this.fast_=new G.default(L,O.getEstimate(),O.getTotalWeight()))},Y.sample=function(k,L){var O=(k=Math.max(k,this.minDelayMs_))/1e3,x=8*L/O;this.fast_.sample(O,x),this.slow_.sample(O,x)},Y.canEstimate=function(){var k=this.fast_;return k&&k.getTotalWeight()>=this.minWeight_},Y.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},Y.destroy=function(){},V}()},"./src/utils/ewma.ts":
/*!***************************!*\
                  !*** ./src/utils/ewma.ts ***!
                  \***************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>B});const B=function(){function z(Y,U,k){void 0===U&&(U=0),void 0===k&&(k=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=Y,this.alpha_=Y?Math.exp(Math.log(.5)/Y):0,this.estimate_=U,this.totalWeight_=k}var V=z.prototype;return V.sample=function(U,k){var L=Math.pow(this.alpha_,U);this.estimate_=k*(1-L)+L*this.estimate_,this.totalWeight_+=U},V.getTotalWeight=function(){return this.totalWeight_},V.getEstimate=function(){if(this.alpha_){var U=1-Math.pow(this.alpha_,this.totalWeight_);if(U)return this.estimate_/U}return this.estimate_},z}()},"./src/utils/fetch-loader.ts":
/*!***********************************!*\
                  !*** ./src/utils/fetch-loader.ts ***!
                  \***********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>h,fetchSupported:()=>A});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ../loader/load-stats */
"./src/loader/load-stats.ts"),z=P(
/*! ../demux/chunk-cache */
"./src/demux/chunk-cache.ts");function Y(E){var D="function"==typeof Map?new Map:void 0;return Y=function(y){if(null===y||!function L(E){return-1!==Function.toString.call(E).indexOf("[native code]")}(y))return y;if("function"!=typeof y)throw new TypeError("Super expression must either be null or a function");if(typeof D<"u"){if(D.has(y))return D.get(y);D.set(y,w)}function w(){return U(y,arguments,O(this).constructor)}return w.prototype=Object.create(y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),R(w,y)},Y(E)}function U(E,D,f){return(U=function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(w,b,C){var u=[null];u.push.apply(u,b);var c=new(Function.bind.apply(w,u));return C&&R(c,C.prototype),c}).apply(null,arguments)}function R(E,D){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,w){return y.__proto__=w,y})(E,D)}function O(E){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)})(E)}function x(){return x=Object.assign?Object.assign.bind():function(E){for(var D=1;D<arguments.length;D++){var f=arguments[D];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(E[y]=f[y])}return E},x.apply(this,arguments)}function A(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var T=function(){function E(f){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=f.fetchSetup||m,this.controller=new self.AbortController,this.stats=new B.LoadStats}var D=E.prototype;return D.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},D.abortInternal=function(){var y=this.response;(!y||!y.ok)&&(this.stats.aborted=!0,this.controller.abort())},D.abort=function(){var y;this.abortInternal(),null!==(y=this.callbacks)&&void 0!==y&&y.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},D.load=function(y,w,b){var C=this,u=this.stats;if(u.loading.start)throw new Error("Loader can only be used once.");u.loading.start=self.performance.now();var d=function _(E,D){var f={method:"GET",mode:"cors",credentials:"same-origin",signal:D,headers:new self.Headers(x({},E.headers))};return E.rangeEnd&&f.headers.set("Range","bytes="+E.rangeStart+"-"+String(E.rangeEnd-1)),f}(y,this.controller.signal),c=b.onProgress,p="arraybuffer"===y.responseType,M=p?"byteLength":"length";this.context=y,this.config=w,this.callbacks=b,this.request=this.fetchSetup(y,d),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){C.abortInternal(),b.onTimeout(u,y,C.response)},w.timeout),self.fetch(this.request).then(function(S){if(C.response=C.loader=S,!S.ok)throw new v(S.statusText||"fetch, bad network response",S.status,S);return u.loading.first=Math.max(self.performance.now(),u.loading.start),u.total=parseInt(S.headers.get("Content-Length")||"0"),c&&(0,G.isFiniteNumber)(w.highWaterMark)?C.loadProgressively(S,u,y,w.highWaterMark,c):p?S.arrayBuffer():S.text()}).then(function(S){var F=C.response;self.clearTimeout(C.requestTimeout),u.loading.end=Math.max(self.performance.now(),u.loading.first);var H=S[M];H&&(u.loaded=u.total=H);var N={url:F.url,data:S};c&&!(0,G.isFiniteNumber)(w.highWaterMark)&&c(u,y,S,F),b.onSuccess(N,u,y,F)}).catch(function(S){self.clearTimeout(C.requestTimeout),u.aborted||b.onError({code:S&&S.code||0,text:S?S.message:null},y,S?S.details:null)})},D.getCacheAge=function(){var y=null;if(this.response){var w=this.response.headers.get("age");y=w?parseFloat(w):null}return y},D.loadProgressively=function(y,w,b,C,u){void 0===C&&(C=0);var d=new z.default,c=y.body.getReader();return function M(){return c.read().then(function(S){if(S.done)return d.dataLength&&u(w,b,d.flush(),y),Promise.resolve(new ArrayBuffer(0));var F=S.value,H=F.length;return w.loaded+=H,H<C||d.dataLength?(d.push(F),d.dataLength>=C&&u(w,b,d.flush(),y)):u(w,b,F,y),M()}).catch(function(){return Promise.reject()})}()},E}();function m(E,D){return new self.Request(E.url,D)}var v=function(E){function D(f,y,w){var b;return(b=E.call(this,f)||this).code=void 0,b.details=void 0,b.code=y,b.details=w,b}return function V(E,D){E.prototype=Object.create(D.prototype),E.prototype.constructor=E,R(E,D)}(D,E),D}(Y(Error));const h=T},"./src/utils/hex.ts":
/*!**************************!*\
                  !*** ./src/utils/hex.ts ***!
                  \**************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>B});const B={hexDump:function(V){for(var Y="",U=0;U<V.length;U++){var k=V[U].toString(16);k.length<2&&(k="0"+k),Y+=k}return Y}}},"./src/utils/imsc1-ttml-parser.ts":
/*!****************************************!*\
                  !*** ./src/utils/imsc1-ttml-parser.ts ***!
                  \****************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{IMSC1_CODEC:()=>L,parseIMSC1:()=>A});var G=P(
/*! ./mp4-tools */
"./src/utils/mp4-tools.ts"),B=P(
/*! ./vttparser */
"./src/utils/vttparser.ts"),z=P(
/*! ./vttcue */
"./src/utils/vttcue.ts"),V=P(
/*! ../demux/id3 */
"./src/demux/id3.ts"),Y=P(
/*! ./timescale-conversion */
"./src/utils/timescale-conversion.ts"),U=P(
/*! ./webvtt-parser */
"./src/utils/webvtt-parser.ts");function k(){return k=Object.assign?Object.assign.bind():function(b){for(var C=1;C<arguments.length;C++){var u=arguments[C];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(b[d]=u[d])}return b},k.apply(this,arguments)}var L="stpp.ttml.im1t",R=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,O=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,x={left:"start",center:"center",right:"end",start:"start",end:"end"};function A(b,C,u,d,c){var p=(0,G.findBox)(new Uint8Array(b),["mdat"]);if(0!==p.length){var M=p.map(function(F){return(0,V.utf8ArrayToStr)(F)}),S=(0,Y.toTimescaleFromScale)(C,1,u);try{M.forEach(function(F){return d(function T(b,C){var c=(new DOMParser).parseFromString(b,"text/xml").getElementsByTagName("tt")[0];if(!c)throw new Error("Invalid ttml");var p={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},M=Object.keys(p).reduce(function(K,W){return K[W]=c.getAttribute("ttp:"+W)||p[W],K},{}),S="preserve"!==c.getAttribute("xml:space"),F=m(_(c,"styling","style")),H=m(_(c,"layout","region")),N=_(c,"body","[begin]");return[].map.call(N,function(K){var W=v(K,S);if(!W||!K.hasAttribute("begin"))return null;var $=f(K.getAttribute("begin"),M),Q=f(K.getAttribute("dur"),M),te=f(K.getAttribute("end"),M);if(null===$)throw D(K);if(null===te){if(null===Q)throw D(K);te=$+Q}var Z=new z.default($-C,te-C,W);Z.id=(0,U.generateCueId)(Z.startTime,Z.endTime,Z.text);var ce=function h(b,C,u){var d="http://www.w3.org/ns/ttml#styling",c=null,M=null!=b&&b.hasAttribute("style")?b.getAttribute("style"):null;return M&&u.hasOwnProperty(M)&&(c=u[M]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(S,F){var H=E(C,d,F)||E(b,d,F)||E(c,d,F);return H&&(S[F]=H),S},{})}(H[K.getAttribute("region")],F[K.getAttribute("style")],F),ue=ce.textAlign;if(ue){var fe=x[ue];fe&&(Z.lineAlign=fe),Z.align=ue}return k(Z,ce),Z}).filter(function(K){return null!==K})}(F,S))})}catch(F){c(F)}}else c(new Error("Could not parse IMSC1 mdat"))}function _(b,C,u){var d=b.getElementsByTagName(C)[0];return d?[].slice.call(d.querySelectorAll(u)):[]}function m(b){return b.reduce(function(C,u){var d=u.getAttribute("xml:id");return d&&(C[d]=u),C},{})}function v(b,C){return[].slice.call(b.childNodes).reduce(function(u,d,c){var p;return"br"===d.nodeName&&c?u+"\n":null!==(p=d.childNodes)&&void 0!==p&&p.length?v(d,C):C?u+d.textContent.trim().replace(/\s+/g," "):u+d.textContent},"")}function E(b,C,u){return b&&b.hasAttributeNS(C,u)?b.getAttributeNS(C,u):null}function D(b){return new Error("Could not parse ttml timestamp "+b)}function f(b,C){if(!b)return null;var u=(0,B.parseTimeStamp)(b);return null===u&&(R.test(b)?u=function y(b,C){var u=R.exec(b);return 3600*(0|u[1])+60*(0|u[2])+(0|u[3])+((0|u[4])+(0|u[5])/C.subFrameRate)/C.frameRate}(b,C):O.test(b)&&(u=function w(b,C){var u=O.exec(b),d=Number(u[1]);switch(u[2]){case"h":return 3600*d;case"m":return 60*d;case"ms":return 1e3*d;case"f":return d/C.frameRate;case"t":return d/C.tickRate}return d}(b,C))),u}},"./src/utils/keysystem-util.ts":
/*!*************************************!*\
                  !*** ./src/utils/keysystem-util.ts ***!
                  \*************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{changeEndianness:()=>z,convertDataUriToArrayBytes:()=>V,strToUtf8array:()=>Y});var G=P(
/*! ./numeric-encoding-utils */
"./src/utils/numeric-encoding-utils.ts");function z(U){var k=function(R,O,x){var A=R[O];R[O]=R[x],R[x]=A};k(U,0,3),k(U,1,2),k(U,4,5),k(U,6,7)}function V(U){var k=U.split(":"),L=null;if("data"===k[0]&&2===k.length){var R=k[1].split(";"),O=R[R.length-1].split(",");if(2===O.length){var A=O[1];"base64"===O[0]?(R.splice(-1,1),L=(0,G.base64Decode)(A)):L=function B(U){var k=Y(U).subarray(0,16),L=new Uint8Array(16);return L.set(k,16-k.length),L}(A)}}return L}function Y(U){return Uint8Array.from(unescape(encodeURIComponent(U)),function(k){return k.charCodeAt(0)})}},"./src/utils/logger.ts":
/*!*****************************!*\
                  !*** ./src/utils/logger.ts ***!
                  \*****************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{enableLogs:()=>U,logger:()=>k});var G=function(){},B={trace:G,debug:G,log:G,warn:G,info:G,error:G},z=B;function U(L,R){if(self.console&&!0===L||"object"==typeof L){!function Y(L){for(var R=arguments.length,O=new Array(R>1?R-1:0),x=1;x<R;x++)O[x-1]=arguments[x];O.forEach(function(A){z[A]=L[A]?L[A].bind(L):function V(L){var R=self.console[L];return R?R.bind(self.console,"["+L+"] >"):G}(A)})}(L,"debug","log","info","warn","error");try{z.log('Debug logs enabled for "'+R+'"')}catch{z=B}}else z=B}var k=B},"./src/utils/mediakeys-helper.ts":
/*!***************************************!*\
                  !*** ./src/utils/mediakeys-helper.ts ***!
                  \***************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{KeySystemFormats:()=>B,KeySystemIds:()=>V,KeySystems:()=>G,getKeySystemsForConfig:()=>k,getSupportedMediaKeySystemConfigurations:()=>R,keySystemDomainToKeySystemFormat:()=>U,keySystemFormatToKeySystemDomain:()=>z,keySystemIdToKeySystemDomain:()=>Y,requestMediaKeySystemAccess:()=>L});var G=(()=>{return(x=G||(G={})).CLEARKEY="org.w3.clearkey",x.FAIRPLAY="com.apple.fps",x.PLAYREADY="com.microsoft.playready",x.WIDEVINE="com.widevine.alpha",G;var x})(),B=(()=>{return(x=B||(B={})).CLEARKEY="org.w3.clearkey",x.FAIRPLAY="com.apple.streamingkeydelivery",x.PLAYREADY="com.microsoft.playready",x.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",B;var x})();function z(x){switch(x){case B.FAIRPLAY:return G.FAIRPLAY;case B.PLAYREADY:return G.PLAYREADY;case B.WIDEVINE:return G.WIDEVINE;case B.CLEARKEY:return G.CLEARKEY}}var V=(()=>((V||(V={})).WIDEVINE="edef8ba979d64acea3c827dcd51d21ed",V))();function Y(x){if(x===V.WIDEVINE)return G.WIDEVINE}function U(x){switch(x){case G.FAIRPLAY:return B.FAIRPLAY;case G.PLAYREADY:return B.PLAYREADY;case G.WIDEVINE:return B.WIDEVINE;case G.CLEARKEY:return B.CLEARKEY}}function k(x){var A=x.drmSystems,T=x.widevineLicenseUrl,_=A?[G.FAIRPLAY,G.WIDEVINE,G.PLAYREADY,G.CLEARKEY].filter(function(m){return!!A[m]}):[];return!_[G.WIDEVINE]&&T&&_.push(G.WIDEVINE),_}var L=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function R(x,A,T,_){var m;switch(x){case G.FAIRPLAY:m=["cenc","sinf"];break;case G.WIDEVINE:case G.PLAYREADY:m=["cenc"];break;case G.CLEARKEY:m=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+x)}return function O(x,A,T,_){return[{initDataTypes:x,persistentState:_.persistentState||"not-allowed",distinctiveIdentifier:_.distinctiveIdentifier||"not-allowed",sessionTypes:_.sessionTypes||[_.sessionType||"temporary"],audioCapabilities:A.map(function(v){return{contentType:'audio/mp4; codecs="'+v+'"',robustness:_.audioRobustness||"",encryptionScheme:_.audioEncryptionScheme||null}}),videoCapabilities:T.map(function(v){return{contentType:'video/mp4; codecs="'+v+'"',robustness:_.videoRobustness||"",encryptionScheme:_.videoEncryptionScheme||null}})}]}(m,A,T,_)}},"./src/utils/mediasource-helper.ts":
/*!*****************************************!*\
                  !*** ./src/utils/mediasource-helper.ts ***!
                  \*****************************************/(pe,J,P)=>{"use strict";function G(){return self.MediaSource||self.WebKitMediaSource}P.r(J),P.d(J,{getMediaSource:()=>G})},"./src/utils/mp4-tools.ts":
/*!********************************!*\
                  !*** ./src/utils/mp4-tools.ts ***!
                  \********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{RemuxerTrackIdConfig:()=>L,appendUint8Array:()=>C,bin2str:()=>R,computeRawDurationFromSamples:()=>y,discardEPB:()=>M,findBox:()=>_,getDuration:()=>f,getStartDTS:()=>D,mp4Box:()=>F,mp4pssh:()=>H,offsetStartDTS:()=>w,parseEmsg:()=>S,parseInitSegment:()=>v,parsePssh:()=>N,parseSEIMessageFromNALu:()=>p,parseSamples:()=>u,parseSegmentIndex:()=>m,parseSinf:()=>E,patchEncyptionData:()=>h,readSint32:()=>A,readUint16:()=>O,readUint32:()=>x,segmentValidRange:()=>b,writeUint32:()=>T});var G=P(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),B=P(
/*! ./typed-array */
"./src/utils/typed-array.ts"),z=P(
/*! ../demux/id3 */
"./src/demux/id3.ts"),V=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=P(
/*! ./hex */
"./src/utils/hex.ts"),U=Math.pow(2,32)-1,k=[].push,L={video:1,audio:2,id3:3,text:4};function R(K){return String.fromCharCode.apply(null,K)}function O(K,W){var $=K[W]<<8|K[W+1];return $<0?65536+$:$}function x(K,W){var $=A(K,W);return $<0?4294967296+$:$}function A(K,W){return K[W]<<24|K[W+1]<<16|K[W+2]<<8|K[W+3]}function T(K,W,$){K[W]=$>>24,K[W+1]=$>>16&255,K[W+2]=$>>8&255,K[W+3]=255&$}function _(K,W){var $=[];if(!W.length)return $;for(var Q=K.byteLength,te=0;te<Q;){var Z=x(K,te),oe=Z>1?te+Z:Q;if(R(K.subarray(te+4,te+8))===W[0])if(1===W.length)$.push(K.subarray(te+8,oe));else{var ce=_(K.subarray(te+8,oe),W.slice(1));ce.length&&k.apply($,ce)}te=oe}return $}function m(K){var W=[],$=K[0],Q=8,te=x(K,Q);Q+=4,Q+=0===$?8:16;var oe=K.length+0,ce=O(K,Q+=2);Q+=2;for(var ue=0;ue<ce;ue++){var fe=Q,De=x(K,fe);fe+=4;var Re=2147483647&De;if(1==(2147483648&De)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var Ce=x(K,fe);fe+=4,W.push({referenceSize:Re,subsegmentDuration:Ce,info:{duration:Ce/te,start:oe,end:oe+Re-1}}),oe+=Re,Q=fe+=4}return{earliestPresentationTime:0,timescale:te,version:$,referencesCount:ce,references:W}}function v(K){for(var W=[],$=_(K,["moov","trak"]),Q=0;Q<$.length;Q++){var te=$[Q],Z=_(te,["tkhd"])[0];if(Z){var re=Z[0],oe=0===re?12:20,ce=x(Z,oe),ue=_(te,["mdia","mdhd"])[0];if(ue){var fe=x(ue,oe=0===(re=ue[0])?12:20),De=_(te,["mdia","hdlr"])[0];if(De){var Re=R(De.subarray(8,12)),Te={soun:G.ElementaryStreamTypes.AUDIO,vide:G.ElementaryStreamTypes.VIDEO}[Re];if(Te){var Ce=_(te,["mdia","minf","stbl","stsd"])[0],we=void 0;Ce&&(we=R(Ce.subarray(12,16))),W[ce]={timescale:fe,type:Te},W[Te]={timescale:fe,id:ce,codec:we}}}}}}return _(K,["moov","mvex","trex"]).forEach(function(ct){var Ft=x(ct,4),bt=W[Ft];bt&&(bt.default={duration:x(ct,12),flags:x(ct,20)})}),W}function h(K,W){if(!K||!W)return K;var $=W.keyId;return $&&W.isCommonEncryption&&_(K,["moov","trak"]).forEach(function(te){var re=_(te,["mdia","minf","stbl","stsd"])[0].subarray(8),oe=_(re,["enca"]),ce=oe.length>0;ce||(oe=_(re,["encv"])),oe.forEach(function(ue){_(ue.subarray(ce?28:78),["sinf"]).forEach(function(Re){var Te=E(Re);if(Te){var Ce=Te.subarray(8,24);Ce.some(function(we){return 0!==we})||(V.logger.log("[eme] Patching keyId in 'enc"+(ce?"a":"v")+">sinf>>tenc' box: "+Y.default.hexDump(Ce)+" -> "+Y.default.hexDump($)),Te.set($,8))}})})}),K}function E(K){var W=_(K,["schm"])[0];if(W){var $=R(W.subarray(4,8));if("cbcs"===$||"cenc"===$)return _(K,["schi","tenc"])[0]}return V.logger.error("[eme] missing 'schm' box"),null}function D(K,W){return _(W,["moof","traf"]).reduce(function($,Q){var te=_(Q,["tfdt"])[0],Z=te[0],re=_(Q,["tfhd"]).reduce(function(oe,ce){var ue=x(ce,4),fe=K[ue];if(fe){var De=x(te,4);1===Z&&(De*=Math.pow(2,32),De+=x(te,8));var Te=De/(fe.timescale||9e4);if(isFinite(Te)&&(null===oe||Te<oe))return Te}return oe},null);return null!==re&&isFinite(re)&&(null===$||re<$)?re:$},null)||0}function f(K,W){for(var $=0,Q=0,te=0,Z=_(K,["moof","traf"]),re=0;re<Z.length;re++){var oe=Z[re],ce=_(oe,["tfhd"])[0],fe=W[x(ce,4)];if(fe){var De=fe.default,Re=x(ce,0)|De?.flags,Te=De?.duration;8&Re&&(Te=x(ce,2&Re?12:8));for(var Ce=fe.timescale||9e4,we=_(oe,["trun"]),et=0;et<we.length;et++)!($=y(we[et]))&&Te&&($=Te*x(we[et],4)),fe.type===G.ElementaryStreamTypes.VIDEO?Q+=$/Ce:fe.type===G.ElementaryStreamTypes.AUDIO&&(te+=$/Ce)}}if(0===Q&&0===te){for(var Ft=0,bt=_(K,["sidx"]),kt=0;kt<bt.length;kt++){var gt=m(bt[kt]);null!=gt&&gt.references&&(Ft+=gt.references.reduce(function(Rt,vt){return Rt+vt.info.duration||0},0))}return Ft}return Q||te}function y(K){var W=x(K,0),$=8;1&W&&($+=4),4&W&&($+=4);for(var Q=0,te=x(K,4),Z=0;Z<te;Z++)256&W&&(Q+=x(K,$),$+=4),512&W&&($+=4),1024&W&&($+=4),2048&W&&($+=4);return Q}function w(K,W,$){_(W,["moof","traf"]).forEach(function(Q){_(Q,["tfhd"]).forEach(function(te){var Z=x(te,4),re=K[Z];if(re){var oe=re.timescale||9e4;_(Q,["tfdt"]).forEach(function(ce){var ue=ce[0],fe=x(ce,4);if(0===ue)fe-=$*oe,T(ce,4,fe=Math.max(fe,0));else{fe*=Math.pow(2,32),fe+=x(ce,8),fe-=$*oe,fe=Math.max(fe,0);var De=Math.floor(fe/(U+1)),Re=Math.floor(fe%(U+1));T(ce,4,De),T(ce,8,Re)}})}})})}function b(K){var W={valid:null,remainder:null},$=_(K,["moof"]);if(!$)return W;if($.length<2)return W.remainder=K,W;var Q=$[$.length-1];return W.valid=(0,B.sliceUint8)(K,0,Q.byteOffset-8),W.remainder=(0,B.sliceUint8)(K,Q.byteOffset-8),W}function C(K,W){var $=new Uint8Array(K.length+W.length);return $.set(K),$.set(W,K.length),$}function u(K,W){var $=[],Q=W.samples,te=W.timescale,Z=W.id,re=!1;return _(Q,["moof"]).map(function(ce){var ue=ce.byteOffset-8;_(ce,["traf"]).map(function(De){var Re=_(De,["tfdt"]).map(function(Te){var Ce=Te[0],we=x(Te,4);return 1===Ce&&(we*=Math.pow(2,32),we+=x(Te,8)),we/te})[0];return void 0!==Re&&(K=Re),_(De,["tfhd"]).map(function(Te){var Ce=x(Te,4),we=16777215&x(Te,0),bt=0,kt=0!=(16&we),gt=0,Rt=0!=(32&we),vt=8;Ce===Z&&(0!=(1&we)&&(vt+=8),0!=(2&we)&&(vt+=4),0!=(8&we)&&(bt=x(Te,vt),vt+=4),kt&&(gt=x(Te,vt),vt+=4),Rt&&(vt+=4),"video"===W.type&&(re=function d(K){if(!K)return!1;var W=K.indexOf("."),$=W<0?K:K.substring(0,W);return"hvc1"===$||"hev1"===$||"dvh1"===$||"dvhe"===$}(W.codec)),_(De,["trun"]).map(function($t){var hn=$t[0],Mt=16777215&x($t,0),xn=0!=(1&Mt),Fn=0,or=0!=(4&Mt),zn=0!=(256&Mt),sr=0,Dr=0!=(512&Mt),Gn=0,_n=0!=(1024&Mt),Dn=0!=(2048&Mt),$n=0,Yn=x($t,4),Ut=8;xn&&(Fn=x($t,Ut),Ut+=4),or&&(Ut+=4);for(var Cn=Fn+ue,Xn=0;Xn<Yn;Xn++){if(zn?(sr=x($t,Ut),Ut+=4):sr=bt,Dr?(Gn=x($t,Ut),Ut+=4):Gn=gt,_n&&(Ut+=4),Dn&&($n=0===hn?x($t,Ut):A($t,Ut),Ut+=4),W.type===G.ElementaryStreamTypes.VIDEO)for(var po=0;po<Gn;){var vi=x(Q,Cn);c(re,Q[Cn+=4])&&p(Q.subarray(Cn,Cn+vi),re?2:1,K+$n/te,$),Cn+=vi,po+=vi+4}K+=sr/te}}))})})}),$}function c(K,W){if(K){var $=W>>1&63;return 39===$||40===$}return 6==(31&W)}function p(K,W,$,Q){var te=M(K),Z=0;Z+=W;for(var re=0,oe=0,ce=!1,ue=0;Z<te.length;){re=0;do{if(Z>=te.length)break;re+=ue=te[Z++]}while(255===ue);oe=0;do{if(Z>=te.length)break;oe+=ue=te[Z++]}while(255===ue);var fe=te.length-Z;if(!ce&&4===re&&Z<te.length){if(ce=!0,181===te[Z++]){var Re=O(te,Z);if(Z+=2,49===Re){var Te=x(te,Z);if(Z+=4,1195456820===Te){var Ce=te[Z++];if(3===Ce){var we=te[Z++],ct=64&we,Ft=ct?2+3*(31&we):0,bt=new Uint8Array(Ft);if(ct){bt[0]=we;for(var kt=1;kt<Ft;kt++)bt[kt]=te[Z++]}Q.push({type:Ce,payloadType:re,pts:$,bytes:bt})}}}}}else if(5===re&&oe<fe){if(ce=!0,oe>16){for(var gt=[],Rt=0;Rt<16;Rt++){var vt=te[Z++].toString(16);gt.push(1==vt.length?"0"+vt:vt),(3===Rt||5===Rt||7===Rt||9===Rt)&&gt.push("-")}for(var $t=oe-16,hn=new Uint8Array($t),Mt=0;Mt<$t;Mt++)hn[Mt]=te[Z++];Q.push({payloadType:re,pts:$,uuid:gt.join(""),userData:(0,z.utf8ArrayToStr)(hn),userDataBytes:hn})}}else if(oe<fe)Z+=oe;else if(oe>fe)break}}function M(K){for(var W=K.byteLength,$=[],Q=1;Q<W-2;)0===K[Q]&&0===K[Q+1]&&3===K[Q+2]?($.push(Q+2),Q+=2):Q++;if(0===$.length)return K;var te=W-$.length,Z=new Uint8Array(te),re=0;for(Q=0;Q<te;re++,Q++)re===$[0]&&(re++,$.shift()),Z[Q]=K[re];return Z}function S(K){var W=K[0],$="",Q="",te=0,Z=0,re=0,oe=0,ce=0,ue=0;if(0===W){for(;"\0"!==R(K.subarray(ue,ue+1));)$+=R(K.subarray(ue,ue+1)),ue+=1;for($+=R(K.subarray(ue,ue+1)),ue+=1;"\0"!==R(K.subarray(ue,ue+1));)Q+=R(K.subarray(ue,ue+1)),ue+=1;Q+=R(K.subarray(ue,ue+1)),ue+=1,te=x(K,12),Z=x(K,16),oe=x(K,20),ce=x(K,24),ue=28}else if(1===W){te=x(K,ue+=4);var fe=x(K,ue+=4),De=x(K,ue+=4);for(ue+=4,re=Math.pow(2,32)*fe+De,Number.isSafeInteger(re)||(re=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),oe=x(K,ue),ce=x(K,ue+=4),ue+=4;"\0"!==R(K.subarray(ue,ue+1));)$+=R(K.subarray(ue,ue+1)),ue+=1;for($+=R(K.subarray(ue,ue+1)),ue+=1;"\0"!==R(K.subarray(ue,ue+1));)Q+=R(K.subarray(ue,ue+1)),ue+=1;Q+=R(K.subarray(ue,ue+1)),ue+=1}return{schemeIdUri:$,value:Q,timeScale:te,presentationTime:re,presentationTimeDelta:Z,eventDuration:oe,id:ce,payload:K.subarray(ue,K.byteLength)}}function F(K){for(var W=arguments.length,$=new Array(W>1?W-1:0),Q=1;Q<W;Q++)$[Q-1]=arguments[Q];for(var te=$.length,Z=8,re=te;re--;)Z+=$[re].byteLength;var oe=new Uint8Array(Z);for(oe[0]=Z>>24&255,oe[1]=Z>>16&255,oe[2]=Z>>8&255,oe[3]=255&Z,oe.set(K,4),re=0,Z=8;re<te;re++)oe.set($[re],Z),Z+=$[re].byteLength;return oe}function H(K,W,$){if(16!==K.byteLength)throw new RangeError("Invalid system id");var Q,te,oe;if(W){Q=1,te=new Uint8Array(16*W.length);for(var Z=0;Z<W.length;Z++){var re=W[Z];if(16!==re.byteLength)throw new RangeError("Invalid key");te.set(re,16*Z)}}else Q=0,te=new Uint8Array;Q>0?(oe=new Uint8Array(4),W.length>0&&new DataView(oe.buffer).setUint32(0,W.length,!1)):oe=new Uint8Array;var ce=new Uint8Array(4);return $&&$.byteLength>0&&new DataView(ce.buffer).setUint32(0,$.byteLength,!1),F([112,115,115,104],new Uint8Array([Q,0,0,0]),K,oe,te,ce,$||new Uint8Array)}function N(K){if(!(K instanceof ArrayBuffer)||K.byteLength<32)return null;var W={version:0,systemId:"",kids:null,data:null},$=new DataView(K),Q=$.getUint32(0);if(K.byteLength!==Q&&Q>44)return null;if(1886614376!==$.getUint32(4)||(W.version=$.getUint32(8)>>>24,W.version>1))return null;W.systemId=Y.default.hexDump(new Uint8Array(K,12,16));var Z=$.getUint32(28);if(0===W.version){if(Q-32<Z)return null;W.data=new Uint8Array(K,32,Z)}else if(1===W.version){W.kids=[];for(var re=0;re<Z;re++)W.kids.push(new Uint8Array(K,32+16*re,16))}return W}},"./src/utils/numeric-encoding-utils.ts":
/*!*********************************************!*\
                  !*** ./src/utils/numeric-encoding-utils.ts ***!
                  \*********************************************/(pe,J,P)=>{"use strict";function G(k){return k.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function B(k){return btoa(k)}function z(k){return atob(k)}function V(k){return btoa(String.fromCharCode.apply(String,k))}function Y(k){return G(V(k))}function U(k){return Uint8Array.from(atob(k),function(L){return L.charCodeAt(0)})}P.r(J),P.d(J,{base64Decode:()=>U,base64DecodeToStr:()=>z,base64Encode:()=>V,base64ToBase64Url:()=>G,base64UrlEncode:()=>Y,strToBase64Encode:()=>B})},"./src/utils/output-filter.ts":
/*!************************************!*\
                  !*** ./src/utils/output-filter.ts ***!
                  \************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>G});var G=function(){function B(V,Y){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=V,this.trackName=Y}var z=B.prototype;return z.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},z.newCue=function(Y,U,k){(null===this.startTime||this.startTime>Y)&&(this.startTime=Y),this.endTime=U,this.screen=k,this.timelineController.createCaptionsTrack(this.trackName)},z.reset=function(){this.cueRanges=[],this.startTime=null},B}()},"./src/utils/texttrack-utils.ts":
/*!**************************************!*\
                  !*** ./src/utils/texttrack-utils.ts ***!
                  \**************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{addCueToTrack:()=>z,clearCurrentCues:()=>V,getCuesInRange:()=>k,removeCuesInRange:()=>Y,sendAddTrackEvent:()=>B});var G=P(
/*! ./logger */
"./src/utils/logger.ts");function B(L,R){var O;try{O=new Event("addtrack")}catch{(O=document.createEvent("Event")).initEvent("addtrack",!1,!1)}O.track=L,R.dispatchEvent(O)}function z(L,R){var O=L.mode;if("disabled"===O&&(L.mode="hidden"),L.cues&&!L.cues.getCueById(R.id))try{if(L.addCue(R),!L.cues.getCueById(R.id))throw new Error("addCue is failed for: "+R)}catch(A){G.logger.debug("[texttrack-utils]: "+A);var x=new self.TextTrackCue(R.startTime,R.endTime,R.text);x.id=R.id,L.addCue(x)}"disabled"===O&&(L.mode=O)}function V(L){var R=L.mode;if("disabled"===R&&(L.mode="hidden"),L.cues)for(var O=L.cues.length;O--;)L.removeCue(L.cues[O]);"disabled"===R&&(L.mode=R)}function Y(L,R,O,x){var A=L.mode;if("disabled"===A&&(L.mode="hidden"),L.cues&&L.cues.length>0)for(var T=k(L.cues,R,O),_=0;_<T.length;_++)(!x||x(T[_]))&&L.removeCue(T[_]);"disabled"===A&&(L.mode=A)}function k(L,R,O){var x=[],A=function U(L,R){if(R<L[0].startTime)return 0;var O=L.length-1;if(R>L[O].endTime)return-1;for(var x=0,A=O;x<=A;){var T=Math.floor((A+x)/2);if(R<L[T].startTime)A=T-1;else{if(!(R>L[T].startTime&&x<O))return T;x=T+1}}return L[x].startTime-R<R-L[A].startTime?x:A}(L,R);if(A>-1)for(var T=A,_=L.length;T<_;T++){var m=L[T];if(m.startTime>=R&&m.endTime<=O)x.push(m);else if(m.startTime>O)return x}return x}},"./src/utils/time-ranges.ts":
/*!**********************************!*\
                  !*** ./src/utils/time-ranges.ts ***!
                  \**********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>B});const B={toString:function(V){for(var Y="",U=V.length,k=0;k<U;k++)Y+="["+V.start(k).toFixed(3)+"-"+V.end(k).toFixed(3)+"]";return Y}}},"./src/utils/timescale-conversion.ts":
/*!*******************************************!*\
                  !*** ./src/utils/timescale-conversion.ts ***!
                  \*******************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{toMpegTsClockFromTimescale:()=>Y,toMsFromMpegTsClock:()=>V,toTimescaleFromBase:()=>B,toTimescaleFromScale:()=>z});var G=9e4;function B(U,k,L,R){void 0===L&&(L=1),void 0===R&&(R=!1);var O=U*k*L;return R?Math.round(O):O}function z(U,k,L,R){return void 0===L&&(L=1),void 0===R&&(R=!1),B(U,k,1/L,R)}function V(U,k){return void 0===k&&(k=!1),B(U,1e3,1/G,k)}function Y(U,k){return void 0===k&&(k=1),B(U,G,1/k)}},"./src/utils/typed-array.ts":
/*!**********************************!*\
                  !*** ./src/utils/typed-array.ts ***!
                  \**********************************/(pe,J,P)=>{"use strict";function G(B,z,V){return Uint8Array.prototype.slice?B.slice(z,V):new Uint8Array(Array.prototype.slice.call(B,z,V))}P.r(J),P.d(J,{sliceUint8:()=>G})},"./src/utils/vttcue.ts":
/*!*****************************!*\
                  !*** ./src/utils/vttcue.ts ***!
                  \*****************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>G});const G=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var B=["","lr","rl"],z=["start","middle","end","left","right"];function V(R,O){if("string"!=typeof O||!Array.isArray(R))return!1;var x=O.toLowerCase();return!!~R.indexOf(x)&&x}function U(R){return V(z,R)}function k(R){for(var O=arguments.length,x=new Array(O>1?O-1:0),A=1;A<O;A++)x[A-1]=arguments[A];for(var T=1;T<arguments.length;T++){var _=arguments[T];for(var m in _)R[m]=_[m]}return R}function L(R,O,x){var A=this,T={enumerable:!0};A.hasBeenReset=!1;var _="",m=!1,v=R,h=O,E=x,D=null,f="",y=!0,w="auto",b="start",C=50,u="middle",d=50,c="middle";Object.defineProperty(A,"id",k({},T,{get:function(){return _},set:function(M){_=""+M}})),Object.defineProperty(A,"pauseOnExit",k({},T,{get:function(){return m},set:function(M){m=!!M}})),Object.defineProperty(A,"startTime",k({},T,{get:function(){return v},set:function(M){if("number"!=typeof M)throw new TypeError("Start time must be set to a number.");v=M,this.hasBeenReset=!0}})),Object.defineProperty(A,"endTime",k({},T,{get:function(){return h},set:function(M){if("number"!=typeof M)throw new TypeError("End time must be set to a number.");h=M,this.hasBeenReset=!0}})),Object.defineProperty(A,"text",k({},T,{get:function(){return E},set:function(M){E=""+M,this.hasBeenReset=!0}})),Object.defineProperty(A,"region",k({},T,{get:function(){return D},set:function(M){D=M,this.hasBeenReset=!0}})),Object.defineProperty(A,"vertical",k({},T,{get:function(){return f},set:function(M){var S=function Y(R){return V(B,R)}(M);if(!1===S)throw new SyntaxError("An invalid or illegal string was specified.");f=S,this.hasBeenReset=!0}})),Object.defineProperty(A,"snapToLines",k({},T,{get:function(){return y},set:function(M){y=!!M,this.hasBeenReset=!0}})),Object.defineProperty(A,"line",k({},T,{get:function(){return w},set:function(M){if("number"!=typeof M&&"auto"!==M)throw new SyntaxError("An invalid number or illegal string was specified.");w=M,this.hasBeenReset=!0}})),Object.defineProperty(A,"lineAlign",k({},T,{get:function(){return b},set:function(M){var S=U(M);if(!S)throw new SyntaxError("An invalid or illegal string was specified.");b=S,this.hasBeenReset=!0}})),Object.defineProperty(A,"position",k({},T,{get:function(){return C},set:function(M){if(M<0||M>100)throw new Error("Position must be between 0 and 100.");C=M,this.hasBeenReset=!0}})),Object.defineProperty(A,"positionAlign",k({},T,{get:function(){return u},set:function(M){var S=U(M);if(!S)throw new SyntaxError("An invalid or illegal string was specified.");u=S,this.hasBeenReset=!0}})),Object.defineProperty(A,"size",k({},T,{get:function(){return d},set:function(M){if(M<0||M>100)throw new Error("Size must be between 0 and 100.");d=M,this.hasBeenReset=!0}})),Object.defineProperty(A,"align",k({},T,{get:function(){return c},set:function(M){var S=U(M);if(!S)throw new SyntaxError("An invalid or illegal string was specified.");c=S,this.hasBeenReset=!0}})),A.displayState=void 0}return L.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},L}()},"./src/utils/vttparser.ts":
/*!********************************!*\
                  !*** ./src/utils/vttparser.ts ***!
                  \********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{VTTParser:()=>O,fixLineBreaks:()=>R,parseTimeStamp:()=>z});var G=P(
/*! ./vttcue */
"./src/utils/vttcue.ts"),B=function(){function x(){}return x.prototype.decode=function(_,m){if(!_)return"";if("string"!=typeof _)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(_))},x}();function z(x){function A(_,m,v,h){return 3600*(0|_)+60*(0|m)+(0|v)+parseFloat(h||0)}var T=x.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return T?parseFloat(T[2])>59?A(T[2],T[3],0,T[4]):A(T[1],T[2],T[3],T[4]):null}var V=function(){function x(){this.values=Object.create(null)}var A=x.prototype;return A.set=function(_,m){!this.get(_)&&""!==m&&(this.values[_]=m)},A.get=function(_,m,v){return v?this.has(_)?this.values[_]:m[v]:this.has(_)?this.values[_]:m},A.has=function(_){return _ in this.values},A.alt=function(_,m,v){for(var h=0;h<v.length;++h)if(m===v[h]){this.set(_,m);break}},A.integer=function(_,m){/^-?\d+$/.test(m)&&this.set(_,parseInt(m,10))},A.percent=function(_,m){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(m)){var v=parseFloat(m);if(v>=0&&v<=100)return this.set(_,v),!0}return!1},x}();function Y(x,A,T,_){var m=_?x.split(_):[x];for(var v in m)if("string"==typeof m[v]){var h=m[v].split(T);2===h.length&&A(h[0],h[1])}}var U=new G.default(0,0,""),k="middle"===U.align?"middle":"center";function L(x,A,T){var _=x;function m(){var E=z(x);if(null===E)throw new Error("Malformed timestamp: "+_);return x=x.replace(/^[^\sa-zA-Z-]+/,""),E}function h(){x=x.replace(/^\s+/,"")}if(h(),A.startTime=m(),h(),"--\x3e"!==x.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+_);x=x.slice(3),h(),A.endTime=m(),h(),function v(E,D){var f=new V;Y(E,function(b,C){var u;switch(b){case"region":for(var d=T.length-1;d>=0;d--)if(T[d].id===C){f.set(b,T[d].region);break}break;case"vertical":f.alt(b,C,["rl","lr"]);break;case"line":u=C.split(","),f.integer(b,u[0]),f.percent(b,u[0])&&f.set("snapToLines",!1),f.alt(b,u[0],["auto"]),2===u.length&&f.alt("lineAlign",u[1],["start",k,"end"]);break;case"position":u=C.split(","),f.percent(b,u[0]),2===u.length&&f.alt("positionAlign",u[1],["start",k,"end","line-left","line-right","auto"]);break;case"size":f.percent(b,C);break;case"align":f.alt(b,C,["start",k,"end","left","right"])}},/:/,/\s/),D.region=f.get("region",null),D.vertical=f.get("vertical","");var y=f.get("line","auto");"auto"===y&&-1===U.line&&(y=-1),D.line=y,D.lineAlign=f.get("lineAlign","start"),D.snapToLines=f.get("snapToLines",!0),D.size=f.get("size",100),D.align=f.get("align",k);var w=f.get("position","auto");"auto"===w&&50===U.position&&(w="start"===D.align||"left"===D.align?0:"end"===D.align||"right"===D.align?100:50),D.position=w}(x,A)}function R(x){return x.replace(/<br(?: \/)?>/gi,"\n")}var O=function(){function x(){this.state="INITIAL",this.buffer="",this.decoder=new B,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var A=x.prototype;return A.parse=function(_){var m=this;function v(){var w=m.buffer,b=0;for(w=R(w);b<w.length&&"\r"!==w[b]&&"\n"!==w[b];)++b;var C=w.slice(0,b);return"\r"===w[b]&&++b,"\n"===w[b]&&++b,m.buffer=w.slice(b),C}_&&(m.buffer+=m.decoder.decode(_,{stream:!0}));try{var E="";if("INITIAL"===m.state){if(!/\r\n|\n/.test(m.buffer))return this;var D=(E=v()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!D||!D[0])throw new Error("Malformed WebVTT signature.");m.state="HEADER"}for(var f=!1;m.buffer;){if(!/\r\n|\n/.test(m.buffer))return this;switch(f?f=!1:E=v(),m.state){case"HEADER":/:/.test(E)?Y(E,function(b,C){},/:/):E||(m.state="ID");continue;case"NOTE":E||(m.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(E)){m.state="NOTE";break}if(!E)continue;if(m.cue=new G.default(0,0,""),m.state="CUE",-1===E.indexOf("--\x3e")){m.cue.id=E;continue}case"CUE":if(!m.cue){m.state="BADCUE";continue}try{L(E,m.cue,m.regionList)}catch{m.cue=null,m.state="BADCUE";continue}m.state="CUETEXT";continue;case"CUETEXT":var y=-1!==E.indexOf("--\x3e");if(!E||y&&(f=!0)){m.oncue&&m.cue&&m.oncue(m.cue),m.cue=null,m.state="ID";continue}if(null===m.cue)continue;m.cue.text&&(m.cue.text+="\n"),m.cue.text+=E;continue;case"BADCUE":E||(m.state="ID")}}}catch{"CUETEXT"===m.state&&m.cue&&m.oncue&&m.oncue(m.cue),m.cue=null,m.state="INITIAL"===m.state?"BADWEBVTT":"BADCUE"}return this},A.flush=function(){var _=this;try{if((_.cue||"HEADER"===_.state)&&(_.buffer+="\n\n",_.parse()),"INITIAL"===_.state||"BADWEBVTT"===_.state)throw new Error("Malformed WebVTT signature.")}catch(m){_.onparsingerror&&_.onparsingerror(m)}return _.onflush&&_.onflush(),this},x}()},"./src/utils/webvtt-parser.ts":
/*!************************************!*\
                  !*** ./src/utils/webvtt-parser.ts ***!
                  \************************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{generateCueId:()=>O,parseWebVTT:()=>A});var G=P(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=P(
/*! ./vttparser */
"./src/utils/vttparser.ts"),z=P(
/*! ../demux/id3 */
"./src/demux/id3.ts"),V=P(
/*! ./timescale-conversion */
"./src/utils/timescale-conversion.ts"),Y=P(
/*! ../remux/mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),U=/\r\n|\n\r|\n|\r/g,k=function(_,m,v){return void 0===v&&(v=0),_.slice(v,v+m.length)===m},L=function(_){var m=parseInt(_.slice(-3)),v=parseInt(_.slice(-6,-4)),h=parseInt(_.slice(-9,-7)),E=_.length>9?parseInt(_.substring(0,_.indexOf(":"))):0;if(!((0,G.isFiniteNumber)(m)&&(0,G.isFiniteNumber)(v)&&(0,G.isFiniteNumber)(h)&&(0,G.isFiniteNumber)(E)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+_);return m+=1e3*v,(m+=6e4*h)+36e5*E},R=function(_){for(var m=5381,v=_.length;v;)m=33*m^_.charCodeAt(--v);return(m>>>0).toString()};function O(T,_,m){return R(T.toString())+R(_.toString())+R(m)}var x=function(_,m,v){var h=_[m],E=_[h.prevCC];if(!E||!E.new&&h.new)return _.ccOffset=_.presentationOffset=h.start,void(h.new=!1);for(;null!==(D=E)&&void 0!==D&&D.new;){var D;_.ccOffset+=h.start-E.start,h.new=!1,E=_[(h=E).prevCC]}_.presentationOffset=v};function A(T,_,m,v,h,E,D,f){var p,y=new B.VTTParser,w=(0,z.utf8ArrayToStr)(new Uint8Array(T)).trim().replace(U,"\n").split("\n"),b=[],C=(0,V.toMpegTsClockFromTimescale)(_,m),u="00:00.000",d=0,c=0,M=!0;y.oncue=function(S){var F=v[h],H=v.ccOffset,N=(d-C)/9e4;null!=F&&F.new&&(void 0!==c?H=v.ccOffset=F.start:x(v,h,N)),N&&(H=N-v.presentationOffset);var K=S.endTime-S.startTime,W=(0,Y.normalizePts)(9e4*(S.startTime+H-c),9e4*E)/9e4;S.startTime=Math.max(W,0),S.endTime=Math.max(W+K,0);var $=S.text.trim();S.text=decodeURIComponent(encodeURIComponent($)),S.id||(S.id=O(S.startTime,S.endTime,$)),S.endTime>0&&b.push(S)},y.onparsingerror=function(S){p=S},y.onflush=function(){p?f(p):D(b)},w.forEach(function(S){if(M){if(k(S,"X-TIMESTAMP-MAP=")){M=!1,S.slice(16).split(",").forEach(function(F){k(F,"LOCAL:")?u=F.slice(6):k(F,"MPEGTS:")&&(d=parseInt(F.slice(7)))});try{c=L(u)/1e3}catch(F){p=F}return}""===S&&(M=!1)}y.parse(S+"\n")}),y.flush()}},"./src/utils/xhr-loader.ts":
/*!*********************************!*\
                  !*** ./src/utils/xhr-loader.ts ***!
                  \*********************************/(pe,J,P)=>{"use strict";P.r(J),P.d(J,{default:()=>Y});var G=P(
/*! ../utils/logger */
"./src/utils/logger.ts"),B=P(
/*! ../loader/load-stats */
"./src/loader/load-stats.ts"),z=/^age:\s*[\d.]+\s*$/m;const Y=function(){function U(L){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=L?L.xhrSetup:null,this.stats=new B.LoadStats,this.retryDelay=0}var k=U.prototype;return k.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},k.abortInternal=function(){var R=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),R&&(R.onreadystatechange=null,R.onprogress=null,4!==R.readyState&&(this.stats.aborted=!0,R.abort()))},k.abort=function(){var R;this.abortInternal(),null!==(R=this.callbacks)&&void 0!==R&&R.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},k.load=function(R,O,x){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=R,this.config=O,this.callbacks=x,this.retryDelay=O.retryDelay,this.loadInternal()},k.loadInternal=function(){var R=this.config,O=this.context;if(R){var x=this.loader=new self.XMLHttpRequest,A=this.stats;A.loading.first=0,A.loaded=0;var T=this.xhrSetup;try{if(T)try{T(x,O.url)}catch{x.open("GET",O.url,!0),T(x,O.url)}x.readyState||x.open("GET",O.url,!0);var _=this.context.headers;if(_)for(var m in _)x.setRequestHeader(m,_[m])}catch(v){return void this.callbacks.onError({code:x.status,text:v.message},O,x)}O.rangeEnd&&x.setRequestHeader("Range","bytes="+O.rangeStart+"-"+(O.rangeEnd-1)),x.onreadystatechange=this.readystatechange.bind(this),x.onprogress=this.loadprogress.bind(this),x.responseType=O.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),R.timeout),x.send()}},k.readystatechange=function(){var R=this.context,O=this.loader,x=this.stats;if(R&&O){var A=O.readyState,T=this.config;if(!x.aborted&&A>=2)if(self.clearTimeout(this.requestTimeout),0===x.loading.first&&(x.loading.first=Math.max(self.performance.now(),x.loading.start)),4===A){O.onreadystatechange=null,O.onprogress=null;var _=O.status,m="arraybuffer"===O.responseType;if(_>=200&&_<300&&(m&&O.response||null!==O.responseText)){var v,h;if(x.loading.end=Math.max(self.performance.now(),x.loading.first),h=m?(v=O.response).byteLength:(v=O.responseText).length,x.loaded=x.total=h,!this.callbacks)return;var E=this.callbacks.onProgress;if(E&&E(x,R,v,O),!this.callbacks)return;this.callbacks.onSuccess({url:O.responseURL,data:v},x,R,O)}else x.retry>=T.maxRetry||_>=400&&_<499?(G.logger.error(_+" while loading "+R.url),this.callbacks.onError({code:_,text:O.statusText},R,O)):(G.logger.warn(_+" while loading "+R.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,T.maxRetryDelay),x.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),T.timeout)}},k.loadtimeout=function(){G.logger.warn("timeout while loading "+this.context.url);var R=this.callbacks;R&&(this.abortInternal(),R.onTimeout(this.stats,this.context,this.loader))},k.loadprogress=function(R){var O=this.stats;O.loaded=R.loaded,R.lengthComputable&&(O.total=R.total)},k.getCacheAge=function(){var R=null;if(this.loader&&z.test(this.loader.getAllResponseHeaders())){var O=this.loader.getResponseHeader("age");R=O?parseFloat(O):null}return R},U}()},"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
                  !*** ./node_modules/eventemitter3/index.js ***!
                  \*********************************************/pe=>{"use strict";var J=Object.prototype.hasOwnProperty,P="~";function G(){}function B(U,k,L){this.fn=U,this.context=k,this.once=L||!1}function z(U,k,L,R,O){if("function"!=typeof L)throw new TypeError("The listener must be a function");var x=new B(L,R||U,O),A=P?P+k:k;return U._events[A]?U._events[A].fn?U._events[A]=[U._events[A],x]:U._events[A].push(x):(U._events[A]=x,U._eventsCount++),U}function V(U,k){0==--U._eventsCount?U._events=new G:delete U._events[k]}function Y(){this._events=new G,this._eventsCount=0}Object.create&&(G.prototype=Object.create(null),(new G).__proto__||(P=!1)),Y.prototype.eventNames=function(){var L,R,k=[];if(0===this._eventsCount)return k;for(R in L=this._events)J.call(L,R)&&k.push(P?R.slice(1):R);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(L)):k},Y.prototype.listeners=function(k){var R=this._events[P?P+k:k];if(!R)return[];if(R.fn)return[R.fn];for(var O=0,x=R.length,A=new Array(x);O<x;O++)A[O]=R[O].fn;return A},Y.prototype.listenerCount=function(k){var R=this._events[P?P+k:k];return R?R.fn?1:R.length:0},Y.prototype.emit=function(k,L,R,O,x,A){var T=P?P+k:k;if(!this._events[T])return!1;var v,h,_=this._events[T],m=arguments.length;if(_.fn){switch(_.once&&this.removeListener(k,_.fn,void 0,!0),m){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,L),!0;case 3:return _.fn.call(_.context,L,R),!0;case 4:return _.fn.call(_.context,L,R,O),!0;case 5:return _.fn.call(_.context,L,R,O,x),!0;case 6:return _.fn.call(_.context,L,R,O,x,A),!0}for(h=1,v=new Array(m-1);h<m;h++)v[h-1]=arguments[h];_.fn.apply(_.context,v)}else{var D,E=_.length;for(h=0;h<E;h++)switch(_[h].once&&this.removeListener(k,_[h].fn,void 0,!0),m){case 1:_[h].fn.call(_[h].context);break;case 2:_[h].fn.call(_[h].context,L);break;case 3:_[h].fn.call(_[h].context,L,R);break;case 4:_[h].fn.call(_[h].context,L,R,O);break;default:if(!v)for(D=1,v=new Array(m-1);D<m;D++)v[D-1]=arguments[D];_[h].fn.apply(_[h].context,v)}}return!0},Y.prototype.on=function(k,L,R){return z(this,k,L,R,!1)},Y.prototype.once=function(k,L,R){return z(this,k,L,R,!0)},Y.prototype.removeListener=function(k,L,R,O){var x=P?P+k:k;if(!this._events[x])return this;if(!L)return V(this,x),this;var A=this._events[x];if(A.fn)A.fn===L&&(!O||A.once)&&(!R||A.context===R)&&V(this,x);else{for(var T=0,_=[],m=A.length;T<m;T++)(A[T].fn!==L||O&&!A[T].once||R&&A[T].context!==R)&&_.push(A[T]);_.length?this._events[x]=1===_.length?_[0]:_:V(this,x)}return this},Y.prototype.removeAllListeners=function(k){var L;return k?this._events[L=P?P+k:k]&&V(this,L):(this._events=new G,this._eventsCount=0),this},Y.prototype.off=Y.prototype.removeListener,Y.prototype.addListener=Y.prototype.on,Y.prefixed=P,Y.EventEmitter=Y,pe.exports=Y},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
                  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
                  \*****************************************************/function(pe){var P,G,B,z,V;P=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,G=/^(?=([^\/?#]*))\1([^]*)$/,B=/(?:\/|^)\.(?=\/)/g,z=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,pe.exports=V={buildAbsoluteURL:function(Y,U,k){if(k=k||{},Y=Y.trim(),!(U=U.trim())){if(!k.alwaysNormalize)return Y;var L=V.parseURL(Y);if(!L)throw new Error("Error trying to parse base URL.");return L.path=V.normalizePath(L.path),V.buildURLFromParts(L)}var R=V.parseURL(U);if(!R)throw new Error("Error trying to parse relative URL.");if(R.scheme)return k.alwaysNormalize?(R.path=V.normalizePath(R.path),V.buildURLFromParts(R)):U;var O=V.parseURL(Y);if(!O)throw new Error("Error trying to parse base URL.");if(!O.netLoc&&O.path&&"/"!==O.path[0]){var x=G.exec(O.path);O.netLoc=x[1],O.path=x[2]}O.netLoc&&!O.path&&(O.path="/");var A={scheme:O.scheme,netLoc:R.netLoc,path:null,params:R.params,query:R.query,fragment:R.fragment};if(!R.netLoc&&(A.netLoc=O.netLoc,"/"!==R.path[0]))if(R.path){var T=O.path,_=T.substring(0,T.lastIndexOf("/")+1)+R.path;A.path=V.normalizePath(_)}else A.path=O.path,R.params||(A.params=O.params,R.query||(A.query=O.query));return null===A.path&&(A.path=k.alwaysNormalize?V.normalizePath(R.path):R.path),V.buildURLFromParts(A)},parseURL:function(Y){var U=P.exec(Y);return U?{scheme:U[1]||"",netLoc:U[2]||"",path:U[3]||"",params:U[4]||"",query:U[5]||"",fragment:U[6]||""}:null},normalizePath:function(Y){for(Y=Y.split("").reverse().join("").replace(B,"");Y.length!==(Y=Y.replace(z,"")).length;);return Y.split("").reverse().join("")},buildURLFromParts:function(Y){return Y.scheme+Y.netLoc+Y.path+Y.params+Y.query+Y.fragment}}}},fo={};function Ge(pe){var J=fo[pe];if(void 0!==J)return J.exports;var P=fo[pe]={exports:{}};return Yo[pe].call(P.exports,P,P.exports,Ge),P.exports}Ge.m=Yo,Ge.n=pe=>{var J=pe&&pe.__esModule?()=>pe.default:()=>pe;return Ge.d(J,{a:J}),J},Ge.d=(pe,J)=>{for(var P in J)Ge.o(J,P)&&!Ge.o(pe,P)&&Object.defineProperty(pe,P,{enumerable:!0,get:J[P]})},Ge.o=(pe,J)=>Object.prototype.hasOwnProperty.call(pe,J),Ge.r=pe=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(pe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(pe,"__esModule",{value:!0})};var ho=Ge("./src/hls.ts");return ho.default})(),la.exports=Ge())}},la=>{la(la.s=707)}]);